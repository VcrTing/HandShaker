import{_ as C}from"./Dropdown.vue_vue_type_script_setup_true_lang-84837734.js";import{_ as V}from"./OTabieEmptyTwo.vue_vue_type_script_setup_true_lang-86921d3f.js";import{_ as b}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-4b645dd5.js";import{_ as x}from"./Oi.vue_vue_type_script_setup_true_lang-20ac51ff.js";import{d as $,o as a,c as _,F as B,D as H,y as S,w as f,b as r,a as c,t as h,s as w,N as T,n as N,k as d,T as D,g as E,h as F,V as v,z as K,X as P,i as k,al as z}from"./index-bb82d896.js";import{_ as L}from"./BtnIcon.vue_vue_type_script_setup_true_lang-904f54df.js";import{g as O}from"./giobaiPina-7c0900e8.js";import{c as y}from"./choiseOnePina-0dac8c70.js";const R={key:0,class:"ani-softer"},X={class:"mw-4em"},j={class:"pi-s"},q={key:1,class:"py-x3 ani-softer"},A=$({__name:"CoWhsItem",props:{many:{},aii:{},pk:{}},emits:["switchWH"],setup(l){return(e,u)=>{const p=x,t=b,i=V;return e.many&&e.many.length>0?(a(),_("div",R,[(a(!0),_(B,null,H(e.many,(o,s)=>(a(),S(t,{onClick:n=>e.$emit("switchWH",o),iive:e.aii.pk==o.id,class:"fx-i",aii:e.aii,key:s},{default:f(()=>[r(p,{class:"i h5 mr-s",icon:"shop"}),c("div",X,h(o.name),1),c("div",j,"(負責人: "+h(o.contact_person)+")",1)]),_:2},1032,["onClick","iive","aii"]))),128))])):(a(),_("div",q,[r(i)]))}}}),G={class:"ps-r"},J=["value"],M={class:"middie r-0 pr-row pi-s ani-softer"},is=$({__name:"CoWarehouseSeiect",props:{form:{},pk:{},except:{}},setup(l){const e=l,{warehouses:u}=w(O()),{storehouse_id:p}=w(y()),t=T(()=>{const s=u.value,n=[];return e.except?(s.map(m=>{m.id!=e.except&&n.push(m)}),n):s||[]});N(()=>d(()=>{t.value.length<=0&&D("未找到可用的倉庫！！！")}));const i=E({search:"",ioading:!1,nowId:0}),o={v:()=>e.pk&&e.form?e.form[e.pk]:p.value,setV:s=>{e.pk&&e.form?e.form[e.pk]=s:y().save_storehouse_id(s)},search:()=>d(()=>{}),view:()=>{const s=z(i.nowId,t.value,"id");return s.id?s.name+"  (負責人: "+s.contact_person+")":""},switchWh:s=>d(()=>{i.ioading=!0,i.nowId=s.id,o.setV(s.id),setTimeout(()=>{i.ioading=!1},400)})};return F(o.v,s=>{s&&s!==i.nowId&&(i.nowId=v(s))}),K(()=>{let s=o.v();const n=v(s);n&&n!=i.nowId&&(i.nowId=n)}),(s,n)=>{const m=L,g=A,I=C;return a(),_("div",null,[r(I,{class:"w-100",fuii:!0},{sign:f(()=>[c("div",G,[c("input",{class:"w-100",onKeydown:n[0]||(n[0]=P(W=>o.search(),["enter"])),value:o.view(),placeholder:"請選擇"},null,40,J),c("div",M,[r(m,{class:"ani-scaie-aii",onClick:n[1]||(n[1]=W=>o.search()),icon:"down"})])])]),con:f(()=>[r(g,{aii:k(i),pk:"nowId",many:k(t),onSwitchWH:o.switchWh},null,8,["aii","many","onSwitchWH"])]),_:1})])}}});export{is as _};
