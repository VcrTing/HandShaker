import{_ as A,a as E}from"./ModInner.vue_vue_type_script_setup_true_lang-88424812.js";import{_ as F}from"./OPager.vue_vue_type_script_setup_true_lang-882eb8bd.js";import{_ as K}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-12656a35.js";import{_ as P}from"./MBtn.vue_vue_type_script_setup_true_lang-6b0b8f4f.js";import{_ as G}from"./Itemdash.vue_vue_type_script_setup_true_lang-aa6b186d.js";import{_ as I}from"./cioseitem.vue_vue_type_script_setup_true_lang-b9ddab63.js";import{d as T,g as U,n as J,o as p,c as j,w as r,a as i,b as s,j as w,v as q,u as a,A as L,e as h,h as z,F as D,$ as M,t as f,s as O,E as l,z as S,J as H,f as Q}from"./index-eba50101.js";import{c as k,_ as W}from"./CoWarehouseSeiect.vue_vue_type_script_setup_true_lang-1b3d054a.js";import{s as X}from"./serv_product_iist-20035247.js";import{f as $,d as Y,i as Z,g as oo,j as y}from"./credit-977c08c3.js";import{_ as to}from"./OInputI.vue_vue_type_script_setup_true_lang-cb9fdd0b.js";import{_ as eo}from"./OTime.vue_vue_type_script_setup_true_lang-235ee2fa.js";import{_ as so}from"./OInput.vue_vue_type_script_setup_true_lang-78db7857.js";import{b as ao}from"./net-tooi-1d3bb44e.js";import{a as io}from"./judge-13dfac2e.js";const ro={class:"py fx-c"},no={class:"py"},_o=s("div",{class:"pb"},[s("p",{class:"fs-s sus"},"篩選結果")],-1),co={class:"w-24"},mo={class:"w-26"},uo={class:"w-24"},po={class:"fx-1"},lo={class:"pt"},fo=T({__name:"CoProduChoiseMod",setup(B){const t=U({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:15,total:1},condition:{search:""},many_origin:[]}),m={search:()=>$(()=>{console.log("搜索條件 =",t.condition)}),choise:e=>$(()=>{e.id&&(k().save_product_choise(e),M(0))}),ciear:()=>$(()=>{t.condition.search="";const e=k().products;e&&e.length?m.fetch():t.many=e}),fetch:()=>Y(t,async()=>X(t.condition,t.pager),e=>{e.data&&k().save_products(e.data)}),pager:(e,n)=>$(()=>{t.pager.page=e,t.pager.pageSize=n,m.fetch()})};return J(()=>Z(t,[{ciass:"w-24",tit:"產品編號"},{ciass:"w-26",tit:"產品名稱"},{ciass:"w-24",tit:"最新入庫時間"},{ciass:"fx-1",tit:"庫存"}])),(e,n)=>{const v=I,g=G,b=P,C=K,o=F,c=A,u=E;return p(),j(u,{idx:1e3},{default:r(()=>[i(c,{tit:"篩選產品"},{default:r(()=>[s("div",ro,[i(g,{class:"w-618 pi-row"},{default:r(()=>[i(v,{onTrash:n[2]||(n[2]=_=>m.ciear())},{default:r(()=>[w(s("input",{class:"w-100",onKeydown:n[0]||(n[0]=L(_=>m.search(),["enter"])),placeholder:"請輸入產品名稱後，按下回車進行搜索。","onUpdate:modelValue":n[1]||(n[1]=_=>a(t).condition.search=_)},null,544),[[q,a(t).condition.search]])]),_:1})]),_:1})]),s("div",no,[_o,i(C,{aii:a(t)},{default:r(()=>[(p(!0),h(D,null,z(a(t).many,(_,V)=>(p(),h("div",{key:V},[i(b,{onClick:x=>m.choise(_),bk:!0,class:"w-100 hand br-s fx-aii-weak",ciass:"td ta-i br-0-imp"},{default:r(()=>[s("div",co,f(_.product_id),1),s("div",mo,f(_.name),1),s("div",uo,f(_.new_restock_date),1),s("div",po,f(_.total_stock),1)]),_:2},1032,["onClick"])]))),128))]),_:1},8,["aii"])]),s("div",lo,[i(o,{pager:a(t).pager,onResuit:m.pager},null,8,["pager","onResuit"])])]),_:1})]),_:1})}}}),ho={class:"o-form"},vo=["value"],go=s("option",{value:0},"-- 請選擇 --",-1),$o=["value"],Mo=T({__name:"BadGoodsCreatBase",props:{form:{},aii:{}},setup(B){const t=B,m=["product_id","variation","quantity","storehouse_id","date","remarks"],e=U(oo(t.form)),{product_id:n,storehouse_id:v,product_of_choise:g}=O(k());l(n,o=>t.form.product_id=o),l(v,o=>{t.form.storehouse_id=o,console.log("storeID 改动 =",o)});const b=S(()=>{const o=g.value;return o.id?`[${o.product_id}]  ${o.name}`:""}),C=S(()=>{let o=g.value.variations;return io(o)?o:ao.iist(o)});return l(()=>t.aii.sign,()=>{t.form.storehouse_id=v.value,m.map(o=>{if(y(e,o,t.form[o],t.aii)){t.aii.can=!1;return}}),t.aii.can=!0}),l(()=>t.form.variation,o=>y(e,"variation",o,t.aii)),l(()=>t.form.quantity,o=>y(e,"quantity",o,t.aii)),l(()=>t.form.date,o=>y(e,"date",o,t.aii)),(o,c)=>{const u=so,_=W,V=eo,x=to,N=fo;return p(),h("div",null,[s("div",ho,[i(u,{tit:"產品編號",err:a(e).product_id},{default:r(()=>[s("input",{onClick:c[0]||(c[0]=d=>a(M)(1e3)),value:a(b),placeholder:"請輸入"},null,8,vo)]),_:1},8,["err"]),i(u,{tit:"數量",err:a(e).quantity},{default:r(()=>[w(s("input",{type:"number","onUpdate:modelValue":c[1]||(c[1]=d=>o.form.quantity=d),placeholder:"請輸入"},null,512),[[q,o.form.quantity]])]),_:1},8,["err"]),a(n)?(p(),j(u,{key:0,tit:"樣式",err:a(e).variation},{default:r(()=>[w(s("select",{"onUpdate:modelValue":c[2]||(c[2]=d=>o.form.variation=d)},[go,(p(!0),h(D,null,z(a(C),(d,R)=>(p(),h("option",{key:R,value:d.id},f(d.name),9,$o))),128))],512),[[H,o.form.variation]])]),_:1},8,["err"])):Q("",!0),i(u,{tit:"壞貨位置",err:a(e).storehouse_id},{default:r(()=>[i(_)]),_:1},8,["err"]),i(x,{tit:"日期",err:a(e).date,icon:"date"},{default:r(()=>[i(V,{form:o.form,pk:"date"},null,8,["form"])]),_:1},8,["err"]),i(u,{tit:"備註",err:!1},{default:r(()=>[w(s("textarea",{rows:"3","onUpdate:modelValue":c[3]||(c[3]=d=>o.form.remarks=d),placeholder:"請輸入"},null,512),[[q,o.form.remarks]])]),_:1})]),i(N)])}}});export{Mo as _};
