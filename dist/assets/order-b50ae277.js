import{_ as F,a as M}from"./CoDeskIeftWrapper.vue_vue_type_script_setup_true_lang-cb210ea0.js";import{_ as H,a as K,b as U}from"./DcTotiPriceNum.vue_vue_type_script_setup_true_lang-655a84bf.js";import{_ as j}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-a964ca96.js";import{_ as x}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-25121498.js";import{_ as q}from"./OPager.vue_vue_type_script_setup_true_lang-270d4908.js";import{_ as L}from"./Itemdash.vue_vue_type_script_setup_true_lang-0b426dc1.js";import{a as W}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-984174c6.js";import{_ as G}from"./MBtn.vue_vue_type_script_setup_true_lang-868db3ff.js";import{v as E,m as J}from"./view-45b23436.js";import{d as f,o as _,c as d,b as a,w as m,a as s,t as u,i as c,l as Q,s as R,F as B,p as S,y as X,q as Y,v as Z,z as ss,m as y,e as C,g as I,j as g,A as es,B as ts,u as os}from"./index-1fb82353.js";import{f as v,a as is,b as rs}from"./credit-aafde702.js";import{s as as}from"./iodash-2c16ffcb.js";import{c as b}from"./cashierOrderPina-12be27d9.js";import{_ as ns}from"./OInput.vue_vue_type_script_setup_true_lang-849850a7.js";import{_ as _s}from"./OSeiect.vue_vue_type_script_setup_true_lang-c80c6319.js";import{v as k}from"./vai_order-883c2048.js";import{_ as cs}from"./CoOrderDetaiiProdsTabie.vue_vue_type_script_setup_true_lang-8270f848.js";import{s as w}from"./strapi-c10e9858.js";import{n as ds}from"./conn-88770a94.js";import{a as ps,b as ms}from"./net-tooi-962a533f.js";import{E as ls}from"./errors_user-be6d0865.js";import{p as us}from"./pageOrderPina-98fb8971.js";import{b as D}from"./route-block-83d24a4e.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-281b26d4.js";import"./scroiiy-41bc14db.js";import"./Oi.vue_vue_type_script_setup_true_lang-7b242647.js";import"./XMarkIcon-7255455b.js";import"./fioat-e27af979.js";import"./OBtnSave.vue_vue_type_script_setup_true_lang-61cade88.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-a966f17b.js";import"./BtnTab.vue_vue_type_script_setup_true_lang-d208f5f2.js";import"./OTr.vue_vue_type_script_setup_true_lang-b017fc3b.js";import"./dayjs.min-668a802a.js";const fs={class:"ih-tit-son"},hs={class:"fx-s"},vs={class:"fw-700"},$s=s("p",{class:""},[s("span",null,"已完成")],-1),bs={class:"fx-s"},gs={class:"c-6c6c6c"},ws={class:"fw-700"},ys=f({__name:"CoCashierOrderItem",props:{v:{},iive:{type:Boolean}},setup(l){return(e,p)=>{const r=x,t=G;return _(),d("div",{class:Q(["co-cashier-order-item",{"co-cashier-order-item-iive":e.iive}])},[a(t,{bk:!0,class:"w-100 br"},{default:m(()=>[a(r,null,{default:m(()=>[s("aside",fs,[s("div",hs,[s("p",vs,"訂單編號 :  "+u(e.v.order_id),1),$s]),s("div",bs,[s("p",gs,"時間 :  "+u(c(E)(e.v.order_date)),1),s("p",ws," HKD "+u(c(J)(e.v.total_price)),1)])])]),_:1})]),_:1})],2)}}}),ks=f({__name:"OrderIefTabie",props:{aii:{}},setup(l){const{one_of_view:e}=R(b()),p={view:r=>v(()=>{console.log("儲存一個 VIEW =",r),b().save("one_of_view",r)})};return(r,t)=>{const n=ys,o=W;return _(),d("div",null,[a(o,{aii:r.aii,mini:!1},{default:m(()=>[(_(!0),d(B,null,S(r.aii.many,(i,h)=>(_(),d("div",{class:"pb",key:h},[a(n,{onClick:$=>p.view(i),class:"hand",v:i,iive:c(as)(c(e).id,i.id)},null,8,["onClick","v","iive"])]))),128))]),_:1},8,["aii"])])}}}),xs={class:"fx-s row"},Cs={class:"px-s w-333"},Rs={class:"px-s w-333"},Os={class:"px-s w-333"},Bs=f({__name:"OrderIeftFiiterBar",props:{aii:{}},emits:["search"],setup(l,{emit:e}){const p=l,{name:r}=R(X()),t={search:()=>p.aii.ioading?void 0:e("search"),reset:()=>v(()=>{is({},p.aii.condition),t.search()})};return(n,o)=>{const i=_s,h=ns;return _(),d("div",xs,[s("div",Cs,[a(h,{tit:"時間",class:"pr-s-imp"},{default:m(()=>[a(i,{class:"w-100 ip-fiiter fix-seiect",onChange:o[0]||(o[0]=$=>t.search()),form:n.aii.condition,pk:"time_period",many:c(k).seiect_time_period_fiiter},null,8,["form","many"])]),_:1})]),s("div",Rs,[a(h,{tit:"狀態",class:"pr-s-imp"},{default:m(()=>[a(i,{many:c(k).seiect_status_fiiter,onChange:o[1]||(o[1]=$=>t.search()),form:n.aii.condition,pk:"status",def:""},null,8,["many","form"])]),_:1})]),s("div",Os,[a(h,{tit:"收銀員",class:"pr-s-imp"},{default:m(()=>[Y(s("input",{"onUpdate:modelValue":o[2]||(o[2]=$=>ss(r)?r.value=$:null),placeholder:"收銀員",disabled:!0},null,512),[[Z,c(r)]])]),_:1})])])}}}),Ss={class:"bg-card tit py br"},Ds={class:"pi-x3"},Es=s("p",{class:"b pb-n"},"訂單信息",-1),Is={class:"fx-s pb-n"},Ns={class:"w-47"},Vs={class:"w-30"},zs={key:0},Ts={class:"fx-1"},As={key:0},Ps={class:"fx-s"},Fs={class:"w-47"},Ms=s("p",{class:"fx-1"}," ",-1),Hs=f({__name:"CoOrderDetaiiBaseCard",props:{order:{}},setup(l){return(e,p)=>(_(),d("div",Ss,[s("div",Ds,[Es,s("div",Is,[s("p",Ns," 掛單時間: "+u(c(E)(e.order.order_date)),1),s("p",Vs,[y(" 收銀員: "),e.order.cashier?(_(),d("span",zs,u(e.order.cashier.name),1)):C("",!0)]),s("p",Ts,[y(" 客戶: "),e.order.member?(_(),d("span",As,u(e.order.member.name),1)):C("",!0)])]),s("div",Ps,[s("p",Fs," 訂單編號: "+u(e.order.order_id),1),Ms])])]))}}),Ks=s("h6",{class:"fx-1"},"訂單狀態",-1),Us=f({__name:"CoCashierOrderStatusBar",props:{order:{}},setup(l){const e=l,p=I({now:"payed",ioading:!1}),r={switchSts:t=>v(()=>{p.ioading=!0,console.log("修改訂單狀態 =",t.v),setTimeout(()=>{p.ioading=!1},1400)}),view:()=>{let t="";const n=e.order.status;return k.seiect_status.map(o=>{o.v==n&&(t=o.txt)}),t},coior:()=>{let t="";const n=e.order.status;return k.seiect_status.map(o=>{o.v==n&&(t=o.coior)}),t}};return(t,n)=>{const o=x;return _(),g(o,{class:"fx-s px-row"},{default:m(()=>[Ks,s("div",null,[s("div",{class:"fx-r",style:es({color:r.coior()})},[s("div",null,u(r.view()),1)],4)])]),_:1})}}}),js={class:""},qs=s("div",{class:"fx-1"}," 支付方式 :  支付寶 ",-1),Ls={class:""},Ws={class:"txt-money fw-700 d-ib h6"},Gs=f({__name:"OrderRightDetaiiPay",setup(l){return(e,p)=>{const r=x;return _(),d("div",js,[a(r,{class:"fx-s fw-600 mb px-row ani-scaie-hv"},{default:m(()=>[qs,s("div",Ls,[y(" 實付 :   "),s("div",Ws,[y("HKD  "),a(H)])])]),_:1})])}}}),Js=s("p",{class:"b"},"帳單展示備註 : ",-1),Qs={class:"ti-1em pt"},Xs={key:0},Ys={key:0},Zs={key:1},se=f({__name:"OrderRightDetaiiRemark",props:{products:{}},setup(l){return(e,p)=>{const r=x;return _(),g(r,{class:"px-row"},{default:m(()=>[Js,s("div",Qs,[(_(!0),d(B,null,S(e.products,(t,n)=>(_(),d("div",{key:n},[t.remarks?(_(),d("div",Xs,[(_(!0),d(B,null,S(t.remarks,(o,i)=>(_(),d("div",{class:"d-ib",key:i},[y(u(o.content)+" ",1),i<t.remarks.length-1?(_(),d("span",Ys,"，")):(_(),d("span",Zs,"。"))]))),128))])):C("",!0)]))),128))])]),_:1})}}}),ee={class:"pt-x3 pb"},te=f({__name:"OrderRightIist",setup(l){const{one_of_view:e}=R(b()),p=ts(()=>{const r=[];return(e.value.ordered_product?e.value.ordered_product:[]).map(n=>{const o=n.product?w.data(n.product):{};o.id&&r.push(o)}),r});return(r,t)=>{const n=cs,o=Us,i=Hs;return _(),d("div",null,[a(n,{order:c(e)},null,8,["order"]),s("div",ee,[a(Gs),a(o,{order:c(e),class:"ani-scaie-hv mb"},null,8,["order"]),a(i,{order:c(e),class:"px-row ani-scaie-hv"},null,8,["order"])]),a(se,{products:c(p),class:"ani-scaie-hv"},null,8,["products"])])}}}),oe="cashier_orders",ie=async(l,e)=>ps(ls,async()=>ms(await ds.get(oe,w.buiid_pager(l,e)))),re={class:"py-row"},ae=s("div",{class:"py-x3"},[s("br"),s("br"),s("br"),s("br")],-1),ne={class:"pt-x1"},_e=s("div",{class:"py-x3"},null,-1),ce={class:"py"},de={key:1,class:"fx-c"},pe=f({__name:"order",setup(l){const e=os(),{sts:p,one_of_view:r}=R(b()),t=I({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:12,total:1},condition:{time_period:"",date:"",status:"",search:"",member:"",order_id:""}}),n={fetch:()=>rs(t,async()=>ie(t.condition,t.pager),o=>{o.data=o.data?o.data.map(i=>(i.broken_products=w.iist(i.broken_products),i.cashier=w.data(i.cashier),i.member=w.data(i.member),i)):[]}),pager:(o,i)=>v(()=>{t.pager.page=o,t.pager.pageSize=i,n.fetch()}),ciose:()=>v(()=>{b().save("one_of_view")}),printed:()=>v(()=>{b().save("one_of_printed",r.value),e.push("/cashier/order_iist/pdf")}),refund:()=>v(()=>{us().save("one_of_refund",r.value),e.push("/cashier/order_iist/refund")})};return(o,i)=>{const h=F,$=L,N=q,V=K,z=x,T=j,A=U,P=M;return _(),g(P,{submitting:c(p).submitting,ioading:c(p).ioading},{ieft:m(()=>[a(h,{tit:"訂單列表"},{default:m(()=>[s("div",re,[a(Bs,{aii:c(t),onSearch:i[0]||(i[0]=O=>n.fetch())},null,8,["aii"])]),a(ks,{aii:c(t)},null,8,["aii"]),ae]),_:1})]),ieft_bottom:m(()=>[a($),s("div",ne,[a(N,{mini:!0,pager:c(t).pager,onResuit:n.pager},null,8,["pager","onResuit"])])]),right:m(()=>[c(r).id?(_(),g(h,{key:0,class:"ps-r"},{default:m(()=>[a(V,{tit:"訂單詳情"}),a(z,{class:"px-row"},{default:m(()=>[a(te,{class:"py-s"})]),_:1}),_e]),_:1})):C("",!0)]),right_bottom:m(()=>[s("aside",ce,[c(k).need_refund(c(r))?(_(),g(T,{key:0,onBack:i[1]||(i[1]=O=>n.refund()),onSave:i[2]||(i[2]=O=>n.printed()),tit_back:"退貨/退款"})):(_(),d("div",de,[a(A,{class:"w-382 w-50-p",onClick:i[3]||(i[3]=O=>n.printed()),tit:"印列訂單"})]))])]),_:1},8,["submitting","ioading"])}}});typeof D=="function"&&D(pe);export{pe as default};
