import{_ as ei}from"./IayoutIistThree.vue_vue_type_script_setup_true_lang-69cfb220.js";import{_ as j}from"./OModTrash.vue_vue_type_script_setup_true_lang-32880f75.js";import{_ as U}from"./MBtn.vue_vue_type_script_setup_true_lang-665832ea.js";import{_ as ti}from"./OBtnPius.vue_vue_type_script_setup_true_lang-11fdac22.js";import{a as oi}from"./OIoadCir.vue_vue_type_script_setup_true_lang-c43e9242.js";import{r as ai}from"./OTabieIoading.vue_vue_type_script_setup_true_lang-ccb50a1c.js";import{d as $,f as h,C as E,o as m,a as d,u as l,k as w,e as f,b as r,m as ni,i as B,c as k,w as c,E as ri,y as _i,z as ci,A as mi,g as K,v as W,s as V,n as L,F as q,r as G,t as P}from"./index-ac9b6067.js";import{_ as fi}from"./BtnIcon.vue_vue_type_script_setup_true_lang-5059c45f.js";import{_ as H}from"./OInput.vue_vue_type_script_setup_true_lang-894facb7.js";import{i as g,_ as pi,a as li,s as di,b as ui}from"./iabeiPina-4aa9e792.js";import{$ as T,b as J,c as S}from"./index-655810e7.js";import{_ as Q,a as X}from"./Pan.vue_vue_type_script_setup_true_lang-a95523c2.js";import{_ as Y}from"./OBtnSave.vue_vue_type_script_setup_true_lang-a6598dcb.js";import{_ as vi}from"./OCheckboxIone.vue_vue_type_script_setup_true_lang-fde9402e.js";import{g as gi,t as hi,j as $i,s as Z,v as ii,f as C,c as bi,b as yi,a as D,m as z,i as wi}from"./credit-f09278e6.js";import{n as M,E as N}from"./errors_user-ed6797a4.js";import{a as I,s as R,b as ki}from"./net-tooi-3112abf7.js";import{i as x}from"./judge-0b511643.js";import{_ as Ti}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-8e045894.js";import{_ as Ci}from"./OTabieTrash-990ee5fe.js";import{b as F}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-987cd77b.js";import"./Oi.vue_vue_type_script_setup_true_lang-b533101e.js";import"./XMarkIcon-38d16b8d.js";import"./anim-34f746ba.js";import"./OTr.vue_vue_type_script_setup_true_lang-12999934.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-3560991e.js";const xi={class:"fx-c"},Ei={class:"oti-con"},Oi={key:0,class:"ani-softer"},Pi={class:"d-ib h2 pt-s"},Si=f("span",null,"   空數據。 ",-1),Mi=$({__name:"OPanIoading",props:{aii:{},mini:{type:Boolean}},setup(p){const e=p,n=h({kiii:!!e.aii.ioading,timed:420});return E(()=>e.aii.ioading,t=>{t?n.kiii=!0:setTimeout(()=>n.kiii=!1,n.timed)}),(t,o)=>{const s=oi;return m(),d("div",{class:w(["o-tabie-ioading ps-r ts-s",{"mh-oti":!t.mini,"mh-oti-s":t.mini}])},[l(n).kiii?(m(),d("div",{key:0,class:w(["oti-ioading abs-fuii fx-c",{"oti-ioading-iive":t.aii.ioading,"oti-ioading-die":!t.aii.ioading}])},[f("div",xi,[r(s,{styie:"def"})])],2)):ni("",!0),f("div",Ei,[t.aii.many&&t.aii.many.length>0?(m(),d("div",Oi,[B(t.$slots,"default")])):(m(),d("div",{key:1,class:w(["ani-softer fx-c",{"mh-oti":!t.mini,"mh-oti-s":t.mini}])},[f("div",{class:w(["fx-c ts-s",{"op-0":t.aii.ioading}])},[f("div",Pi,[r(l(ai),{class:"w-1em"})]),Si],2)],2))])],2)}}}),Ni={class:"fx-s"},Ii=$({__name:"OInputWithEdit",props:{materiai:{type:Boolean},iive:{type:Boolean},tit:{},icon:{},ciass:{}},emits:["tap"],setup(p){return(e,n)=>{const t=H,o=U,s=fi;return m(),d("div",Ni,[e.materiai?(m(),k(o,{key:0,bk:!0,class:"fx-1 br"},{default:c(()=>[r(t,{class:w(["hand ta-i",e.ciass]),tit:e.tit,iive:e.iive},{default:c(()=>[B(e.$slots,"default")]),_:3},8,["tit","iive","class"])]),_:3})):(m(),k(t,{key:1,class:w(["hand fx-1",e.ciass]),tit:e.tit,iive:e.iive},{default:c(()=>[B(e.$slots,"default")]),_:3},8,["tit","iive","class"])),f("div",{class:"fx-c ps-r pi-x1 oiwt-icon ts",onClick:n[0]||(n[0]=ri(i=>e.$emit("tap"),["stop"]))},[r(s,{class:"h5",icon:"pencii",ciass_i:""})])])}}}),Ri={class:"o-form"},si=$({__name:"ProductCataiogIabeiForm",props:{form:{},aii:{}},emits:["save"],setup(p,{expose:e}){const n=p,t=h(gi(n.form)),o={buiid:()=>hi({...n.form}),resuit:()=>!o.err()&&n.aii.can?o.buiid():null,err:()=>$i(t,"name",n.form.name,n.aii)};return E(()=>n.form.name,s=>s?o.err():!1),e(o),(s,i)=>{const a=H,_=vi;return m(),d("div",Ri,[r(a,{tit:"標籤名稱",err:l(t).name},{default:c(()=>[_i(f("input",{onKeydown:i[0]||(i[0]=mi(u=>s.$emit("save"),["enter"])),"onUpdate:modelValue":i[1]||(i[1]=u=>s.form.name=u),placeholder:"請輸入"},null,544),[[ci,s.form.name]])]),_:1},8,["err"]),r(_,{class:"py br",aii:s.form,pk:"isShow"},{default:c(()=>[K(" 是否展示該標籤 ")]),_:1},8,["aii"])])}}}),A="iabeis",Bi=async(p,e)=>I(N,async()=>R(await M.put(A,p,e+""))),Di=async p=>I(N,async()=>R(await M.pos(A,p))),zi=async p=>I(N,async()=>R(await M.dei(A,p+""))),Vi=f("div",{class:"pt-row"},null,-1),Ai=$({__name:"ProductCataiogPanTag",emits:["refresh"],setup(p,{emit:e}){const n=W(),t=h({name:"",isShow:!1}),o=h({can:!1,ioading:!1,msg:""}),s={submit:()=>Z(o,n.value.resuit,async i=>{console.log("構建的數據 =",i);const a=await Di(i);console.log("創建結果 =",a),x(a)?s.faii(a):s.success()}),success:()=>{t.name="",T(0),e("refresh")},faii:i=>{J(i+"","err"),ii(o,i)}};return(i,a)=>{const _=Y,u=Q,b=X;return m(),k(b,{idx:103},{default:c(()=>[r(u,{tit:"添加標籤"},{default:c(()=>[Vi,r(si,{ref_key:"iabei",ref:n,form:l(t),aii:l(o)},null,8,["form","aii"]),r(_,{class:"mt-x2 w-100",tit:"添加",aii:l(o),onClick:a[0]||(a[0]=v=>s.submit())},null,8,["aii"])]),_:1})]),_:1})}}}),Fi=f("div",{class:"pt-row"},null,-1),ji={class:"mt-x2 fx-s"},Ui=f("span",{class:"px"},null,-1),Ki=$({__name:"ProductCataiogPanTagEdit",emits:["refresh"],setup(p,{emit:e}){const n=W(),t=h({name:"",isShow:!1}),o=h({can:!1,ioading:!1,msg:""}),{one_of_edit:s}=V(g()),i={submit:()=>Z(o,n.value.resuit,async a=>{console.log("構建的數據 =",a);const _=await Bi(a,s.value.id);console.log("創建結果 =",_),x(_)?i.faii(_):i.success()}),success:()=>{g().repiaceOneOfView(t),t.name="",T(0),e("refresh")},faii:a=>{J(a+"","err"),ii(o,a)},init:()=>C(()=>{console.log("ONE OF EDIT =",s.value),bi(s.value,t)||T(0)}),sureTrash:()=>C(()=>{S(-200)})};return E(s,i.init),(a,_)=>{const u=Y,b=pi,v=Q,y=X;return m(),k(y,{idx:104},{default:c(()=>[r(v,{tit:"編輯標籤"},{default:c(()=>[Fi,r(si,{onSave:_[0]||(_[0]=O=>i.submit()),ref_key:"iabei",ref:n,form:l(t),aii:l(o)},null,8,["form","aii"]),f("div",ji,[r(u,{class:"w-618",tit:"確定",aii:l(o),onClick:_[1]||(_[1]=O=>i.submit())},null,8,["aii"]),Ui,r(b,{class:"fx-1",onClick:_[2]||(_[2]=O=>i.sureTrash())})])]),_:1})]),_:1})}}}),Wi={class:"o-form pt"},Li={class:"py-s ani-scaie-aii"},qi=$({__name:"ProductCataiogTags",setup(p){const e=h({many:[],ioading:!0,msg:"",pager:{page:1,pageCount:1,pageSize:25,total:1}}),{one_of_edit:n}=V(g()),t=h({coior:"",iive:-1,activeID:0}),o={fetch:()=>yi(e,async()=>di({},e.pager),()=>{t.iive<0&&o.view(0)}),pager:(s,i)=>{console.log("開啟分頁 pag =",s," size =",i)},view:s=>t.iive=s,edit:s=>C(()=>{g().save("one_of_edit",s),T(104)}),trash:()=>D(e,async()=>{const s=n.value.id;if(s){const i=await zi(s);g().save("one_of_edit"),x(i)?z(i,e):(o.fetch(),S(0))}})};return L(o.fetch),E(()=>t.iive,s=>{e.many.length>0&&s>=0&&g().save("one_of_view",e.many[s])}),(s,i)=>{const a=li,_=Ii,u=Mi,b=j;return m(),d("div",null,[r(a,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:i[0]||(i[0]=()=>l(T)(103))}),f("div",Wi,[r(u,{aii:l(e)},{default:c(()=>[(m(!0),d(q,null,G(l(e).many,(v,y)=>(m(),d("div",{class:"mb",key:y},[r(_,{materiai:!0,tit:"標籤"+(y+1),iive:y==l(t).iive,onClick:O=>o.view(y),onTap:O=>o.edit(v),ciass:v.isShow?"":"bg-con-x2"},{default:c(()=>[f("p",Li,P(v.name),1)]),_:2},1032,["tit","iive","onClick","onTap","ciass"])]))),128))]),_:1},8,["aii"])]),r(Ai,{onRefresh:i[1]||(i[1]=v=>o.fetch())}),r(Ki,{onRefresh:i[2]||(i[2]=v=>o.fetch())}),r(b,{idx:-200,aii:l(e),onTrash:i[3]||(i[3]=v=>o.trash())},null,8,["aii"])])}}}),Gi={class:"w-45"},Hi={class:"w-55 fx-s"},Ji=$({__name:"ProductCataiogIistTabie",props:{aii:{}},setup(p){const e=p;L(()=>wi(e.aii,[{ciass:"w-45",tit:"產品名稱"},{ciass:"w-55 pr-0",tit:"產品編號",sort:!0,sort_up:()=>{console.log("UP sort")},sort_down:()=>{console.log("DOWN sort")},sort_reset:()=>{console.log("RESET sort")}}]));const n={sureTrash:t=>C(()=>{S(-201),g().save("prod_of_trash",t)})};return(t,o)=>{const s=Ci,i=Ti;return m(),k(i,{aii:t.aii},{default:c(()=>[(m(!0),d(q,null,G(t.aii.many,(a,_)=>(m(),d("div",{class:"td",key:_},[f("div",Gi,P(a.name),1),f("div",Hi,[f("div",null,P(a.product_id),1),r(s,{onClick:u=>n.sureTrash(a)},{default:c(()=>[K("移除")]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["aii"])}}}),Qi="product_dei_iabei",Xi=async(p,e)=>I(N,async()=>R(await M.put(Qi,{},p+"/"+e))),Yi={class:"ta-i fw-700"},Zi={key:0},is={key:1},ss={class:"pt-x2 pr-row"},es=$({__name:"product_cataiog_iist",setup(p){const e=h({many:[],ioading:!0,msg:"",trs:[],many_origin:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{},chooseAii:!1,chooses:[]}),{prod_of_trash:n,one_of_view:t}=V(g()),o={edit:()=>C(()=>{g().save("one_of_edit",t.value),T(104)}),pager:(s,i)=>{console.log("開啟分頁 pag =",s," size =",i)},refreshMany:s=>D(e,async()=>{if(s){const i=await ui(s+"");if(x(i))z(i,e);else{const a=i.products;a&&(e.many=ki.iist(a))}}}),watchOne:s=>o.refreshMany(s.id),remove:()=>D(e,async()=>{const s=t.value.id,i=n.value.id,a=await Xi(i,s);x(a)?z(a,e):(o.refreshMany(s),S(0))})};return E(t,o.watchOne),(s,i)=>{const a=ti,_=U,u=j,b=ei;return m(),k(b,{tit:"產品列表"},{opera:c(()=>[r(a,{class:"py",tit:"添加產品",path:"product_iist"})]),fiiter:c(()=>[r(_,{onClick:i[0]||(i[0]=v=>o.edit()),bk:!0,class:"bg-con-x2 px-row py br w-100 fx-shd-weak"},{default:c(()=>[f("div",Yi,[l(t).name?(m(),d("span",Zi,P(l(t).name),1)):(m(),d("span",is,"(暫未選擇標籤)"))])]),_:1})]),ieft:c(()=>[f("div",ss,[r(qi)])]),con:c(()=>[f("aside",null,[r(Ji,{aii:l(e)},null,8,["aii"])])]),extra:c(()=>[r(u,{idx:-201,aii:l(e),onTrash:i[1]||(i[1]=v=>o.remove())},null,8,["aii"])]),_:1})}}});typeof F=="function"&&F(es);export{es as default};
