import{_ as Ss,a as Bs,b as Ns,c as Us,d as Ds,e as Rs,f as As,g as Ws}from"./ProduCeRemark.vue_vue_type_script_setup_true_lang-c9611d8e.js";import{_ as X}from"./OBtnSave.vue_vue_type_script_setup_true_lang-53f07a47.js";import{_ as Os}from"./scroiiy-8c64f1f8.js";import{_ as Fs,o as u,e as m,d as h,k as S,c as B,w as d,a as e,b as i,t as b,F as T,s as x,g,i as w,h as ns,B as Hs,u as r,r as Y,l as E,v as D,n as R,j as N,f as A,J as Z,$ as M,A as ts,m as ls,K as L,D as W,q as H,p as Ms}from"./index-0966950c.js";import{pageProducEditPina as C}from"./pageProducEditPina-be874a15.js";import{a as js,_ as Ks}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-547d02c5.js";import{n as us}from"./conn-369e3065.js";import{a as ps,s as ms}from"./net-tooi-bf75ccf4.js";import{E as ds}from"./serv_product_iist-b9a170cb.js";import{f as k,g as j,j as P,h as fs,i as vs,b as zs,k as hs,m as K,c as Gs,s as z,l as os}from"./credit-00db13f3.js";import{t as Q,d as $s,i as ss}from"./judge-13dfac2e.js";import{_ as ys}from"./IayoutForm.vue_vue_type_script_setup_true_lang-e4955ea8.js";import{v as G,g as rs,d as bs}from"./iodash-d5f9a50e.js";import{a as ks}from"./view-8e3be13d.js";import{_ as gs}from"./Dropdown.vue_vue_type_script_setup_true_lang-2b29b390.js";import{_ as Js}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-c86c733d.js";import{_ as Ls}from"./Oi.vue_vue_type_script_setup_true_lang-14d130be.js";import{_ as is}from"./BtnIcon.vue_vue_type_script_setup_true_lang-7b7446f5.js";import{g as ws}from"./giobaiPina-f1245c69.js";import{_ as J}from"./OInput.vue_vue_type_script_setup_true_lang-148701d0.js";import{_ as xs}from"./OInputI.vue_vue_type_script_setup_true_lang-6eefb1c3.js";import{_ as Ps}from"./OTime.vue_vue_type_script_setup_true_lang-390764e6.js";import{_ as Qs,a as es}from"./OTabieTrash-c37336ff.js";import{_ as as}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-fed73808.js";import{d as Xs,c as Ys,_ as Zs,a as st,b as tt}from"./ProduInstockTabie.vue_vue_type_script_setup_true_lang-af8470e2.js";import{_ as Is}from"./CoWarehouseSeiectPure.vue_vue_type_script_setup_true_lang-bd00b42e.js";import{_ as nt}from"./OTabieEdit.vue_vue_type_script_setup_true_lang-98a49b01.js";import{_ as O,a as F}from"./Pan.vue_vue_type_script_setup_true_lang-61a4e396.js";import{pageProductInstockPina as U}from"./pageProductInstockPina-3a076a66.js";import{t as ot}from"./product_trs-7be74634.js";import{a as Ts,_ as it}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-ff2d6237.js";import{s as et,a as at}from"./serv_bad_opera-bac2b0c3.js";import{_ as rt}from"./CoWarehouseSeiect.vue_vue_type_script_setup_true_lang-a100d4b9.js";import{_ as _t}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-ac8b87bc.js";import{_ as ct}from"./MBtn.vue_vue_type_script_setup_true_lang-ec77d985.js";import{i as _s,_ as lt}from"./iabeiPina-77c59a43.js";import{pageProductPina as ut}from"./pageProductPina-e92403a0.js";import{b as cs}from"./route-block-83d24a4e.js";import"./OOpenPan.vue_vue_type_script_setup_true_lang-92385eab.js";import"./OBtnPius.vue_vue_type_script_setup_true_lang-3eec9578.js";import"./XMarkIcon-838afdc9.js";import"./Cardmsg.vue_vue_type_script_setup_true_lang-c2eeaaf9.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-c1dafded.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-6e1141ce.js";import"./serv_iabei_with_product-3f76d4c9.js";import"./errors_user-be6d0865.js";import"./utii-54c30e6b.js";import"./serv_variation_with_product-cb9157cc.js";import"./OiX2.vue_vue_type_script_setup_true_lang-2375a824.js";import"./ArrowLongRightIcon-79f9b787.js";import"./dayjs.min-668a802a.js";import"./serv_suppiier_iist-dd478df5.js";import"./serv_warehouse_iist-0aa7e148.js";import"./datepicker.esm-dbe03e17.js";import"./ModInner.vue_vue_type_script_setup_true_lang-ff4abfed.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-4b74b130.js";import"./OTr.vue_vue_type_script_setup_true_lang-a1d279fb.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-12150f09.js";import"./OTrPure.vue_vue_type_script_setup_true_lang-5e43453f.js";import"./errors_member-9994a70b.js";const pt={};function mt(f,s){return u(),m("div",null," IN BAD ")}const dt=Fs(pt,[["render",mt]]),ft="instock",vt="transfstock",ht=async f=>ps(ds,async()=>ms(await us.pos(ft,f))),$t=async(f,s)=>ps(ds,async()=>ms(await us.put(vt,s,f+""))),yt={class:"mw-4em"},bt={class:"pi-s"},kt=h({__name:"CoSsItem",props:{many:{},aii:{},pk:{}},emits:["switchWH"],setup(f){return(s,a)=>{const t=Ls,n=Js;return u(!0),m(T,null,S(s.many,(o,_)=>(u(),B(n,{onClick:c=>s.$emit("switchWH",o),iive:s.aii.pk==o.id,class:"fx-i",aii:s.aii,key:_},{default:d(()=>[e(t,{class:"i h5 mr-s",icon:"ioc"}),i("div",yt,b(o.name),1),i("div",bt,"(負責人: "+b(o.contact_person)+")",1)]),_:2},1032,["onClick","iive","aii"]))),128)}}}),gt={class:"ps-r"},wt=["value"],xt={class:"middie r-0 pr-row pi-s ani-softer"},Pt=h({__name:"CoSuppiierSeiect",props:{form:{},pk:{}},setup(f){const s=f,{suppiiers:a}=x(ws()),t=g({search:"",ioading:!1,nowId:0}),n={many:()=>a.value,v:()=>{if(s.pk&&s.form)return s.form[s.pk]},setV:o=>{s.pk&&s.form&&(s.form[s.pk]=o)},search:()=>k(()=>{}),view:()=>{const o=G(t.nowId,a.value,"id");return o.id?o.name+"  (負責人: "+o.contact_person+")":""},switchWh:o=>k(()=>{t.ioading=!0,t.nowId=o.id,n.setV(o.id),setTimeout(()=>{t.ioading=!1},400)})};return w(n.v,o=>{o&&o!==t.nowId&&(t.nowId=Q(o))}),ns(()=>{let o=n.v();const _=Q(o);_&&_!=t.nowId&&(t.nowId=_)}),(o,_)=>{const c=is,p=kt,l=gs;return u(),m("div",null,[e(l,{class:"w-100",fuii:!0},{sign:d(()=>[i("div",gt,[i("input",{class:"w-100",onKeydown:_[0]||(_[0]=Hs(v=>n.search(),["enter"])),value:n.view(),placeholder:"請選擇"},null,40,wt),i("div",xt,[e(c,{class:"ani-scaie-aii",onClick:_[1]||(_[1]=v=>n.search()),icon:"down"})])])]),con:d(()=>[e(p,{aii:r(t),pk:"nowId",many:r(a),onSwitchWH:n.switchWh},null,8,["aii","many","onSwitchWH"])]),_:1})])}}}),It={class:"o-hour-minus ps-r"},Tt=i("div",{class:"fx-s abs-t i-0 r-0 bg-con"},[i("div",{class:"w-382 pi pb-x1 sus"},"時"),i("div",{class:"w-618 pi pb-x1 sus"},"分")],-1),Ct={class:"fx-s fx-t"},qt={class:"o-hours w-382 pt-s"},Et=i("button",null,"0",-1),Vt=["onClick"],St={class:"o-minus w-618 pt-s"},Bt=i("button",null,"0",-1),Nt=["onClick"],Ut=h({__name:"OHours",props:{form:{},pk_hours:{},pk_minus:{}},setup(f){const s=f,a=g({hours:rs(24),minus:rs(60)}),t={v_minus:()=>s.form[s.pk_minus],v_hour:()=>s.form[s.pk_hours],v:()=>t.v_hour()+":"+t.v_minus(),setv_minus:n=>{s.form[s.pk_minus]=n},setv_hour:n=>{s.form[s.pk_hours]=n}};return(n,o)=>{const _=gs;return u(),B(_,null,{sign:d(()=>[Y(n.$slots,"default")]),con:d(()=>[i("div",It,[Tt,i("div",Ct,[i("div",qt,[Et,(u(!0),m(T,null,S(r(a).hours,(c,p)=>(u(),m("div",{class:"pi br br-i-0 fx-aii-weak ani-scaie-fcs hand",onClick:l=>t.setv_hour(c),key:p},b(c),9,Vt))),128))]),i("div",St,[Bt,(u(!0),m(T,null,S(r(a).minus,(c,p)=>(u(),m("div",{class:"py-t pi br br-r-0 fx-aii-weak ani-scaie-fcs hand",onClick:l=>t.setv_minus(c),key:p},b(c),9,Nt))),128))])])])]),_:3})}}}),Dt={class:"row"},Rt={class:"w-333"},At={class:"w-333"},Wt=["value"],Ot={class:"w-333"},Ft=i("div",{class:"py-s"},null,-1),Ht={class:"row"},Mt={class:"w-333"},jt=i("div",{class:"w-333"},null,-1),Kt=i("div",{class:"w-333"},null,-1),zt=h({__name:"PiisBase",props:{form:{},aii:{}},setup(f){const s=f,a=["restock_date","hour","quantity","supplier"],t=g(j(s.form));return w(()=>s.aii.sign,()=>{a.map(n=>{if(P(t,n,s.form[n],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),w(()=>s.form.restock_date,n=>P(t,"restock_date",n,s.aii)),w(()=>s.form.hour,n=>P(t,"hour",n,s.aii)),w(()=>s.form.quantity,n=>P(t,"quantity",n,s.aii)),w(()=>s.form.supplier,n=>P(t,"supplier",n,s.aii)),(n,o)=>{const _=Ps,c=xs,p=Ut,l=J,v=Pt;return u(),m("div",null,[i("div",Dt,[i("div",Rt,[e(c,{icon:"date",err:r(t).restock_date,tit:"入貨日期"},{default:d(()=>[e(_,{form:n.form,pk:"restock_date"},null,8,["form"])]),_:1},8,["err"])]),i("div",At,[e(c,{icon:"time",err:r(t).hour,tit:"入貨時間"},{default:d(()=>[e(p,{form:n.form,pk_hours:"hour",pk_minus:"minus"},{default:d(()=>[i("input",{value:r(ks)(n.form.hour,n.form.minus)},null,8,Wt)]),_:1},8,["form"])]),_:1},8,["err"])]),i("div",Ot,[e(l,{err:r(t).quantity,tit:"入貨數量"},{default:d(()=>[E(i("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=$=>n.form.quantity=$),placeholder:"請輸入"},null,512),[[D,n.form.quantity]])]),_:1},8,["err"])])]),Ft,i("div",Ht,[i("div",Mt,[e(l,{err:r(t).supplier,tit:"供應商"},{default:d(()=>[e(v,{form:n.form,pk:"supplier"},null,8,["form"])]),_:1},8,["err"])]),jt,Kt])])}}}),Gt={class:"row"},Jt={class:"w-333"},Lt={class:"w-333"},Qt={class:"w-333"},Xt=h({__name:"PiisPrice",props:{form:{},aii:{}},setup(f){const s=f,a=["restock_price","lowest_price","selling_price"],t=g(j(s.form));return w(()=>s.aii.sign,()=>{a.map(n=>{if(P(t,n,s.form[n],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),w(()=>s.form.restock_price,n=>P(t,"restock_price",n,s.aii)),w(()=>s.form.lowest_price,n=>P(t,"lowest_price",n,s.aii)),w(()=>s.form.selling_price,n=>P(t,"selling_price",n,s.aii)),(n,o)=>{const _=J;return u(),m("div",Gt,[i("div",Jt,[e(_,{err:r(t).restock_price,tit:"入貨價錢"},{default:d(()=>[E(i("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=c=>n.form.restock_price=c),placeholder:"請輸入"},null,512),[[D,n.form.restock_price]])]),_:1},8,["err"])]),i("div",Lt,[e(_,{err:r(t).lowest_price,tit:"最低價錢"},{default:d(()=>[E(i("input",{type:"number","onUpdate:modelValue":o[1]||(o[1]=c=>n.form.lowest_price=c),placeholder:"請輸入"},null,512),[[D,n.form.lowest_price]])]),_:1},8,["err"])]),i("div",Qt,[e(_,{err:r(t).selling_price,tit:"售價"},{default:d(()=>[E(i("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=c=>n.form.selling_price=c),placeholder:"請輸入"},null,512),[[D,n.form.selling_price]])]),_:1},8,["err"])])])}}}),Yt=h({__name:"OInpuTd",props:{iive:{type:Boolean},tit:{},err:{type:Boolean},ciass:{}},setup(f){return(s,a)=>(u(),m("div",{class:R(["o-input input o-input-td",{"o-input-iive":s.iive,"input-err":s.err}])},[i("div",{class:R(["fx-1",s.ciass])},[Y(s.$slots,"default")],2)],2))}}),Zt=h({__name:"CoWarehouseText",props:{v:{}},setup(f){const s=f,a=()=>{const t=G(s.v,ws().warehouses,"id");return t.id?t.name+"  (負責人: "+t.contact_person+")":"未選擇倉庫"};return(t,n)=>(u(),m("div",null,b(a()),1))}}),sn=h({__name:"CoVariationsText",props:{v:{},many:{}},setup(f){const s=f,a=()=>{const t=G(s.v,s.many,"id");return t.id?t.name:"未選擇倉庫"};return(t,n)=>(u(),m("div",null,b(a()),1))}}),tn={key:0,class:"td"},nn={class:"fx-1 fx-s"},on={key:0,class:"fx-r"},en={key:1,class:"td"},an={class:"w-30"},rn=["onUpdate:modelValue"],_n=["value"],cn={class:"w-30"},ln={class:"fx-1 fx-s"},un=["onUpdate:modelValue"],pn={class:"pi fx-r"},Cs=h({__name:"PsiTd",props:{aii:{},funn:{},kiii_option:{type:Boolean}},setup(f){const s=f,{product_variations:a}=x(C());return a.value.length<=0&&fs("該產品無可用標籤！！！"),N(()=>vs(s.aii,[{ciass:"w-30",tit:"樣式名稱"},{ciass:"w-30",tit:"入貨位置"},{ciass:"fx-1",tit:"入貨數量"}])),(t,n)=>{const o=sn,_=Zt,c=nt,p=Qs,l=Yt,v=Is,$=Xs,I=is;return u(!0),m(T,null,S(t.aii.many,(y,V)=>(u(),m("div",{key:V},[y.edit?(u(),m("div",en,[i("div",an,[e(l,null,{default:d(()=>[E(i("select",{"onUpdate:modelValue":q=>y.variation=q},[(u(!0),m(T,null,S(r(a),(q,Vs)=>(u(),m("option",{key:Vs,value:q.id},b(q.name),9,_n))),128))],8,rn),[[Z,y.variation]])]),_:2},1024)]),i("div",cn,[e(l,null,{default:d(()=>[e(v,{form:y,pk:"storehouse"},null,8,["form"])]),_:2},1024)]),i("div",ln,[e(l,{class:"fx-1"},{default:d(()=>[E(i("input",{"onUpdate:modelValue":q=>y.quantity=q,placeholder:"請輸入"},null,8,un),[[D,y.quantity]])]),_:2},1024),i("div",pn,[e($,{class:"pr",tit:"儲存",onClick:q=>y.edit=!1},null,8,["onClick"]),i("div",null,[e(I,{icon:"x",onClick:q=>t.funn.cancei(y)},null,8,["onClick"])])])])])):(u(),m("div",tn,[e(o,{class:"w-30",many:r(a),v:y.variation},null,8,["many","v"]),e(_,{class:"w-30",v:y.storehouse},null,8,["v"]),i("div",nn,[i("div",null,b(y.quantity),1),t.kiii_option?A("",!0):(u(),m("div",on,[e(c,{onClick:q=>t.funn.edit(y),class:"mr-s txt-pri"},null,8,["onClick"]),e(p,{onClick:q=>t.funn.sureTrash(V)},null,8,["onClick"])]))])]))]))),128)}}}),mn=h({__name:"PiisStyieInventoryTabie",props:{aii:{}},emits:["sureTrash"],setup(f,{emit:s}){const a=f,t=g({origin:{},trashIdx:0}),n={edit:o=>k(()=>{o.edit=!0,t.origin[o.id+""]=$s(o)}),cancei:o=>k(()=>{const _=t.origin[o.id+""];_?(_.edit=!1,hs(_,o)):o.edit=!1}),sureTrash:o=>k(()=>{t.trashIdx=o,s("sureTrash",o),M(-201)}),trash:()=>zs(a.aii,()=>{a.aii.many.splice(t.trashIdx,1),M(0)})};return(o,_)=>{const c=as,p=es;return u(),m(T,null,[e(c,{aii:o.aii,mini:!0},{default:d(()=>[e(Cs,{aii:o.aii,funn:n},null,8,["aii"])]),_:1},8,["aii"]),e(p,{idx:-201,aii:o.aii,onTrash:n.trash},null,8,["aii","onTrash"])],64)}}}),dn={key:0,class:"abs-b ps-f-imp r-0 w-36 w-50-p py"},fn=h({__name:"ProduInvInStockInner",props:{aii:{}},setup(f,{expose:s}){const a=f,t=g({restock_date:"",hour:0,minus:0,quantity:"",supplier:""}),n=g({restock_price:"",lowest_price:"",selling_price:""}),o=g({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[],ani:0}),{one_of_edit:_}=x(C()),c=ts(()=>{const l=_.value;return l.variations?l.variations:[]}),p={buiid:()=>{const l={...t,...n,restock_distribute:p.fiiter()};return l.restock_date=t.restock_date+" "+ks(t.hour,t.minus,!0),l.product=_.value.id,a.aii.can&&l.restock_distribute.length<=0?(K("您沒有添加任何樣式的庫存數據!!!",a.aii),null):a.aii.can?l:null},fiiter:(l=[])=>(o.many.map(v=>{let $=!0;v.storehouse&&v.quantity?v.edit=!1:$=!1,$&&l.push(v)}),l),pius:()=>k(()=>{p.fiiter().length==o.many.length&&o.many.push(p.GEN_ONE())}),GEN_ONE:()=>$s({idx:o.many.length,variation:bs(c.value,"id"),storehouse:0,quantity:null,edit:!0,ioading:!1})};return s(p),N(()=>Gs(4,()=>o.ani+=1)),(l,v)=>{const $=ys,I=js;return u(),m("div",null,[e($,{tit:"時間及供應商",class:R(["pb-x3 op-0",{"ani-page":r(o).ani>=0}])},{default:d(()=>[e(zt,{form:r(t),aii:l.aii},null,8,["form","aii"])]),_:1},8,["class"]),e($,{tit:"價錢",class:R(["pb-x3 op-0",{"ani-page":r(o).ani>=1}])},{default:d(()=>[e(Xt,{form:r(n),aii:l.aii},null,8,["form","aii"])]),_:1},8,["class"]),e($,{tit:"樣式及庫存分配數量",class:R(["pt pb-x3 op-0",{"ani-page":r(o).ani>=2}])},{default:d(()=>[e(mn,{aii:r(o)},null,8,["aii"])]),_:1},8,["class"]),i("div",null,[e(I,{onClick:v[0]||(v[0]=y=>p.pius()),class:"w-100 py-s ani-scaie-aii",tit:"添加樣式"})]),r(o).ani>=3?(u(),m("section",dn,[Y(l.$slots,"default")])):A("",!0)])}}}),vn=i("h3",{class:"py-x3 mb"},"添加入貨信息(僅加貨)",-1),hn=h({__name:"ProduInvInStock",setup(f){const s=ls(),{pag:a,one_of_edit:t}=x(C()),n=g({ioading:!1,msg:"",can:!1,sign:0}),o={submit:()=>z(n,s.value.buiid,async _=>{if(console.log("BASE =",_),_){const c=await ht(_);ss(c)?K(c,n):(o.back(),os("產品入貨成功！！！"))}}),back:()=>k(()=>{a.value=0}),init:()=>k(()=>{t.value.id||(a.value=0)})};return N(o.init),(_,c)=>{const p=Ks;return u(),m("section",null,[vn,e(fn,{aii:r(n),ref_key:"inner",ref:s,onSubmit:o.submit},{default:d(()=>[e(p,{ciass:"w-100",tit_save:"儲存",onBack:c[0]||(c[0]=l=>o.back()),onSave:c[1]||(c[1]=l=>o.submit())})]),_:1},8,["aii","onSubmit"])])}}}),$n=h({__name:"ProduInvInOrder",setup(f){return(s,a)=>(u(),m("div",null," IN ORDER "))}}),yn={class:"ps-r"},bn={key:0,class:"prod-pag-wrapper abs-t i-0 r-0 b-0 bg-con zi-x2 ani-softer"},kn=h({__name:"ProductPagWrapper",setup(f){const{pag:s}=x(C());s.value=0;const a=ls(!1);return w(s,t=>t==0?a.value=!1:a.value=!0),(t,n)=>{const o=Os;return u(),m("div",yn,[i("div",null,[Y(t.$slots,"default")]),r(a)?(u(),m("div",bn,[E(e(o,{class:"h-iayout h-iayout-max"},{default:d(()=>[E(e(hn,null,null,512),[[L,r(s)==1]]),E(e(dt,null,null,512),[[L,r(s)==2]]),E(e($n,null,null,512),[[L,r(s)==3]])]),_:1},512),[[L,r(s)>0]])])):A("",!0)])}}}),gn={class:"pb-x3"},qs=h({__name:"PeppTabie",setup(f){const s=g({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[]}),{inventory_and_variation_of_view:a}=x(U()),t={edit:()=>{},cancei:()=>{},sureTrash:()=>{},effect:()=>{a.value.map((n,o)=>{n.idx=o,s.many.push(n)})}};return ns(t.effect),(n,o)=>{const _=as;return u(),m("div",gn,[e(_,{aii:r(s),mini:!0},{default:d(()=>[e(Cs,{aii:r(s),funn:t,kiii_option:!0},null,8,["aii"])]),_:1},8,["aii"])])}}}),wn=i("h5",{class:"py-x2"},"樣式及庫存分配數量",-1),xn=h({__name:"ProductEditPanPriview",setup(f){return(s,a)=>{const t=O,n=F;return u(),B(n,{idx:112,big:!0},{default:d(()=>[e(t,{tit:"檢視 / 編輯"},{default:d(()=>[wn,e(qs)]),_:1})]),_:1})}}}),Pn={class:"w-50"},In={class:"w-50"},Es=h({__name:"PepiTabie",setup(f){const s=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),{variations_of_inventory_of_store:a}=x(U());return N(()=>vs(s,ot)),(t,n)=>{const o=as;return u(),B(o,{aii:r(s),mini:!0},{default:d(()=>[(u(!0),m(T,null,S(r(a),(_,c)=>(u(),m("div",{class:"td",key:c},[i("div",Pn,b(_.name),1),i("div",In,b(_.quantity),1)]))),128))]),_:1},8,["aii"])}}}),Tn=i("h5",{class:"py-x2"},"樣式",-1),Cn=i("h5",{class:"py-x2"},"倉庫",-1),qn=h({__name:"ProductEditPanInstock",setup(f){return(s,a)=>{const t=O,n=F;return u(),B(n,{idx:111,big:!0},{default:d(()=>[e(t,{tit:"入貨詳情"},{default:d(()=>[Tn,e(qs),Cn,e(Es)]),_:1})]),_:1})}}}),En={class:"py-x2"},Vn=h({__name:"ProductEditPanInventory",setup(f){const{inventory_of_store:s}=x(U());return(a,t)=>{const n=O,o=F;return u(),B(o,{idx:110,big:!0},{default:d(()=>[e(n,{tit:"庫存詳情"},{default:d(()=>[i("h5",En,b(r(s).storehouse_name),1),e(Es)]),_:1})]),_:1})}}}),Sn={class:"py-x2"},Bn={class:"o-form"},Nn=h({__name:"PepbForm",props:{form:{},aii:{}},setup(f){const s=f,a=["quantity","storehouse_id","date"],t=g(j(s.form));return w(()=>s.aii.sign,(n=!0)=>{a.map(o=>{P(t,o,s.form[o],s.aii)&&(s.aii.can=!1,n=!1)}),s.aii.can=n}),w(()=>s.form.date,n=>P(t,"date",n,s.aii)),w(()=>s.form.quantity,n=>P(t,"quantity",n,s.aii)),w(()=>s.form.storehouse_id,n=>P(t,"storehouse_id",n,s.aii)),(n,o)=>{const _=Ts,c=Is,p=J,l=Ps,v=xs;return u(),m(T,null,[i("div",Sn,[e(_,{form:n.form,pk:"quantity",err:r(t).quantity},null,8,["form","err"])]),i("div",Bn,[i("div",null,[e(p,{tit:"壞貨位置",err:r(t).storehouse_id},{default:d(()=>[e(c,{form:n.form,pk:"storehouse_id"},null,8,["form"])]),_:1},8,["err"])]),i("div",null,[e(v,{tit:"添加日期",err:r(t).date,icon:"date"},{default:d(()=>[e(l,{form:n.form,pk:"date",class:"input-timed-for-pan"},null,8,["form"])]),_:1},8,["err"])]),i("div",null,[e(p,{tit:"壞貨備註"},{default:d(()=>[E(i("textarea",{placeholder:"請輸入","onUpdate:modelValue":o[0]||(o[0]=$=>n.aii.remarks=$),rows:"12"},null,512),[[D,n.aii.remarks]])]),_:1})])])],64)}}}),Un={class:"o-form"},Dn=i("option",{value:""},"-- 請選擇 --",-1),Rn=["value"],An=h({__name:"PepbFormStyie",props:{form:{},aii:{}},setup(f){const s=f,a=["variation"],{product_variations:t}=x(C()),n=g(j(s.form));return w(()=>s.aii.sign,(o=!0)=>{a.map(_=>{P(n,_,s.form[_],s.aii)&&(s.aii.can=!1,o=!1)}),s.aii.can=o}),w(()=>s.form.variation,o=>P(n,"variation",o,s.aii)),(o,_)=>{const c=J;return u(),m("div",Un,[e(c,{tit:"樣式",err:r(n).variation},{default:d(()=>[E(i("select",{"onUpdate:modelValue":_[0]||(_[0]=p=>o.form.variation=p)},[Dn,(u(!0),m(T,null,S(r(t),(p,l)=>(u(),m("option",{key:l,value:p.id},b(p.name),9,Rn))),128))],512),[[Z,o.form.variation]])]),_:1},8,["err"])])}}}),Wn=i("div",{class:"py-row"},null,-1),On=h({__name:"ProductEditPanBad",setup(f){const{one_of_edit:s}=x(C()),a=g({ioading:!1,msg:"",can:!1,sign:0}),t=g({quantity:0,storehouse_id:null,date:"",remarks:"",variation:"",product_id:""}),n={buiid:()=>(t.product_id=s.value.id,a.can?t:null),submit:()=>z(a,n.buiid,async o=>{if(o){let _=await et(o);ss(_)?K(_,a):n.success()}}),success:()=>k(()=>{os("壞貨資料新增成功。"),W(0),setTimeout(()=>hs({quantity:0},t),400)}),init:()=>k(()=>{console.log(s.value)})};return N(n.init),(o,_)=>{const c=it,p=X,l=O,v=F;return u(),B(v,{idx:120},{default:d(()=>[e(l,{tit:"壞貨"},{default:d(()=>[e(c,{num:r(s).product_id,named:r(s).name},null,8,["num","named"]),e(An,{class:"pt-x3",form:r(t),aii:r(a)},null,8,["form","aii"]),e(Nn,{form:r(t),aii:r(a)},null,8,["form","aii"]),Wn,e(p,{aii:r(a),onClick:_[0]||(_[0]=$=>n.submit()),tit:"儲存",class:"w-100"},null,8,["aii"])]),_:1})]),_:1})}}}),Fn={class:"o-form"},Hn={class:"o-form-pan"},Mn=i("h5",null,"調貨樣式",-1),jn=["value"],Kn={class:"o-form-pan"},zn=i("h5",null,"調貨倉庫",-1),Gn={class:"o-form-pan"},Jn=i("h5",null,"調貨數量",-1),Ln={class:"pb"},Qn=h({__name:"PepdFormHouse",props:{form:{},aii:{},max:{}},setup(f){const s=f,a=["variation","storehouse_to","quantity"],t=g(j(s.form)),{product_variations:n}=x(C());return w(()=>s.aii.sign,()=>{let o=!0;a.map(_=>{P(t,_,s.form[_],s.aii)&&(o=!1)}),s.aii.can=o}),w(()=>s.form.variation,o=>P(t,"variation",o,s.aii)),w(()=>s.form.storehouse_to,o=>P(t,"storehouse_to",o,s.aii)),w(()=>s.form.quantity,o=>P(t,"quantity",o,s.aii)),(o,_)=>{const c=J,p=rt,l=Ts;return u(),m("div",Fn,[i("div",Hn,[Mn,e(c,{tit:"樣式",err:r(t).variation},{default:d(()=>[E(i("select",{"onUpdate:modelValue":_[0]||(_[0]=v=>o.form.variation=v)},[(u(!0),m(T,null,S(r(n),(v,$)=>(u(),m("option",{key:$,value:v.id},b(v.name),9,jn))),128))],512),[[Z,o.form.variation]])]),_:1},8,["err"])]),i("div",Kn,[zn,e(c,{tit:"入貨倉庫",err:r(t).storehouse_to},{default:d(()=>[e(p,{except:o.form.storehouse_from,form:o.form,pk:"storehouse_to"},null,8,["except","form"])]),_:1},8,["err"])]),i("div",Gn,[Jn,i("p",Ln,"最大调货数: "+b(o.max),1),e(l,{form:o.form,pk:"quantity",err:r(t).quantity,max:o.max},null,8,["form","err","max"])])])}}}),Xn={class:"px-row py"},Yn={class:"o-form-pan pt-x2 pb"},Zn=i("h5",{class:"pb-s"},"產品數量",-1),so={class:"w-50"},to={class:"w-50"},no=i("div",{class:"py-row"},null,-1),oo=i("div",{class:"py-row"},null,-1),io=h({__name:"ProductEditPanDepioy",setup(f){const s=g({ioading:!1,msg:"",can:!1,sign:0}),a=g({quantity:0,variation:0,storehouse_to:0,storehouse_from:0}),{one_of_edit:t}=x(C()),{store_of_transtock:n,variations_of_store_of_transtock:o}=x(U()),_=ts(()=>{let l=a.variation;return l?G(l,o.value,"id"):{quantity:0}}),c=ts(()=>_.value.quantity),p={buiid:()=>{const l=a;return s.can?l:null},submit:()=>z(s,p.buiid,async l=>{if(console.log("DATA =",l),l){const v=await $t(t.value.id,l);ss(v)?K(v,s):p.success()}}),success:()=>{W(0)},init:()=>k(()=>{const l=bs(o.value,"id");a.storehouse_from=n.value.storehouse_id,a.variation=Q(l)})};return ns(p.init),(l,v)=>{const $=X,I=O,y=F;return u(),B(y,{idx:125},{default:d(()=>[e(I,{tit:"調貨"},{default:d(()=>[i("div",Xn,[i("div",null,"出貨倉庫: "+b(r(n).storehouse_name),1)]),i("div",Yn,[Zn,(u(!0),m(T,null,S(r(o),(V,q)=>(u(),m("div",{key:q,class:"px-row fx-i py-s"},[i("div",so,b(V.name),1),i("div",to,b(V.quantity),1)]))),128))]),e(Qn,{class:"pt-x2",form:r(a),aii:r(s),max:r(c)},null,8,["form","aii","max"]),no,e($,{aii:r(s),onClick:v[0]||(v[0]=V=>p.submit()),tit:"確定",class:"w-100 mt"},null,8,["aii"]),H(),oo]),_:1})]),_:1})}}}),eo={class:"i abs-r mr"},ao={class:"pt-row"},ro=i("p",null,"數量",-1),_o={class:"py-s"},co=i("p",null,"壞貨位置",-1),lo={class:"sut py-s"},uo=i("p",null,"添加日期",-1),po={class:"sut py-s"},mo=i("p",null,"壞貨備註",-1),fo={class:"sut pt-s"},vo=h({__name:"CoProduBaDetaiiCard",props:{broken:{},ciose:{type:Boolean}},emits:["trash","ciose"],setup(f){return(s,a)=>{const t=is,n=ct,o=_t;return u(),B(o,{class:"px-row ps-r"},{default:d(()=>[i("div",eo,[s.ciose?(u(),B(n,{key:1,class:"fx-aii-weak br-s ani-scaie-aii",bk:!0,onClick:a[1]||(a[1]=_=>s.$emit("ciose",s.broken))},{default:d(()=>[H(" 撤銷 ")]),_:1})):(u(),B(t,{key:0,class:"h5",onClick:a[0]||(a[0]=_=>s.$emit("trash",s.broken)),ciass_i:"txt-err h3",icon:"trash"}))]),i("div",ao,[ro,i("p",_o,b(s.broken.quantity),1)]),i("div",null,[co,i("p",lo,b(s.broken.storehouse_name),1)]),i("div",null,[uo,i("p",po,b(s.broken.date),1)]),i("div",null,[mo,i("p",fo,b(s.broken.remarks),1)])]),_:1})}}}),ho=i("div",{class:"pt"},null,-1),$o={class:"px-row pb"},yo={class:"fs-n"},bo={class:"pb-x2 pt-x3"},ko=i("div",{class:"py-row"},null,-1),go=h({__name:"ProductEditPanBadDetaii",setup(f){const{one_of_edit:s}=x(C()),{broken_of_view:a}=x(U()),t=g({ioading:!1,msg:"",trashing:!1}),n={init:()=>k(()=>{console.log(s.value)}),sureTrash:()=>k(()=>{t.trashing=!0}),trash:()=>k(()=>{}),submit:()=>z(t,()=>({}),async o=>{if(t.trashing){const _=a.value.id,c=await at(_);ss(c)?K(c,t):(os("壞貨資料刪除成功。"),W(0))}else W(0)})};return N(n.init),(o,_)=>{const c=vo,p=X,l=O,v=F,$=es;return u(),m(T,null,[e(v,{idx:121},{default:d(()=>[e(l,{tit:"壞貨詳情"},{default:d(()=>[ho,i("div",$o,[i("div",null,"產品編號:  "+b(r(s).product_id),1),i("div",yo,"產品名稱:  "+b(r(s).name),1)]),i("div",bo,[e(c,{class:R({"bg-con-x2":r(t).trashing}),ciose:r(t).trashing,broken:r(a),onCiose:_[0]||(_[0]=I=>r(t).trashing=!1),onTrash:_[1]||(_[1]=I=>n.sureTrash())},null,8,["class","ciose","broken"])]),ko,e(p,{onClick:_[2]||(_[2]=I=>n.submit()),tit:"儲存",class:"w-100"})]),_:1})]),_:1}),e($,{aii:r(t),idx:-205,onTrash:_[3]||(_[3]=I=>n.trash())},null,8,["aii"])],64)}}}),wo=h({__name:"ProductEditPans",setup(f){const s=C();return M(0),(a,t)=>(u(),m(T,null,[e(Ss,{pina:r(s)},null,8,["pina"]),e(Bs,{pina:r(s)},null,8,["pina"]),e(xn),e(qn),e(Vn),e(io),e(On),e(go)],64))}}),xo={class:"py"},Po={class:"py-s"},Io=["onUpdate:modelValue"],To=["value"],Co=h({__name:"ProduCeTagsEdit",props:{labels_exist:{},labels:{}},setup(f){const s=f,{many:a}=x(_s()),t=g({activeId:0,ioading:!1,msg:""}),n=C(),{one_of_edit:o}=x(n),_={pius:()=>k(()=>{if(a.value.length>0){const c=a.value[0];c.id&&n.pius_iabei(c.id)}else fs("沒有一個可用標籤，請先新增標籤。")}),init:()=>k(()=>{_s().refreshMany()}),sureTrash:c=>k(()=>{M(-202),t.activeId=Q(c)}),trash:()=>k(async()=>{await n.tag_trash(o.value.id,t.activeId)&&(s.labels_exist.map((p,l)=>{p==t.activeId&&n.trash_iabei_exist(l)}),t.activeId=0)})};return N(_.init),(c,p)=>{const l=lt,v=Ns,$=es;return u(),m("div",null,[e(l,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:p[0]||(p[0]=I=>_.pius())}),i("div",xo,[(u(!0),m(T,null,S(c.labels_exist,(I,y)=>(u(),m("div",{class:"pb-x2 ani-fade-b",key:y},[e(v,{class:"ani-scaie-hv",iive:!0,tit:"已存在的標籤",onTap:V=>_.sureTrash(I)},{default:d(()=>[i("div",Po,b(r(G)(I,r(a),"id").name),1)]),_:2},1032,["onTap"])]))),128)),(u(!0),m(T,null,S(c.labels,(I,y)=>(u(),m("div",{class:"pb-x2 ani-fade-b",key:y},[e(v,{tit:"新加入的標籤",onTap:V=>r(n).trash_iabei(y)},{default:d(()=>[E(i("select",{"onUpdate:modelValue":V=>c.labels[y]=V},[(u(!0),m(T,null,S(r(a),(V,q)=>(u(),m("option",{key:q,value:V.id},b(V.name),9,To))),128))],8,Io),[[Z,c.labels[y]]])]),_:2},1032,["onTap"])]))),128))]),e($,{aii:r(t),idx:-202,onTrash:p[1]||(p[1]=I=>_.trash()),msg:"此次操作系聯網操作，您確定要移除該標籤嗎？"},null,8,["aii"])])}}}),qo=i("div",{class:"pt"},null,-1),Eo=i("div",{class:"py"},null,-1),Vo={key:0,class:"py-x2"},So={key:1,class:"py-x2"},Bo={key:2,class:"py-x2"},No=i("div",{class:"py-x2"},null,-1),Uo=h({__name:"ProductEditIeft",props:{aii:{}},setup(f){const s=C(),{remarks:a,labels_exist:t,labels:n,base:o,variations:_}=x(s);return(c,p)=>{const l=ys;return u(),m("div",null,[e(l,{tit:"編輯產品",back:!0},{default:d(()=>[qo,e(Us,{form:r(o),aii:c.aii,edit:!0},null,8,["form","aii"])]),_:1}),Eo,e(Co,{class:"pt-s",labels:r(n),labels_exist:r(t)},null,8,["labels","labels_exist"]),H(),r(t).length<=0?(u(),m("div",Vo)):A("",!0),e(Ds,{class:"pt-s",edit:!0,pina:r(s),variations:r(_)},null,8,["pina","variations"]),H(),r(_).length<=0?(u(),m("div",So)):A("",!0),e(Rs,{class:"pt-s",pina:r(s),remarks:r(a)},null,8,["pina","remarks"]),H(),r(a).length<=0?(u(),m("div",Bo)):A("",!0),No])}}}),Do=h({__name:"ProduWarehouseTabie",props:{aii:{}},setup(f){const{one_of_edit:s}=x(C()),a={view:t=>k(()=>{U().save("inventory_of_store",t),W(110)}),transtock:t=>k(()=>{U().save("store_of_transtock",t),console.log("V =",t),W(125)})};return(t,n)=>{const o=Ys;return u(),B(o,{aii:t.aii,one_of_edit:r(s),onView:a.view,onTranstock:a.transtock},null,8,["aii","one_of_edit","onView","onTranstock"])}}}),Ro=i("div",{class:"py-row"},null,-1),Ao=i("div",{class:"py-row"},null,-1),Wo=i("div",{class:"py-row"},null,-1),Oo=h({__name:"ProductEditRight",setup(f){const{one_of_edit:s}=x(C()),a=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),t=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),n=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(o,_)=>{const c=tt;return u(),m("div",null,[Ro,e(Zs,{aii:r(n),one_of_edit:r(s)},null,8,["aii","one_of_edit"]),Ao,e(Do,{aii:r(t)},null,8,["aii"]),Wo,e(st,{aii:r(a),one_of_edit:r(s)},null,8,["aii","one_of_edit"]),e(c,{one_of_edit:r(s)},null,8,["one_of_edit"])])}}}),Fo=h({__name:"product_edit",setup(f){const s=Ms(),a=C(),t=g({ioading:!1,msg:"",can:!1,sign:0,search:""}),{one_of_edit:n,variations:o,labels:_}=x(a),c={buiid:()=>t.can?a.form():null,submit:()=>z(t,c.buiid,async()=>{c.iabei_deai()}),iabei_deai:()=>k(async()=>{const p=_.value,l=n.value.id;for(let v=0;v<p.length;v++)await a.tag_pius(p[v],l)}),variation_deai:()=>k(async()=>{let p=!0;const l=o.value;for(let v=0;v<l.length;v++){const $=l[v];$.id?p=await a.variation_edit($.name,$.id):p=await a.variation_add($.name,n.value.id)}console.log(p)}),dump:p=>k(()=>{a.switch_pag(p||0)}),init:()=>k(()=>{M(0),ut().ciear(),n.value.id||s.back()})};return N(c.init),(p,l)=>{const v=X,$=As,I=Ws;return u(),m(T,null,[e(kn,null,{default:d(()=>[e(I,null,{ieft:d(()=>[e(Uo,{aii:r(t)},null,8,["aii"])]),ieft_bottom:d(()=>[e(v,{aii:r(t),onClick:l[0]||(l[0]=y=>c.submit()),class:"w-100",tit:"儲存"},null,8,["aii"])]),right:d(()=>[e($,{class:"fx-s",onInbad:l[1]||(l[1]=y=>c.dump(2)),onInstock:l[2]||(l[2]=y=>c.dump(1)),onInorder:l[3]||(l[3]=y=>c.dump(3))}),e(Oo)]),_:1})]),_:1}),e(wo)],64)}}});typeof cs=="function"&&cs(Fo);export{Fo as default};
