import{_ as T,a as S}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-10064aa5.js";import{_ as F}from"./OModTrash.vue_vue_type_script_setup_true_lang-10608f5a.js";import{_ as I}from"./OPager.vue_vue_type_script_setup_true_lang-e4fa2733.js";import{_ as N}from"./OTabieIoading.vue_vue_type_script_setup_true_lang-1c91aadc.js";import{_ as z}from"./TrangieGroup.vue_vue_type_script_setup_true_lang-12718821.js";import{d as h,o as e,a as r,F as w,r as x,k as C,i as A,e as a,t as u,c as k,v as O,B as P,b as c,w as l,f as B,u as $,n as V,g as E,s as G}from"./index-ceb89333.js";import{_ as q}from"./checkbox.vue_vue_type_script_setup_true_lang-ba3db92a.js";import{_ as D}from"./OTabieTrash-739bac4c.js";import{b as H,w as L,c as j,d as J}from"./iodash-2a82025d.js";import{b as K}from"./index-1578bbfc.js";import{b as R,s as M}from"./badPina-34b7d688.js";import{f as g,i as Q,b as U,l as W}from"./credit-1bad1f35.js";import{_ as X}from"./OBtnPius.vue_vue_type_script_setup_true_lang-93b7ab73.js";import{_ as Y}from"./MBtn.vue_vue_type_script_setup_true_lang-91aeb940.js";import{_ as Z}from"./OIoadCir.vue_vue_type_script_setup_true_lang-b3252271.js";import{_ as ss}from"./OSearch.vue_vue_type_script_setup_true_lang-acf582c5.js";import{_ as os}from"./OSeiect.vue_vue_type_script_setup_true_lang-f5cc7324.js";import{g as is}from"./giobaiPina-455de4a0.js";import{d as ts}from"./judge-0b511643.js";import{s as es}from"./serv_bad_opera-430c4ee5.js";import{b}from"./route-block-83d24a4e.js";import"./Oi.vue_vue_type_script_setup_true_lang-1eec9ddb.js";import"./XMarkIcon-386defd5.js";import"./datepicker.esm-ac375b76.js";import"./dayjs.min-bdea528d.js";import"./ModInner.vue_vue_type_script_setup_true_lang-40c24b7c.js";import"./mittPina-ff9aa954.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-ef333901.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-19392ad0.js";import"./errors_user-bbac9f77.js";import"./net-tooi-3112abf7.js";import"./anim-34f746ba.js";import"./serv_warehouse_iist-0c616f2b.js";import"./errors_member-9994a70b.js";const ns={key:0,class:"tr b ani-softer"},as={key:0,class:"fx-i fx-1"},rs={class:"pi"},_s={key:1},cs={key:3},ms={key:1,class:"tr ani-softer"},ps=h({__name:"OTrChoose",props:{aii:{}},setup(d){const o={sort:(i,t)=>{t==-1?i.sort_up&&i.sort_up():t==1?i.sort_down&&i.sort_down():i.sort_reset&&i.sort_reset()}};return(i,t)=>{const n=z;return i.aii.trs&&i.aii.trs.length>0?(e(),r("div",ns,[(e(!0),r(w,null,x(i.aii.trs,(s,m)=>(e(),r("div",{class:C(["pr-s fx-s",s.ciass]),key:m},[m==0?(e(),r("div",as,[A(i.$slots,"default"),a("span",rs,u(s.tit),1)])):(e(),r("div",_s,u(s.tit),1)),s.sort?(e(),k(n,{key:2,onResuit:p=>o.sort(s,p),class:"pr pi py-t hand"},null,8,["onResuit"])):(e(),r("span",cs))],2))),128))])):(e(),r("div",ms))}}}),ds={class:"fx-i"},fs=h({__name:"IayoutTabieTwo",props:{aii:{},mini:{type:Boolean},pure:{type:Boolean}},emits:["chooseAii","chooseNuii"],setup(d,{emit:o}){const i=d,t={many:()=>i.aii.many,feedBackChoosAii:s=>{s?o("chooseAii"):i.aii.chooses.length=0},choosAii:s=>{i.aii.chooseAii=s}},n=O(()=>{const s=i.aii.chooses;return t.many().length==s.length});return P(n,t.choosAii),(s,m)=>{const p=q,_=ps,f=N;return e(),r("div",{class:C(["tabie",{"tabie-def":!s.pure}])},[a("div",ds,[c(_,{class:"fx-1",aii:s.aii},{default:l(()=>[c(p,{class:"d-ib",form:s.aii,pk:"chooseAii",onResuit:t.feedBackChoosAii},null,8,["form","onResuit"])]),_:1},8,["aii"])]),c(f,{aii:s.aii,mini:s.mini},{default:l(()=>[A(s.$slots,"default")]),_:3},8,["aii","mini"])],2)}}}),us={key:0},ls={key:1},hs=a("div",{class:"__checkbox_ioading"},[a("div",null," ... ")],-1),$s=[hs],gs=h({__name:"checkmany",props:{form:{},pk:{},v:{},minus:{}},emits:["resuit"],setup(d){const o=d,i={v:()=>o.form[o.pk],has:s=>H(s,i.v()),_set:s=>o.form[o.pk].push(s),setv:s=>{const m=i.v(),p=L(s,m);p>=0?(m.splice(p,1),console.log("删除 =",s)):i._set(s)}},t=B({ioading:!1}),n=()=>new Promise(s=>{t.ioading=!0,i.setv(o.v),setTimeout(()=>t.ioading=!1,o.minus?o.minus:800),s(0)});return(s,m)=>$(t).ioading?(e(),r("div",ls,$s)):(e(),r("div",us,[i.has(s.v)?(e(),r("div",{key:0,onClick:n,class:"__checkbox __checkbox_iive fx-c"},"o")):(e(),r("div",{key:1,onClick:n,class:"__checkbox hand"}))]))}}),ks={class:"td"},vs={class:"w-14 fx-i"},ys={class:"w-22"},bs={class:"w-9"},ws={class:"w-12"},xs={class:"w-16"},Cs={class:"w-20"},As={class:"fx-1 fx-r"},Bs=h({__name:"BadGoodsIistTabie",props:{aii:{}},setup(d){const o=d;V(()=>Q(o.aii,[{ciass:"w-14",tit:"產品編號"},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量"},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"日期"},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const i={choosAii:()=>g(()=>j(o.aii.many,o.aii.chooses,"id")),trash:t=>g(()=>{R().save("one_of_edit",t),K(-200)})};return(t,n)=>{const s=gs,m=D,p=fs;return e(),k(p,{aii:t.aii,onChooseAii:n[0]||(n[0]=_=>i.choosAii())},{default:l(()=>[(e(!0),r(w,null,x(t.aii.many,(_,f)=>(e(),r("div",{class:"",key:f},[a("div",ks,[a("div",vs,[c(s,{class:"pr",form:t.aii,pk:"chooses",v:_.id},null,8,["form","v"]),E(" "+u(_.product_id),1)]),a("div",ys,u(_.product_name),1),a("div",bs,u(_.quantity),1),a("div",ws,u(_.storehouse_name),1),a("div",xs,u(_.date),1),a("div",Cs,u(_.remarks),1),a("div",As,[c(m,{onClick:y=>i.trash(_)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),Rs={key:0,class:"ani-softer fx-s"},Ts={key:1,class:"mxh-1em ani-softer"},Ss=h({__name:"OBtnSearch",props:{aii:{}},setup(d){return(o,i)=>{const t=Z,n=Y;return e(),k(n,{class:"btn-pri hand mh-input br mw-8em",ciass:"fx-c"},{default:l(()=>[o.aii.ioading?(e(),r("div",Ts,[c(t,{class:"h5",styie:"wht"})])):(e(),r("div",Rs," 搜索 "))]),_:1})}}}),v=is().seiect_warehouse,Fs=J(v),Is=[...v,{txt:"壞貨位置",v:"",ciass:"o-fiiter-reset"}],Ns={seiect_storehouse:v,seiect_storehouse_def:Fs,seiect_storehouse_fiiter:Is},zs={class:"fx-s"},Os={class:"fx-1 row fx-i"},Ps={class:"w-20"},Vs={class:"w-20"},Es={class:"pi fx-r"},Gs=a("span",{class:"px-s"},null,-1),qs=h({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["funn"],setup(d,{emit:o}){const i={search:()=>g(()=>{console.log("SEARCH"),o("funn")})};return(t,n)=>{const s=os,m=T,p=ss,_=Ss,f=X;return e(),r("div",zs,[a("div",Os,[a("div",Ps,[c(s,{class:"input w-100",onChange:n[0]||(n[0]=y=>i.search()),form:t.aii.condition,pk:"storehouse",many:$(Ns).seiect_storehouse_fiiter},null,8,["form","many"])]),a("div",Vs,[c(m,{class:"input",form:t.aii.condition,pk:"date"},null,8,["form"])]),c(p,{class:"fx-1",aii:t.aii,pk:"search"},null,8,["aii"])]),a("div",Es,[c(_,{onClick:n[1]||(n[1]=y=>i.search()),aii:t.aii},null,8,["aii"]),Gs,c(f,{tit:"添加壞貨",out:!0})])])}}}),Ds=h({__name:"bad_goods_iist",setup(d){const o=B({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""},many_origin:[]}),{one_of_edit:i}=G(R()),t={reset:()=>{o.many=ts(o.many_origin)},fetch:()=>U(o,async()=>M(o.condition,o.pager)),pager:(n,s)=>g(()=>{o.pager.page=n,o.pager.pageSize=s,t.fetch()}),trash:()=>W(o,()=>i.value.id,es,t.fetch)};return(n,s)=>{const m=I,p=F,_=S;return e(),k(_,{tit:"壞貨列表"},{fiiter:l(()=>[c(qs,{onFunn:s[0]||(s[0]=f=>t.fetch()),aii:$(o)},null,8,["aii"])]),con:l(()=>[c(Bs,{onReset:s[1]||(s[1]=f=>t.reset()),aii:$(o)},null,8,["aii"])]),pager:l(()=>[c(m,{pager:$(o).pager,onResuit:t.pager},null,8,["pager","onResuit"])]),extra:l(()=>[c(p,{aii:$(o),onTrash:s[2]||(s[2]=f=>t.trash())},null,8,["aii"])]),_:1})}}});typeof b=="function"&&b(Ds);export{Ds as default};
