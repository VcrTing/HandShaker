import{_ as G,a as M,b as N}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-3fd4d0cd.js";import{_ as O}from"./CoProduChoiseMod.vue_vue_type_script_setup_true_lang-697902c3.js";import{a as V,_ as E}from"./OTabieTrash-2770de37.js";import{_ as L}from"./OPager.vue_vue_type_script_setup_true_lang-075f74f3.js";import{_ as W}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-0e9b74a2.js";import{d as k,n as T,o as u,y as g,w as v,c as y,C as j,F as H,k as c,D as J,aC as K,$ as B,a as t,t as l,b as p,af as w,ag as P,ah as S,s as $,P as q,an as Q,i as n,f as U,h as X,A as h,M as Y,W as Z,ai as ii,g as si,S as oi,ar as ti}from"./index-58be21f4.js";import{b as z,s as ai}from"./badPina-539f40dd.js";import{_ as ni}from"./OBtnPius.vue_vue_type_script_setup_true_lang-6e46e525.js";import{_ as ei}from"./BtnIcon.vue_vue_type_script_setup_true_lang-40e0a81d.js";import{c as b}from"./choiseOnePina-bb16117e.js";import{_ as ri}from"./OSeiect.vue_vue_type_script_setup_true_lang-e45422fe.js";import{g as ci}from"./giobaiPina-21d1b1a4.js";import{a as _i}from"./serv_bad_opera-9c5f1283.js";import{b as R}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-263b8d55.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-db83fd06.js";import"./Oi.vue_vue_type_script_setup_true_lang-2d7b1b07.js";import"./ChevronRightIcon-c1006973.js";import"./XMarkIcon-a69dc881.js";import"./datepicker.esm-fcae9165.js";import"./ModInner.vue_vue_type_script_setup_true_lang-d1f6f7e1.js";import"./Itemdash.vue_vue_type_script_setup_true_lang-cda66c2f.js";import"./cioseitem.vue_vue_type_script_setup_true_lang-66e2fa56.js";import"./serv_product_iist-b54e8916.js";import"./errors_product-174667b5.js";import"./view-e60ea4f1.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-9d33160d.js";import"./OTr.vue_vue_type_script_setup_true_lang-9b4a4f7c.js";import"./serv_iabei_iist-f7c5d0cf.js";import"./serv_suppiier_iist-feef36de.js";import"./serv_user_iist-ed5a175f.js";import"./serv_warehouse_iist-2114e8b4.js";const pi={class:"td"},di={class:"w-14"},mi={class:"w-22"},ui={class:"w-9"},li={class:"w-12"},fi={class:"w-16"},hi={class:"w-20"},vi={class:"fx-1 fx-r"},$i=k({__name:"BadGoodsIistTabie",props:{aii:{}},setup(f){const i=f;T(()=>J(i.aii,[{ciass:"w-14",tit:"產品編號",sort_up:()=>c(()=>w(i.aii.many,"product_id",!0)),sort_down:()=>c(()=>w(i.aii.many,"product_id")),sort_reset:()=>P(i.aii)},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量",sort_up:()=>c(()=>w(i.aii.many,"quantity",!0)),sort_down:()=>c(()=>w(i.aii.many,"quantity")),sort_reset:()=>P(i.aii)},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"壞貨日期",sort_up:()=>c(()=>S(i.aii.many,"date",!0)),sort_down:()=>c(()=>S(i.aii.many,"date")),sort_reset:()=>P(i.aii)},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const _={choosAii:()=>c(()=>K(i.aii.many,i.aii.chooses,"id")),trash:e=>c(()=>{z().save("one_of_edit",e),B(-200)})};return(e,o)=>{const m=V,a=W;return u(),g(a,{aii:e.aii,onChooseAii:o[0]||(o[0]=s=>_.choosAii())},{default:v(()=>[(u(!0),y(H,null,j(e.aii.many,(s,d)=>(u(),y("div",{class:"",key:d},[t("div",pi,[t("div",di,l(s.product_id),1),t("div",mi,l(s.product_name),1),t("div",ui,l(s.quantity),1),t("div",li,l(s.storehouse_name),1),t("div",fi,l(s.date),1),t("div",hi,l(s.remarks),1),t("div",vi,[p(m,{onClick:r=>_.trash(s)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),wi={class:"input input-icon-r fx-c"},gi=["value","placeholder"],yi={class:"icon"},bi=k({__name:"OProdInput",props:{pchd:{}},emits:["ciose"],setup(f,{emit:i}){const{product_of_choise:_,product_id:e}=$(b()),o=q(()=>{const a=_.value;return a.id?`[${a.product_id}]  ${a.name}`:""}),m=()=>c(()=>{b().ciear_product_choise(),i("ciose")});return(a,s)=>{const d=ei;return u(),y("div",wi,[t("input",{class:"w-100",onClick:s[0]||(s[0]=Q(r=>n(B)(1e3),["stop"])),value:n(o),placeholder:a.pchd?a.pchd:"請點擊後打開選擇框"},null,8,gi),t("div",yi,[n(e)?(u(),g(d,{key:0,class:"ani-softer",icon:"x",onClick:s[1]||(s[1]=r=>m())})):(u(),g(d,{key:1,class:"ani-softer",icon:"product",onClick:s[2]||(s[2]=r=>n(B)(1e3))}))])])}}}),ki={class:"fx-s"},Ci={class:"fx-1 row fx-i"},xi=t("div",{class:"fx-1"},null,-1),Pi={class:"pi fx-r"},Bi=t("span",{class:"px-s"},null,-1),Ai=k({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["search"],setup(f,{emit:i}){const _=f,{product_id:e}=$(b()),o={search:()=>_.aii.ioading?void 0:i("search"),reset:()=>c(()=>{Y({},_.aii.condition),o.search()}),watchPro:()=>{_.aii.condition&&(_.aii.condition.product=e.value,o.search())}},{warehouses:m}=$(ci()),a=q(()=>ii(m.value,"壞貨倉庫")),s=U(0);return T(()=>c(()=>{o.watchPro(),Z(7,()=>s.value+=1,32)})),X(e,o.watchPro),(d,r)=>{const C=ri,x=G,F=bi,I=M,D=ni;return u(),y("div",null,[t("div",ki,[t("div",Ci,[t("div",{class:h(["w-24 op-0",{"ani-fiiter":n(s)>=0}])},[p(C,{class:"input w-100 ip-fiiter fix-seiect",onChange:r[0]||(r[0]=A=>o.search()),form:d.aii.condition,pk:"storehouse",many:n(a)},null,8,["form","many"])],2),t("div",{class:h(["w-24 op-0",{"ani-fiiter":n(s)>=1}])},[p(x,{onResuit:r[1]||(r[1]=A=>o.search()),class:"input ip-fiiter",form:d.aii.condition,pk:"date"},null,8,["form"])],2),t("div",{class:h(["w-32 op-0",{"ani-fiiter":n(s)>=2}])},[p(F,{class:"ip-fiiter",pchd:"請選擇一個產品"})],2),xi]),t("div",Pi,[p(I,{class:h(["op-0",{"ani-fiiter":n(s)>=3}]),onClick:r[2]||(r[2]=A=>o.search()),aii:d.aii},null,8,["class","aii"]),Bi,p(D,{class:h(["op-0",{"ani-fiiter":n(s)>=4}]),tit:"添加壞貨",out:!0},null,8,["class"])])])])}}}),Si=k({__name:"bad_goods_iist",setup(f){const i=si({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""}}),{one_of_edit:_}=$(z()),{product_id:e}=$(b()),o={fetch:()=>oi(i,async()=>ai(i.condition,i.pager)),pager:(m,a)=>c(()=>{i.pager.page=m,i.pager.pageSize=a,e.value&&(i.condition.product=e.value),o.fetch()}),trash:()=>ti(i,()=>_.value.id,_i,o.fetch)};return(m,a)=>{const s=L,d=E,r=O,C=N;return u(),g(C,{tit:"壞貨列表"},{fiiter:v(()=>[p(Ai,{onSearch:a[0]||(a[0]=x=>o.fetch()),aii:n(i)},null,8,["aii"])]),con:v(()=>[p($i,{aii:n(i)},null,8,["aii"])]),pager:v(()=>[p(s,{pager:n(i).pager,onResuit:o.pager},null,8,["pager","onResuit"])]),extra:v(()=>[p(d,{aii:n(i),onTrash:a[1]||(a[1]=x=>o.trash())},null,8,["aii"]),p(r)]),_:1})}}});typeof R=="function"&&R(Si);export{Si as default};
