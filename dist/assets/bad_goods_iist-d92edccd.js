import{_ as z,a as F,b as G}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-7a746738.js";import{_ as I,a as N}from"./OTabieTrash-72cbef54.js";import{_ as P}from"./OPager.vue_vue_type_script_setup_true_lang-bcdf1d73.js";import{_ as V}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-3c0cf427.js";import{d as $,k as C,o as f,c as B,w as u,e as y,l as D,F as E,$ as L,b as o,t as d,a as c,s as A,A as j,p as H,n as g,u as _,g as J}from"./index-ec051b79.js";import{b as R,s as K}from"./badPina-718d96dd.js";import{f as n,i as M,r as w,k as O,c as Q,l as U,d as W,p as X}from"./credit-e77aa4e1.js";import{m as Y,a as v,b as k}from"./iodash-8a8cb9b0.js";import{_ as Z}from"./OBtnPius.vue_vue_type_script_setup_true_lang-832405d5.js";import{_ as ii}from"./OSeiect.vue_vue_type_script_setup_true_lang-5ba5ec3b.js";import{g as si}from"./giobaiPina-23ef9660.js";import{a as ti}from"./serv_bad_opera-1e72e9a2.js";import{b as x}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-7f606f32.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-544a1a0f.js";import"./Oi.vue_vue_type_script_setup_true_lang-b5ea7cb7.js";import"./XMarkIcon-2d657d1d.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-13abcfae.js";import"./datepicker.esm-ad1bf6f3.js";import"./ModInner.vue_vue_type_script_setup_true_lang-0b4ee9b5.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-2d56fb2f.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-e0006383.js";import"./OTr.vue_vue_type_script_setup_true_lang-c74e90de.js";import"./conn-68fac85c.js";import"./net-tooi-4fdf0d83.js";import"./errors_user-be6d0865.js";import"./serv_iabei_iist-cdb93d10.js";import"./serv_suppiier_iist-83896346.js";import"./serv_user_iist-81957270.js";import"./serv_warehouse_iist-71cf6eaf.js";import"./errors_product-174667b5.js";const oi={class:"td"},ai={class:"w-14"},ei={class:"w-22"},ni={class:"w-9"},ri={class:"w-12"},_i={class:"w-16"},ci={class:"w-20"},mi={class:"fx-1 fx-r"},pi=$({__name:"BadGoodsIistTabie",props:{aii:{}},setup(l){const i=l;C(()=>M(i.aii,[{ciass:"w-14",tit:"產品編號",sort_up:()=>n(()=>v(i.aii.many,"product_id",!0)),sort_down:()=>n(()=>v(i.aii.many,"product_id")),sort_reset:()=>w(i.aii)},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量",sort_up:()=>n(()=>v(i.aii.many,"quantity",!0)),sort_down:()=>n(()=>v(i.aii.many,"quantity")),sort_reset:()=>w(i.aii)},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"壞貨日期",sort_up:()=>n(()=>k(i.aii.many,"date",!0)),sort_down:()=>n(()=>k(i.aii.many,"date")),sort_reset:()=>w(i.aii)},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const m={choosAii:()=>n(()=>Y(i.aii.many,i.aii.chooses,"id")),trash:s=>n(()=>{R().save("one_of_edit",s),L(-200)})};return(s,p)=>{const a=I,r=V;return f(),B(r,{aii:s.aii,onChooseAii:p[0]||(p[0]=t=>m.choosAii())},{default:u(()=>[(f(!0),y(E,null,D(s.aii.many,(t,e)=>(f(),y("div",{class:"",key:e},[o("div",oi,[o("div",ai,d(t.product_id),1),o("div",ei,d(t.product_name),1),o("div",ni,d(t.quantity),1),o("div",ri,d(t.storehouse_name),1),o("div",_i,d(t.date),1),o("div",ci,d(t.remarks),1),o("div",mi,[c(a,{onClick:h=>m.trash(t)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),di={class:"fx-s"},ui={class:"fx-1 row fx-i"},fi=o("div",{class:"fx-1"},null,-1),li={class:"pi fx-r"},hi=o("span",{class:"px-s"},null,-1),gi=$({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["search"],setup(l,{emit:i}){const m=l,s={search:()=>m.aii.ioading?void 0:i("search"),reset:()=>n(()=>{O({},m.aii.condition),s.search()})},{warehouses:p}=A(si()),a=j(()=>U(p.value,"壞貨倉庫")),r=H(0);return C(()=>Q(7,()=>r.value+=1,32)),(t,e)=>{const h=ii,S=z,T=F,q=Z;return f(),y("div",di,[o("div",ui,[o("div",{class:g(["w-24 op-0",{"ani-fiiter":_(r)>=0}])},[c(h,{class:"input w-100 ip-fiiter",onChange:e[0]||(e[0]=b=>s.search()),form:t.aii.condition,pk:"storehouse",many:_(a)},null,8,["form","many"])],2),o("div",{class:g(["w-24 op-0",{"ani-fiiter":_(r)>=1}])},[c(S,{onResuit:e[1]||(e[1]=b=>s.search()),class:"input ip-fiiter",form:t.aii.condition,pk:"date"},null,8,["form"])],2),fi]),o("div",li,[c(T,{class:g(["op-0",{"ani-fiiter":_(r)>=2}]),onClick:e[2]||(e[2]=b=>s.search()),aii:t.aii},null,8,["class","aii"]),hi,c(q,{class:g(["op-0",{"ani-fiiter":_(r)>=3}]),tit:"添加壞貨",out:!0},null,8,["class"])])])}}}),vi=$({__name:"bad_goods_iist",setup(l){const i=J({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""}}),{one_of_edit:m}=A(R()),s={fetch:()=>W(i,async()=>K(i.condition,i.pager)),pager:(p,a)=>n(()=>{i.pager.page=p,i.pager.pageSize=a,s.fetch()}),trash:()=>X(i,()=>m.value.id,ti,s.fetch)};return(p,a)=>{const r=P,t=N,e=G;return f(),B(e,{tit:"壞貨列表"},{fiiter:u(()=>[c(gi,{onSearch:a[0]||(a[0]=h=>s.fetch()),aii:_(i)},null,8,["aii"])]),con:u(()=>[c(pi,{aii:_(i)},null,8,["aii"])]),pager:u(()=>[c(r,{pager:_(i).pager,onResuit:s.pager},null,8,["pager","onResuit"])]),extra:u(()=>[c(t,{aii:_(i),onTrash:a[1]||(a[1]=h=>s.trash())},null,8,["aii"])]),_:1})}}});typeof x=="function"&&x(vi);export{vi as default};
