import{_ as P,a as E}from"./ModInner.vue_vue_type_script_setup_true_lang-0b4ee9b5.js";import{_ as G}from"./OPager.vue_vue_type_script_setup_true_lang-bcdf1d73.js";import{_ as I}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-3c0cf427.js";import{_ as L}from"./MBtn.vue_vue_type_script_setup_true_lang-7f606f32.js";import{_ as O}from"./Itemdash.vue_vue_type_script_setup_true_lang-cc2b203b.js";import{_ as H}from"./cioseitem.vue_vue_type_script_setup_true_lang-472d1035.js";import{d as D,g as K,k as J,o as f,c as N,w as n,a as r,b as a,m as k,v as x,u as s,B as Q,e as v,l as R,F as z,$ as M,t as h,s as W,j as l,A as U,M as X,K as Y,f as Z}from"./index-ec051b79.js";import{c as b,_ as tt}from"./CoWarehouseSeiect.vue_vue_type_script_setup_true_lang-30eb17ed.js";import{s as ot}from"./serv_product_iist-d759bf00.js";import{f as m,d as et,i as st,r as q,h as at,j as w}from"./credit-e77aa4e1.js";import{a as $,b as j,c as rt}from"./iodash-8a8cb9b0.js";import{v as it}from"./view-01767316.js";import{_ as nt}from"./OInputI.vue_vue_type_script_setup_true_lang-a2c49863.js";import{_ as _t}from"./OTime.vue_vue_type_script_setup_true_lang-f959ed95.js";import{_ as ct}from"./OInput.vue_vue_type_script_setup_true_lang-e6ef8691.js";import{b as dt}from"./net-tooi-4fdf0d83.js";const mt={class:"py fx-c"},ut={class:"py"},pt=a("div",{class:"pb"},[a("p",{class:"fs-s sus"},"篩選結果")],-1),ft={class:"w-24"},lt={class:"w-26"},ht={class:"w-24"},vt={class:"fx-1"},yt={class:"pt"},gt=D({__name:"CoProduChoiseMod",setup(S){const t=K({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:15,total:1},condition:{search:""},many_origin:[]}),u={search:()=>m(()=>u.fetch()),choise:e=>m(()=>{e.id&&(b().save_product_choise(e),M(0))}),ciear:()=>m(()=>{t.condition.search="";const e=b().products;e&&e.length?u.fetch():t.many=e}),fetch:()=>et(t,async()=>ot(t.condition,t.pager),e=>{e.data&&b().save_products(e.data)}),pager:(e,_)=>m(()=>{t.pager.page=e,t.pager.pageSize=_,u.fetch()})};return J(()=>st(t,[{ciass:"w-24",tit:"產品編號",sort_up:()=>m(()=>$(t.many,"product_id",!0)),sort_down:()=>m(()=>$(t.many,"product_id")),sort_reset:()=>q(t)},{ciass:"w-26",tit:"產品名稱"},{ciass:"w-24",tit:"最新入庫時間",sort_up:()=>m(()=>j(t.many,"new_restock_date",!0)),sort_down:()=>m(()=>j(t.many,"new_restock_date")),sort_reset:()=>q(t)},{ciass:"fx-1",tit:"庫存",sort_up:()=>m(()=>$(t.many,"product_id",!0)),sort_down:()=>m(()=>$(t.many,"product_id")),sort_reset:()=>q(t)}])),(e,_)=>{const y=H,g=O,C=L,B=I,o=G,i=P,p=E;return f(),N(p,{idx:1e3},{default:n(()=>[r(i,{tit:"篩選產品"},{default:n(()=>[a("div",mt,[r(g,{class:"w-618 pi-row"},{default:n(()=>[r(y,{onTrash:_[2]||(_[2]=c=>u.ciear())},{default:n(()=>[k(a("input",{class:"w-100",onKeydown:_[0]||(_[0]=Q(c=>u.search(),["enter"])),placeholder:"請輸入產品名稱後，按下回車進行搜索。","onUpdate:modelValue":_[1]||(_[1]=c=>s(t).condition.search=c)},null,544),[[x,s(t).condition.search]])]),_:1})]),_:1})]),a("div",ut,[pt,r(B,{aii:s(t)},{default:n(()=>[(f(!0),v(z,null,R(s(t).many,(c,V)=>(f(),v("div",{key:V},[r(C,{onClick:T=>u.choise(c),bk:!0,class:"w-100 hand br-s fx-aii-weak",ciass:"td ta-i br-0-imp"},{default:n(()=>[a("div",ft,h(c.product_id),1),a("div",lt,h(c.name),1),a("div",ht,h(s(it)(c.new_restock_date)),1),a("div",vt,h(c.total_stock),1)]),_:2},1032,["onClick"])]))),128))]),_:1},8,["aii"])]),a("div",yt,[r(o,{pager:s(t).pager,onResuit:u.pager},null,8,["pager","onResuit"])])]),_:1})]),_:1})}}}),wt={class:"o-form"},$t=["value"],kt=a("option",{value:0},"-- 請選擇 --",-1),bt=["value"],Ft=D({__name:"BadGoodsCreatBase",props:{form:{},aii:{}},setup(S){const t=S,u=["product_id","variation","quantity","storehouse_id","date","remarks"],e=K(at(t.form)),{product_id:_,storehouse_id:y,product_of_choise:g}=W(b());l(_,o=>t.form.product_id=o),l(y,o=>{t.form.storehouse_id=o,console.log("storeID 改动 =",o)});const C=U(()=>{const o=g.value;return o.id?`[${o.product_id}]  ${o.name}`:""}),B=U(()=>{let o=g.value.variations;return rt(o)?o:dt.iist(o)});return l(()=>t.aii.sign,()=>{t.form.storehouse_id=y.value,u.map(o=>{if(w(e,o,t.form[o],t.aii)){t.aii.can=!1;return}}),t.aii.can=!0}),l(()=>t.form.variation,o=>w(e,"variation",o,t.aii)),l(()=>t.form.quantity,o=>w(e,"quantity",o,t.aii)),l(()=>t.form.date,o=>w(e,"date",o,t.aii)),(o,i)=>{const p=ct,c=_t,V=nt,T=tt,A=gt;return f(),v("div",null,[a("div",wt,[r(p,{tit:"壞貨產品",err:s(e).product_id,onClick:i[1]||(i[1]=d=>s(M)(1e3))},{default:n(()=>[a("input",{onClick:i[0]||(i[0]=X(d=>s(M)(1e3),["stop"])),value:s(C),placeholder:"請點擊後打開選擇框"},null,8,$t)]),_:1},8,["err"]),r(p,{tit:"數量",err:s(e).quantity},{default:n(()=>[k(a("input",{type:"number","onUpdate:modelValue":i[2]||(i[2]=d=>o.form.quantity=d),placeholder:"請輸入"},null,512),[[x,o.form.quantity]])]),_:1},8,["err"]),s(_)?(f(),N(p,{key:0,tit:"樣式",err:s(e).variation},{default:n(()=>[k(a("select",{"onUpdate:modelValue":i[3]||(i[3]=d=>o.form.variation=d)},[kt,(f(!0),v(z,null,R(s(B),(d,F)=>(f(),v("option",{key:F,value:d.id},h(d.name),9,bt))),128))],512),[[Y,o.form.variation]])]),_:1},8,["err"])):Z("",!0),r(V,{tit:"日期",err:s(e).date,icon:"date"},{default:n(()=>[r(c,{form:o.form,pk:"date"},null,8,["form"])]),_:1},8,["err"]),r(p,{tit:"壞貨位置",err:s(e).storehouse_id},{default:n(()=>[r(T)]),_:1},8,["err"]),r(p,{tit:"備註",err:!1},{default:n(()=>[k(a("textarea",{rows:"3","onUpdate:modelValue":i[4]||(i[4]=d=>o.form.remarks=d),placeholder:"請輸入"},null,512),[[x,o.form.remarks]])]),_:1})]),r(A)])}}});export{Ft as _};
