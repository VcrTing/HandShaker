import{_ as G,a as J}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-d8d23317.js";import{_ as K}from"./OPager.vue_vue_type_script_setup_true_lang-42f21f84.js";import{_ as W}from"./OBtnPius.vue_vue_type_script_setup_true_lang-3dab202b.js";import{q as A,O as X,x as F,P as k,at as Y,d as h,f as N,n as q,U as Z,o as u,c as f,a as t,D as w,i as o,b as d,k as l,N as ii,g as b,z as B,y as x,w as m,A as E,t as _,F as O,m as ti,au as si,S as oi,af as v,ag as C,H as R,s as ai,e as P,Q as ei}from"./index-4cfd176e.js";import{E as V}from"./errors_product-d5275ad5.js";import{_ as ni}from"./OBtnReset.vue_vue_type_script_setup_true_lang-e1be154b.js";import{_ as ri}from"./OSearch.vue_vue_type_script_setup_true_lang-9c721d95.js";import{_ as ci}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-70308abe.js";import{_ as _i}from"./CoSuppiierSeiectPure.vue_vue_type_script_setup_true_lang-333afe0a.js";import{_ as M}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-8d9268b0.js";import{_ as pi}from"./OTabieDetaii.vue_vue_type_script_setup_true_lang-9a4cffb6.js";import{b as di,m as S,a as y}from"./view-14b7197e.js";import{invoiceCreatPina as U}from"./invoiceCreatPina-66201ea7.js";import{_ as ui,a as mi}from"./Pan.vue_vue_type_script_setup_true_lang-c1dd1414.js";import{b as T}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-67a47524.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-25fee3d6.js";import"./Oi.vue_vue_type_script_setup_true_lang-e89faeb3.js";import"./DocumentTextIcon-39d29958.js";import"./XMarkIcon-6c6dd51a.js";import"./OiX2.vue_vue_type_script_setup_true_lang-1071dec2.js";import"./PlusCircleIcon-b3af98a4.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-4461ee34.js";import"./datepicker.esm-c5990eef.js";import"./giobaiPina-89a9d613.js";import"./serv_suppiier_iist-b1db5e85.js";import"./serv_user_iist-7343f94c.js";import"./serv_warehouse_iist-3ee7efca.js";import"./InboxIcon-7a367a61.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-be4f4b0b.js";import"./OTr.vue_vue_type_script_setup_true_lang-4958377c.js";import"./serv_product_iist-a4c9841b.js";const H="invoices",li=async(a,i)=>A(V,async()=>X(await F.get(H,k.buiid_pager(a,i)),["supplier"])),fi=async a=>A(V,async()=>Y(await F.one(H,a+""))),vi={class:"fx-s"},hi={class:"fx-1 row fx-i"},wi=h({__name:"InvoiceIistFiiter",props:{aii:{}},emits:["search"],setup(a,{emit:i}){const r=a,p=N(),s={search:()=>r.aii.ioading?void 0:i("search"),reset:()=>l(()=>{ii({},r.aii.condition),p.value&&p.value.ciear(),console.log("訂單過濾 =",r.aii.condition),s.search()})},e=N(0);return q(()=>Z(7,()=>e.value+=1,32)),(c,n)=>{const I=_i,D=ci,L=ri,Q=ni,j=G;return u(),f("div",vi,[t("div",hi,[t("div",{class:w(["w-25 op-0",{"ani-fiiter":o(e)>=1}])},[d(I,{onResuit:n[0]||(n[0]=g=>s.search()),class:"input w-100 ip-fiiter fix-seiect",form:c.aii.condition,pk:"supplier"},null,8,["form"])],2),t("div",{class:w(["w-28 op-0 ip-fiiter",{"ani-fiiter":o(e)>=2}])},[d(D,{onResuit:n[1]||(n[1]=g=>s.search()),class:"input ip-fiiter",form:c.aii.condition,pk:"date"},null,8,["form"])],2),t("div",{class:w(["w-36 ip-fiiter op-0",{"ani-fiiter":o(e)>=3}])},[d(L,{onResuit:n[2]||(n[2]=g=>s.search()),aii:c.aii.condition,pk:"invoice_id",pchd:"請輸入供應商參考編號"},null,8,["aii"])],2)]),t("div",{class:w(["pi op-0",{"ani-fiiter":o(e)>=5}])},[d(Q,{onClick:n[3]||(n[3]=g=>s.reset())})],2),t("div",{class:w(["pi op-0",{"ani-fiiter":o(e)>=6}])},[d(j,{onClick:n[4]||(n[4]=g=>s.search()),aii:c.aii},null,8,["aii"])],2)])}}}),z=a=>a.supplier?a.supplier:{},$={suppiier_id:(a={})=>z(a).supplier_id,suppiier_name:(a={})=>z(a).name,restock_product_id:a=>(a.product?a.product:{}).product_id,restock_product_name:a=>(a.product?a.product:{}).name,restock_qunatity:a=>{const i=a.variations?a.variations:[];let r=0;return i.map(p=>{r+=p.quantity}),r}},yi={class:"w-20"},$i={class:"w-16"},gi={class:"w-13"},ki={class:"w-14"},bi={class:"w-15"},xi={class:"w-16"},Ii={class:"fx-1 fx-r"},Ci=h({__name:"InvoiceIistTabie",props:{aii:{}},setup(a){const i=a;b({ioading:!1,iiveId:-1});const r={editFuture:async p=>{let s=await fi(p);ti(s)?si(s+""):(s=s,console.log(s),U().save("one_of_view",s))},dump:()=>{oi(100)}};return q(()=>B(i.aii,[{ciass:"w-20",tit:"供應商參考編號",sort_up:()=>l(()=>v(i.aii.many,"order_id",!0)),sort_down:()=>l(()=>v(i.aii.many,"order_id")),sort_reset:()=>C(i.aii)},{ciass:"w-16",tit:"發票日期"},{ciass:"w-13",tit:"合計數量",sort_up:()=>l(()=>v(i.aii.many,"total_quantity",!0)),sort_down:()=>l(()=>v(i.aii.many,"total_quantity")),sort_reset:()=>C(i.aii)},{ciass:"w-14",tit:"合計金額",sort_up:()=>l(()=>v(i.aii.many,"total_price",!0)),sort_down:()=>l(()=>v(i.aii.many,"total_price")),sort_reset:()=>C(i.aii)},{ciass:"w-15",tit:"供應商編號"},{ciass:"w-22",tit:"供應商名稱"}])),(p,s)=>{const e=pi,c=M;return u(),x(c,{aii:p.aii},{default:m(()=>[(u(!0),f(O,null,E(p.aii.many,(n,I)=>(u(),f("div",{class:"td",key:I},[t("div",yi,_(n.invoice_id),1),t("div",$i,_(o(di)(n.date)),1),t("div",gi,_(n.total_quantity),1),t("div",ki,_(o(S)(n.total_price)),1),t("div",bi,_(o($).suppiier_id(n)),1),t("div",xi,_(o($).suppiier_name(n)),1),t("div",Ii,[d(e,{tit:"產品詳情",func:r.editFuture,id:n.id,onTap:s[0]||(s[0]=D=>r.dump())},null,8,["func","id"])])]))),128))]),_:1},8,["aii"])}}}),Ri={class:"w-13"},qi={class:"w-20"},Si={class:"w-10"},Di={class:"w-10"},Ni={class:"w-9"},Pi={class:"w-11"},Ti={class:"w-10"},zi={class:"w-10"},Ai={class:"fx-1"},Fi=h({__name:"IpdiTabie",props:{aii:{},many:{}},setup(a){const i=a;return b({ioading:!1,iiveId:-1}),q(()=>B(i.aii,[{ciass:"w-13",tit:"貨號"},{ciass:"w-20",tit:"貨品名稱 / 摘要"},{ciass:"w-10",tit:"數量總數"},{ciass:"w-10",tit:"單價"},{ciass:"w-9",tit:"折扣"},{ciass:"w-11",tit:"最新入貨價錢"},{ciass:"w-10",tit:"統計"},{ciass:"w-10",tit:"最低價錢"},{ciass:"fx-1",tit:"售價"}])),(r,p)=>{const s=M;return u(),x(s,{aii:r.aii,mini:!0},{default:m(()=>[(u(!0),f(O,null,E(r.many,(e,c)=>(u(),f("div",{class:"td",key:c},[t("div",Ri,_(o($).restock_product_id(e)),1),t("div",qi,_(o($).restock_product_name(e)),1),t("div",Si,_(o($).restock_qunatity(e)),1),t("div",Di,_(o(y)(e.unit_price)),1),t("div",Ni,_(o(y)(e.discount)),1),t("div",Pi,_(o(y)(e.net_price)),1),t("div",Ti,_(o(S)(e.total_amount)),1),t("div",zi,_(o(y)(e.lowest_price)),1),t("div",Ai,_(o(y)(e.selling_price)),1)]))),128))]),_:1},8,["aii"])}}}),Bi={class:"pt ani-softer"},Ei=h({__name:"InvoicePanDetaiiIist",props:{one:{}},setup(a){const i=a,r=R(()=>{const s=i.one?i.one:{};return(s.restocks?s.restocks:[]).map(c=>(c.product=c.product?k.data(c.product):{},c.variations=c.variations?c.variations:[],c.__totai=s.total_quantity,c))}),p=b({many:[{}],condition:{},chooseAii:!1,chooses:[],ioading:!1,msg:"",trs:[],many_origin:[],pager:{page:1,pageSize:25,pageCount:1,total:1}});return(s,e)=>(u(),f("div",Bi,[d(Fi,{aii:o(p),many:o(r)},null,8,["aii","many"])]))}}),Oi={key:0,class:"row ani-softer py my bg-card"},Vi={class:"w-50"},Mi=t("div",null,"入貨倉庫",-1),Ui={class:"pt"},Hi={class:"w-50"},Li=t("div",null,"供應商",-1),Qi={class:"pt"},ji={key:1,class:"row ani-fade-b py-x3"},Gi={class:"w-50"},Ji=t("div",null,"合計數量",-1),Ki={class:"pt"},Wi={class:"w-50"},Xi=t("div",null,"合計金額",-1),Yi={class:"pt"},Zi=h({__name:"InvoicePanDetaii",setup(a){const{one_of_view:i}=ai(U()),r=R(()=>{const s=i.value?i.value:{},e=s.storehouse?k.data(s.storehouse):{};return e||{}}),p=R(()=>{const s=i.value?i.value:{},e=s.supplier?k.data(s.supplier):{};return e||{}});return(s,e)=>{const c=ui,n=mi;return u(),x(n,{idx:100,big:!0},{default:m(()=>[d(c,{tit:"入單產品詳情"},{default:m(()=>[o(i)?(u(),f("div",Oi,[t("div",Vi,[Mi,t("div",Ui,[t("h6",null,_(o(r).name?o(r).name:"(無入貨倉庫信息)"),1)])]),t("div",Hi,[Li,t("div",Qi,[t("h6",null,_(o(p).name?o(p).name:"(無供應商信息)"),1)])])])):P("",!0),d(Ei,{one:o(i)},null,8,["one"]),o(i)?(u(),f("div",ji,[t("div",Gi,[Ji,t("div",Ki,[t("h4",null,_(o(i).total_quantity),1)])]),t("div",Wi,[Xi,t("div",Yi,[t("h4",null,_(o(S)(o(i).total_price)),1)])])])):P("",!0)]),_:1})]),_:1})}}}),it=h({__name:"invoice_iist",setup(a){const i=b({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{supplier:"",date:"",invoice_id:""}}),r={fetch:()=>ei(i,async()=>li(i.condition,i.pager)),pager:(p,s)=>l(()=>{i.pager.page=p,i.pager.pageSize=s,r.fetch()})};return(p,s)=>{const e=W,c=K,n=J;return u(),x(n,{tit:"發票列表",tit_pius:"快速入單"},{pius:m(()=>[d(e,{class:"py mi",tit:"快速入單"})]),fiiter:m(()=>[d(wi,{aii:o(i),onSearch:r.fetch},null,8,["aii","onSearch"])]),con:m(()=>[d(Ci,{aii:o(i)},null,8,["aii"])]),pager:m(()=>[d(c,{pager:o(i).pager,onResuit:r.pager},null,8,["pager","onResuit"])]),extra:m(()=>[d(Zi)]),_:1})}}});typeof T=="function"&&T(it);export{it as default};
