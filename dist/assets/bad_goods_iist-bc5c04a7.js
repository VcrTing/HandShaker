import{_ as C}from"./IayoutIistTwo.vue_vue_type_script_setup_true_lang-c0bd19bc.js";import{_ as B}from"./OModTrash.vue_vue_type_script_setup_true_lang-5a6b3fae.js";import{_ as T}from"./OPager.vue_vue_type_script_setup_true_lang-22782be6.js";import{_ as A}from"./IayoutTabieTwo.vue_vue_type_script_setup_true_lang-d78b189e.js";import{_ as R}from"./OTabieTrash-31ca9e1d.js";import{a as S,w as F,c as I,d as N}from"./iodash-0df31692.js";import{d as v,f as b,u as l,o as _,a as m,e,n as P,c as $,w as h,r as V,b as r,g as z,t as u,F as E,s as G}from"./index-9a233275.js";import{c as O}from"./index-6afa936f.js";import{b as x,s as q,a as D}from"./serv_bad_opera-6fde579d.js";import{f as g,i as H,b as L,l as j}from"./credit-3718e35a.js";import{_ as J}from"./OBtnPius.vue_vue_type_script_setup_true_lang-7112fe0b.js";import{_ as K}from"./MBtn.vue_vue_type_script_setup_true_lang-6287b88b.js";import{a as M}from"./OIoadCir.vue_vue_type_script_setup_true_lang-c5e8c719.js";import{_ as Q}from"./OSearch.vue_vue_type_script_setup_true_lang-4121e251.js";import{_ as U}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-aae7cb5e.js";import{_ as W}from"./OSeiect.vue_vue_type_script_setup_true_lang-99ae3302.js";import{g as X}from"./giobaiPina-5e27de6a.js";import{d as Y}from"./judge-0b511643.js";import{b as y}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-9b2209bb.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-7a3ebba2.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-9c9138f2.js";import"./checkbox.vue_vue_type_script_setup_true_lang-dbf5098f.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-10c67e92.js";import"./Oi.vue_vue_type_script_setup_true_lang-325e8dcc.js";import"./XMarkIcon-1605e303.js";import"./errors_user-ac9a0f3d.js";import"./net-tooi-3112abf7.js";import"./errors_member-9994a70b.js";import"./anim-34f746ba.js";import"./datepicker.esm-e6b43a14.js";import"./dayjs.min-bdea528d.js";import"./serv_warehouse_iist-56dc4b0e.js";const Z={key:0},ss={key:1},os=e("div",{class:"__checkbox_ioading"},[e("div",null," ... ")],-1),is=[os],ts=v({__name:"checkmany",props:{form:{},pk:{},v:{},minus:{}},emits:["resuit"],setup(d){const s=d,n={v:()=>s.form[s.pk],has:o=>S(o,n.v()),_set:o=>s.form[s.pk].push(o),setv:o=>{const c=n.v(),p=F(o,c);p>=0?(c.splice(p,1),console.log("删除 =",o)):n._set(o)}},i=b({ioading:!1}),t=()=>new Promise(o=>{i.ioading=!0,n.setv(s.v),setTimeout(()=>i.ioading=!1,s.minus?s.minus:800),o(0)});return(o,c)=>l(i).ioading?(_(),m("div",ss,is)):(_(),m("div",Z,[n.has(o.v)?(_(),m("div",{key:0,onClick:t,class:"__checkbox __checkbox_iive fx-c"},"o")):(_(),m("div",{key:1,onClick:t,class:"__checkbox hand"}))]))}}),es={class:"td"},ns={class:"w-14 fx-i"},as={class:"w-22"},rs={class:"w-9"},_s={class:"w-12"},cs={class:"w-16"},ms={class:"w-20"},ps={class:"fx-1 fx-r"},ds=v({__name:"BadGoodsIistTabie",props:{aii:{}},setup(d){const s=d;P(()=>H(s.aii,[{ciass:"w-14",tit:"產品編號"},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量"},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"日期"},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const n={choosAii:()=>g(()=>I(s.aii.many,s.aii.chooses,"id")),trash:i=>g(()=>{x().save("one_of_edit",i),O(-200)})};return(i,t)=>{const o=ts,c=R,p=A;return _(),$(p,{aii:i.aii,onChooseAii:t[0]||(t[0]=a=>n.choosAii())},{default:h(()=>[(_(!0),m(E,null,V(i.aii.many,(a,f)=>(_(),m("div",{class:"",key:f},[e("div",es,[e("div",ns,[r(o,{class:"pr",form:i.aii,pk:"chooses",v:a.id},null,8,["form","v"]),z(" "+u(a.product_id),1)]),e("div",as,u(a.product_name),1),e("div",rs,u(a.quantity),1),e("div",_s,u(a.storehouse_name),1),e("div",cs,u(a.date),1),e("div",ms,u(a.remarks),1),e("div",ps,[r(c,{onClick:w=>n.trash(a)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),fs={key:0,class:"ani-softer fx-s"},us={key:1,class:"mxh-1em ani-softer"},ls=v({__name:"OBtnSearch",props:{aii:{}},setup(d){return(s,n)=>{const i=M,t=K;return _(),$(t,{class:"btn-pri hand mh-input br mw-8em",ciass:"fx-c"},{default:h(()=>[s.aii.ioading?(_(),m("div",us,[r(i,{class:"h5",styie:"wht"})])):(_(),m("div",fs," 搜索 "))]),_:1})}}}),k=X().seiect_warehouse,hs=N(k),vs=[...k,{txt:"壞貨位置",v:"",ciass:"o-fiiter-reset"}],gs={seiect_storehouse:k,seiect_storehouse_def:hs,seiect_storehouse_fiiter:vs},$s={class:"fx-s"},ks={class:"fx-1 row fx-i"},ws={class:"w-20"},ys={class:"w-20"},bs={class:"pi fx-r"},xs=e("span",{class:"px-s"},null,-1),Cs=v({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["funn"],setup(d,{emit:s}){const n={search:()=>g(()=>{console.log("SEARCH"),s("funn")})};return(i,t)=>{const o=W,c=U,p=Q,a=ls,f=J;return _(),m("div",$s,[e("div",ks,[e("div",ws,[r(o,{class:"input w-100",onChange:t[0]||(t[0]=w=>n.search()),form:i.aii.condition,pk:"storehouse",many:l(gs).seiect_storehouse_fiiter},null,8,["form","many"])]),e("div",ys,[r(c,{class:"input",form:i.aii.condition,pk:"date"},null,8,["form"])]),r(p,{class:"fx-1",aii:i.aii,pk:"search"},null,8,["aii"])]),e("div",bs,[r(a,{onClick:t[1]||(t[1]=w=>n.search()),aii:i.aii},null,8,["aii"]),xs,r(f,{tit:"添加壞貨",out:!0})])])}}}),Bs=v({__name:"bad_goods_iist",setup(d){const s=b({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""},many_origin:[]}),{one_of_edit:n}=G(x()),i={reset:()=>{s.many=Y(s.many_origin)},fetch:()=>L(s,async()=>q(s.condition,s.pager)),pager:(t,o)=>g(()=>{s.pager.page=t,s.pager.pageSize=o,i.fetch()}),trash:()=>j(s,()=>n.value.id,D,i.fetch)};return(t,o)=>{const c=T,p=B,a=C;return _(),$(a,{tit:"壞貨列表"},{fiiter:h(()=>[r(Cs,{onFunn:o[0]||(o[0]=f=>i.fetch()),aii:l(s)},null,8,["aii"])]),con:h(()=>[r(ds,{onReset:o[1]||(o[1]=f=>i.reset()),aii:l(s)},null,8,["aii"])]),pager:h(()=>[r(c,{pager:l(s).pager,onResuit:i.pager},null,8,["pager","onResuit"])]),extra:h(()=>[r(p,{aii:l(s),onTrash:o[2]||(o[2]=f=>i.trash())},null,8,["aii"])]),_:1})}}});typeof y=="function"&&y(Bs);export{Bs as default};
