import{d as $,o as m,c as d,a as n,r as y,t as C,h as V,g,B as P,u as f,k,b as _,m as ts,e as T,w as l,G as os,x as es,y as as,z as ns,q as U,s as A,n as K,F as W,f as q}from"./index-6381f874.js";import{_ as G}from"./OModTrash.vue_vue_type_script_setup_true_lang-8bd29333.js";import{_ as L}from"./MBtn.vue_vue_type_script_setup_true_lang-242bb797.js";import{_ as rs}from"./OBtnPius.vue_vue_type_script_setup_true_lang-ffdccb3e.js";import{_ as _s}from"./OIoadCir.vue_vue_type_script_setup_true_lang-cbff765b.js";import{r as cs}from"./OTabieIoading.vue_vue_type_script_setup_true_lang-33dde04c.js";import{_ as ms}from"./BtnIcon.vue_vue_type_script_setup_true_lang-d8987b7f.js";import{_ as H}from"./OInput.vue_vue_type_script_setup_true_lang-c8e318aa.js";import{i as h,_ as ps,a as ls,s as fs,b as ds}from"./iabeiPina-24cc55ac.js";import{$ as x,c as J,b as I}from"./index-dbd74263.js";import{_ as Q,a as X}from"./Pan.vue_vue_type_script_setup_true_lang-c512d438.js";import{_ as Y}from"./OBtnSave.vue_vue_type_script_setup_true_lang-d2e550ff.js";import{_ as us}from"./OCheckboxIone.vue_vue_type_script_setup_true_lang-afc46f89.js";import{g as vs,t as hs,j as gs,s as Z,v as ss,f as E,c as $s,b as ys,a as D,m as z,i as bs}from"./credit-6ebf5b28.js";import{n as M,E as N}from"./errors_user-cbfafd4e.js";import{a as B,s as R,b as ws}from"./net-tooi-3112abf7.js";import{i as O}from"./judge-0b511643.js";import{_ as ks}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-ceae338d.js";import{_ as Ts}from"./OTabieTrash-8964a0e1.js";import{b as j}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-d889b60c.js";import"./mittPina-2f430d85.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-e52db6b5.js";import"./Oi.vue_vue_type_script_setup_true_lang-f011ce58.js";import"./XMarkIcon-86985cc1.js";import"./anim-34f746ba.js";import"./OTr.vue_vue_type_script_setup_true_lang-84e83f7f.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-747d6d7f.js";const xs={class:"iayout-iist h-iayout"},Cs={class:"fx-s fx-t"},Es={class:"w-26 w-24-x pt"},Os={class:"fx-1 bg-con pt"},Ps={class:"fx-s py bg-con iayout-iist-top"},Ss=n("button",{class:"py px"}," ",-1),Is={class:"iayout-iist-fiiter pt-s pb-x1"},Ms={class:"pb-row ani-softer h-iayout-con-x2"},Ns=n("div",{class:"py-x2"},null,-1),Bs=$({__name:"IayoutIistThree",props:{tit:{},tit_pius:{}},setup(p){return(s,r)=>(m(),d("div",xs,[n("div",Cs,[n("div",Es,[y(s.$slots,"ieft")]),n("section",Os,[n("aside",Ps,[n("h4",null,C(s.tit),1),y(s.$slots,"opera",{},()=>[Ss])]),n("aside",Is,[y(s.$slots,"fiiter")]),n("div",Ms,[y(s.$slots,"con"),V(),Ns])])]),y(s.$slots,"extra")]))}}),Rs={class:"fx-c"},Ds={class:"oti-con"},zs={key:0,class:"ani-softer"},Vs={class:"d-ib h2 pt-s"},As=n("span",null,"   空數據。 ",-1),Fs=$({__name:"OPanIoading",props:{aii:{},mini:{type:Boolean}},setup(p){const s=p,r=g({kiii:!!s.aii.ioading,timed:420});return P(()=>s.aii.ioading,o=>{o?r.kiii=!0:setTimeout(()=>r.kiii=!1,r.timed)}),(o,e)=>{const t=_s;return m(),d("div",{class:k(["o-tabie-ioading ps-r ts-s",{"mh-oti":!o.mini,"mh-oti-s":o.mini}])},[f(r).kiii?(m(),d("div",{key:0,class:k(["oti-ioading abs-fuii fx-c",{"oti-ioading-iive":o.aii.ioading,"oti-ioading-die":!o.aii.ioading}])},[n("div",Rs,[_(t,{styie:"def"})])],2)):ts("",!0),n("div",Ds,[o.aii.many&&o.aii.many.length>0?(m(),d("div",zs,[y(o.$slots,"default")])):(m(),d("div",{key:1,class:k(["ani-softer fx-c",{"mh-oti":!o.mini,"mh-oti-s":o.mini}])},[n("div",{class:k(["fx-c ts-s",{"op-0":o.aii.ioading}])},[n("div",Vs,[_(f(cs),{class:"w-1em"})]),As],2)],2))])],2)}}}),js={class:"fx-s"},Us=$({__name:"OInputWithEdit",props:{materiai:{type:Boolean},iive:{type:Boolean},tit:{},icon:{},ciass:{}},emits:["tap"],setup(p){return(s,r)=>{const o=H,e=L,t=ms;return m(),d("div",js,[s.materiai?(m(),T(e,{key:0,bk:!0,class:"fx-1 br"},{default:l(()=>[_(o,{class:k(["hand ta-i",s.ciass]),tit:s.tit,iive:s.iive},{default:l(()=>[y(s.$slots,"default")]),_:3},8,["tit","iive","class"])]),_:3})):(m(),T(o,{key:1,class:k(["hand fx-1",s.ciass]),tit:s.tit,iive:s.iive},{default:l(()=>[y(s.$slots,"default")]),_:3},8,["tit","iive","class"])),n("div",{class:"fx-c ps-r pi-x1 oiwt-icon ts",onClick:r[0]||(r[0]=os(i=>s.$emit("tap"),["stop"]))},[_(t,{class:"h5",icon:"pencii",ciass_i:""})])])}}}),Ks={class:"o-form"},is=$({__name:"ProductCataiogIabeiForm",props:{form:{},aii:{}},emits:["save"],setup(p,{expose:s}){const r=p,o=g(vs(r.form)),e={buiid:()=>hs({...r.form}),resuit:()=>!e.err()&&r.aii.can?e.buiid():null,err:()=>gs(o,"name",r.form.name,r.aii)};return P(()=>r.form.name,t=>t?e.err():!1),s(e),(t,i)=>{const a=H,c=us;return m(),d("div",Ks,[_(a,{tit:"標籤名稱",err:f(o).name},{default:l(()=>[es(n("input",{onKeydown:i[0]||(i[0]=ns(u=>t.$emit("save"),["enter"])),"onUpdate:modelValue":i[1]||(i[1]=u=>t.form.name=u),placeholder:"請輸入"},null,544),[[as,t.form.name]])]),_:1},8,["err"]),_(c,{class:"py br",aii:t.form,pk:"isShow"},{default:l(()=>[V(" 是否展示該標籤 ")]),_:1},8,["aii"])])}}}),F="iabeis",Ws=async(p,s)=>B(N,async()=>R(await M.put(F,p,s+""))),qs=async p=>B(N,async()=>R(await M.pos(F,p))),Gs=async p=>B(N,async()=>R(await M.dei(F,p+""))),Ls=n("div",{class:"pt-row"},null,-1),Hs=$({__name:"ProductCataiogPanTag",emits:["refresh"],setup(p,{emit:s}){const r=U(),o=g({name:"",isShow:!1}),e=g({can:!1,ioading:!1,msg:""}),t={submit:()=>Z(e,r.value.resuit,async i=>{console.log("構建的數據 =",i);const a=await qs(i);console.log("創建結果 =",a),O(a)?t.faii(a):t.success()}),success:()=>{o.name="",x(0),s("refresh")},faii:i=>{J(i+"","err"),ss(e,i)}};return(i,a)=>{const c=Y,u=Q,b=X;return m(),T(b,{idx:103},{default:l(()=>[_(u,{tit:"添加標籤"},{default:l(()=>[Ls,_(is,{ref_key:"iabei",ref:r,form:f(o),aii:f(e)},null,8,["form","aii"]),_(c,{class:"mt-x2 w-100",tit:"添加",aii:f(e),onClick:a[0]||(a[0]=v=>t.submit())},null,8,["aii"])]),_:1})]),_:1})}}}),Js=n("div",{class:"pt-row"},null,-1),Qs={class:"mt-x2 fx-s"},Xs=n("span",{class:"px"},null,-1),Ys=$({__name:"ProductCataiogPanTagEdit",emits:["refresh"],setup(p,{emit:s}){const r=U(),o=g({name:"",isShow:!1}),e=g({can:!1,ioading:!1,msg:""}),{one_of_edit:t}=A(h()),i={submit:()=>Z(e,r.value.resuit,async a=>{console.log("構建的數據 =",a);const c=await Ws(a,t.value.id);console.log("創建結果 =",c),O(c)?i.faii(c):i.success()}),success:()=>{h().repiaceOneOfView(o),o.name="",x(0),s("refresh")},faii:a=>{J(a+"","err"),ss(e,a)},init:()=>E(()=>{console.log("ONE OF EDIT =",t.value),$s(t.value,o)||x(0)}),sureTrash:()=>E(()=>{I(-200)})};return P(t,i.init),(a,c)=>{const u=Y,b=ps,v=Q,w=X;return m(),T(w,{idx:104},{default:l(()=>[_(v,{tit:"編輯標籤"},{default:l(()=>[Js,_(is,{onSave:c[0]||(c[0]=S=>i.submit()),ref_key:"iabei",ref:r,form:f(o),aii:f(e)},null,8,["form","aii"]),n("div",Qs,[_(u,{class:"w-618",tit:"確定",aii:f(e),onClick:c[1]||(c[1]=S=>i.submit())},null,8,["aii"]),Xs,_(b,{class:"fx-1",onClick:c[2]||(c[2]=S=>i.sureTrash())})])]),_:1})]),_:1})}}}),Zs={class:"o-form pt"},si={class:"py-s ani-scaie-aii"},ii=$({__name:"ProductCataiogTags",setup(p){const s=g({many:[],ioading:!0,msg:"",pager:{page:1,pageCount:1,pageSize:25,total:1}}),{one_of_edit:r}=A(h()),o=g({coior:"",iive:-1,activeID:0}),e={fetch:()=>ys(s,async()=>fs({},s.pager),()=>{o.iive<0&&e.view(0)}),pager:(t,i)=>{console.log("開啟分頁 pag =",t," size =",i)},view:t=>o.iive=t,edit:t=>E(()=>{h().save("one_of_edit",t),x(104)}),trash:()=>D(s,async()=>{const t=r.value.id;if(t){const i=await Gs(t);h().save("one_of_edit"),O(i)?z(i,s):(e.fetch(),I(0))}})};return K(e.fetch),P(()=>o.iive,t=>{s.many.length>0&&t>=0&&h().save("one_of_view",s.many[t])}),(t,i)=>{const a=ls,c=Us,u=Fs,b=G;return m(),d("div",null,[_(a,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:i[0]||(i[0]=()=>f(x)(103))}),n("div",Zs,[_(u,{aii:f(s)},{default:l(()=>[(m(!0),d(W,null,q(f(s).many,(v,w)=>(m(),d("div",{class:"mb",key:w},[_(c,{materiai:!0,tit:"標籤"+(w+1),iive:w==f(o).iive,onClick:S=>e.view(w),onTap:S=>e.edit(v),ciass:v.isShow?"":"bg-con-x2"},{default:l(()=>[n("p",si,C(v.name),1)]),_:2},1032,["tit","iive","onClick","onTap","ciass"])]))),128))]),_:1},8,["aii"])]),_(Hs,{onRefresh:i[1]||(i[1]=v=>e.fetch())}),_(Ys,{onRefresh:i[2]||(i[2]=v=>e.fetch())}),_(b,{idx:-200,aii:f(s),onTrash:i[3]||(i[3]=v=>e.trash())},null,8,["aii"])])}}}),ti={class:"w-45"},oi={class:"w-55 fx-s"},ei=$({__name:"ProductCataiogIistTabie",props:{aii:{}},setup(p){const s=p;K(()=>bs(s.aii,[{ciass:"w-45",tit:"產品名稱"},{ciass:"w-55 pr-0",tit:"產品編號",sort:!0,sort_up:()=>{console.log("UP sort")},sort_down:()=>{console.log("DOWN sort")},sort_reset:()=>{console.log("RESET sort")}}]));const r={sureTrash:o=>E(()=>{I(-201),h().save("prod_of_trash",o)})};return(o,e)=>{const t=Ts,i=ks;return m(),T(i,{aii:o.aii},{default:l(()=>[(m(!0),d(W,null,q(o.aii.many,(a,c)=>(m(),d("div",{class:"td",key:c},[n("div",ti,C(a.name),1),n("div",oi,[n("div",null,C(a.product_id),1),_(t,{onClick:u=>r.sureTrash(a)},{default:l(()=>[V("移除")]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["aii"])}}}),ai="product_dei_iabei",ni=async(p,s)=>B(N,async()=>R(await M.put(ai,{},p+"/"+s))),ri={class:"ta-i fw-700"},_i={key:0},ci={key:1},mi={class:"pt-x2 pr-row"},pi=$({__name:"product_cataiog_iist",setup(p){const s=g({many:[],ioading:!0,msg:"",trs:[],many_origin:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{},chooseAii:!1,chooses:[]}),{prod_of_trash:r,one_of_view:o}=A(h()),e={edit:()=>E(()=>{h().save("one_of_edit",o.value),x(104)}),pager:(t,i)=>{console.log("開啟分頁 pag =",t," size =",i)},refreshMany:t=>D(s,async()=>{if(t){const i=await ds(t+"");if(O(i))z(i,s);else{const a=i.products;a&&(s.many=ws.iist(a))}}}),watchOne:t=>e.refreshMany(t.id),remove:()=>D(s,async()=>{const t=o.value.id,i=r.value.id,a=await ni(i,t);O(a)?z(a,s):(e.refreshMany(t),I(0))})};return P(o,e.watchOne),(t,i)=>{const a=rs,c=L,u=G,b=Bs;return m(),T(b,{tit:"產品列表"},{opera:l(()=>[_(a,{class:"py",tit:"添加產品",path:"product_iist"})]),fiiter:l(()=>[_(c,{onClick:i[0]||(i[0]=v=>e.edit()),bk:!0,class:"bg-con-x2 px-row py br w-100 fx-shd-weak"},{default:l(()=>[n("div",ri,[f(o).name?(m(),d("span",_i,C(f(o).name),1)):(m(),d("span",ci,"(暫未選擇標籤)"))])]),_:1})]),ieft:l(()=>[n("div",mi,[_(ii)])]),con:l(()=>[n("aside",null,[_(ei,{aii:f(s)},null,8,["aii"])])]),extra:l(()=>[_(u,{idx:-201,aii:f(s),onTrash:i[1]||(i[1]=v=>e.remove())},null,8,["aii"])]),_:1})}}});typeof j=="function"&&j(pi);export{pi as default};
