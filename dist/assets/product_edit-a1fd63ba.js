import{_ as Ss,a as Bs,b as Us,c as Ns,d as Ds,e as Rs,f as Ws,g as As}from"./ProduCeRemark.vue_vue_type_script_setup_true_lang-a4d90b04.js";import{_ as Y}from"./OBtnSave.vue_vue_type_script_setup_true_lang-4c310e21.js";import{_ as Os}from"./scroiiy-b327f9f0.js";import{_ as Fs,o as u,c as m,d as h,f as S,e as B,w as d,b as e,a as i,t as y,F as I,s as w,g,B as x,D as os,z as Hs,u as r,r as Z,x as C,y as D,E as j,k as R,n as U,m as W,v as ts,q as us,G as Q,h as H,i as Ms}from"./index-3928a4f9.js";import{pageProducEditPina as q}from"./pageProducEditPina-c39bd846.js";import{a as js,_ as zs}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-feed630d.js";import{n as ps}from"./conn-edfcd9ba.js";import{a as ms,s as ds}from"./net-tooi-fd704369.js";import{E as fs}from"./serv_product_iist-88113b13.js";import{f as b,g as z,j as P,d as vs,i as hs,a as Gs,e as $s,m as G,s as K,h as ns}from"./credit-3f7205a2.js";import{t as X,d as ys,i as ss}from"./judge-13dfac2e.js";import{_ as ks}from"./IayoutForm.vue_vue_type_script_setup_true_lang-f1e470f6.js";import{a as Ks}from"./anim-34f746ba.js";import{v as L,g as _s,d as bs}from"./iodash-69df2803.js";import{a as gs}from"./view-60076a03.js";import{_ as ws}from"./Dropdown.vue_vue_type_script_setup_true_lang-603dd393.js";import{_ as Ls}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-20a756ea.js";import{_ as Js}from"./Oi.vue_vue_type_script_setup_true_lang-7e5790fd.js";import{_ as is}from"./BtnIcon.vue_vue_type_script_setup_true_lang-8bea4c22.js";import{g as es}from"./giobaiPina-0f81a363.js";import{_ as J}from"./OInput.vue_vue_type_script_setup_true_lang-28be47dc.js";import{_ as xs}from"./OInputI.vue_vue_type_script_setup_true_lang-42bf7420.js";import{_ as Ps}from"./OTime.vue_vue_type_script_setup_true_lang-23a1a188.js";import{_ as as}from"./OModTrash.vue_vue_type_script_setup_true_lang-24d70e9f.js";import{_ as rs}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-0df7f2ac.js";import{d as Qs,c as Xs,_ as Ys,a as Zs,b as st}from"./ProduInstockTabie.vue_vue_type_script_setup_true_lang-f0c4497e.js";import{_ as tt}from"./OTabieTrash-0c6dcefe.js";import{_ as ot}from"./OTabieEdit.vue_vue_type_script_setup_true_lang-99c99e2f.js";import{b as M,$ as A}from"./index-791bc20f.js";import{_ as O,a as F}from"./Pan.vue_vue_type_script_setup_true_lang-5ec4dcee.js";import{pageProductInstockPina as N}from"./pageProductInstockPina-fd14593a.js";import{t as nt}from"./product_trs-ae94303e.js";import{a as Is,_ as it}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-5449eb6c.js";import{s as et,a as at}from"./serv_bad_opera-0b1eaa7c.js";import{_ as rt}from"./CoWarehouseSeiect.vue_vue_type_script_setup_true_lang-ae95cc2a.js";import{_ as _t}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-9ae2f326.js";import{_ as ct}from"./MBtn.vue_vue_type_script_setup_true_lang-60a27fcd.js";import{i as cs,_ as lt}from"./iabeiPina-66031096.js";import{pageProductPina as ut}from"./pageProductPina-c5f7701b.js";import{b as ls}from"./route-block-83d24a4e.js";import"./OOpenPan.vue_vue_type_script_setup_true_lang-36264b48.js";import"./OBtnPius.vue_vue_type_script_setup_true_lang-cfe6ae3c.js";import"./XMarkIcon-c4c8ea85.js";import"./Cardmsg.vue_vue_type_script_setup_true_lang-8a9b819f.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-e25d0593.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-9b84ba8f.js";import"./serv_iabei_with_product-f549e7c4.js";import"./errors_user-be6d0865.js";import"./utii-61a90868.js";import"./serv_variation_with_product-42af0715.js";import"./OiX2.vue_vue_type_script_setup_true_lang-eebe0225.js";import"./ArrowLongRightIcon-909e554a.js";import"./dayjs.min-bdea528d.js";import"./serv_suppiier_iist-e080240c.js";import"./serv_warehouse_iist-d6be6d71.js";import"./datepicker.esm-f129e23a.js";import"./ModInner.vue_vue_type_script_setup_true_lang-9c8bedd2.js";import"./mittPina-3678d06a.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-ed2173c8.js";import"./OTr.vue_vue_type_script_setup_true_lang-0aae874a.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-fe88c202.js";import"./OTrPure.vue_vue_type_script_setup_true_lang-bdeb524e.js";import"./errors_member-9994a70b.js";const pt={};function mt(f,s){return u(),m("div",null," IN BAD ")}const dt=Fs(pt,[["render",mt]]),ft="instock",vt="transfstock",ht=async f=>ms(fs,async()=>ds(await ps.pos(ft,f))),$t=async(f,s)=>ms(fs,async()=>ds(await ps.put(vt,s,f+""))),yt={class:"mw-4em"},kt={class:"pi-s"},bt=h({__name:"CoSsItem",props:{many:{},aii:{},pk:{}},emits:["switchWH"],setup(f){return(s,a)=>{const t=Js,o=Ls;return u(!0),m(I,null,S(s.many,(n,_)=>(u(),B(o,{onClick:c=>s.$emit("switchWH",n),iive:s.aii.pk==n.id,class:"fx-i",aii:s.aii,key:_},{default:d(()=>[e(t,{class:"i h5 mr-s",icon:"ioc"}),i("div",yt,y(n.name),1),i("div",kt,"(負責人: "+y(n.contact_person)+")",1)]),_:2},1032,["onClick","iive","aii"]))),128)}}}),gt={class:"ps-r"},wt=["value"],xt={class:"middie r-0 pr-row pi-s ani-softer"},Pt=h({__name:"CoSuppiierSeiect",props:{form:{},pk:{}},setup(f){const s=f,{suppiiers:a}=w(es()),t=g({search:"",ioading:!1,nowId:0}),o={many:()=>a.value,v:()=>{if(s.pk&&s.form)return s.form[s.pk]},setV:n=>{s.pk&&s.form&&(s.form[s.pk]=n)},search:()=>b(()=>{}),view:()=>{const n=L(t.nowId,a.value,"id");return n.id?n.name+"  (負責人: "+n.contact_person+")":""},switchWh:n=>b(()=>{t.ioading=!0,t.nowId=n.id,o.setV(n.id),setTimeout(()=>{t.ioading=!1},400)})};return x(o.v,n=>{n&&n!==t.nowId&&(t.nowId=X(n))}),os(()=>{let n=o.v();const _=X(n);_&&_!=t.nowId&&(t.nowId=_)}),(n,_)=>{const c=is,p=bt,l=ws;return u(),m("div",null,[e(l,{class:"w-100",fuii:!0},{sign:d(()=>[i("div",gt,[i("input",{class:"w-100",onKeydown:_[0]||(_[0]=Hs(v=>o.search(),["enter"])),value:o.view(),placeholder:"請選擇"},null,40,wt),i("div",xt,[e(c,{class:"ani-scaie-aii",onClick:_[1]||(_[1]=v=>o.search()),icon:"down"})])])]),con:d(()=>[e(p,{aii:r(t),pk:"nowId",many:r(a),onSwitchWH:o.switchWh},null,8,["aii","many","onSwitchWH"])]),_:1})])}}}),It={class:"o-hour-minus ps-r"},Tt=i("div",{class:"fx-s abs-t i-0 r-0 bg-con"},[i("div",{class:"w-382 pi pb-x1 sus"},"時"),i("div",{class:"w-618 pi pb-x1 sus"},"分")],-1),Ct={class:"fx-s fx-t"},qt={class:"o-hours w-382 pt-s"},Et=i("button",null,"0",-1),Vt=["onClick"],St={class:"o-minus w-618 pt-s"},Bt=i("button",null,"0",-1),Ut=["onClick"],Nt=h({__name:"OHours",props:{form:{},pk_hours:{},pk_minus:{}},setup(f){const s=f,a=g({hours:_s(24),minus:_s(60)}),t={v_minus:()=>s.form[s.pk_minus],v_hour:()=>s.form[s.pk_hours],v:()=>t.v_hour()+":"+t.v_minus(),setv_minus:o=>{s.form[s.pk_minus]=o},setv_hour:o=>{s.form[s.pk_hours]=o}};return(o,n)=>{const _=ws;return u(),B(_,null,{sign:d(()=>[Z(o.$slots,"default")]),con:d(()=>[i("div",It,[Tt,i("div",Ct,[i("div",qt,[Et,(u(!0),m(I,null,S(r(a).hours,(c,p)=>(u(),m("div",{class:"pi br br-i-0 fx-aii-weak ani-scaie-fcs hand",onClick:l=>t.setv_hour(c),key:p},y(c),9,Vt))),128))]),i("div",St,[Bt,(u(!0),m(I,null,S(r(a).minus,(c,p)=>(u(),m("div",{class:"py-t pi br br-r-0 fx-aii-weak ani-scaie-fcs hand",onClick:l=>t.setv_minus(c),key:p},y(c),9,Ut))),128))])])])]),_:3})}}}),Dt={class:"row"},Rt={class:"w-333"},Wt={class:"w-333"},At=["value"],Ot={class:"w-333"},Ft=i("div",{class:"py-s"},null,-1),Ht={class:"row"},Mt={class:"w-333"},jt=i("div",{class:"w-333"},null,-1),zt=i("div",{class:"w-333"},null,-1),Gt=h({__name:"PiisBase",props:{form:{},aii:{}},setup(f){const s=f,a=["restock_date","hour","quantity","supplier"],t=g(z(s.form));return x(()=>s.aii.sign,()=>{a.map(o=>{if(P(t,o,s.form[o],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),x(()=>s.form.restock_date,o=>P(t,"restock_date",o,s.aii)),x(()=>s.form.hour,o=>P(t,"hour",o,s.aii)),x(()=>s.form.quantity,o=>P(t,"quantity",o,s.aii)),x(()=>s.form.supplier,o=>P(t,"supplier",o,s.aii)),(o,n)=>{const _=Ps,c=xs,p=Nt,l=J,v=Pt;return u(),m("div",null,[i("div",Dt,[i("div",Rt,[e(c,{icon:"date",err:r(t).restock_date,tit:"入貨日期"},{default:d(()=>[e(_,{form:o.form,pk:"restock_date"},null,8,["form"])]),_:1},8,["err"])]),i("div",Wt,[e(c,{icon:"time",err:r(t).hour,tit:"入貨時間"},{default:d(()=>[e(p,{form:o.form,pk_hours:"hour",pk_minus:"minus"},{default:d(()=>[i("input",{value:r(gs)(o.form.hour,o.form.minus)},null,8,At)]),_:1},8,["form"])]),_:1},8,["err"])]),i("div",Ot,[e(l,{err:r(t).quantity,tit:"入貨數量"},{default:d(()=>[C(i("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=$=>o.form.quantity=$),placeholder:"請輸入"},null,512),[[D,o.form.quantity]])]),_:1},8,["err"])])]),Ft,i("div",Ht,[i("div",Mt,[e(l,{err:r(t).supplier,tit:"供應商"},{default:d(()=>[e(v,{form:o.form,pk:"supplier"},null,8,["form"])]),_:1},8,["err"])]),jt,zt])])}}}),Kt={class:"row"},Lt={class:"w-333"},Jt={class:"w-333"},Qt={class:"w-333"},Xt=h({__name:"PiisPrice",props:{form:{},aii:{}},setup(f){const s=f,a=["restock_price","lowest_price","selling_price"],t=g(z(s.form));return x(()=>s.aii.sign,()=>{a.map(o=>{if(P(t,o,s.form[o],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),x(()=>s.form.restock_price,o=>P(t,"restock_price",o,s.aii)),x(()=>s.form.lowest_price,o=>P(t,"lowest_price",o,s.aii)),x(()=>s.form.selling_price,o=>P(t,"selling_price",o,s.aii)),(o,n)=>{const _=J;return u(),m("div",Kt,[i("div",Lt,[e(_,{err:r(t).restock_price,tit:"入貨價錢"},{default:d(()=>[C(i("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=c=>o.form.restock_price=c),placeholder:"請輸入"},null,512),[[D,o.form.restock_price]])]),_:1},8,["err"])]),i("div",Jt,[e(_,{err:r(t).lowest_price,tit:"最低價錢"},{default:d(()=>[C(i("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=c=>o.form.lowest_price=c),placeholder:"請輸入"},null,512),[[D,o.form.lowest_price]])]),_:1},8,["err"])]),i("div",Qt,[e(_,{err:r(t).selling_price,tit:"售價"},{default:d(()=>[C(i("input",{type:"number","onUpdate:modelValue":n[2]||(n[2]=c=>o.form.selling_price=c),placeholder:"請輸入"},null,512),[[D,o.form.selling_price]])]),_:1},8,["err"])])])}}}),Yt=i("option",{value:0}," -- 請選 -- ",-1),Zt=["value"],Ts=h({__name:"CoWarehouseSeiectPure",props:{form:{},pk:{}},setup(f){const{warehouses:s}=w(es());return(a,t)=>C((u(),m("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.form[a.pk]=o)},[Yt,(u(!0),m(I,null,S(r(s),(o,n)=>(u(),m("option",{value:o.id,key:n},y(o.name)+"   (負責人: "+y(o.contact_person)+") ",9,Zt))),128))],512)),[[j,a.form[a.pk]]])}}),so=h({__name:"OInpuTd",props:{iive:{type:Boolean},tit:{},err:{type:Boolean},ciass:{}},setup(f){return(s,a)=>(u(),m("div",{class:R(["o-input input o-input-td",{"o-input-iive":s.iive,"input-err":s.err}])},[i("div",{class:R(["fx-1",s.ciass])},[Z(s.$slots,"default")],2)],2))}}),to=h({__name:"CoWarehouseText",props:{v:{}},setup(f){const s=f,a=()=>{const t=L(s.v,es().warehouses,"id");return t.id?t.name+"  (負責人: "+t.contact_person+")":"未選擇倉庫"};return(t,o)=>(u(),m("div",null,y(a()),1))}}),oo=h({__name:"CoVariationsText",props:{v:{},many:{}},setup(f){const s=f,a=()=>{const t=L(s.v,s.many,"id");return t.id?t.name:"未選擇倉庫"};return(t,o)=>(u(),m("div",null,y(a()),1))}}),no={key:0,class:"td"},io={class:"fx-1 fx-s"},eo={key:0,class:"fx-r"},ao={key:1,class:"td"},ro={class:"w-30"},_o=["onUpdate:modelValue"],co=["value"],lo={class:"w-30"},uo={class:"fx-1 fx-s"},po=["onUpdate:modelValue"],mo={class:"pi fx-r"},Cs=h({__name:"PsiTd",props:{aii:{},funn:{},kiii_option:{type:Boolean}},setup(f){const s=f,{product_variations:a}=w(q());return a.value.length<=0&&vs("該產品無可用標籤！！！"),U(()=>hs(s.aii,[{ciass:"w-30",tit:"樣式名稱"},{ciass:"w-30",tit:"入貨位置"},{ciass:"fx-1",tit:"入貨數量"}])),(t,o)=>{const n=oo,_=to,c=ot,p=tt,l=so,v=Ts,$=Qs,T=is;return u(!0),m(I,null,S(t.aii.many,(k,V)=>(u(),m("div",{key:V},[k.edit?(u(),m("div",ao,[i("div",ro,[e(l,null,{default:d(()=>[C(i("select",{"onUpdate:modelValue":E=>k.variation=E},[(u(!0),m(I,null,S(r(a),(E,Vs)=>(u(),m("option",{key:Vs,value:E.id},y(E.name),9,co))),128))],8,_o),[[j,k.variation]])]),_:2},1024)]),i("div",lo,[e(l,null,{default:d(()=>[e(v,{form:k,pk:"storehouse"},null,8,["form"])]),_:2},1024)]),i("div",uo,[e(l,{class:"fx-1"},{default:d(()=>[C(i("input",{"onUpdate:modelValue":E=>k.quantity=E,placeholder:"請輸入"},null,8,po),[[D,k.quantity]])]),_:2},1024),i("div",mo,[e($,{class:"pr",tit:"儲存",onClick:E=>k.edit=!1},null,8,["onClick"]),i("div",null,[e(T,{icon:"x",onClick:E=>t.funn.cancei(k)},null,8,["onClick"])])])])])):(u(),m("div",no,[e(n,{class:"w-30",many:r(a),v:k.variation},null,8,["many","v"]),e(_,{class:"w-30",v:k.storehouse},null,8,["v"]),i("div",io,[i("div",null,y(k.quantity),1),t.kiii_option?W("",!0):(u(),m("div",eo,[e(c,{onClick:E=>t.funn.edit(k),class:"mr-s txt-pri"},null,8,["onClick"]),e(p,{onClick:E=>t.funn.sureTrash(V)},null,8,["onClick"])]))])]))]))),128)}}}),fo=h({__name:"PiisStyieInventoryTabie",props:{aii:{}},emits:["sureTrash"],setup(f,{emit:s}){const a=f,t=g({origin:{},trashIdx:0}),o={edit:n=>b(()=>{n.edit=!0,t.origin[n.id+""]=ys(n)}),cancei:n=>b(()=>{const _=t.origin[n.id+""];_?(_.edit=!1,$s(_,n)):n.edit=!1}),sureTrash:n=>b(()=>{t.trashIdx=n,s("sureTrash",n),M(-201)}),trash:()=>Gs(a.aii,()=>{a.aii.many.splice(t.trashIdx,1),M(0)})};return(n,_)=>{const c=rs,p=as;return u(),m(I,null,[e(c,{aii:n.aii,mini:!0},{default:d(()=>[e(Cs,{aii:n.aii,funn:o},null,8,["aii"])]),_:1},8,["aii"]),e(p,{idx:-201,aii:n.aii,onTrash:o.trash},null,8,["aii","onTrash"])],64)}}}),vo={key:0,class:"abs-b ps-f-imp r-0 w-36 w-50-p py"},ho=h({__name:"ProduInvInStockInner",props:{aii:{}},setup(f,{expose:s}){const a=f,t=g({restock_date:"",hour:0,minus:0,quantity:"",supplier:""}),o=g({restock_price:"",lowest_price:"",selling_price:""}),n=g({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[],ani:0}),{one_of_edit:_}=w(q()),c=ts(()=>{const l=_.value;return l.variations?l.variations:[]}),p={buiid:()=>{const l={...t,...o,restock_distribute:p.fiiter()};return l.restock_date=t.restock_date+" "+gs(t.hour,t.minus,!0),l.product=_.value.id,a.aii.can&&l.restock_distribute.length<=0?(G("您沒有添加任何樣式的庫存數據!!!",a.aii),null):a.aii.can?l:null},fiiter:(l=[])=>(n.many.map(v=>{let $=!0;v.storehouse&&v.quantity?v.edit=!1:$=!1,$&&l.push(v)}),l),pius:()=>b(()=>{p.fiiter().length==n.many.length&&n.many.push(p.GEN_ONE())}),GEN_ONE:()=>ys({idx:n.many.length,variation:bs(c.value,"id"),storehouse:0,quantity:null,edit:!0,ioading:!1})};return s(p),U(()=>Ks(4,()=>n.ani+=1)),(l,v)=>{const $=ks,T=js;return u(),m("div",null,[e($,{tit:"時間及供應商",class:R(["pb-x3 op-0",{"ani-page":r(n).ani>=0}])},{default:d(()=>[e(Gt,{form:r(t),aii:l.aii},null,8,["form","aii"])]),_:1},8,["class"]),e($,{tit:"價錢",class:R(["pb-x3 op-0",{"ani-page":r(n).ani>=1}])},{default:d(()=>[e(Xt,{form:r(o),aii:l.aii},null,8,["form","aii"])]),_:1},8,["class"]),e($,{tit:"樣式及庫存分配數量",class:R(["pt pb-x3 op-0",{"ani-page":r(n).ani>=2}])},{default:d(()=>[e(fo,{aii:r(n)},null,8,["aii"])]),_:1},8,["class"]),i("div",null,[e(T,{onClick:v[0]||(v[0]=k=>p.pius()),class:"w-100 py-s ani-scaie-aii",tit:"添加樣式"})]),r(n).ani>=3?(u(),m("section",vo,[Z(l.$slots,"default")])):W("",!0)])}}}),$o=i("h3",{class:"py-x3 mb"},"添加入貨信息(僅加貨)",-1),yo=h({__name:"ProduInvInStock",setup(f){const s=us(),{pag:a,one_of_edit:t}=w(q()),o=g({ioading:!1,msg:"",can:!1,sign:0}),n={submit:()=>K(o,s.value.buiid,async _=>{if(console.log("BASE =",_),_){const c=await ht(_);ss(c)?G(c,o):(n.back(),ns("產品入貨成功！！！"))}}),back:()=>b(()=>{a.value=0}),init:()=>b(()=>{t.value.id||(a.value=0)})};return U(n.init),(_,c)=>{const p=zs;return u(),m("section",null,[$o,e(ho,{aii:r(o),ref_key:"inner",ref:s,onSubmit:n.submit},{default:d(()=>[e(p,{ciass:"w-100",tit_save:"儲存",onBack:c[0]||(c[0]=l=>n.back()),onSave:c[1]||(c[1]=l=>n.submit())})]),_:1},8,["aii","onSubmit"])])}}}),ko=h({__name:"ProduInvInOrder",setup(f){return(s,a)=>(u(),m("div",null," IN ORDER "))}}),bo={class:"ps-r"},go={key:0,class:"prod-pag-wrapper abs-t i-0 r-0 b-0 bg-con zi-x2 ani-softer"},wo=h({__name:"ProductPagWrapper",setup(f){const{pag:s}=w(q());s.value=0;const a=us(!1);return x(s,t=>t==0?a.value=!1:a.value=!0),(t,o)=>{const n=Os;return u(),m("div",bo,[i("div",null,[Z(t.$slots,"default")]),r(a)?(u(),m("div",go,[C(e(n,{class:"h-iayout h-iayout-max"},{default:d(()=>[C(e(yo,null,null,512),[[Q,r(s)==1]]),C(e(dt,null,null,512),[[Q,r(s)==2]]),C(e(ko,null,null,512),[[Q,r(s)==3]])]),_:1},512),[[Q,r(s)>0]])])):W("",!0)])}}}),xo={class:"pb-x3"},qs=h({__name:"PeppTabie",setup(f){const s=g({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[]}),{inventory_and_variation_of_view:a}=w(N()),t={edit:()=>{},cancei:()=>{},sureTrash:()=>{},effect:()=>{a.value.map((o,n)=>{o.idx=n,s.many.push(o)})}};return os(t.effect),(o,n)=>{const _=rs;return u(),m("div",xo,[e(_,{aii:r(s),mini:!0},{default:d(()=>[e(Cs,{aii:r(s),funn:t,kiii_option:!0},null,8,["aii"])]),_:1},8,["aii"])])}}}),Po=i("h5",{class:"py-x2"},"樣式及庫存分配數量",-1),Io=h({__name:"ProductEditPanPriview",setup(f){return(s,a)=>{const t=O,o=F;return u(),B(o,{idx:112,big:!0},{default:d(()=>[e(t,{tit:"檢視 / 編輯"},{default:d(()=>[Po,e(qs)]),_:1})]),_:1})}}}),To={class:"w-50"},Co={class:"w-50"},Es=h({__name:"PepiTabie",setup(f){const s=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),{variations_of_inventory_of_store:a}=w(N());return U(()=>hs(s,nt)),(t,o)=>{const n=rs;return u(),B(n,{aii:r(s),mini:!0},{default:d(()=>[(u(!0),m(I,null,S(r(a),(_,c)=>(u(),m("div",{class:"td",key:c},[i("div",To,y(_.name),1),i("div",Co,y(_.quantity),1)]))),128))]),_:1},8,["aii"])}}}),qo=i("h5",{class:"py-x2"},"樣式",-1),Eo=i("h5",{class:"py-x2"},"倉庫",-1),Vo=h({__name:"ProductEditPanInstock",setup(f){return(s,a)=>{const t=O,o=F;return u(),B(o,{idx:111,big:!0},{default:d(()=>[e(t,{tit:"入貨詳情"},{default:d(()=>[qo,e(qs),Eo,e(Es)]),_:1})]),_:1})}}}),So={class:"py-x2"},Bo=h({__name:"ProductEditPanInventory",setup(f){const{inventory_of_store:s}=w(N());return(a,t)=>{const o=O,n=F;return u(),B(n,{idx:110,big:!0},{default:d(()=>[e(o,{tit:"庫存詳情"},{default:d(()=>[i("h5",So,y(r(s).storehouse_name),1),e(Es)]),_:1})]),_:1})}}}),Uo={class:"py-x2"},No={class:"o-form"},Do=h({__name:"PepbForm",props:{form:{},aii:{}},setup(f){const s=f,a=["quantity","storehouse_id","date"],t=g(z(s.form));return x(()=>s.aii.sign,(o=!0)=>{a.map(n=>{P(t,n,s.form[n],s.aii)&&(s.aii.can=!1,o=!1)}),s.aii.can=o}),x(()=>s.form.date,o=>P(t,"date",o,s.aii)),x(()=>s.form.quantity,o=>P(t,"quantity",o,s.aii)),x(()=>s.form.storehouse_id,o=>P(t,"storehouse_id",o,s.aii)),(o,n)=>{const _=Is,c=Ts,p=J,l=Ps,v=xs;return u(),m(I,null,[i("div",Uo,[e(_,{form:o.form,pk:"quantity",err:r(t).quantity},null,8,["form","err"])]),i("div",No,[i("div",null,[e(p,{tit:"壞貨位置",err:r(t).storehouse_id},{default:d(()=>[e(c,{form:o.form,pk:"storehouse_id"},null,8,["form"])]),_:1},8,["err"])]),i("div",null,[e(v,{tit:"添加日期",err:r(t).date,icon:"date"},{default:d(()=>[e(l,{form:o.form,pk:"date",class:"input-timed-for-pan"},null,8,["form"])]),_:1},8,["err"])]),i("div",null,[e(p,{tit:"壞貨備註"},{default:d(()=>[C(i("textarea",{placeholder:"請輸入","onUpdate:modelValue":n[0]||(n[0]=$=>o.aii.remarks=$),rows:"12"},null,512),[[D,o.aii.remarks]])]),_:1})])])],64)}}}),Ro={class:"o-form"},Wo=i("option",{value:""},"-- 請選擇 --",-1),Ao=["value"],Oo=h({__name:"PepbFormStyie",props:{form:{},aii:{}},setup(f){const s=f,a=["variation"],{product_variations:t}=w(q()),o=g(z(s.form));return x(()=>s.aii.sign,(n=!0)=>{a.map(_=>{P(o,_,s.form[_],s.aii)&&(s.aii.can=!1,n=!1)}),s.aii.can=n}),x(()=>s.form.variation,n=>P(o,"variation",n,s.aii)),(n,_)=>{const c=J;return u(),m("div",Ro,[e(c,{tit:"樣式",err:r(o).variation},{default:d(()=>[C(i("select",{"onUpdate:modelValue":_[0]||(_[0]=p=>n.form.variation=p)},[Wo,(u(!0),m(I,null,S(r(t),(p,l)=>(u(),m("option",{key:l,value:p.id},y(p.name),9,Ao))),128))],512),[[j,n.form.variation]])]),_:1},8,["err"])])}}}),Fo=i("div",{class:"py-row"},null,-1),Ho=h({__name:"ProductEditPanBad",setup(f){const{one_of_edit:s}=w(q()),a=g({ioading:!1,msg:"",can:!1,sign:0}),t=g({quantity:0,storehouse_id:null,date:"",remarks:"",variation:"",product_id:""}),o={buiid:()=>(t.product_id=s.value.id,a.can?t:null),submit:()=>K(a,o.buiid,async n=>{if(n){let _=await et(n);ss(_)?G(_,a):o.success()}}),success:()=>b(()=>{ns("壞貨資料新增成功。"),A(0),setTimeout(()=>$s({quantity:0},t),400)}),init:()=>b(()=>{console.log(s.value)})};return U(o.init),(n,_)=>{const c=it,p=Y,l=O,v=F;return u(),B(v,{idx:120},{default:d(()=>[e(l,{tit:"壞貨"},{default:d(()=>[e(c,{num:r(s).product_id,named:r(s).name},null,8,["num","named"]),e(Oo,{class:"pt-x3",form:r(t),aii:r(a)},null,8,["form","aii"]),e(Do,{form:r(t),aii:r(a)},null,8,["form","aii"]),Fo,e(p,{aii:r(a),onClick:_[0]||(_[0]=$=>o.submit()),tit:"儲存",class:"w-100"},null,8,["aii"])]),_:1})]),_:1})}}}),Mo={class:"o-form"},jo={class:"o-form-pan"},zo=i("h5",null,"調貨樣式",-1),Go=["value"],Ko={class:"o-form-pan"},Lo=i("h5",null,"調貨倉庫",-1),Jo={class:"o-form-pan"},Qo=i("h5",null,"調貨數量",-1),Xo={class:"pb"},Yo=h({__name:"PepdFormHouse",props:{form:{},aii:{},max:{}},setup(f){const s=f,a=["variation","storehouse_to","quantity"],t=g(z(s.form)),{product_variations:o}=w(q());return x(()=>s.aii.sign,()=>{let n=!0;a.map(_=>{P(t,_,s.form[_],s.aii)&&(n=!1)}),s.aii.can=n}),x(()=>s.form.variation,n=>P(t,"variation",n,s.aii)),x(()=>s.form.storehouse_to,n=>P(t,"storehouse_to",n,s.aii)),x(()=>s.form.quantity,n=>P(t,"quantity",n,s.aii)),(n,_)=>{const c=J,p=rt,l=Is;return u(),m("div",Mo,[i("div",jo,[zo,e(c,{tit:"樣式",err:r(t).variation},{default:d(()=>[C(i("select",{"onUpdate:modelValue":_[0]||(_[0]=v=>n.form.variation=v)},[(u(!0),m(I,null,S(r(o),(v,$)=>(u(),m("option",{key:$,value:v.id},y(v.name),9,Go))),128))],512),[[j,n.form.variation]])]),_:1},8,["err"])]),i("div",Ko,[Lo,e(c,{tit:"入貨倉庫",err:r(t).storehouse_to},{default:d(()=>[e(p,{except:n.form.storehouse_from,form:n.form,pk:"storehouse_to"},null,8,["except","form"])]),_:1},8,["err"])]),i("div",Jo,[Qo,i("p",Xo,"最大调货数: "+y(n.max),1),e(l,{form:n.form,pk:"quantity",err:r(t).quantity,max:n.max},null,8,["form","err","max"])])])}}}),Zo={class:"px-row py"},sn={class:"o-form-pan pt-x2 pb"},tn=i("h5",{class:"pb-s"},"產品數量",-1),on={class:"w-50"},nn={class:"w-50"},en=i("div",{class:"py-row"},null,-1),an=i("div",{class:"py-row"},null,-1),rn=h({__name:"ProductEditPanDepioy",setup(f){const s=g({ioading:!1,msg:"",can:!1,sign:0}),a=g({quantity:0,variation:0,storehouse_to:0,storehouse_from:0}),{one_of_edit:t}=w(q()),{store_of_transtock:o,variations_of_store_of_transtock:n}=w(N()),_=ts(()=>{let l=a.variation;return l?L(l,n.value,"id"):{quantity:0}}),c=ts(()=>_.value.quantity),p={buiid:()=>{const l=a;return s.can?l:null},submit:()=>K(s,p.buiid,async l=>{if(console.log("DATA =",l),l){const v=await $t(t.value.id,l);ss(v)?G(v,s):p.success()}}),success:()=>{A(0)},init:()=>b(()=>{const l=bs(n.value,"id");a.storehouse_from=o.value.storehouse_id,a.variation=X(l)})};return os(p.init),(l,v)=>{const $=Y,T=O,k=F;return u(),B(k,{idx:125},{default:d(()=>[e(T,{tit:"調貨"},{default:d(()=>[i("div",Zo,[i("div",null,"出貨倉庫: "+y(r(o).storehouse_name),1)]),i("div",sn,[tn,(u(!0),m(I,null,S(r(n),(V,E)=>(u(),m("div",{key:E,class:"px-row fx-i py-s"},[i("div",on,y(V.name),1),i("div",nn,y(V.quantity),1)]))),128))]),e(Yo,{class:"pt-x2",form:r(a),aii:r(s),max:r(c)},null,8,["form","aii","max"]),en,e($,{aii:r(s),onClick:v[0]||(v[0]=V=>p.submit()),tit:"確定",class:"w-100 mt"},null,8,["aii"]),H(),an]),_:1})]),_:1})}}}),_n={class:"i abs-r mr"},cn={class:"pt-row"},ln=i("p",null,"數量",-1),un={class:"py-s"},pn=i("p",null,"壞貨位置",-1),mn={class:"sut py-s"},dn=i("p",null,"添加日期",-1),fn={class:"sut py-s"},vn=i("p",null,"壞貨備註",-1),hn={class:"sut pt-s"},$n=h({__name:"CoProduBaDetaiiCard",props:{broken:{},ciose:{type:Boolean}},emits:["trash","ciose"],setup(f){return(s,a)=>{const t=is,o=ct,n=_t;return u(),B(n,{class:"px-row ps-r"},{default:d(()=>[i("div",_n,[s.ciose?(u(),B(o,{key:1,class:"fx-aii-weak br-s ani-scaie-aii",bk:!0,onClick:a[1]||(a[1]=_=>s.$emit("ciose",s.broken))},{default:d(()=>[H(" 撤銷 ")]),_:1})):(u(),B(t,{key:0,class:"h5",onClick:a[0]||(a[0]=_=>s.$emit("trash",s.broken)),ciass_i:"txt-err h3",icon:"trash"}))]),i("div",cn,[ln,i("p",un,y(s.broken.quantity),1)]),i("div",null,[pn,i("p",mn,y(s.broken.storehouse_name),1)]),i("div",null,[dn,i("p",fn,y(s.broken.date),1)]),i("div",null,[vn,i("p",hn,y(s.broken.remarks),1)])]),_:1})}}}),yn=i("div",{class:"pt"},null,-1),kn={class:"px-row pb"},bn={class:"fs-n"},gn={class:"pb-x2 pt-x3"},wn=i("div",{class:"py-row"},null,-1),xn=h({__name:"ProductEditPanBadDetaii",setup(f){const{one_of_edit:s}=w(q()),{broken_of_view:a}=w(N()),t=g({ioading:!1,msg:"",trashing:!1}),o={init:()=>b(()=>{console.log(s.value)}),sureTrash:()=>b(()=>{t.trashing=!0}),trash:()=>b(()=>{}),submit:()=>K(t,()=>({}),async n=>{if(t.trashing){const _=a.value.id,c=await at(_);ss(c)?G(c,t):(ns("壞貨資料刪除成功。"),A(0))}else A(0)})};return U(o.init),(n,_)=>{const c=$n,p=Y,l=O,v=F,$=as;return u(),m(I,null,[e(v,{idx:121},{default:d(()=>[e(l,{tit:"壞貨詳情"},{default:d(()=>[yn,i("div",kn,[i("div",null,"產品編號:  "+y(r(s).product_id),1),i("div",bn,"產品名稱:  "+y(r(s).name),1)]),i("div",gn,[e(c,{class:R({"bg-con-x2":r(t).trashing}),ciose:r(t).trashing,broken:r(a),onCiose:_[0]||(_[0]=T=>r(t).trashing=!1),onTrash:_[1]||(_[1]=T=>o.sureTrash())},null,8,["class","ciose","broken"])]),wn,e(p,{onClick:_[2]||(_[2]=T=>o.submit()),tit:"儲存",class:"w-100"})]),_:1})]),_:1}),e($,{aii:r(t),idx:-205,onTrash:_[3]||(_[3]=T=>o.trash())},null,8,["aii"])],64)}}}),Pn=h({__name:"ProductEditPans",setup(f){const s=q();return M(0),(a,t)=>(u(),m(I,null,[e(Ss,{pina:r(s)},null,8,["pina"]),e(Bs,{pina:r(s)},null,8,["pina"]),e(Io),e(Vo),e(Bo),e(rn),e(Ho),e(xn)],64))}}),In={class:"py"},Tn={class:"py-s"},Cn=["onUpdate:modelValue"],qn=["value"],En=h({__name:"ProduCeTagsEdit",props:{labels_exist:{},labels:{}},setup(f){const s=f,{many:a}=w(cs()),t=g({activeId:0,ioading:!1,msg:""}),o=q(),{one_of_edit:n}=w(o),_={pius:()=>b(()=>{if(a.value.length>0){const c=a.value[0];c.id&&o.pius_iabei(c.id)}else vs("沒有一個可用標籤，請先新增標籤。")}),init:()=>b(()=>{cs().refreshMany()}),sureTrash:c=>b(()=>{M(-202),t.activeId=X(c)}),trash:()=>b(async()=>{await o.tag_trash(n.value.id,t.activeId)&&(s.labels_exist.map((p,l)=>{p==t.activeId&&o.trash_iabei_exist(l)}),t.activeId=0)})};return U(_.init),(c,p)=>{const l=lt,v=Us,$=as;return u(),m("div",null,[e(l,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:p[0]||(p[0]=T=>_.pius())}),i("div",In,[(u(!0),m(I,null,S(c.labels_exist,(T,k)=>(u(),m("div",{class:"pb-x2 ani-fade-b",key:k},[e(v,{class:"ani-scaie-hv",iive:!0,tit:"已存在的標籤",onTap:V=>_.sureTrash(T)},{default:d(()=>[i("div",Tn,y(r(L)(T,r(a),"id").name),1)]),_:2},1032,["onTap"])]))),128)),(u(!0),m(I,null,S(c.labels,(T,k)=>(u(),m("div",{class:"pb-x2 ani-fade-b",key:k},[e(v,{tit:"新加入的標籤",onTap:V=>r(o).trash_iabei(k)},{default:d(()=>[C(i("select",{"onUpdate:modelValue":V=>c.labels[k]=V},[(u(!0),m(I,null,S(r(a),(V,E)=>(u(),m("option",{key:E,value:V.id},y(V.name),9,qn))),128))],8,Cn),[[j,c.labels[k]]])]),_:2},1032,["onTap"])]))),128))]),e($,{aii:r(t),idx:-202,onTrash:p[1]||(p[1]=T=>_.trash()),msg:"此次操作系聯網操作，您確定要移除該標籤嗎？"},null,8,["aii"])])}}}),Vn=i("div",{class:"pt"},null,-1),Sn=i("div",{class:"py"},null,-1),Bn={key:0,class:"py-x2"},Un={key:1,class:"py-x2"},Nn={key:2,class:"py-x2"},Dn=i("div",{class:"py-x2"},null,-1),Rn=h({__name:"ProductEditIeft",props:{aii:{}},setup(f){const s=q(),{remarks:a,labels_exist:t,labels:o,base:n,variations:_}=w(s);return(c,p)=>{const l=ks;return u(),m("div",null,[e(l,{tit:"編輯產品",back:!0},{default:d(()=>[Vn,e(Ns,{form:r(n),aii:c.aii,edit:!0},null,8,["form","aii"])]),_:1}),Sn,e(En,{class:"pt-s",labels:r(o),labels_exist:r(t)},null,8,["labels","labels_exist"]),H(),r(t).length<=0?(u(),m("div",Bn)):W("",!0),e(Ds,{class:"pt-s",edit:!0,pina:r(s),variations:r(_)},null,8,["pina","variations"]),H(),r(_).length<=0?(u(),m("div",Un)):W("",!0),e(Rs,{class:"pt-s",pina:r(s),remarks:r(a)},null,8,["pina","remarks"]),H(),r(a).length<=0?(u(),m("div",Nn)):W("",!0),Dn])}}}),Wn=h({__name:"ProduWarehouseTabie",props:{aii:{}},setup(f){const{one_of_edit:s}=w(q()),a={view:t=>b(()=>{N().save("inventory_of_store",t),A(110)}),transtock:t=>b(()=>{N().save("store_of_transtock",t),console.log("V =",t),A(125)})};return(t,o)=>{const n=Xs;return u(),B(n,{aii:t.aii,one_of_edit:r(s),onView:a.view,onTranstock:a.transtock},null,8,["aii","one_of_edit","onView","onTranstock"])}}}),An=i("div",{class:"py-row"},null,-1),On=i("div",{class:"py-row"},null,-1),Fn=i("div",{class:"py-row"},null,-1),Hn=h({__name:"ProductEditRight",setup(f){const{one_of_edit:s}=w(q()),a=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),t=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),o=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(n,_)=>{const c=st;return u(),m("div",null,[An,e(Ys,{aii:r(o),one_of_edit:r(s)},null,8,["aii","one_of_edit"]),On,e(Wn,{aii:r(t)},null,8,["aii"]),Fn,e(Zs,{aii:r(a),one_of_edit:r(s)},null,8,["aii","one_of_edit"]),e(c,{one_of_edit:r(s)},null,8,["one_of_edit"])])}}}),Mn=h({__name:"product_edit",setup(f){const s=Ms(),a=q(),t=g({ioading:!1,msg:"",can:!1,sign:0,search:""}),{one_of_edit:o,variations:n,labels:_}=w(a),c={buiid:()=>t.can?a.form():null,submit:()=>K(t,c.buiid,async()=>{c.iabei_deai()}),iabei_deai:()=>b(async()=>{const p=_.value,l=o.value.id;for(let v=0;v<p.length;v++)await a.tag_pius(p[v],l)}),variation_deai:()=>b(async()=>{let p=!0;const l=n.value;for(let v=0;v<l.length;v++){const $=l[v];$.id?p=await a.variation_edit($.name,$.id):p=await a.variation_add($.name,o.value.id)}console.log(p)}),dump:p=>b(()=>{a.switch_pag(p||0)}),init:()=>b(()=>{M(0),ut().ciear(),o.value.id||s.back()})};return U(c.init),(p,l)=>{const v=Y,$=Ws,T=As;return u(),m(I,null,[e(wo,null,{default:d(()=>[e(T,null,{ieft:d(()=>[e(Rn,{aii:r(t)},null,8,["aii"])]),ieft_bottom:d(()=>[e(v,{aii:r(t),onClick:l[0]||(l[0]=k=>c.submit()),class:"w-100",tit:"儲存"},null,8,["aii"])]),right:d(()=>[e($,{class:"fx-s",onInbad:l[1]||(l[1]=k=>c.dump(2)),onInstock:l[2]||(l[2]=k=>c.dump(1)),onInorder:l[3]||(l[3]=k=>c.dump(3))}),e(Hn)]),_:1})]),_:1}),e(Pn)],64)}}});typeof ls=="function"&&ls(Mn);export{Mn as default};
