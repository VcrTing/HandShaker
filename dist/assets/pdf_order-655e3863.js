import{_ as O}from"./MBtn.vue_vue_type_script_setup_true_lang-14a11c45.js";import{o as _,c as i,a as s,d as l,k as b,w as a,b as c,i as u,u as H,g as B,r as w,t as d,y as T,p as m,F as k,q as x,z as S,m as g,f as V,n as E,l as L}from"./index-d00a0842.js";import{_ as N}from"./scroiiy-87da1fc8.js";import{_ as q}from"./Oi.vue_vue_type_script_setup_true_lang-695c6322.js";import{m as P,v as M}from"./view-01767316.js";import{s as z}from"./strapi-c10e9858.js";import{v as $}from"./vai_order-7a27cec4.js";import{f as F}from"./credit-e00f98ff.js";import{b as C}from"./route-block-83d24a4e.js";import"./XMarkIcon-92ba689a.js";import"./iodash-8a8cb9b0.js";function I(p,o){return _(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})])}const R=l({__name:"CubPdfPrinter",setup(p){const o={printed:()=>{console.log("打印訂單")}};return(r,t)=>{const e=O;return _(),b(e,{onClick:t[0]||(t[0]=n=>o.printed()),bk:!0,class:"wh-1em-x2 bg-con cir hand fx-aii-weak",ciass:"fx-c"},{default:a(()=>[c(u(I),{class:"i"})]),_:1})}}}),A=l({__name:"CubGoBack",setup(p){const o=H(),r={back:()=>{console.log("返回"),o.back()}};return(t,e)=>{const n=q,f=O;return _(),b(f,{onClick:e[0]||(e[0]=h=>r.back()),bk:!0,ciass:"fx-c",class:"wh-1em-x2 bg-con cir hand fx-aii-weak"},{default:a(()=>[c(n,{class:"i",icon:"arrow-ieft"})]),_:1})}}}),G={class:"iayout-pdf ps-r"},K={class:"abs-t i-0 py ps-f-imp"},j={class:"pt"},D={class:"abs-b r-0 py ps-f-imp"},J=l({__name:"IayoutPdf",props:{submitting:{type:Boolean},ioading:{type:Boolean}},setup(p){const o=B({ioading:!1,msg:""}),r={printed:()=>{o.ioading||(o.ioading=!0,window.print(),setTimeout(()=>o.ioading=!1,400))}};return(t,e)=>{const n=A,f=N,h=R;return _(),i("div",G,[s("section",K,[c(n,{class:"ttd h5"})]),s("div",j,[c(f,{class:"w-100"},{default:a(()=>[w(t.$slots,"default")]),_:3})]),s("section",D,[c(h,{onClick:e[0]||(e[0]=v=>r.printed()),class:"h2"})])])}}}),W={class:""},Q=s("div",{class:"pdf-hr"},null,-1),U={class:"pt-pdf-x2 fx-r"},X=s("h5",{class:"pr-pdf n"},"統計金額:",-1),Y=l({__name:"CoOpTotai",props:{one:{}},setup(p){return(o,r)=>(_(),i("div",W,[Q,s("div",U,[X,s("h3",null,"HK "+d(u(P)(o.one.total_price)),1)])]))}}),Z={class:"px-pdf"},ss=s("h2",{class:"pb-pdf"},"付款",-1),os={class:"fx-s"},ts=s("p",null,"產品",-1),es={class:"w-50 fx-r"},ns=s("p",{class:"sus"},"數量",-1),cs={class:"mw-7em ta-r b"},_s=S('<div class="fx-s"><p>支付方式</p> <div class="w-50 fx-r"><p class="sus">現金支付</p><p class="mw-7em ta-r b">1500.0</p></div></div><div class="fx-s"><div></div><div class="w-50 fx-r"><p class="sus">微信支付</p><p class="mw-7em ta-r b">300.0</p></div></div><div class="fx-s"><div></div><div class="w-50 fx-r"><p class="sus">支付寶支付</p><p class="mw-7em ta-r b">200.0</p></div></div>',3),rs={class:""},is={class:"fx-s fx-t"},as=s("p",null,"優惠類別",-1),ds={key:0,class:"w-50"},ps={class:"sus"},ls={class:"mw-7em ta-r b"},us={key:1},fs=l({__name:"CoOpPrice",props:{one:{}},setup(p){const o=p,r=T((t=0)=>((o.one.ordered_product?o.one.ordered_product:[]).map(n=>{t+=n.quantity}),t));return(t,e)=>(_(),i("div",Z,[ss,s("div",null,[s("div",os,[ts,m(),s("div",es,[ns,s("p",cs,d(u(r)),1)])]),_s]),s("div",rs,[s("div",is,[as,t.one.discount?(_(),i("div",ds,[(_(!0),i(k,null,x(t.one.discount,(n,f)=>(_(),i("div",{class:"fx-r",key:f},[s("p",ps,d(n.type),1),s("p",ls," -"+d(n.discount_deduction),1)]))),128))])):(_(),i("div",us))])])]))}}),ms={class:"pdf-bd br px-pdf py-pdf"},y=l({__name:"CoBdWrapper",setup(p){return(o,r)=>(_(),i("div",ms,[w(o.$slots,"default")]))}}),hs=s("p",{class:"b fs-s-pdf"},"帳單展示備註 :",-1),vs=["innerHTML"],$s=l({__name:"CoOpRemark",props:{one:{}},setup(p){const o=p,r=T((t="")=>((o.one.ordered_product?o.one.ordered_product:[]).map(n=>{t+="<div>",(n.product?z.data(n.product):{}).remarks.map(v=>{t=t+v.content+" "}),t+="</div>"}),t));return(t,e)=>{const n=y;return _(),i("div",null,[c(n,null,{default:a(()=>[hs,s("div",{class:"fs-s-pdf",innerHTML:u(r)},null,8,vs)]),_:1})])}}}),bs={class:"pi-pdf-s"},ws=s("h4",null,"產品",-1),ks={class:"fx-s"},xs={class:"w-30"},ys={class:"b"},gs={class:"sus fs-s-pdf"},Cs={class:"w-17 fs-s-pdf sus"},Os={class:"d-ib"},Bs={class:"w-19 fs-s-pdf sus"},Ts={class:"w-18 fs-s-pdf sus"},Ps={class:"w-16 b"},Hs=l({__name:"CoOpProds",props:{one:{}},setup(p){return(o,r)=>{const t=y;return _(),i("div",null,[c(t,null,{default:a(()=>[s("div",bs,[ws,(_(!0),i(k,null,x(o.one.ordered_product,(e,n)=>(_(),i("div",{class:"pt-pdf",key:n},[s("div",ks,[s("div",xs,[s("p",ys,d(u($).order_product(e).name),1),s("p",gs,"標籤:  "+d(u($).order_product_variation(e).name),1)]),s("div",Cs,[m("附加:  "),s("div",Os,"- "+d(e.discount_deduction),1)]),s("div",Bs,"單價: "+d(e.selling_price),1),s("div",Ts,"數量: "+d(e.quantity),1),s("div",Ps,"金額: "+d(u(P)(e.total_price)),1)])]))),128))])]),_:1})])}}}),Ss={class:"fx-s"},Vs=l({__name:"CoOpTitV",props:{tit:{},tit_ciass:{},v_ciass:{}},setup(p){return(o,r)=>(_(),i("div",Ss,[s("p",{class:g(o.tit_ciass)},d(o.tit),3),s("p",{class:g(["b ta-r",o.v_ciass])},[w(o.$slots,"default")],2)]))}}),Es={class:"fx-s"},Ls={class:"fx-1"},Ns=s("div",{class:"w-1em"},null,-1),qs={class:"fx-1"},Ms=l({__name:"CoOpMsg",props:{one:{}},setup(p){return(o,r)=>{const t=Vs,e=y;return _(),i("div",Es,[s("div",Ls,[c(e,{class:"px-pdf"},{default:a(()=>[c(t,{tit:"日期",v_ciass:"mw-6em ta-i"},{default:a(()=>[m(d(u(M)(o.one.order_date)),1)]),_:1}),c(t,{tit:"訂單編號",v_ciass:"mw-6em ta-i"},{default:a(()=>[m(d(o.one.order_id),1)]),_:1}),c(t,{tit:"會員名稱",v_ciass:"mw-6em ta-i"},{default:a(()=>[m(d(u($).member(o.one,"普通會員")),1)]),_:1}),c(t,{tit:"收銀員",v_ciass:"mw-6em ta-i"},{default:a(()=>[m(d(u($).cashier(o.one)),1)]),_:1})]),_:1})]),Ns,s("div",qs,[c(e,{class:"px-pdf"},{default:a(()=>[c(t,{tit:"店鋪電話"},{default:a(()=>[m("9786 9898")]),_:1}),c(t,{tit:"Facebook"},{default:a(()=>[m("Hello Ketty")]),_:1}),c(t,{tit:"店鋪地址"},{default:a(()=>[m(" 店鋪 ")]),_:1}),c(t,{tit:""},{default:a(()=>[m(" ")]),_:1})]),_:1})])])}}}),zs={class:"bg-con pdf-wrapper co-order-pdf"},Fs=s("div",{class:"fx-s"},[s("h2",null,"銷售數據SALE RECEIPT"),s("h2",null,"LOGO")],-1),Is=l({__name:"CoOrderPdf",props:{one:{}},setup(p){return(o,r)=>{const t=Ms,e=Hs,n=$s,f=fs,h=Y;return _(),i("div",zs,[Fs,c(t,{one:o.one,class:"pt-pdf-x2"},null,8,["one"]),c(e,{one:o.one,class:"pt-pdf-x2"},null,8,["one"]),c(n,{one:o.one,class:"pt-pdf-x2"},null,8,["one"]),c(f,{one:o.one,class:"pt-pdf-x2"},null,8,["one"]),c(h,{one:o.one,class:"pt-1em"},null,8,["one"])])}}}),Rs=s("div",{class:"py-x3"},[s("br"),s("br"),s("br")],-1),As=l({__name:"pdf_order",setup(p){const o=V({}),r=B({many:[]}),t={spiite_order:()=>{},init:()=>F(()=>{const e=sessionStorage.getItem("heiiokitty_order_of_printed");if(e){const n=JSON.parse(e);n&&n.id&&(o.value=n)}}),effect:()=>{const e=o.value;e&&e.id&&(r.many.length=0,(e.ordered_product?e.ordered_product:[]).length>5&&console.log("啟用分頁"),r.many.push(e)),console.log(r.many)}};return E(t.init),L(t.effect),(e,n)=>{const f=J;return _(),b(f,null,{default:a(()=>[(_(!0),i(k,null,x(u(r).many,(h,v)=>(_(),i("div",{class:"fx-c",key:v},[c(Is,{one:h},null,8,["one"])]))),128)),Rs]),_:1})}}});typeof C=="function"&&C(As);export{As as default};
