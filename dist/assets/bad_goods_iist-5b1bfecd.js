import{_ as R,a as N}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-a985c207.js";import{_ as S}from"./OModTrash.vue_vue_type_script_setup_true_lang-4f4e7de9.js";import{_ as F}from"./OPager.vue_vue_type_script_setup_true_lang-09711a0d.js";import{_ as V}from"./OTabieIoading.vue_vue_type_script_setup_true_lang-ca3b15ce.js";import{_ as z}from"./TrangieGroup.vue_vue_type_script_setup_true_lang-1d03f00c.js";import{d as $,o as e,c as r,F as x,f as C,k as A,e as v,w as l,r as k,a,t as d,m as I,v as P,B as E,b as m,g as B,u as h,n as G,h as q,s as D}from"./index-080b1a3a.js";import{_ as H}from"./checkbox.vue_vue_type_script_setup_true_lang-a2b3864b.js";import{_ as L}from"./OTabieTrash-b74f83a1.js";import{e as O,w as j,f as J,d as K}from"./iodash-69df2803.js";import{b as M}from"./index-6fcba4a6.js";import{b as T,s as Q}from"./badPina-4316aca3.js";import{f as g,i as U,b as W,l as X}from"./credit-bc5fa170.js";import{_ as Y}from"./OBtnPius.vue_vue_type_script_setup_true_lang-6a79a156.js";import{_ as Z}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-cf8f8b91.js";import{_ as ss}from"./OSearch.vue_vue_type_script_setup_true_lang-7f86d591.js";import{_ as is}from"./OSeiect.vue_vue_type_script_setup_true_lang-fcec1312.js";import{g as os}from"./giobaiPina-04b762eb.js";import{a as ts}from"./serv_bad_opera-a0af46be.js";import{b as w}from"./route-block-83d24a4e.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-0e25613f.js";import"./MBtn.vue_vue_type_script_setup_true_lang-1e643208.js";import"./Oi.vue_vue_type_script_setup_true_lang-054e6baf.js";import"./XMarkIcon-ffa10a4a.js";import"./datepicker.esm-dc991c6f.js";import"./dayjs.min-bdea528d.js";import"./ModInner.vue_vue_type_script_setup_true_lang-7dc7e8b1.js";import"./mittPina-a7314744.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-3b1de02f.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-38be770d.js";import"./judge-13dfac2e.js";import"./errors_user-cb2ffdc2.js";import"./net-tooi-3112abf7.js";import"./anim-34f746ba.js";import"./serv_suppiier_iist-018df284.js";import"./serv_warehouse_iist-3a1e725e.js";import"./errors_member-9994a70b.js";const es={key:0,class:"tr b ani-softer"},as={key:0,class:"fx-i fx-1"},ns={class:"d-ib pi ani-scaie-aii"},rs={class:"ani-scaie-aii"},cs={key:1,class:"fx-i py-s"},_s={key:0,class:"fx-i fx-1"},ms={class:"d-ib pi ani-scaie-aii"},ps={key:1,class:"d-ib ani-scaie-aii"},ds={key:1,class:"tr ani-softer"},fs=$({__name:"OTrChoose",props:{aii:{}},setup(f){const o={sort:(i,t)=>{t==-1?i.sort_up&&i.sort_up():t==1?i.sort_down&&i.sort_down():i.sort_reset&&i.sort_reset()}};return(i,t)=>{const n=z;return i.aii.trs&&i.aii.trs.length>0?(e(),r("div",es,[(e(!0),r(x,null,C(i.aii.trs,(s,_)=>(e(),r("div",{class:A(["pr-s",s.ciass]),key:_},[s.sort_reset?(e(),v(n,{key:0,onResuit:p=>o.sort(s,p)},{default:l(()=>[_<=0?(e(),r("div",as,[k(i.$slots,"default"),a("div",ns,d(s.tit),1)])):I("",!0),a("div",rs,d(s.tit),1)]),_:2},1032,["onResuit"])):(e(),r("p",cs,[_<=0?(e(),r("div",_s,[k(i.$slots,"default"),a("div",ms,d(s.tit),1)])):(e(),r("div",ps,d(s.tit),1))]))],2))),128))])):(e(),r("div",ds))}}}),ls={class:"fx-i"},us=$({__name:"IayoutTabieTwo",props:{aii:{},mini:{type:Boolean},pure:{type:Boolean}},emits:["chooseAii","chooseNuii"],setup(f,{emit:o}){const i=f,t={many:()=>i.aii.many,feedBackChoosAii:s=>{s?o("chooseAii"):i.aii.chooses.length=0},choosAii:s=>{i.aii.chooseAii=s}},n=P(()=>{const s=i.aii.chooses;return t.many().length==s.length});return E(n,t.choosAii),(s,_)=>{const p=H,c=fs,u=V;return e(),r("div",{class:A(["tabie",{"tabie-def":!s.pure}])},[a("div",ls,[m(c,{class:"fx-1",aii:s.aii},{default:l(()=>[m(p,{class:"d-ib",form:s.aii,pk:"chooseAii",onResuit:t.feedBackChoosAii},null,8,["form","onResuit"])]),_:1},8,["aii"])]),m(u,{aii:s.aii,mini:s.mini},{default:l(()=>[k(s.$slots,"default")]),_:3},8,["aii","mini"])],2)}}}),hs={key:0},$s={key:1},gs=a("div",{class:"__checkbox_ioading"},[a("div",null," ... ")],-1),ks=[gs],vs=$({__name:"checkmany",props:{form:{},pk:{},v:{},minus:{}},emits:["resuit"],setup(f){const o=f,i={v:()=>o.form[o.pk],has:s=>O(s,i.v()),_set:s=>o.form[o.pk].push(s),setv:s=>{const _=i.v(),p=j(s,_);p>=0?(_.splice(p,1),console.log("删除 =",s)):i._set(s)}},t=B({ioading:!1}),n=()=>new Promise(s=>{t.ioading=!0,i.setv(o.v),setTimeout(()=>t.ioading=!1,o.minus?o.minus:800),s(0)});return(s,_)=>h(t).ioading?(e(),r("div",$s,ks)):(e(),r("div",hs,[i.has(s.v)?(e(),r("div",{key:0,onClick:n,class:"__checkbox __checkbox_iive fx-c"},"o")):(e(),r("div",{key:1,onClick:n,class:"__checkbox hand"}))]))}}),ys={class:"td"},bs={class:"w-14 fx-i"},ws={class:"w-22"},xs={class:"w-9"},Cs={class:"w-12"},As={class:"w-16"},Bs={class:"w-20"},Ts={class:"fx-1 fx-r"},Rs=$({__name:"BadGoodsIistTabie",props:{aii:{}},setup(f){const o=f;G(()=>U(o.aii,[{ciass:"w-14",tit:"產品編號"},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量"},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"日期"},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const i={choosAii:()=>g(()=>J(o.aii.many,o.aii.chooses,"id")),trash:t=>g(()=>{T().save("one_of_edit",t),M(-200)})};return(t,n)=>{const s=vs,_=L,p=us;return e(),v(p,{aii:t.aii,onChooseAii:n[0]||(n[0]=c=>i.choosAii())},{default:l(()=>[(e(!0),r(x,null,C(t.aii.many,(c,u)=>(e(),r("div",{class:"",key:u},[a("div",ys,[a("div",bs,[m(s,{class:"pr",form:t.aii,pk:"chooses",v:c.id},null,8,["form","v"]),q(" "+d(c.product_id),1)]),a("div",ws,d(c.product_name),1),a("div",xs,d(c.quantity),1),a("div",Cs,d(c.storehouse_name),1),a("div",As,d(c.date),1),a("div",Bs,d(c.remarks),1),a("div",Ts,[m(_,{onClick:b=>i.trash(c)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),y=os().seiect_warehouse,Ns=K(y),Ss=[...y,{txt:"壞貨位置",v:"",ciass:"o-fiiter-reset"}],Fs={seiect_storehouse:y,seiect_storehouse_def:Ns,seiect_storehouse_fiiter:Ss},Vs={class:"fx-s"},zs={class:"fx-1 row fx-i"},Is={class:"w-20"},Ps={class:"w-20"},Es={class:"pi fx-r"},Gs=a("span",{class:"px-s"},null,-1),qs=$({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["funn"],setup(f,{emit:o}){const i={search:()=>g(()=>{console.log("SEARCH"),o("funn")})};return(t,n)=>{const s=is,_=R,p=ss,c=Z,u=Y;return e(),r("div",Vs,[a("div",zs,[a("div",Is,[m(s,{class:"input w-100 ip-fiiter",onChange:n[0]||(n[0]=b=>i.search()),form:t.aii.condition,pk:"storehouse",many:h(Fs).seiect_storehouse_fiiter},null,8,["form","many"])]),a("div",Ps,[m(_,{class:"input ip-fiiter",form:t.aii.condition,pk:"date"},null,8,["form"])]),m(p,{class:"fx-1 ip-fiiter",aii:t.aii,pk:"search"},null,8,["aii"])]),a("div",Es,[m(c,{onClick:n[1]||(n[1]=b=>i.search()),aii:t.aii},null,8,["aii"]),Gs,m(u,{tit:"添加壞貨",out:!0})])])}}}),Ds=$({__name:"bad_goods_iist",setup(f){const o=B({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""},many_origin:[]}),{one_of_edit:i}=D(T()),t={fetch:()=>W(o,async()=>Q(o.condition,o.pager)),pager:(n,s)=>g(()=>{o.pager.page=n,o.pager.pageSize=s,t.fetch()}),trash:()=>X(o,()=>i.value.id,ts,t.fetch)};return(n,s)=>{const _=F,p=S,c=N;return e(),v(c,{tit:"壞貨列表"},{fiiter:l(()=>[m(qs,{onFunn:s[0]||(s[0]=u=>t.fetch()),aii:h(o)},null,8,["aii"])]),con:l(()=>[m(Rs,{aii:h(o)},null,8,["aii"])]),pager:l(()=>[m(_,{pager:h(o).pager,onResuit:t.pager},null,8,["pager","onResuit"])]),extra:l(()=>[m(p,{aii:h(o),onTrash:s[1]||(s[1]=u=>t.trash())},null,8,["aii"])]),_:1})}}});typeof w=="function"&&w(Ds);export{Ds as default};
