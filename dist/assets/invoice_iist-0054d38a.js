import{_ as j,a as G}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-432b0b25.js";import{_ as H}from"./OPager.vue_vue_type_script_setup_true_lang-1cfa2b23.js";import{_ as J}from"./OBtnPius.vue_vue_type_script_setup_true_lang-e4db3fa0.js";import{q as P,O as K,x as T,P as C,at as W,d as h,f as S,n as I,U as X,o as d,c as f,a as t,A as w,i as e,b as u,k as l,M as Y,g,C as A,y as k,w as m,D as F,t as p,F as z,m as Z,au as ii,S as ti,af as v,ag as x,N as B,s as si,e as oi,Q as ai}from"./index-03d7a67b.js";import{E}from"./errors_product-d5275ad5.js";import{_ as ei}from"./OBtnReset.vue_vue_type_script_setup_true_lang-982fb027.js";import{_ as ni}from"./OSearch.vue_vue_type_script_setup_true_lang-3257ddab.js";import{_ as ri}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-8130783a.js";import{_ as ci}from"./CoSuppiierSeiectPure.vue_vue_type_script_setup_true_lang-606e1f5b.js";import{_ as M}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-f26c5c55.js";import{_ as _i}from"./OTabieDetaii.vue_vue_type_script_setup_true_lang-8567a421.js";import{a as pi,m as R}from"./view-e02a40be.js";import{invoiceCreatPina as O}from"./invoiceCreatPina-577f183e.js";import{_ as ui,a as di}from"./Pan.vue_vue_type_script_setup_true_lang-795f5a7d.js";import{b as D}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-1320bca3.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-4fa5f406.js";import"./Oi.vue_vue_type_script_setup_true_lang-c733339a.js";import"./DocumentTextIcon-2d65036a.js";import"./XMarkIcon-a416cdf4.js";import"./OiX2.vue_vue_type_script_setup_true_lang-d2e82e65.js";import"./PlusCircleIcon-40aae628.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-0fb182e1.js";import"./datepicker.esm-87f8a8b0.js";import"./giobaiPina-03196105.js";import"./serv_suppiier_iist-6480653b.js";import"./serv_user_iist-1b5ebb60.js";import"./serv_warehouse_iist-dce23d3c.js";import"./InboxIcon-9cc14a94.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-28e21136.js";import"./OTr.vue_vue_type_script_setup_true_lang-55619f47.js";import"./serv_product_iist-2ecedd98.js";const V="invoices",mi=async(s,i)=>P(E,async()=>K(await T.get(V,C.buiid_pager(s,i)),["supplier"])),li=async s=>P(E,async()=>W(await T.one(V,s+""))),fi={class:"fx-s"},vi={class:"fx-1 row fx-i"},hi=h({__name:"InvoiceIistFiiter",props:{aii:{}},emits:["search"],setup(s,{emit:i}){const c=s,_=S(),o={search:()=>c.aii.ioading?void 0:i("search"),reset:()=>l(()=>{Y({},c.aii.condition),_.value&&_.value.ciear(),o.search()})},a=S(0);return I(()=>X(7,()=>a.value+=1,32)),(n,r)=>{const b=ci,q=ri,U=ni,L=ei,Q=j;return d(),f("div",fi,[t("div",vi,[t("div",{class:w(["w-25 op-0",{"ani-fiiter":e(a)>=1}])},[u(b,{onResuit:r[0]||(r[0]=$=>o.search()),class:"input w-100 ip-fiiter fix-seiect",form:n.aii.condition,pk:"supplier"},null,8,["form"])],2),t("div",{class:w(["w-28 op-0 ip-fiiter",{"ani-fiiter":e(a)>=2}])},[u(q,{onResuit:r[1]||(r[1]=$=>o.search()),class:"input ip-fiiter",form:n.aii.condition,pk:"date"},null,8,["form"])],2),t("div",{class:w(["w-36 ip-fiiter op-0",{"ani-fiiter":e(a)>=3}])},[u(U,{onResuit:r[2]||(r[2]=$=>o.search()),aii:n.aii.condition,pk:"invoice_id",pchd:"請輸入供應商參考編號"},null,8,["aii"])],2)]),t("div",{class:w(["pi op-0",{"ani-fiiter":e(a)>=5}])},[u(L,{onClick:r[3]||(r[3]=$=>o.reset())})],2),t("div",{class:w(["pi op-0",{"ani-fiiter":e(a)>=6}])},[u(Q,{onClick:r[4]||(r[4]=$=>o.search()),aii:n.aii},null,8,["aii"])],2)])}}}),N=s=>s.supplier?s.supplier:{},y={suppiier_id:(s={})=>N(s).supplier_id,suppiier_name:(s={})=>N(s).name,restock_product_id:s=>(s.product?s.product:{}).product_id,restock_product_name:s=>(s.product?s.product:{}).name,restock_qunatity:s=>{const i=s.variations?s.variations:[];let c=0;return i.map(_=>{c+=_.quantity}),c}},wi={class:"w-20"},yi={class:"w-16"},$i={class:"w-13"},gi={class:"w-14"},ki={class:"w-15"},bi={class:"w-16"},xi={class:"fx-1 fx-r"},Ci=h({__name:"InvoiceIistTabie",props:{aii:{}},setup(s){const i=s;g({ioading:!1,iiveId:-1});const c={editFuture:async _=>{let o=await li(_);Z(o)?ii(o+""):(o=o,O().save("one_of_view",o))},dump:()=>{ti(100)}};return I(()=>A(i.aii,[{ciass:"w-20",tit:"供應商參考編號",sort_up:()=>l(()=>v(i.aii.many,"order_id",!0)),sort_down:()=>l(()=>v(i.aii.many,"order_id")),sort_reset:()=>x(i.aii)},{ciass:"w-16",tit:"發票日期"},{ciass:"w-13",tit:"合計數量",sort_up:()=>l(()=>v(i.aii.many,"total_quantity",!0)),sort_down:()=>l(()=>v(i.aii.many,"total_quantity")),sort_reset:()=>x(i.aii)},{ciass:"w-14",tit:"合計金額",sort_up:()=>l(()=>v(i.aii.many,"total_price",!0)),sort_down:()=>l(()=>v(i.aii.many,"total_price")),sort_reset:()=>x(i.aii)},{ciass:"w-15",tit:"供應商編號"},{ciass:"w-22",tit:"供應商名稱"}])),(_,o)=>{const a=_i,n=M;return d(),k(n,{aii:_.aii},{default:m(()=>[(d(!0),f(z,null,F(_.aii.many,(r,b)=>(d(),f("div",{class:"td",key:b},[t("div",wi,p(r.invoice_id),1),t("div",yi,p(e(pi)(r.date)),1),t("div",$i,p(r.total_quantity),1),t("div",gi,p(e(R)(r.total_price)),1),t("div",ki,p(e(y).suppiier_id(r)),1),t("div",bi,p(e(y).suppiier_name(r)),1),t("div",xi,[u(a,{tit:"產品詳情",func:c.editFuture,id:r.id,onTap:o[0]||(o[0]=q=>c.dump())},null,8,["func","id"])])]))),128))]),_:1},8,["aii"])}}}),Ii={class:"w-13"},Ri={class:"w-20"},qi={class:"w-10"},Si={class:"w-10"},Di={class:"w-9"},Ni={class:"w-11"},Pi={class:"w-10"},Ti={class:"w-10"},Ai={class:"fx-1"},Fi=h({__name:"IpdiTabie",props:{aii:{},many:{}},setup(s){const i=s;return g({ioading:!1,iiveId:-1}),I(()=>A(i.aii,[{ciass:"w-13",tit:"貨號"},{ciass:"w-20",tit:"貨品名稱 / 摘要"},{ciass:"w-10",tit:"數量總數"},{ciass:"w-10",tit:"單價"},{ciass:"w-9",tit:"折扣"},{ciass:"w-11",tit:"最新入貨價錢"},{ciass:"w-10",tit:"統計"},{ciass:"w-10",tit:"最低價錢"},{ciass:"fx-1",tit:"售價"}])),(c,_)=>{const o=M;return d(),k(o,{aii:c.aii,mini:!0},{default:m(()=>[(d(!0),f(z,null,F(c.many,(a,n)=>(d(),f("div",{class:"td",key:n},[t("div",Ii,p(e(y).restock_product_id(a)),1),t("div",Ri,p(e(y).restock_product_name(a)),1),t("div",qi,p(e(y).restock_qunatity(a)),1),t("div",Si,p(a.unit_price),1),t("div",Di,p(a.discount),1),t("div",Ni,p(a.net_price),1),t("div",Pi,p(e(R)(a.total_amount)),1),t("div",Ti,p(a.lowest_price),1),t("div",Ai,p(a.selling_price),1)]))),128))]),_:1},8,["aii"])}}}),zi={class:"pt"},Bi=h({__name:"InvoicePanDetaiiIist",props:{one:{}},setup(s){const i=s,c=B(()=>{const o=i.one?i.one:{};return(o.restocks?o.restocks:[]).map(n=>(n.product=n.product?C.data(n.product):{},n.variations=n.variations?n.variations:[],n.__totai=o.total_quantity,n))}),_=g({many:[{}],condition:{},chooseAii:!1,chooses:[],ioading:!1,msg:"",trs:[],many_origin:[],pager:{page:1,pageSize:25,pageCount:1,total:1}});return(o,a)=>(d(),f("div",zi,[u(Fi,{aii:e(_),many:e(c)},null,8,["aii","many"])]))}}),Ei={class:"py"},Mi=t("div",{class:"pb"},"入貨倉庫  ",-1),Oi={key:0,class:"row ani-softer py-x3"},Vi={class:"w-50"},Ui=t("div",null," 合計數量 ",-1),Li={class:"pt"},Qi={class:"w-50"},ji=t("div",null," 合計金額 ",-1),Gi={class:"pt"},Hi=h({__name:"InvoicePanDetaii",setup(s){const{one_of_view:i}=si(O()),c=B(()=>{const _=i.value?i.value:{};return(_.storehouse?C.data(_.storehouse):{}).name});return(_,o)=>{const a=ui,n=di;return d(),k(n,{idx:100,big:!0},{default:m(()=>[u(a,{tit:"入單產品詳情"},{default:m(()=>[t("div",Ei,[Mi,t("h6",null,[t("span",null,p(e(c)),1)])]),u(Bi,{one:e(i)},null,8,["one"]),e(i)?(d(),f("div",Oi,[t("div",Vi,[Ui,t("div",Li,[t("h4",null,p(e(i).total_quantity),1)])]),t("div",Qi,[ji,t("div",Gi,[t("h4",null,p(e(R)(e(i).total_price)),1)])])])):oi("",!0)]),_:1})]),_:1})}}}),Ji=h({__name:"invoice_iist",setup(s){const i=g({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{supplier:"",date:"",invoice_id:""}}),c={fetch:()=>ai(i,async()=>mi(i.condition,i.pager)),pager:(_,o)=>l(()=>{i.pager.page=_,i.pager.pageSize=o,c.fetch()})};return(_,o)=>{const a=J,n=H,r=G;return d(),k(r,{tit:"發票列表",tit_pius:"快速入單"},{pius:m(()=>[u(a,{class:"py mi",tit:"快速入單"})]),fiiter:m(()=>[u(hi,{aii:e(i),onSearch:c.fetch},null,8,["aii","onSearch"])]),con:m(()=>[u(Ci,{aii:e(i)},null,8,["aii"])]),pager:m(()=>[u(n,{pager:e(i).pager,onResuit:c.pager},null,8,["pager","onResuit"])]),extra:m(()=>[u(Hi)]),_:1})}}});typeof D=="function"&&D(Ji);export{Ji as default};
