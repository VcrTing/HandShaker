import{_ as Ss,a as Bs,b as Ns,c as Us,d as Os,e as Ds,f as Rs,g as Ws,s as Hs}from"./serv_product_opera-0838e0af.js";import{_ as Z}from"./OBtnSave.vue_vue_type_script_setup_true_lang-8a40c524.js";import{_ as Ms}from"./scroiiy-48a1ba25.js";import{_ as As,o as l,c as m,q as us,v as ls,x as ps,d as h,C as S,y as B,w as d,b as o,a as e,t as b,F as T,s as g,g as y,h as x,z as ns,Y as Fs,i as r,k,aj as F,X as Q,ak as rs,r as is,a6 as j,ae as P,G as V,H as A,V as ms,n as R,D as ds,e as U,a7 as ss,a1 as js,T as fs,M as vs,$ as O,P as ts,A as Y,p as W,al as hs,W as zs,f as $s,j as z,m as G,l as K,a2 as X,U as D,B as J,u as Gs}from"./index-58be21f4.js";import{pageProducEditPina as C}from"./pageProducEditPina-0d655bac.js";import{_ as Ks}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-9a7af155.js";import{E as bs}from"./errors_product-174667b5.js";import{_ as Ls}from"./BtnTab.vue_vue_type_script_setup_true_lang-18842781.js";import{_ as ys}from"./IayoutForm.vue_vue_type_script_setup_true_lang-1d7903a2.js";import{a as ks}from"./view-e60ea4f1.js";import{_ as L}from"./OInput.vue_vue_type_script_setup_true_lang-13237ba1.js";import{_ as ws}from"./Dropdown.vue_vue_type_script_setup_true_lang-c630732b.js";import{_ as Xs}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-4c72bd1e.js";import{_ as Ys}from"./Oi.vue_vue_type_script_setup_true_lang-2d7b1b07.js";import{_ as os}from"./BtnIcon.vue_vue_type_script_setup_true_lang-40e0a81d.js";import{g as gs}from"./giobaiPina-21d1b1a4.js";import{_ as xs}from"./OInputI.vue_vue_type_script_setup_true_lang-e923aa79.js";import{_ as Ps}from"./OTime.vue_vue_type_script_setup_true_lang-dcf5f796.js";import{a as Js,_ as es}from"./OTabieTrash-2770de37.js";import{_ as as}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-0e9b74a2.js";import{a as Qs,_ as Zs}from"./ProduNewInstockTabie.vue_vue_type_script_setup_true_lang-c9148680.js";import{_ as st,a as Is}from"./CoWarehouseSeiectPure.vue_vue_type_script_setup_true_lang-7242f72b.js";import{_ as tt}from"./OTabieEdit.vue_vue_type_script_setup_true_lang-36df3b8c.js";import{_ as H,a as M}from"./Pan.vue_vue_type_script_setup_true_lang-70375a82.js";import{pageProductInstockPina as N}from"./pageProductInstockPina-8c07047c.js";import{b as nt}from"./product_trs-754059ff.js";import{a as Ts,_ as it}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-6ed38951.js";import{s as ot,a as et}from"./serv_bad_opera-9c5f1283.js";import{_ as at}from"./CoWarehouseSeiect.vue_vue_type_script_setup_true_lang-f8d62e8d.js";import{_ as rt}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-39816b07.js";import{_ as _t}from"./MBtn.vue_vue_type_script_setup_true_lang-263b8d55.js";import{i as _s,_ as ct}from"./iabeiPina-ffc8cb31.js";import{b as ut,_ as lt,a as pt}from"./ProduInstockTabie.vue_vue_type_script_setup_true_lang-1d254c8f.js";import{pageProductPina as mt}from"./pageProductPina-aea8f27e.js";import{b as cs}from"./route-block-83d24a4e.js";import"./BtnPriOut.vue_vue_type_script_setup_true_lang-b940f807.js";import"./OBtnPius.vue_vue_type_script_setup_true_lang-6e46e525.js";import"./BtnTrash.vue_vue_type_script_setup_true_lang-380a9197.js";import"./XMarkIcon-a69dc881.js";import"./Cardmsg.vue_vue_type_script_setup_true_lang-7b47d319.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-9d33160d.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-db83fd06.js";import"./serv_iabei_with_product-514961dd.js";import"./utii-d6b9125a.js";import"./serv_product_iist-b54e8916.js";import"./serv_variation_with_product-6c914ea7.js";import"./BtnIconX2.vue_vue_type_script_setup_true_lang-376db38c.js";import"./OiX2.vue_vue_type_script_setup_true_lang-7bea667e.js";import"./ChevronRightIcon-c1006973.js";import"./ArrowLongRightIcon-4a88d898.js";import"./serv_iabei_iist-f7c5d0cf.js";import"./serv_suppiier_iist-feef36de.js";import"./serv_user_iist-ed5a175f.js";import"./serv_warehouse_iist-2114e8b4.js";import"./datepicker.esm-fcae9165.js";import"./ModInner.vue_vue_type_script_setup_true_lang-d1f6f7e1.js";import"./OTr.vue_vue_type_script_setup_true_lang-9b4a4f7c.js";import"./choiseOnePina-bb16117e.js";import"./OTrPure.vue_vue_type_script_setup_true_lang-21f28af4.js";const dt={};function ft(f,s){return l(),m("div",null," IN BAD ")}const vt=As(dt,[["render",ft]]),ht="instock",$t="transfstock",bt=async f=>us(bs,async()=>ls(await ps.pos(ht,f))),yt=async(f,s)=>us(bs,async()=>ls(await ps.put($t,s,f+""))),kt={class:"mw-4em"},wt={class:"pi-s"},gt=h({__name:"CoSsItem",props:{many:{},aii:{},pk:{}},emits:["switchWH"],setup(f){return(s,a)=>{const t=Ys,i=Xs;return l(!0),m(T,null,S(s.many,(n,_)=>(l(),B(i,{onClick:c=>s.$emit("switchWH",n),iive:s.aii.pk==n.id,class:"fx-i",aii:s.aii,key:_},{default:d(()=>[o(t,{class:"i h5 mr-s",icon:"ioc"}),e("div",kt,b(n.name),1),e("div",wt,"(負責人: "+b(n.contact_person)+")",1)]),_:2},1032,["onClick","iive","aii"]))),128)}}}),xt={class:"ps-r"},Pt=["value"],It={class:"middie r-0 pr-row pi-s ani-softer"},Tt=h({__name:"CoSuppiierSeiect",props:{form:{},pk:{}},setup(f){const s=f,{suppiiers:a}=g(gs()),t=y({search:"",ioading:!1,nowId:0}),i={many:()=>a.value,v:()=>{if(s.pk&&s.form)return s.form[s.pk]},setV:n=>{s.pk&&s.form&&(s.form[s.pk]=n)},search:()=>k(()=>{}),view:()=>{const n=F(t.nowId,a.value,"id");return n.id?n.name+"  (負責人: "+n.contact_person+")":""},switchWh:n=>k(()=>{t.ioading=!0,t.nowId=n.id,i.setV(n.id),setTimeout(()=>{t.ioading=!1},400)})};return x(i.v,n=>{n&&n!==t.nowId&&(t.nowId=Q(n))}),ns(()=>{let n=i.v();const _=Q(n);_&&_!=t.nowId&&(t.nowId=_)}),(n,_)=>{const c=os,p=gt,u=ws;return l(),m("div",null,[o(u,{class:"w-100",fuii:!0},{sign:d(()=>[e("div",xt,[e("input",{class:"w-100",onKeydown:_[0]||(_[0]=Fs(v=>i.search(),["enter"])),value:i.view(),placeholder:"請選擇"},null,40,Pt),e("div",It,[o(c,{class:"ani-scaie-aii",onClick:_[1]||(_[1]=v=>i.search()),icon:"down"})])])]),con:d(()=>[o(p,{aii:r(t),pk:"nowId",many:r(a),onSwitchWH:i.switchWh},null,8,["aii","many","onSwitchWH"])]),_:1})])}}}),Ct={class:"o-hour-minus ps-r bg-con zi-x3"},qt=e("div",{class:"fx-s abs-t i-0 r-0 bg-con"},[e("div",{class:"w-382 pi pb-x1 sus"},"時"),e("div",{class:"w-618 pi pb-x1 sus"},"分")],-1),Et={class:"fx-s fx-t"},Vt={class:"o-hours w-382 pt-s"},St=e("button",null,"0",-1),Bt=["onClick"],Nt={class:"o-minus w-618 pt-s"},Ut=e("button",null,"0",-1),Ot=["onClick"],Dt=h({__name:"OHours",props:{form:{},pk_hours:{},pk_minus:{}},setup(f){const s=f,a=y({hours:rs(24),minus:rs(60)}),t={v_minus:()=>s.form[s.pk_minus],v_hour:()=>s.form[s.pk_hours],v:()=>t.v_hour()+":"+t.v_minus(),setv_minus:i=>{s.form[s.pk_minus]=i},setv_hour:i=>{s.form[s.pk_hours]=i}};return(i,n)=>{const _=ws;return l(),B(_,null,{sign:d(()=>[is(i.$slots,"default")]),con:d(()=>[e("div",Ct,[qt,e("div",Et,[e("div",Vt,[St,(l(!0),m(T,null,S(r(a).hours,(c,p)=>(l(),m("div",{class:"pi br br-i-0 fx-aii-weak ani-scaie-fcs hand",onClick:u=>t.setv_hour(c),key:p},b(c),9,Bt))),128))]),e("div",Nt,[Ut,(l(!0),m(T,null,S(r(a).minus,(c,p)=>(l(),m("div",{class:"py-t pi br br-r-0 fx-aii-weak ani-scaie-fcs hand",onClick:u=>t.setv_minus(c),key:p},b(c),9,Ot))),128))])])])]),_:3})}}}),Rt={class:"row"},Wt={class:"w-333"},Ht={class:"w-333"},Mt=["value"],At={class:"w-333"},Ft=e("div",{class:"py-s"},null,-1),jt=h({__name:"PiisBase",props:{form:{},aii:{}},setup(f){const s=f,a=["restock_date","hour","supplier"],t=y(j(s.form));return x(()=>s.aii.sign,()=>{a.map(i=>{if(P(t,i,s.form[i],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),x(()=>s.form.restock_date,i=>P(t,"restock_date",i,s.aii)),x(()=>s.form.hour,i=>P(t,"hour",i,s.aii)),x(()=>s.form.supplier,i=>P(t,"supplier",i,s.aii)),(i,n)=>{const _=Ps,c=xs,p=Dt,u=Tt,v=L;return l(),m("div",null,[e("div",Rt,[e("div",Wt,[o(c,{icon:"date",err:r(t).restock_date,tit:"入貨日期"},{default:d(()=>[o(_,{form:i.form,pk:"restock_date"},null,8,["form"])]),_:1},8,["err"])]),e("div",Ht,[o(c,{icon:"time",err:r(t).hour,tit:"入貨時間"},{default:d(()=>[o(p,{form:i.form,pk_hours:"hour",pk_minus:"minus"},{default:d(()=>[e("input",{value:r(ks)(i.form.hour,i.form.minus)},null,8,Mt)]),_:1},8,["form"])]),_:1},8,["err"])]),e("div",At,[o(v,{err:r(t).supplier,tit:"供應商"},{default:d(()=>[o(u,{form:i.form,pk:"supplier"},null,8,["form"])]),_:1},8,["err"])])]),Ft])}}}),zt={class:"row"},Gt={class:"w-333"},Kt={class:"w-333"},Lt={class:"w-333"},Xt=h({__name:"PiisPrice",props:{form:{},aii:{}},setup(f){const s=f,a=["restock_price","lowest_price","selling_price"],t=y(j(s.form));return x(()=>s.aii.sign,()=>{a.map(i=>{if(P(t,i,s.form[i],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),x(()=>s.form.restock_price,i=>P(t,"restock_price",i,s.aii)),x(()=>s.form.lowest_price,i=>P(t,"lowest_price",i,s.aii)),x(()=>s.form.selling_price,i=>P(t,"selling_price",i,s.aii)),(i,n)=>{const _=L;return l(),m("div",zt,[e("div",Gt,[o(_,{err:r(t).restock_price,tit:"入貨價錢"},{default:d(()=>[V(e("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=c=>i.form.restock_price=c),placeholder:"請輸入"},null,512),[[A,i.form.restock_price]])]),_:1},8,["err"])]),e("div",Kt,[o(_,{err:r(t).lowest_price,tit:"最低價錢"},{default:d(()=>[V(e("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=c=>i.form.lowest_price=c),placeholder:"請輸入"},null,512),[[A,i.form.lowest_price]])]),_:1},8,["err"])]),e("div",Lt,[o(_,{err:r(t).selling_price,tit:"售價"},{default:d(()=>[V(e("input",{type:"number","onUpdate:modelValue":n[2]||(n[2]=c=>i.form.selling_price=c),placeholder:"請輸入"},null,512),[[A,i.form.selling_price]])]),_:1},8,["err"])])])}}}),Yt=h({__name:"CoWarehouseText",props:{v:{}},setup(f){const s=f,a=()=>{const t=F(s.v,gs().warehouses,"id");return t.id?t.name+"  (負責人: "+t.contact_person+")":"未選擇倉庫"};return(t,i)=>(l(),m("div",null,b(a()),1))}}),Jt=h({__name:"CoVariationsText",props:{v:{},many:{}},setup(f){const s=f,a=()=>{const t=F(s.v,s.many,"id");return t.id?t.name:"未選擇倉庫"};return(t,i)=>(l(),m("div",null,b(a()),1))}}),Qt={key:0,class:"td"},Zt={class:"fx-1 fx-s"},sn={key:0,class:"fx-r"},tn={key:1,class:"td"},nn={class:"w-30"},on=["onUpdate:modelValue"],en=["value"],an={class:"w-30"},rn={class:"fx-1 fx-s"},_n=["onUpdate:modelValue"],cn={class:"pi fx-r"},Cs=h({__name:"PsiTd",props:{aii:{},funn:{},kiii_option:{type:Boolean}},setup(f){const s=f,{product_variations:a}=g(C());return a.value.length<=0&&ms("該產品無可用標籤！！！"),R(()=>ds(s.aii,[{ciass:"w-30",tit:"樣式名稱"},{ciass:"w-30",tit:"入貨位置"},{ciass:"fx-1",tit:"入貨數量"}])),(t,i)=>{const n=Jt,_=Yt,c=tt,p=Js,u=st,v=Is,w=Qs,I=os;return l(!0),m(T,null,S(t.aii.many,($,E)=>(l(),m("div",{key:E},[$.edit?(l(),m("div",tn,[e("div",nn,[o(u,null,{default:d(()=>[V(e("select",{"onUpdate:modelValue":q=>$.variation=q},[(l(!0),m(T,null,S(r(a),(q,Vs)=>(l(),m("option",{key:Vs,value:q.id},b(q.name),9,en))),128))],8,on),[[ss,$.variation]])]),_:2},1024)]),e("div",an,[o(u,null,{default:d(()=>[o(v,{form:$,pk:"storehouse"},null,8,["form"])]),_:2},1024)]),e("div",rn,[o(u,{class:"fx-1"},{default:d(()=>[V(e("input",{type:"number","onUpdate:modelValue":q=>$.quantity=q,placeholder:"請輸入"},null,8,_n),[[A,$.quantity]])]),_:2},1024),e("div",cn,[o(w,{class:"pr",tit:"儲存",onClick:q=>$.edit=!1},null,8,["onClick"]),e("div",null,[o(I,{icon:"x",onClick:q=>t.funn.cancei($)},null,8,["onClick"])])])])])):(l(),m("div",Qt,[o(n,{class:"w-30",many:r(a),v:$.variation},null,8,["many","v"]),o(_,{class:"w-30",v:$.storehouse},null,8,["v"]),e("div",Zt,[e("div",null,b($.quantity),1),t.kiii_option?U("",!0):(l(),m("div",sn,[o(c,{onClick:q=>t.funn.edit($),class:"mr-s txt-pri"},null,8,["onClick"]),o(p,{onClick:q=>t.funn.sureTrash(E)},null,8,["onClick"])]))])]))]))),128)}}}),un=h({__name:"PiisStyieInventoryTabie",props:{aii:{}},emits:["sureTrash"],setup(f,{emit:s}){const a=f,t=y({origin:{},trashIdx:0}),i={edit:n=>k(()=>{n.edit=!0,t.origin[n.id+""]=fs(n)}),cancei:n=>k(()=>{const _=t.origin[n.id+""];_?(_.edit=!1,vs(_,n)):n.edit=!1}),sureTrash:n=>k(()=>{t.trashIdx=n,s("sureTrash",n),O(-201)}),trash:()=>js(a.aii,()=>{a.aii.many.splice(t.trashIdx,1),O(0)})};return(n,_)=>{const c=as,p=es;return l(),m(T,null,[o(c,{aii:n.aii,mini:!0},{default:d(()=>[o(Cs,{aii:n.aii,funn:i},null,8,["aii"])]),_:1},8,["aii"]),o(p,{idx:-201,aii:n.aii,onTrash:i.trash},null,8,["aii","onTrash"])],64)}}}),ln={key:0,class:"abs-b ps-f-imp r-0 w-36 w-50-p py"},pn=h({__name:"ProduInvInStockInner",props:{aii:{}},setup(f,{expose:s}){const a=f,t=y({restock_date:"",hour:0,minus:0,supplier:""}),i=y({restock_price:"",lowest_price:"",selling_price:""}),n=y({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[],ani:0}),{one_of_edit:_}=g(C()),c=ts(()=>{const u=_.value;return u.variations?u.variations:[]}),p={buiid:()=>{const u={...t,...i,restock_distribute:p.fiiter()};return u.restock_date=t.restock_date+" "+ks(t.hour,t.minus,!0),u.product=_.value.id,a.aii.can&&u.restock_distribute.length<=0?(W("您沒有添加任何樣式的庫存數據!!!",a.aii),null):a.aii.can?u:null},fiiter:(u=[])=>(n.many.map(v=>{let w=!0;v.storehouse&&v.quantity?v.edit=!1:w=!1,w&&u.push(v)}),u),pius:()=>k(()=>{p.fiiter().length==n.many.length&&n.many.push(p.GEN_ONE())}),GEN_ONE:()=>fs({idx:n.many.length,variation:hs(c.value,"id"),storehouse:0,quantity:null,edit:!0,ioading:!1})};return s(p),R(()=>zs(4,()=>n.ani+=1)),(u,v)=>{const w=ys,I=Ls;return l(),m("div",null,[o(w,{tit:"時間及供應商",class:Y(["pb-x3 op-0",{"ani-page":r(n).ani>=0}])},{default:d(()=>[o(jt,{form:r(t),aii:u.aii},null,8,["form","aii"])]),_:1},8,["class"]),o(w,{tit:"價錢",class:Y(["pt pb-x3 op-0",{"ani-page":r(n).ani>=1}])},{default:d(()=>[o(Xt,{form:r(i),aii:u.aii},null,8,["form","aii"])]),_:1},8,["class"]),o(w,{tit:"樣式及庫存分配數量",class:Y(["pt-x2 pb-x3 op-0",{"ani-page":r(n).ani>=2}])},{default:d(()=>[o(un,{aii:r(n)},null,8,["aii"])]),_:1},8,["class"]),e("div",null,[o(I,{onClick:v[0]||(v[0]=$=>p.pius()),class:"w-100 py-s ani-scaie-aii",tit:"添加樣式"})]),r(n).ani>=3?(l(),m("section",ln,[is(u.$slots,"default")])):U("",!0)])}}}),mn=e("h3",{class:"py-x3 mb"},"添加入貨信息(僅加貨)",-1),dn=h({__name:"ProduInvInStock",setup(f){const s=$s(),{pag:a,one_of_edit:t}=g(C()),i=y({ioading:!1,msg:"",can:!1,sign:0}),n={submit:()=>z(i,s.value.buiid,async _=>{if(_){const c=await bt(_);G(c)?W(c,i):n.success()}}),success:()=>k(async()=>{K("產品入貨成功！！！"),await C().refreshOneOfEdit(),n.back()}),back:()=>k(()=>{a.value=0}),init:()=>k(()=>{t.value.id||(a.value=0)})};return R(n.init),(_,c)=>{const p=Ks;return l(),m("section",null,[mn,o(pn,{aii:r(i),ref_key:"inner",ref:s,onSubmit:n.submit},{default:d(()=>[o(p,{aii:r(i),ciass:"w-100",tit_save:"儲存",onBack:c[0]||(c[0]=u=>n.back()),onSave:c[1]||(c[1]=u=>n.submit())},null,8,["aii"])]),_:1},8,["aii","onSubmit"])])}}}),fn=h({__name:"ProduInvInOrder",setup(f){return(s,a)=>(l(),m("div",null," IN ORDER "))}}),vn={class:"ps-r"},hn={key:0,class:"prod-pag-wrapper abs-t i-0 r-0 b-0 bg-con zi-x2 ani-softer"},$n=h({__name:"ProductPagWrapper",setup(f){const{pag:s}=g(C());s.value=0;const a=$s(!1);return x(s,t=>t==0?a.value=!1:a.value=!0),(t,i)=>{const n=Ms;return l(),m("div",vn,[e("div",null,[is(t.$slots,"default")]),r(a)?(l(),m("div",hn,[V(o(n,{class:"h-iayout h-iayout-max"},{default:d(()=>[V(o(dn,null,null,512),[[X,r(s)==1]]),V(o(vt,null,null,512),[[X,r(s)==2]]),V(o(fn,null,null,512),[[X,r(s)==3]])]),_:1},512),[[X,r(s)>0]])])):U("",!0)])}}}),bn={class:"pb-x3"},qs=h({__name:"PeppTabie",setup(f){const s=y({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[]}),{inventory_and_variation_of_view:a}=g(N()),t={edit:()=>{},cancei:()=>{},sureTrash:()=>{},effect:()=>{a.value.map((i,n)=>{i.idx=n,s.many.push(i)})}};return ns(t.effect),(i,n)=>{const _=as;return l(),m("div",bn,[o(_,{aii:r(s),mini:!0},{default:d(()=>[o(Cs,{aii:r(s),funn:t,kiii_option:!0},null,8,["aii"])]),_:1},8,["aii"])])}}}),yn=e("h5",{class:"py-x2"},"樣式及庫存分配數量",-1),kn=h({__name:"ProductEditPanPriview",setup(f){return(s,a)=>{const t=H,i=M;return l(),B(i,{idx:112,big:!0},{default:d(()=>[o(t,{tit:"檢視 / 編輯"},{default:d(()=>[yn,o(qs)]),_:1})]),_:1})}}}),wn={class:"w-50"},gn={class:"w-50"},Es=h({__name:"PepiTabie",setup(f){const s=y({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),{variations_of_inventory_of_store:a}=g(N());return R(()=>ds(s,nt)),(t,i)=>{const n=as;return l(),B(n,{aii:r(s),mini:!0},{default:d(()=>[(l(!0),m(T,null,S(r(a),(_,c)=>(l(),m("div",{class:"td",key:c},[e("div",wn,b(_.name),1),e("div",gn,b(_.quantity),1)]))),128))]),_:1},8,["aii"])}}}),xn=e("h5",{class:"py-x2"},"樣式",-1),Pn=e("h5",{class:"py-x2"},"倉庫",-1),In=h({__name:"ProductEditPanInstock",setup(f){return(s,a)=>{const t=H,i=M;return l(),B(i,{idx:111,big:!0},{default:d(()=>[o(t,{tit:"入貨詳情"},{default:d(()=>[xn,o(qs),Pn,o(Es)]),_:1})]),_:1})}}}),Tn={class:"py-x2"},Cn=h({__name:"ProductEditPanInventory",setup(f){const{inventory_of_store:s}=g(N());return(a,t)=>{const i=H,n=M;return l(),B(n,{idx:110,big:!0},{default:d(()=>[o(i,{tit:"庫存詳情"},{default:d(()=>[e("h5",Tn,b(r(s).storehouse_name),1),o(Es)]),_:1})]),_:1})}}}),qn={class:"pb-x2"},En=e("div",{class:"py b"},"壞貨數量",-1),Vn={class:"o-form"},Sn=h({__name:"PepbForm",props:{form:{},aii:{}},setup(f){const s=f,a=["quantity","storehouse_id","date"],t=y(j(s.form));return x(()=>s.aii.sign,(i=!0)=>{a.map(n=>{P(t,n,s.form[n],s.aii)&&(s.aii.can=!1,i=!1)}),s.aii.can=i}),x(()=>s.form.date,i=>P(t,"date",i,s.aii)),x(()=>s.form.quantity,i=>P(t,"quantity",i,s.aii)),x(()=>s.form.storehouse_id,i=>P(t,"storehouse_id",i,s.aii)),(i,n)=>{const _=Ts,c=Is,p=L,u=Ps,v=xs;return l(),m(T,null,[e("div",qn,[En,o(_,{form:i.form,pk:"quantity",err:r(t).quantity},null,8,["form","err"])]),e("div",Vn,[e("div",null,[o(p,{tit:"壞貨位置",err:r(t).storehouse_id},{default:d(()=>[o(c,{form:i.form,pk:"storehouse_id"},null,8,["form"])]),_:1},8,["err"])]),e("div",null,[o(v,{tit:"添加日期",err:r(t).date,icon:"date"},{default:d(()=>[o(u,{form:i.form,pk:"date",class:"input-timed-for-pan"},null,8,["form"])]),_:1},8,["err"])]),e("div",null,[o(p,{tit:"壞貨備註"},{default:d(()=>[V(e("textarea",{placeholder:"請輸入","onUpdate:modelValue":n[0]||(n[0]=w=>i.aii.remarks=w),rows:"12"},null,512),[[A,i.aii.remarks]])]),_:1})])])],64)}}}),Bn={class:"o-form"},Nn=e("option",{value:""},"-- 請選擇 --",-1),Un=["value"],On=h({__name:"PepbFormStyie",props:{form:{},aii:{}},setup(f){const s=f,a=["variation"],{product_variations:t}=g(C()),i=y(j(s.form));return x(()=>s.aii.sign,(n=!0)=>{a.map(_=>{P(i,_,s.form[_],s.aii)&&(s.aii.can=!1,n=!1)}),s.aii.can=n}),x(()=>s.form.variation,n=>P(i,"variation",n,s.aii)),(n,_)=>{const c=L;return l(),m("div",Bn,[o(c,{tit:"樣式",err:r(i).variation},{default:d(()=>[V(e("select",{"onUpdate:modelValue":_[0]||(_[0]=p=>n.form.variation=p)},[Nn,(l(!0),m(T,null,S(r(t),(p,u)=>(l(),m("option",{key:u,value:p.id},b(p.name),9,Un))),128))],512),[[ss,n.form.variation]])]),_:1},8,["err"])])}}}),Dn=e("div",{class:"py-row"},null,-1),Rn=h({__name:"ProductEditPanBad",setup(f){const{one_of_edit:s}=g(C()),a=y({ioading:!1,msg:"",can:!1,sign:0}),t=y({quantity:0,storehouse_id:null,date:"",remarks:"",variation:"",product_id:""}),i={buiid:()=>(t.product_id=s.value.id,a.can?t:null),submit:()=>z(a,i.buiid,async n=>{if(n){let _=await ot(n);G(_)?W(_,a):i.success()}}),success:()=>k(()=>{K("壞貨資料新增成功。"),D(0),setTimeout(()=>vs({quantity:0},t),400)})};return(n,_)=>{const c=it,p=Z,u=H,v=M;return l(),B(v,{idx:120},{default:d(()=>[o(u,{tit:"壞貨"},{default:d(()=>[o(c,{num:r(s).product_id,named:r(s).name},null,8,["num","named"]),o(On,{class:"pt-x3",form:r(t),aii:r(a)},null,8,["form","aii"]),o(Sn,{form:r(t),aii:r(a)},null,8,["form","aii"]),Dn,o(p,{aii:r(a),onClick:_[0]||(_[0]=w=>i.submit()),tit:"儲存",class:"w-100"},null,8,["aii"])]),_:1})]),_:1})}}}),Wn={class:"o-form"},Hn={class:"o-form-pan"},Mn=e("h5",null,"樣式",-1),An=["value"],Fn={class:"o-form-pan"},jn=e("h5",null,"入貨倉庫",-1),zn={class:"o-form-pan"},Gn=e("h5",null,"調貨數量",-1),Kn={class:"pb-x2"},Ln=h({__name:"PepdFormHouse",props:{form:{},aii:{},max:{}},setup(f){const s=f,a=["variation","storehouse_to","quantity"],t=y(j(s.form)),{product_variations:i}=g(C());return x(()=>s.aii.sign,()=>{let n=!0;a.map(_=>{P(t,_,s.form[_],s.aii)&&(n=!1)}),s.aii.can=n}),x(()=>s.form.variation,n=>P(t,"variation",n,s.aii)),x(()=>s.form.storehouse_to,n=>P(t,"storehouse_to",n,s.aii)),x(()=>s.form.quantity,n=>P(t,"quantity",n,s.aii)),(n,_)=>{const c=L,p=at,u=Ts;return l(),m("div",Wn,[e("div",Hn,[Mn,o(c,{tit:"樣式",err:r(t).variation},{default:d(()=>[V(e("select",{"onUpdate:modelValue":_[0]||(_[0]=v=>n.form.variation=v)},[(l(!0),m(T,null,S(r(i),(v,w)=>(l(),m("option",{key:w,value:v.id},b(v.name),9,An))),128))],512),[[ss,n.form.variation]])]),_:1},8,["err"])]),e("div",Fn,[jn,o(c,{tit:"入貨倉庫",err:r(t).storehouse_to},{default:d(()=>[o(p,{except:n.form.storehouse_from,form:n.form,pk:"storehouse_to"},null,8,["except","form"])]),_:1},8,["err"])]),e("div",zn,[Gn,e("p",Kn,"最大調貨數:  "+b(n.max),1),o(u,{form:n.form,pk:"quantity",err:r(t).quantity,max:n.max},null,8,["form","err","max"])])])}}}),Xn={class:"px-row py"},Yn={class:"o-form-pan pt-x2 pb"},Jn=e("h5",{class:"pb-s"},"產品數量",-1),Qn={class:"w-50"},Zn={class:"w-50"},si=e("div",{class:"py-row"},null,-1),ti=e("div",{class:"py-row"},null,-1),ni=h({__name:"ProductEditPanDepioy",setup(f){const s=y({ioading:!1,msg:"",can:!1,sign:0}),a=y({quantity:0,variation:0,storehouse_to:0,storehouse_from:0}),{one_of_edit:t}=g(C()),{store_of_transtock:i,variations_of_store_of_transtock:n}=g(N()),_=ts(()=>{let u=a.variation;return u?F(u,n.value,"id"):{quantity:0}}),c=ts(()=>_.value.quantity),p={buiid:()=>{const u=a;return a.quantity<=0?(s.can=!1,null):s.can?u:null},submit:()=>z(s,p.buiid,async u=>{if(u){const v=await yt(t.value.id,u);G(v)?W(v,s):p.success()}}),success:()=>k(async()=>{K("產品調貨成功！！！"),await C().refreshOneOfEdit(),D(0)}),init:()=>k(()=>{const u=hs(n.value,"id");a.storehouse_from=i.value.storehouse_id,a.variation=Q(u)})};return ns(p.init),(u,v)=>{const w=Z,I=H,$=M;return l(),B($,{idx:125},{default:d(()=>[o(I,{tit:"調貨"},{default:d(()=>[e("div",Xn,[e("div",null,"出貨倉庫: "+b(r(i).storehouse_name),1)]),e("div",Yn,[Jn,(l(!0),m(T,null,S(r(n),(E,q)=>(l(),m("div",{key:q,class:"px-row fx-i py-s"},[e("div",Qn,b(E.name),1),e("div",Zn,b(E.quantity),1)]))),128))]),o(Ln,{class:"pt-x2",form:r(a),aii:r(s),max:r(c)},null,8,["form","aii","max"]),si,o(w,{aii:r(s),onClick:v[0]||(v[0]=E=>p.submit()),tit:"確定",class:"w-100 mt"},null,8,["aii"]),ti]),_:1})]),_:1})}}}),ii={class:"i abs-r mr"},oi={class:"pt-row"},ei=e("p",null,"數量",-1),ai={class:"py-s"},ri=e("p",null,"壞貨位置",-1),_i={class:"sut py-s"},ci=e("p",null,"添加日期",-1),ui={class:"sut py-s"},li=e("p",null,"壞貨備註",-1),pi={class:"sut pt-s"},mi=h({__name:"CoProduBaDetaiiCard",props:{broken:{},ciose:{type:Boolean}},emits:["trash","ciose"],setup(f){return(s,a)=>{const t=os,i=_t,n=rt;return l(),B(n,{class:"px-row ps-r"},{default:d(()=>[e("div",ii,[s.ciose?(l(),B(i,{key:1,class:"fx-aii-weak br-s ani-scaie-aii",bk:!0,onClick:a[1]||(a[1]=_=>s.$emit("ciose",s.broken))},{default:d(()=>[J(" 撤銷 ")]),_:1})):(l(),B(t,{key:0,class:"h5",onClick:a[0]||(a[0]=_=>s.$emit("trash",s.broken)),ciass_i:"txt-err h3",icon:"trash"}))]),e("div",oi,[ei,e("p",ai,b(s.broken.quantity),1)]),e("div",null,[ri,e("p",_i,b(s.broken.storehouse_name),1)]),e("div",null,[ci,e("p",ui,b(s.broken.date),1)]),e("div",null,[li,e("p",pi,b(s.broken.remarks),1)])]),_:1})}}}),di=e("div",{class:"pt"},null,-1),fi={class:"px-row pb"},vi={class:"fs-n"},hi={class:"pb-x2 pt-x3"},$i=e("div",{class:"py-row"},null,-1),bi=h({__name:"ProductEditPanBadDetaii",setup(f){const{one_of_edit:s}=g(C()),{broken_of_view:a}=g(N()),t=y({ioading:!1,msg:"",trashing:!1}),i={sureTrash:()=>k(()=>{t.trashing=!0}),trash:()=>k(()=>{}),submit:()=>z(t,()=>({}),async n=>{if(t.trashing){const _=a.value.id,c=await et(_);G(c)?W(c,t):(K("壞貨資料刪除成功。"),D(0))}else D(0)})};return(n,_)=>{const c=mi,p=Z,u=H,v=M,w=es;return l(),m(T,null,[o(v,{idx:121},{default:d(()=>[o(u,{tit:"壞貨詳情"},{default:d(()=>[di,e("div",fi,[e("div",null,"產品編號:  "+b(r(s).product_id),1),e("div",vi,"產品名稱:  "+b(r(s).name),1)]),e("div",hi,[o(c,{class:Y({"bg-con-x2":r(t).trashing}),ciose:r(t).trashing,broken:r(a),onCiose:_[0]||(_[0]=I=>r(t).trashing=!1),onTrash:_[1]||(_[1]=I=>i.sureTrash())},null,8,["class","ciose","broken"])]),$i,o(p,{onClick:_[2]||(_[2]=I=>i.submit()),tit:"儲存",class:"w-100"})]),_:1})]),_:1}),o(w,{aii:r(t),idx:-205,onTrash:_[3]||(_[3]=I=>i.trash())},null,8,["aii"])],64)}}}),yi=h({__name:"ProductEditPans",setup(f){const s=C();return O(0),(a,t)=>(l(),m(T,null,[o(Ss,{pina:r(s)},null,8,["pina"]),o(Bs,{pina:r(s)},null,8,["pina"]),o(kn),o(In),o(Cn),o(ni),o(Rn),o(bi)],64))}}),ki={class:"py"},wi={class:"py-s"},gi=["onUpdate:modelValue"],xi=["value"],Pi=h({__name:"ProduCeTagsEdit",props:{labels_exist:{},labels:{}},setup(f){const s=f,{many:a}=g(_s()),t=y({activeId:0,ioading:!1,msg:""}),i=C(),{one_of_edit:n}=g(i),_={pius:()=>k(()=>{if(a.value.length>0){const c=a.value[0];c.id&&i.pius_iabei(c.id)}else ms("沒有一個可用標籤，請先新增標籤。")}),init:()=>k(()=>{_s().refreshMany()}),sureTrash:c=>k(()=>{O(-202),t.activeId=Q(c)}),trash:()=>k(async()=>{await i.tag_trash(n.value.id,t.activeId)&&(s.labels_exist.map((p,u)=>{p==t.activeId&&i.trash_iabei_exist(u)}),t.activeId=0),O(0)})};return R(_.init),(c,p)=>{const u=ct,v=Ns,w=es;return l(),m("div",null,[o(u,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:p[0]||(p[0]=I=>_.pius())}),e("div",ki,[(l(!0),m(T,null,S(c.labels_exist,(I,$)=>(l(),m("div",{class:"pb-x2 ani-fade-b",key:$},[o(v,{class:"ani-scaie-hv",iive:!0,tit:"已存在的標籤",onTap:E=>_.sureTrash(I)},{default:d(()=>[e("div",wi,b(r(F)(I,r(a),"id").name),1)]),_:2},1032,["onTap"])]))),128)),(l(!0),m(T,null,S(c.labels,(I,$)=>(l(),m("div",{class:"pb-x2 ani-fade-b",key:$},[o(v,{tit:"新加入的標籤",onTap:E=>r(i).trash_iabei($)},{default:d(()=>[V(e("select",{"onUpdate:modelValue":E=>c.labels[$]=E},[(l(!0),m(T,null,S(r(a),(E,q)=>(l(),m("option",{key:q,value:E.id},b(E.name),9,xi))),128))],8,gi),[[ss,c.labels[$]]])]),_:2},1032,["onTap"])]))),128))]),o(w,{aii:r(t),idx:-202,onTrash:p[1]||(p[1]=I=>_.trash()),msg:"此次操作系聯網操作，您確定要移除該標籤嗎？"},null,8,["aii"])])}}}),Ii=e("div",{class:"pt"},null,-1),Ti=e("div",{class:"py"},null,-1),Ci={key:0,class:"py-x2"},qi={key:1,class:"py-x2"},Ei={key:2,class:"py-x2"},Vi=e("div",{class:"py-x2"},null,-1),Si=h({__name:"ProductEditIeft",props:{aii:{}},setup(f){const s=C(),{remarks:a,labels_exist:t,labels:i,base:n,variations:_}=g(s);return(c,p)=>{const u=ys;return l(),m("div",null,[o(u,{tit:"編輯產品",back:!0},{default:d(()=>[Ii,o(Us,{form:r(n),aii:c.aii,edit:!0},null,8,["form","aii"])]),_:1}),Ti,o(Pi,{class:"pt-s",labels:r(i),labels_exist:r(t)},null,8,["labels","labels_exist"]),J(),r(t).length<=0?(l(),m("div",Ci)):U("",!0),o(Os,{class:"pt-s",edit:!0,pina:r(s),variations:r(_)},null,8,["pina","variations"]),J(),r(_).length<=0?(l(),m("div",qi)):U("",!0),o(Ds,{class:"pt-s",pina:r(s),remarks:r(a)},null,8,["pina","remarks"]),J(),r(a).length<=0?(l(),m("div",Ei)):U("",!0),Vi])}}}),Bi=h({__name:"ProduWarehouseTabie",props:{aii:{}},setup(f){const{one_of_edit:s}=g(C()),a={view:t=>k(()=>{N().save("inventory_of_store",t),D(110)}),transtock:t=>k(()=>{N().save("store_of_transtock",t),D(125)})};return(t,i)=>{const n=ut;return l(),B(n,{aii:t.aii,one_of_edit:r(s),onView:a.view,onTranstock:a.transtock},null,8,["aii","one_of_edit","onView","onTranstock"])}}}),Ni=e("div",{class:"py-row"},null,-1),Ui=e("div",{class:"py-row"},null,-1),Oi=e("div",{class:"py-row"},null,-1),Di=h({__name:"ProductEditRight",setup(f){const{one_of_edit:s}=g(C()),a=y({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),t=y({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),i=y({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(n,_)=>{const c=pt;return l(),m("div",null,[Ni,o(Zs,{aii:r(i),one_of_edit:r(s),kiii_option:!0},null,8,["aii","one_of_edit"]),Ui,o(Bi,{aii:r(t)},null,8,["aii"]),Oi,o(lt,{aii:r(a),one_of_edit:r(s)},null,8,["aii","one_of_edit"]),o(c,{one_of_edit:r(s)},null,8,["one_of_edit"])])}}}),Ri=h({__name:"product_edit",setup(f){const s=Gs(),a=C(),t=y({ioading:!1,msg:"",can:!1,sign:0,search:""}),{one_of_edit:i,variations:n,labels:_}=g(a),c={buiid:()=>t.can?a.form():null,success:()=>{K("產品修改成功！！！"),a.ciear(),c.dump(0),s.back()},submit:()=>z(t,c.buiid,async p=>{c.iabei_deai(),await c.variation_deai();const u=await Hs(p,i.value.id);G(u)?W(u,t):c.success()}),iabei_deai:()=>k(async()=>{const p=_.value,u=i.value.id;for(let v=0;v<p.length;v++)await a.tag_pius(u,p[v])}),variation_deai:async()=>{const p=n.value;for(let u=0;u<p.length;u++){const v=p[u];v.name&&(v.id?await a.variation_edit(v.name,v.id):await a.variation_add(v.name,i.value.id))}},dump:p=>k(()=>{a.switch_pag(p||0)}),init:()=>k(()=>{O(0),mt().ciear(),i.value.id||s.back()})};return R(c.init),(p,u)=>{const v=Z,w=Rs,I=Ws;return l(),m(T,null,[o($n,null,{default:d(()=>[o(I,null,{ieft:d(()=>[o(Si,{aii:r(t)},null,8,["aii"])]),ieft_bottom:d(()=>[o(v,{aii:r(t),onClick:u[0]||(u[0]=$=>c.submit()),class:"w-100",tit:"儲存"},null,8,["aii"])]),right:d(()=>[o(w,{class:"fx-s",onInbad:u[1]||(u[1]=$=>c.dump(2)),onInstock:u[2]||(u[2]=$=>c.dump(1)),onInorder:u[3]||(u[3]=$=>c.dump(3))}),o(Di)]),_:1})]),_:1}),o(yi)],64)}}});typeof cs=="function"&&cs(Ri);export{Ri as default};
