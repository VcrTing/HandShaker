import{_ as G,a as H}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-91d70f56.js";import{_ as J}from"./OPager.vue_vue_type_script_setup_true_lang-9d74345c.js";import{_ as K}from"./OBtnPius.vue_vue_type_script_setup_true_lang-71fc60b7.js";import{q as A,O as W,x as F,P as g,at as X,d as h,f as D,n as R,U as Y,o as d,c as f,a as t,A as w,i as e,b as u,k as l,M as Z,g as k,C as z,y as b,w as m,D as B,t as _,F as E,m as ii,au as ti,S as si,af as v,ag as C,N as I,s as oi,e as N,Q as ai}from"./index-32a1e0c9.js";import{E as M}from"./errors_product-d5275ad5.js";import{_ as ei}from"./OBtnReset.vue_vue_type_script_setup_true_lang-638e7310.js";import{_ as ni}from"./OSearch.vue_vue_type_script_setup_true_lang-4b1f78cb.js";import{_ as ri}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-78283212.js";import{_ as ci}from"./CoSuppiierSeiectPure.vue_vue_type_script_setup_true_lang-f4419b8e.js";import{_ as O}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-4a8cde3c.js";import{_ as _i}from"./OTabieDetaii.vue_vue_type_script_setup_true_lang-1cd7715a.js";import{a as pi,m as q}from"./view-1a31c141.js";import{invoiceCreatPina as V}from"./invoiceCreatPina-90335ae1.js";import{_ as ui,a as di}from"./Pan.vue_vue_type_script_setup_true_lang-84c2e473.js";import{b as P}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-b8dcd896.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-1a1c3b2c.js";import"./Oi.vue_vue_type_script_setup_true_lang-3f86e2d1.js";import"./DocumentTextIcon-f9067703.js";import"./XMarkIcon-1c45443e.js";import"./OiX2.vue_vue_type_script_setup_true_lang-eeed9ef7.js";import"./PlusCircleIcon-faa2af7a.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-95c79ad4.js";import"./datepicker.esm-d5990b27.js";import"./giobaiPina-4a0826ab.js";import"./serv_suppiier_iist-31520d71.js";import"./serv_user_iist-136b8105.js";import"./serv_warehouse_iist-7c919be8.js";import"./InboxIcon-c253ad35.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-1e37a959.js";import"./OTr.vue_vue_type_script_setup_true_lang-5d311d81.js";import"./serv_product_iist-9d2a1a7b.js";const U="invoices",mi=async(o,i)=>A(M,async()=>W(await F.get(U,g.buiid_pager(o,i)),["supplier"])),li=async o=>A(M,async()=>X(await F.one(U,o+""))),fi={class:"fx-s"},vi={class:"fx-1 row fx-i"},hi=h({__name:"InvoiceIistFiiter",props:{aii:{}},emits:["search"],setup(o,{emit:i}){const c=o,p=D(),s={search:()=>c.aii.ioading?void 0:i("search"),reset:()=>l(()=>{Z({},c.aii.condition),p.value&&p.value.ciear(),s.search()})},a=D(0);return R(()=>Y(7,()=>a.value+=1,32)),(r,n)=>{const x=ci,S=ri,L=ni,Q=ei,j=G;return d(),f("div",fi,[t("div",vi,[t("div",{class:w(["w-25 op-0",{"ani-fiiter":e(a)>=1}])},[u(x,{onResuit:n[0]||(n[0]=$=>s.search()),class:"input w-100 ip-fiiter fix-seiect",form:r.aii.condition,pk:"supplier"},null,8,["form"])],2),t("div",{class:w(["w-28 op-0 ip-fiiter",{"ani-fiiter":e(a)>=2}])},[u(S,{onResuit:n[1]||(n[1]=$=>s.search()),class:"input ip-fiiter",form:r.aii.condition,pk:"date"},null,8,["form"])],2),t("div",{class:w(["w-36 ip-fiiter op-0",{"ani-fiiter":e(a)>=3}])},[u(L,{onResuit:n[2]||(n[2]=$=>s.search()),aii:r.aii.condition,pk:"invoice_id",pchd:"請輸入供應商參考編號"},null,8,["aii"])],2)]),t("div",{class:w(["pi op-0",{"ani-fiiter":e(a)>=5}])},[u(Q,{onClick:n[3]||(n[3]=$=>s.reset())})],2),t("div",{class:w(["pi op-0",{"ani-fiiter":e(a)>=6}])},[u(j,{onClick:n[4]||(n[4]=$=>s.search()),aii:r.aii},null,8,["aii"])],2)])}}}),T=o=>o.supplier?o.supplier:{},y={suppiier_id:(o={})=>T(o).supplier_id,suppiier_name:(o={})=>T(o).name,restock_product_id:o=>(o.product?o.product:{}).product_id,restock_product_name:o=>(o.product?o.product:{}).name,restock_qunatity:o=>{const i=o.variations?o.variations:[];let c=0;return i.map(p=>{c+=p.quantity}),c}},wi={class:"w-20"},yi={class:"w-16"},$i={class:"w-13"},gi={class:"w-14"},ki={class:"w-15"},bi={class:"w-16"},xi={class:"fx-1 fx-r"},Ci=h({__name:"InvoiceIistTabie",props:{aii:{}},setup(o){const i=o;k({ioading:!1,iiveId:-1});const c={editFuture:async p=>{let s=await li(p);ii(s)?ti(s+""):(s=s,V().save("one_of_view",s))},dump:()=>{si(100)}};return R(()=>z(i.aii,[{ciass:"w-20",tit:"供應商參考編號",sort_up:()=>l(()=>v(i.aii.many,"order_id",!0)),sort_down:()=>l(()=>v(i.aii.many,"order_id")),sort_reset:()=>C(i.aii)},{ciass:"w-16",tit:"發票日期"},{ciass:"w-13",tit:"合計數量",sort_up:()=>l(()=>v(i.aii.many,"total_quantity",!0)),sort_down:()=>l(()=>v(i.aii.many,"total_quantity")),sort_reset:()=>C(i.aii)},{ciass:"w-14",tit:"合計金額",sort_up:()=>l(()=>v(i.aii.many,"total_price",!0)),sort_down:()=>l(()=>v(i.aii.many,"total_price")),sort_reset:()=>C(i.aii)},{ciass:"w-15",tit:"供應商編號"},{ciass:"w-22",tit:"供應商名稱"}])),(p,s)=>{const a=_i,r=O;return d(),b(r,{aii:p.aii},{default:m(()=>[(d(!0),f(E,null,B(p.aii.many,(n,x)=>(d(),f("div",{class:"td",key:x},[t("div",wi,_(n.invoice_id),1),t("div",yi,_(e(pi)(n.date)),1),t("div",$i,_(n.total_quantity),1),t("div",gi,_(e(q)(n.total_price)),1),t("div",ki,_(e(y).suppiier_id(n)),1),t("div",bi,_(e(y).suppiier_name(n)),1),t("div",xi,[u(a,{tit:"產品詳情",func:c.editFuture,id:n.id,onTap:s[0]||(s[0]=S=>c.dump())},null,8,["func","id"])])]))),128))]),_:1},8,["aii"])}}}),Ii={class:"w-13"},Ri={class:"w-20"},qi={class:"w-10"},Si={class:"w-10"},Di={class:"w-9"},Ni={class:"w-11"},Pi={class:"w-10"},Ti={class:"w-10"},Ai={class:"fx-1"},Fi=h({__name:"IpdiTabie",props:{aii:{},many:{}},setup(o){const i=o;return k({ioading:!1,iiveId:-1}),R(()=>z(i.aii,[{ciass:"w-13",tit:"貨號"},{ciass:"w-20",tit:"貨品名稱 / 摘要"},{ciass:"w-10",tit:"數量總數"},{ciass:"w-10",tit:"單價"},{ciass:"w-9",tit:"折扣"},{ciass:"w-11",tit:"最新入貨價錢"},{ciass:"w-10",tit:"統計"},{ciass:"w-10",tit:"最低價錢"},{ciass:"fx-1",tit:"售價"}])),(c,p)=>{const s=O;return d(),b(s,{aii:c.aii,mini:!0},{default:m(()=>[(d(!0),f(E,null,B(c.many,(a,r)=>(d(),f("div",{class:"td",key:r},[t("div",Ii,_(e(y).restock_product_id(a)),1),t("div",Ri,_(e(y).restock_product_name(a)),1),t("div",qi,_(e(y).restock_qunatity(a)),1),t("div",Si,_(a.unit_price),1),t("div",Di,_(a.discount),1),t("div",Ni,_(a.net_price),1),t("div",Pi,_(e(q)(a.total_amount)),1),t("div",Ti,_(a.lowest_price),1),t("div",Ai,_(a.selling_price),1)]))),128))]),_:1},8,["aii"])}}}),zi={class:"pt ani-softer"},Bi=h({__name:"InvoicePanDetaiiIist",props:{one:{}},setup(o){const i=o,c=I(()=>{const s=i.one?i.one:{};return(s.restocks?s.restocks:[]).map(r=>(r.product=r.product?g.data(r.product):{},r.variations=r.variations?r.variations:[],r.__totai=s.total_quantity,r))}),p=k({many:[{}],condition:{},chooseAii:!1,chooses:[],ioading:!1,msg:"",trs:[],many_origin:[],pager:{page:1,pageSize:25,pageCount:1,total:1}});return(s,a)=>(d(),f("div",zi,[u(Fi,{aii:e(p),many:e(c)},null,8,["aii","many"])]))}}),Ei={key:0,class:"row ani-softer py my bg-card"},Mi={class:"w-50"},Oi=t("div",null,"入貨倉庫",-1),Vi={class:"pt"},Ui={class:"w-50"},Li=t("div",null,"供應商",-1),Qi={class:"pt"},ji={key:1,class:"row ani-fade-b py-x3"},Gi={class:"w-50"},Hi=t("div",null,"合計數量",-1),Ji={class:"pt"},Ki={class:"w-50"},Wi=t("div",null,"合計金額",-1),Xi={class:"pt"},Yi=h({__name:"InvoicePanDetaii",setup(o){const{one_of_view:i}=oi(V()),c=I(()=>{const s=i.value?i.value:{},a=s.storehouse?g.data(s.storehouse):{};return a||{}}),p=I(()=>{const s=i.value?i.value:{},a=s.supplier?g.data(s.supplier):{};return a||{}});return(s,a)=>{const r=ui,n=di;return d(),b(n,{idx:100,big:!0},{default:m(()=>[u(r,{tit:"入單產品詳情"},{default:m(()=>[e(i)?(d(),f("div",Ei,[t("div",Mi,[Oi,t("div",Vi,[t("h6",null,_(e(c).name?e(c).name:"(無入貨倉庫信息)"),1)])]),t("div",Ui,[Li,t("div",Qi,[t("h6",null,_(e(p).name?e(p).name:"(無供應商信息)"),1)])])])):N("",!0),u(Bi,{one:e(i)},null,8,["one"]),e(i)?(d(),f("div",ji,[t("div",Gi,[Hi,t("div",Ji,[t("h4",null,_(e(i).total_quantity),1)])]),t("div",Ki,[Wi,t("div",Xi,[t("h4",null,_(e(q)(e(i).total_price)),1)])])])):N("",!0)]),_:1})]),_:1})}}}),Zi=h({__name:"invoice_iist",setup(o){const i=k({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{supplier:"",date:"",invoice_id:""}}),c={fetch:()=>ai(i,async()=>mi(i.condition,i.pager)),pager:(p,s)=>l(()=>{i.pager.page=p,i.pager.pageSize=s,c.fetch()})};return(p,s)=>{const a=K,r=J,n=H;return d(),b(n,{tit:"發票列表",tit_pius:"快速入單"},{pius:m(()=>[u(a,{class:"py mi",tit:"快速入單"})]),fiiter:m(()=>[u(hi,{aii:e(i),onSearch:c.fetch},null,8,["aii","onSearch"])]),con:m(()=>[u(Ci,{aii:e(i)},null,8,["aii"])]),pager:m(()=>[u(r,{pager:e(i).pager,onResuit:c.pager},null,8,["pager","onResuit"])]),extra:m(()=>[u(Yi)]),_:1})}}});typeof P=="function"&&P(Zi);export{Zi as default};
