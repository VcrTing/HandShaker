import{_ as Ss,a as Bs,b as Ns,c as Us,d as Os,e as Ds,f as Rs,g as Ws,s as As}from"./serv_product_opera-020b0319.js";import{_ as Z}from"./OBtnSave.vue_vue_type_script_setup_true_lang-19e7a200.js";import{_ as Fs}from"./scroiiy-6582ee09.js";import{_ as Hs,o as u,e as m,d as h,l as S,c as B,w as d,a as i,b as e,t as y,F as T,s as w,g,j as x,h as ns,B as Ms,u as r,r as os,m as V,v as H,k as N,f as O,J as ss,$ as D,A as ts,n as X,p as ls,K as Q,D as R,i as M,q as js}from"./index-ecdfbad0.js";import{pageProducEditPina as C}from"./pageProducEditPina-092e83a7.js";import{_ as zs}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-a7399b90.js";import{n as us}from"./conn-18cb3692.js";import{a as ps,s as ms}from"./net-tooi-4fdf0d83.js";import{E as ds}from"./errors_product-174667b5.js";import{f as k,h as j,k as P,o as fs,i as vs,b as Ks,l as hs,m as W,c as Gs,s as z,t as K}from"./credit-f7bb6a57.js";import{v as G,t as Y,g as rs,d as $s,e as bs,i as J}from"./iodash-8a8cb9b0.js";import{_ as Js}from"./BtnTab.vue_vue_type_script_setup_true_lang-88c6c5a8.js";import{_ as ks}from"./IayoutForm.vue_vue_type_script_setup_true_lang-091a00ae.js";import{a as ys}from"./view-01767316.js";import{_ as L}from"./OInput.vue_vue_type_script_setup_true_lang-c288ee49.js";import{_ as gs}from"./Dropdown.vue_vue_type_script_setup_true_lang-ab302886.js";import{_ as Ls}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-870206ca.js";import{_ as Qs}from"./Oi.vue_vue_type_script_setup_true_lang-3b88d7e5.js";import{_ as is}from"./BtnIcon.vue_vue_type_script_setup_true_lang-0d4b5b7c.js";import{g as ws}from"./giobaiPina-312315c7.js";import{_ as xs}from"./OInputI.vue_vue_type_script_setup_true_lang-834f1076.js";import{_ as Ps}from"./OTime.vue_vue_type_script_setup_true_lang-b87ef999.js";import{_ as Xs,a as es}from"./OTabieTrash-3eed8bbb.js";import{_ as as}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-26e26c6f.js";import{_ as Ys,d as Zs,a as st,b as tt,c as nt}from"./ProduInstockTabie.vue_vue_type_script_setup_true_lang-48928089.js";import{_ as ot,a as Is}from"./OInpuTd.vue_vue_type_script_setup_true_lang-540e87b6.js";import{_ as it}from"./OTabieEdit.vue_vue_type_script_setup_true_lang-c34a2abd.js";import{_ as A,a as F}from"./Pan.vue_vue_type_script_setup_true_lang-2acb7758.js";import{pageProductInstockPina as U}from"./pageProductInstockPina-51f539da.js";import{a as et}from"./product_trs-7e7b39e7.js";import{a as Ts,_ as at}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-5fab2be1.js";import{s as rt,a as _t}from"./serv_bad_opera-26f87718.js";import{_ as ct}from"./CoWarehouseSeiect.vue_vue_type_script_setup_true_lang-bb0576c6.js";import{_ as lt}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-fa099144.js";import{_ as ut}from"./MBtn.vue_vue_type_script_setup_true_lang-06b927df.js";import{i as _s,_ as pt}from"./iabeiPina-b35a9c57.js";import{pageProductPina as mt}from"./pageProductPina-715d6f67.js";import{b as cs}from"./route-block-83d24a4e.js";import"./OOpenPan.vue_vue_type_script_setup_true_lang-0f4f5ba0.js";import"./OBtnPius.vue_vue_type_script_setup_true_lang-1c8cc024.js";import"./XMarkIcon-939f3d4f.js";import"./Cardmsg.vue_vue_type_script_setup_true_lang-e5db0cad.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-ba0560bb.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-7201d6f7.js";import"./serv_iabei_with_product-407a59c0.js";import"./errors_user-be6d0865.js";import"./utii-8cc23e43.js";import"./serv_product_iist-ea3938d5.js";import"./serv_variation_with_product-278cc60c.js";import"./OiX2.vue_vue_type_script_setup_true_lang-5e4de3a9.js";import"./ArrowLongRightIcon-cfc1918c.js";import"./serv_iabei_iist-5c7df8b5.js";import"./serv_suppiier_iist-db2b9a2b.js";import"./serv_user_iist-5dd872af.js";import"./serv_warehouse_iist-4473edb6.js";import"./datepicker.esm-a8e37e1c.js";import"./ModInner.vue_vue_type_script_setup_true_lang-581d88ef.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-9d1327ae.js";import"./OTr.vue_vue_type_script_setup_true_lang-a20664bc.js";import"./OTrPure.vue_vue_type_script_setup_true_lang-f33f39f9.js";import"./choiseOnePina-4da362b2.js";const dt={};function ft(f,s){return u(),m("div",null," IN BAD ")}const vt=Hs(dt,[["render",ft]]),ht="instock",$t="transfstock",bt=async f=>ps(ds,async()=>ms(await us.pos(ht,f))),kt=async(f,s)=>ps(ds,async()=>ms(await us.put($t,s,f+""))),yt={class:"mw-4em"},gt={class:"pi-s"},wt=h({__name:"CoSsItem",props:{many:{},aii:{},pk:{}},emits:["switchWH"],setup(f){return(s,a)=>{const t=Qs,o=Ls;return u(!0),m(T,null,S(s.many,(n,_)=>(u(),B(o,{onClick:c=>s.$emit("switchWH",n),iive:s.aii.pk==n.id,class:"fx-i",aii:s.aii,key:_},{default:d(()=>[i(t,{class:"i h5 mr-s",icon:"ioc"}),e("div",yt,y(n.name),1),e("div",gt,"(負責人: "+y(n.contact_person)+")",1)]),_:2},1032,["onClick","iive","aii"]))),128)}}}),xt={class:"ps-r"},Pt=["value"],It={class:"middie r-0 pr-row pi-s ani-softer"},Tt=h({__name:"CoSuppiierSeiect",props:{form:{},pk:{}},setup(f){const s=f,{suppiiers:a}=w(ws()),t=g({search:"",ioading:!1,nowId:0}),o={many:()=>a.value,v:()=>{if(s.pk&&s.form)return s.form[s.pk]},setV:n=>{s.pk&&s.form&&(s.form[s.pk]=n)},search:()=>k(()=>{}),view:()=>{const n=G(t.nowId,a.value,"id");return n.id?n.name+"  (負責人: "+n.contact_person+")":""},switchWh:n=>k(()=>{t.ioading=!0,t.nowId=n.id,o.setV(n.id),setTimeout(()=>{t.ioading=!1},400)})};return x(o.v,n=>{n&&n!==t.nowId&&(t.nowId=Y(n))}),ns(()=>{let n=o.v();const _=Y(n);_&&_!=t.nowId&&(t.nowId=_)}),(n,_)=>{const c=is,p=wt,l=gs;return u(),m("div",null,[i(l,{class:"w-100",fuii:!0},{sign:d(()=>[e("div",xt,[e("input",{class:"w-100",onKeydown:_[0]||(_[0]=Ms(v=>o.search(),["enter"])),value:o.view(),placeholder:"請選擇"},null,40,Pt),e("div",It,[i(c,{class:"ani-scaie-aii",onClick:_[1]||(_[1]=v=>o.search()),icon:"down"})])])]),con:d(()=>[i(p,{aii:r(t),pk:"nowId",many:r(a),onSwitchWH:o.switchWh},null,8,["aii","many","onSwitchWH"])]),_:1})])}}}),Ct={class:"o-hour-minus ps-r bg-con zi-x3"},qt=e("div",{class:"fx-s abs-t i-0 r-0 bg-con"},[e("div",{class:"w-382 pi pb-x1 sus"},"時"),e("div",{class:"w-618 pi pb-x1 sus"},"分")],-1),Et={class:"fx-s fx-t"},Vt={class:"o-hours w-382 pt-s"},St=e("button",null,"0",-1),Bt=["onClick"],Nt={class:"o-minus w-618 pt-s"},Ut=e("button",null,"0",-1),Ot=["onClick"],Dt=h({__name:"OHours",props:{form:{},pk_hours:{},pk_minus:{}},setup(f){const s=f,a=g({hours:rs(24),minus:rs(60)}),t={v_minus:()=>s.form[s.pk_minus],v_hour:()=>s.form[s.pk_hours],v:()=>t.v_hour()+":"+t.v_minus(),setv_minus:o=>{s.form[s.pk_minus]=o},setv_hour:o=>{s.form[s.pk_hours]=o}};return(o,n)=>{const _=gs;return u(),B(_,null,{sign:d(()=>[os(o.$slots,"default")]),con:d(()=>[e("div",Ct,[qt,e("div",Et,[e("div",Vt,[St,(u(!0),m(T,null,S(r(a).hours,(c,p)=>(u(),m("div",{class:"pi br br-i-0 fx-aii-weak ani-scaie-fcs hand",onClick:l=>t.setv_hour(c),key:p},y(c),9,Bt))),128))]),e("div",Nt,[Ut,(u(!0),m(T,null,S(r(a).minus,(c,p)=>(u(),m("div",{class:"py-t pi br br-r-0 fx-aii-weak ani-scaie-fcs hand",onClick:l=>t.setv_minus(c),key:p},y(c),9,Ot))),128))])])])]),_:3})}}}),Rt={class:"row"},Wt={class:"w-333"},At={class:"w-333"},Ft=["value"],Ht={class:"w-333"},Mt=e("div",{class:"py-s"},null,-1),jt=h({__name:"PiisBase",props:{form:{},aii:{}},setup(f){const s=f,a=["restock_date","hour","supplier"],t=g(j(s.form));return x(()=>s.aii.sign,()=>{a.map(o=>{if(P(t,o,s.form[o],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),x(()=>s.form.restock_date,o=>P(t,"restock_date",o,s.aii)),x(()=>s.form.hour,o=>P(t,"hour",o,s.aii)),x(()=>s.form.supplier,o=>P(t,"supplier",o,s.aii)),(o,n)=>{const _=Ps,c=xs,p=Dt,l=Tt,v=L;return u(),m("div",null,[e("div",Rt,[e("div",Wt,[i(c,{icon:"date",err:r(t).restock_date,tit:"入貨日期"},{default:d(()=>[i(_,{form:o.form,pk:"restock_date"},null,8,["form"])]),_:1},8,["err"])]),e("div",At,[i(c,{icon:"time",err:r(t).hour,tit:"入貨時間"},{default:d(()=>[i(p,{form:o.form,pk_hours:"hour",pk_minus:"minus"},{default:d(()=>[e("input",{value:r(ys)(o.form.hour,o.form.minus)},null,8,Ft)]),_:1},8,["form"])]),_:1},8,["err"])]),e("div",Ht,[i(v,{err:r(t).supplier,tit:"供應商"},{default:d(()=>[i(l,{form:o.form,pk:"supplier"},null,8,["form"])]),_:1},8,["err"])])]),Mt])}}}),zt={class:"row"},Kt={class:"w-333"},Gt={class:"w-333"},Jt={class:"w-333"},Lt=h({__name:"PiisPrice",props:{form:{},aii:{}},setup(f){const s=f,a=["restock_price","lowest_price","selling_price"],t=g(j(s.form));return x(()=>s.aii.sign,()=>{a.map(o=>{if(P(t,o,s.form[o],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),x(()=>s.form.restock_price,o=>P(t,"restock_price",o,s.aii)),x(()=>s.form.lowest_price,o=>P(t,"lowest_price",o,s.aii)),x(()=>s.form.selling_price,o=>P(t,"selling_price",o,s.aii)),(o,n)=>{const _=L;return u(),m("div",zt,[e("div",Kt,[i(_,{err:r(t).restock_price,tit:"入貨價錢"},{default:d(()=>[V(e("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=c=>o.form.restock_price=c),placeholder:"請輸入"},null,512),[[H,o.form.restock_price]])]),_:1},8,["err"])]),e("div",Gt,[i(_,{err:r(t).lowest_price,tit:"最低價錢"},{default:d(()=>[V(e("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=c=>o.form.lowest_price=c),placeholder:"請輸入"},null,512),[[H,o.form.lowest_price]])]),_:1},8,["err"])]),e("div",Jt,[i(_,{err:r(t).selling_price,tit:"售價"},{default:d(()=>[V(e("input",{type:"number","onUpdate:modelValue":n[2]||(n[2]=c=>o.form.selling_price=c),placeholder:"請輸入"},null,512),[[H,o.form.selling_price]])]),_:1},8,["err"])])])}}}),Qt=h({__name:"CoWarehouseText",props:{v:{}},setup(f){const s=f,a=()=>{const t=G(s.v,ws().warehouses,"id");return t.id?t.name+"  (負責人: "+t.contact_person+")":"未選擇倉庫"};return(t,o)=>(u(),m("div",null,y(a()),1))}}),Xt=h({__name:"CoVariationsText",props:{v:{},many:{}},setup(f){const s=f,a=()=>{const t=G(s.v,s.many,"id");return t.id?t.name:"未選擇倉庫"};return(t,o)=>(u(),m("div",null,y(a()),1))}}),Yt={key:0,class:"td"},Zt={class:"fx-1 fx-s"},sn={key:0,class:"fx-r"},tn={key:1,class:"td"},nn={class:"w-30"},on=["onUpdate:modelValue"],en=["value"],an={class:"w-30"},rn={class:"fx-1 fx-s"},_n=["onUpdate:modelValue"],cn={class:"pi fx-r"},Cs=h({__name:"PsiTd",props:{aii:{},funn:{},kiii_option:{type:Boolean}},setup(f){const s=f,{product_variations:a}=w(C());return a.value.length<=0&&fs("該產品無可用標籤！！！"),N(()=>vs(s.aii,[{ciass:"w-30",tit:"樣式名稱"},{ciass:"w-30",tit:"入貨位置"},{ciass:"fx-1",tit:"入貨數量"}])),(t,o)=>{const n=Xt,_=Qt,c=it,p=Xs,l=ot,v=Is,$=Ys,I=is;return u(!0),m(T,null,S(t.aii.many,(b,E)=>(u(),m("div",{key:E},[b.edit?(u(),m("div",tn,[e("div",nn,[i(l,null,{default:d(()=>[V(e("select",{"onUpdate:modelValue":q=>b.variation=q},[(u(!0),m(T,null,S(r(a),(q,Vs)=>(u(),m("option",{key:Vs,value:q.id},y(q.name),9,en))),128))],8,on),[[ss,b.variation]])]),_:2},1024)]),e("div",an,[i(l,null,{default:d(()=>[i(v,{form:b,pk:"storehouse"},null,8,["form"])]),_:2},1024)]),e("div",rn,[i(l,{class:"fx-1"},{default:d(()=>[V(e("input",{type:"number","onUpdate:modelValue":q=>b.quantity=q,placeholder:"請輸入"},null,8,_n),[[H,b.quantity]])]),_:2},1024),e("div",cn,[i($,{class:"pr",tit:"儲存",onClick:q=>b.edit=!1},null,8,["onClick"]),e("div",null,[i(I,{icon:"x",onClick:q=>t.funn.cancei(b)},null,8,["onClick"])])])])])):(u(),m("div",Yt,[i(n,{class:"w-30",many:r(a),v:b.variation},null,8,["many","v"]),i(_,{class:"w-30",v:b.storehouse},null,8,["v"]),e("div",Zt,[e("div",null,y(b.quantity),1),t.kiii_option?O("",!0):(u(),m("div",sn,[i(c,{onClick:q=>t.funn.edit(b),class:"mr-s txt-pri"},null,8,["onClick"]),i(p,{onClick:q=>t.funn.sureTrash(E)},null,8,["onClick"])]))])]))]))),128)}}}),ln=h({__name:"PiisStyieInventoryTabie",props:{aii:{}},emits:["sureTrash"],setup(f,{emit:s}){const a=f,t=g({origin:{},trashIdx:0}),o={edit:n=>k(()=>{n.edit=!0,t.origin[n.id+""]=$s(n)}),cancei:n=>k(()=>{const _=t.origin[n.id+""];_?(_.edit=!1,hs(_,n)):n.edit=!1}),sureTrash:n=>k(()=>{t.trashIdx=n,s("sureTrash",n),D(-201)}),trash:()=>Ks(a.aii,()=>{a.aii.many.splice(t.trashIdx,1),D(0)})};return(n,_)=>{const c=as,p=es;return u(),m(T,null,[i(c,{aii:n.aii,mini:!0},{default:d(()=>[i(Cs,{aii:n.aii,funn:o},null,8,["aii"])]),_:1},8,["aii"]),i(p,{idx:-201,aii:n.aii,onTrash:o.trash},null,8,["aii","onTrash"])],64)}}}),un={key:0,class:"abs-b ps-f-imp r-0 w-36 w-50-p py"},pn=h({__name:"ProduInvInStockInner",props:{aii:{}},setup(f,{expose:s}){const a=f,t=g({restock_date:"",hour:0,minus:0,supplier:""}),o=g({restock_price:"",lowest_price:"",selling_price:""}),n=g({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[],ani:0}),{one_of_edit:_}=w(C()),c=ts(()=>{const l=_.value;return l.variations?l.variations:[]}),p={buiid:()=>{const l={...t,...o,restock_distribute:p.fiiter()};return l.restock_date=t.restock_date+" "+ys(t.hour,t.minus,!0),l.product=_.value.id,a.aii.can&&l.restock_distribute.length<=0?(W("您沒有添加任何樣式的庫存數據!!!",a.aii),null):a.aii.can?l:null},fiiter:(l=[])=>(n.many.map(v=>{let $=!0;v.storehouse&&v.quantity?v.edit=!1:$=!1,$&&l.push(v)}),l),pius:()=>k(()=>{p.fiiter().length==n.many.length&&n.many.push(p.GEN_ONE())}),GEN_ONE:()=>$s({idx:n.many.length,variation:bs(c.value,"id"),storehouse:0,quantity:null,edit:!0,ioading:!1})};return s(p),N(()=>Gs(4,()=>n.ani+=1)),(l,v)=>{const $=ks,I=Js;return u(),m("div",null,[i($,{tit:"時間及供應商",class:X(["pb-x3 op-0",{"ani-page":r(n).ani>=0}])},{default:d(()=>[i(jt,{form:r(t),aii:l.aii},null,8,["form","aii"])]),_:1},8,["class"]),i($,{tit:"價錢",class:X(["pt pb-x3 op-0",{"ani-page":r(n).ani>=1}])},{default:d(()=>[i(Lt,{form:r(o),aii:l.aii},null,8,["form","aii"])]),_:1},8,["class"]),i($,{tit:"樣式及庫存分配數量",class:X(["pt-x2 pb-x3 op-0",{"ani-page":r(n).ani>=2}])},{default:d(()=>[i(ln,{aii:r(n)},null,8,["aii"])]),_:1},8,["class"]),e("div",null,[i(I,{onClick:v[0]||(v[0]=b=>p.pius()),class:"w-100 py-s ani-scaie-aii",tit:"添加樣式"})]),r(n).ani>=3?(u(),m("section",un,[os(l.$slots,"default")])):O("",!0)])}}}),mn=e("h3",{class:"py-x3 mb"},"添加入貨信息(僅加貨)",-1),dn=h({__name:"ProduInvInStock",setup(f){const s=ls(),{pag:a,one_of_edit:t}=w(C()),o=g({ioading:!1,msg:"",can:!1,sign:0}),n={submit:()=>z(o,s.value.buiid,async _=>{if(console.log("BASE =",_),_){const c=await bt(_);J(c)?W(c,o):n.success()}}),success:()=>k(async()=>{K("產品入貨成功！！！"),console.log("刷新 產品"),await C().refreshOneOfEdit(),n.back()}),back:()=>k(()=>{a.value=0}),init:()=>k(()=>{t.value.id||(a.value=0)})};return N(n.init),(_,c)=>{const p=zs;return u(),m("section",null,[mn,i(pn,{aii:r(o),ref_key:"inner",ref:s,onSubmit:n.submit},{default:d(()=>[i(p,{aii:r(o),ciass:"w-100",tit_save:"儲存",onBack:c[0]||(c[0]=l=>n.back()),onSave:c[1]||(c[1]=l=>n.submit())},null,8,["aii"])]),_:1},8,["aii","onSubmit"])])}}}),fn=h({__name:"ProduInvInOrder",setup(f){return(s,a)=>(u(),m("div",null," IN ORDER "))}}),vn={class:"ps-r"},hn={key:0,class:"prod-pag-wrapper abs-t i-0 r-0 b-0 bg-con zi-x2 ani-softer"},$n=h({__name:"ProductPagWrapper",setup(f){const{pag:s}=w(C());s.value=0;const a=ls(!1);return x(s,t=>t==0?a.value=!1:a.value=!0),(t,o)=>{const n=Fs;return u(),m("div",vn,[e("div",null,[os(t.$slots,"default")]),r(a)?(u(),m("div",hn,[V(i(n,{class:"h-iayout h-iayout-max"},{default:d(()=>[V(i(dn,null,null,512),[[Q,r(s)==1]]),V(i(vt,null,null,512),[[Q,r(s)==2]]),V(i(fn,null,null,512),[[Q,r(s)==3]])]),_:1},512),[[Q,r(s)>0]])])):O("",!0)])}}}),bn={class:"pb-x3"},qs=h({__name:"PeppTabie",setup(f){const s=g({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[]}),{inventory_and_variation_of_view:a}=w(U()),t={edit:()=>{},cancei:()=>{},sureTrash:()=>{},effect:()=>{a.value.map((o,n)=>{o.idx=n,s.many.push(o)})}};return ns(t.effect),(o,n)=>{const _=as;return u(),m("div",bn,[i(_,{aii:r(s),mini:!0},{default:d(()=>[i(Cs,{aii:r(s),funn:t,kiii_option:!0},null,8,["aii"])]),_:1},8,["aii"])])}}}),kn=e("h5",{class:"py-x2"},"樣式及庫存分配數量",-1),yn=h({__name:"ProductEditPanPriview",setup(f){return(s,a)=>{const t=A,o=F;return u(),B(o,{idx:112,big:!0},{default:d(()=>[i(t,{tit:"檢視 / 編輯"},{default:d(()=>[kn,i(qs)]),_:1})]),_:1})}}}),gn={class:"w-50"},wn={class:"w-50"},Es=h({__name:"PepiTabie",setup(f){const s=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),{variations_of_inventory_of_store:a}=w(U());return N(()=>vs(s,et)),(t,o)=>{const n=as;return u(),B(n,{aii:r(s),mini:!0},{default:d(()=>[(u(!0),m(T,null,S(r(a),(_,c)=>(u(),m("div",{class:"td",key:c},[e("div",gn,y(_.name),1),e("div",wn,y(_.quantity),1)]))),128))]),_:1},8,["aii"])}}}),xn=e("h5",{class:"py-x2"},"樣式",-1),Pn=e("h5",{class:"py-x2"},"倉庫",-1),In=h({__name:"ProductEditPanInstock",setup(f){return(s,a)=>{const t=A,o=F;return u(),B(o,{idx:111,big:!0},{default:d(()=>[i(t,{tit:"入貨詳情"},{default:d(()=>[xn,i(qs),Pn,i(Es)]),_:1})]),_:1})}}}),Tn={class:"py-x2"},Cn=h({__name:"ProductEditPanInventory",setup(f){const{inventory_of_store:s}=w(U());return(a,t)=>{const o=A,n=F;return u(),B(n,{idx:110,big:!0},{default:d(()=>[i(o,{tit:"庫存詳情"},{default:d(()=>[e("h5",Tn,y(r(s).storehouse_name),1),i(Es)]),_:1})]),_:1})}}}),qn={class:"py-x2"},En={class:"o-form"},Vn=h({__name:"PepbForm",props:{form:{},aii:{}},setup(f){const s=f,a=["quantity","storehouse_id","date"],t=g(j(s.form));return x(()=>s.aii.sign,(o=!0)=>{a.map(n=>{P(t,n,s.form[n],s.aii)&&(s.aii.can=!1,o=!1)}),s.aii.can=o}),x(()=>s.form.date,o=>P(t,"date",o,s.aii)),x(()=>s.form.quantity,o=>P(t,"quantity",o,s.aii)),x(()=>s.form.storehouse_id,o=>P(t,"storehouse_id",o,s.aii)),(o,n)=>{const _=Ts,c=Is,p=L,l=Ps,v=xs;return u(),m(T,null,[e("div",qn,[i(_,{form:o.form,pk:"quantity",err:r(t).quantity},null,8,["form","err"])]),e("div",En,[e("div",null,[i(p,{tit:"壞貨位置",err:r(t).storehouse_id},{default:d(()=>[i(c,{form:o.form,pk:"storehouse_id"},null,8,["form"])]),_:1},8,["err"])]),e("div",null,[i(v,{tit:"添加日期",err:r(t).date,icon:"date"},{default:d(()=>[i(l,{form:o.form,pk:"date",class:"input-timed-for-pan"},null,8,["form"])]),_:1},8,["err"])]),e("div",null,[i(p,{tit:"壞貨備註"},{default:d(()=>[V(e("textarea",{placeholder:"請輸入","onUpdate:modelValue":n[0]||(n[0]=$=>o.aii.remarks=$),rows:"12"},null,512),[[H,o.aii.remarks]])]),_:1})])])],64)}}}),Sn={class:"o-form"},Bn=e("option",{value:""},"-- 請選擇 --",-1),Nn=["value"],Un=h({__name:"PepbFormStyie",props:{form:{},aii:{}},setup(f){const s=f,a=["variation"],{product_variations:t}=w(C()),o=g(j(s.form));return x(()=>s.aii.sign,(n=!0)=>{a.map(_=>{P(o,_,s.form[_],s.aii)&&(s.aii.can=!1,n=!1)}),s.aii.can=n}),x(()=>s.form.variation,n=>P(o,"variation",n,s.aii)),(n,_)=>{const c=L;return u(),m("div",Sn,[i(c,{tit:"樣式",err:r(o).variation},{default:d(()=>[V(e("select",{"onUpdate:modelValue":_[0]||(_[0]=p=>n.form.variation=p)},[Bn,(u(!0),m(T,null,S(r(t),(p,l)=>(u(),m("option",{key:l,value:p.id},y(p.name),9,Nn))),128))],512),[[ss,n.form.variation]])]),_:1},8,["err"])])}}}),On=e("div",{class:"py-row"},null,-1),Dn=h({__name:"ProductEditPanBad",setup(f){const{one_of_edit:s}=w(C()),a=g({ioading:!1,msg:"",can:!1,sign:0}),t=g({quantity:0,storehouse_id:null,date:"",remarks:"",variation:"",product_id:""}),o={buiid:()=>(t.product_id=s.value.id,a.can?t:null),submit:()=>z(a,o.buiid,async n=>{if(n){let _=await rt(n);J(_)?W(_,a):o.success()}}),success:()=>k(()=>{K("壞貨資料新增成功。"),R(0),setTimeout(()=>hs({quantity:0},t),400)}),init:()=>k(()=>{console.log(s.value)})};return N(o.init),(n,_)=>{const c=at,p=Z,l=A,v=F;return u(),B(v,{idx:120},{default:d(()=>[i(l,{tit:"壞貨"},{default:d(()=>[i(c,{num:r(s).product_id,named:r(s).name},null,8,["num","named"]),i(Un,{class:"pt-x3",form:r(t),aii:r(a)},null,8,["form","aii"]),i(Vn,{form:r(t),aii:r(a)},null,8,["form","aii"]),On,i(p,{aii:r(a),onClick:_[0]||(_[0]=$=>o.submit()),tit:"儲存",class:"w-100"},null,8,["aii"])]),_:1})]),_:1})}}}),Rn={class:"o-form"},Wn={class:"o-form-pan"},An=e("h5",null,"調貨樣式",-1),Fn=["value"],Hn={class:"o-form-pan"},Mn=e("h5",null,"調貨倉庫",-1),jn={class:"o-form-pan"},zn=e("h5",null,"調貨數量",-1),Kn={class:"pb"},Gn=h({__name:"PepdFormHouse",props:{form:{},aii:{},max:{}},setup(f){const s=f,a=["variation","storehouse_to","quantity"],t=g(j(s.form)),{product_variations:o}=w(C());return x(()=>s.aii.sign,()=>{let n=!0;a.map(_=>{P(t,_,s.form[_],s.aii)&&(n=!1)}),s.aii.can=n}),x(()=>s.form.variation,n=>P(t,"variation",n,s.aii)),x(()=>s.form.storehouse_to,n=>P(t,"storehouse_to",n,s.aii)),x(()=>s.form.quantity,n=>P(t,"quantity",n,s.aii)),(n,_)=>{const c=L,p=ct,l=Ts;return u(),m("div",Rn,[e("div",Wn,[An,i(c,{tit:"樣式",err:r(t).variation},{default:d(()=>[V(e("select",{"onUpdate:modelValue":_[0]||(_[0]=v=>n.form.variation=v)},[(u(!0),m(T,null,S(r(o),(v,$)=>(u(),m("option",{key:$,value:v.id},y(v.name),9,Fn))),128))],512),[[ss,n.form.variation]])]),_:1},8,["err"])]),e("div",Hn,[Mn,i(c,{tit:"入貨倉庫",err:r(t).storehouse_to},{default:d(()=>[i(p,{except:n.form.storehouse_from,form:n.form,pk:"storehouse_to"},null,8,["except","form"])]),_:1},8,["err"])]),e("div",jn,[zn,e("p",Kn,"最大调货数: "+y(n.max),1),i(l,{form:n.form,pk:"quantity",err:r(t).quantity,max:n.max},null,8,["form","err","max"])])])}}}),Jn={class:"px-row py"},Ln={class:"o-form-pan pt-x2 pb"},Qn=e("h5",{class:"pb-s"},"產品數量",-1),Xn={class:"w-50"},Yn={class:"w-50"},Zn=e("div",{class:"py-row"},null,-1),so=e("div",{class:"py-row"},null,-1),to=h({__name:"ProductEditPanDepioy",setup(f){const s=g({ioading:!1,msg:"",can:!1,sign:0}),a=g({quantity:0,variation:0,storehouse_to:0,storehouse_from:0}),{one_of_edit:t}=w(C()),{store_of_transtock:o,variations_of_store_of_transtock:n}=w(U()),_=ts(()=>{let l=a.variation;return l?G(l,n.value,"id"):{quantity:0}}),c=ts(()=>_.value.quantity),p={buiid:()=>{const l=a;return a.quantity<=0?(s.can=!1,null):s.can?l:null},submit:()=>z(s,p.buiid,async l=>{if(l){const v=await kt(t.value.id,l);J(v)?W(v,s):p.success()}}),success:()=>k(async()=>{K("產品調貨成功！！！"),await C().refreshOneOfEdit(),R(0)}),init:()=>k(()=>{const l=bs(n.value,"id");a.storehouse_from=o.value.storehouse_id,a.variation=Y(l)})};return ns(p.init),(l,v)=>{const $=Z,I=A,b=F;return u(),B(b,{idx:125},{default:d(()=>[i(I,{tit:"調貨"},{default:d(()=>[e("div",Jn,[e("div",null,"出貨倉庫: "+y(r(o).storehouse_name),1)]),e("div",Ln,[Qn,(u(!0),m(T,null,S(r(n),(E,q)=>(u(),m("div",{key:q,class:"px-row fx-i py-s"},[e("div",Xn,y(E.name),1),e("div",Yn,y(E.quantity),1)]))),128))]),i(Gn,{class:"pt-x2",form:r(a),aii:r(s),max:r(c)},null,8,["form","aii","max"]),Zn,i($,{aii:r(s),onClick:v[0]||(v[0]=E=>p.submit()),tit:"確定",class:"w-100 mt"},null,8,["aii"]),M(),so]),_:1})]),_:1})}}}),no={class:"i abs-r mr"},oo={class:"pt-row"},io=e("p",null,"數量",-1),eo={class:"py-s"},ao=e("p",null,"壞貨位置",-1),ro={class:"sut py-s"},_o=e("p",null,"添加日期",-1),co={class:"sut py-s"},lo=e("p",null,"壞貨備註",-1),uo={class:"sut pt-s"},po=h({__name:"CoProduBaDetaiiCard",props:{broken:{},ciose:{type:Boolean}},emits:["trash","ciose"],setup(f){return(s,a)=>{const t=is,o=ut,n=lt;return u(),B(n,{class:"px-row ps-r"},{default:d(()=>[e("div",no,[s.ciose?(u(),B(o,{key:1,class:"fx-aii-weak br-s ani-scaie-aii",bk:!0,onClick:a[1]||(a[1]=_=>s.$emit("ciose",s.broken))},{default:d(()=>[M(" 撤銷 ")]),_:1})):(u(),B(t,{key:0,class:"h5",onClick:a[0]||(a[0]=_=>s.$emit("trash",s.broken)),ciass_i:"txt-err h3",icon:"trash"}))]),e("div",oo,[io,e("p",eo,y(s.broken.quantity),1)]),e("div",null,[ao,e("p",ro,y(s.broken.storehouse_name),1)]),e("div",null,[_o,e("p",co,y(s.broken.date),1)]),e("div",null,[lo,e("p",uo,y(s.broken.remarks),1)])]),_:1})}}}),mo=e("div",{class:"pt"},null,-1),fo={class:"px-row pb"},vo={class:"fs-n"},ho={class:"pb-x2 pt-x3"},$o=e("div",{class:"py-row"},null,-1),bo=h({__name:"ProductEditPanBadDetaii",setup(f){const{one_of_edit:s}=w(C()),{broken_of_view:a}=w(U()),t=g({ioading:!1,msg:"",trashing:!1}),o={init:()=>k(()=>{console.log(s.value)}),sureTrash:()=>k(()=>{t.trashing=!0}),trash:()=>k(()=>{}),submit:()=>z(t,()=>({}),async n=>{if(t.trashing){const _=a.value.id,c=await _t(_);J(c)?W(c,t):(K("壞貨資料刪除成功。"),R(0))}else R(0)})};return N(o.init),(n,_)=>{const c=po,p=Z,l=A,v=F,$=es;return u(),m(T,null,[i(v,{idx:121},{default:d(()=>[i(l,{tit:"壞貨詳情"},{default:d(()=>[mo,e("div",fo,[e("div",null,"產品編號:  "+y(r(s).product_id),1),e("div",vo,"產品名稱:  "+y(r(s).name),1)]),e("div",ho,[i(c,{class:X({"bg-con-x2":r(t).trashing}),ciose:r(t).trashing,broken:r(a),onCiose:_[0]||(_[0]=I=>r(t).trashing=!1),onTrash:_[1]||(_[1]=I=>o.sureTrash())},null,8,["class","ciose","broken"])]),$o,i(p,{onClick:_[2]||(_[2]=I=>o.submit()),tit:"儲存",class:"w-100"})]),_:1})]),_:1}),i($,{aii:r(t),idx:-205,onTrash:_[3]||(_[3]=I=>o.trash())},null,8,["aii"])],64)}}}),ko=h({__name:"ProductEditPans",setup(f){const s=C();return D(0),(a,t)=>(u(),m(T,null,[i(Ss,{pina:r(s)},null,8,["pina"]),i(Bs,{pina:r(s)},null,8,["pina"]),i(yn),i(In),i(Cn),i(to),i(Dn),i(bo)],64))}}),yo={class:"py"},go={class:"py-s"},wo=["onUpdate:modelValue"],xo=["value"],Po=h({__name:"ProduCeTagsEdit",props:{labels_exist:{},labels:{}},setup(f){const s=f,{many:a}=w(_s()),t=g({activeId:0,ioading:!1,msg:""}),o=C(),{one_of_edit:n}=w(o),_={pius:()=>k(()=>{if(a.value.length>0){const c=a.value[0];c.id&&o.pius_iabei(c.id)}else fs("沒有一個可用標籤，請先新增標籤。")}),init:()=>k(()=>{_s().refreshMany()}),sureTrash:c=>k(()=>{D(-202),t.activeId=Y(c)}),trash:()=>k(async()=>{await o.tag_trash(n.value.id,t.activeId)&&(s.labels_exist.map((p,l)=>{p==t.activeId&&o.trash_iabei_exist(l)}),t.activeId=0),D(0)})};return N(_.init),(c,p)=>{const l=pt,v=Ns,$=es;return u(),m("div",null,[i(l,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:p[0]||(p[0]=I=>_.pius())}),e("div",yo,[(u(!0),m(T,null,S(c.labels_exist,(I,b)=>(u(),m("div",{class:"pb-x2 ani-fade-b",key:b},[i(v,{class:"ani-scaie-hv",iive:!0,tit:"已存在的標籤",onTap:E=>_.sureTrash(I)},{default:d(()=>[e("div",go,y(r(G)(I,r(a),"id").name),1)]),_:2},1032,["onTap"])]))),128)),(u(!0),m(T,null,S(c.labels,(I,b)=>(u(),m("div",{class:"pb-x2 ani-fade-b",key:b},[i(v,{tit:"新加入的標籤",onTap:E=>r(o).trash_iabei(b)},{default:d(()=>[V(e("select",{"onUpdate:modelValue":E=>c.labels[b]=E},[(u(!0),m(T,null,S(r(a),(E,q)=>(u(),m("option",{key:q,value:E.id},y(E.name),9,xo))),128))],8,wo),[[ss,c.labels[b]]])]),_:2},1032,["onTap"])]))),128))]),i($,{aii:r(t),idx:-202,onTrash:p[1]||(p[1]=I=>_.trash()),msg:"此次操作系聯網操作，您確定要移除該標籤嗎？"},null,8,["aii"])])}}}),Io=e("div",{class:"pt"},null,-1),To=e("div",{class:"py"},null,-1),Co={key:0,class:"py-x2"},qo={key:1,class:"py-x2"},Eo={key:2,class:"py-x2"},Vo=e("div",{class:"py-x2"},null,-1),So=h({__name:"ProductEditIeft",props:{aii:{}},setup(f){const s=C(),{remarks:a,labels_exist:t,labels:o,base:n,variations:_}=w(s);return(c,p)=>{const l=ks;return u(),m("div",null,[i(l,{tit:"編輯產品",back:!0},{default:d(()=>[Io,i(Us,{form:r(n),aii:c.aii,edit:!0},null,8,["form","aii"])]),_:1}),To,i(Po,{class:"pt-s",labels:r(o),labels_exist:r(t)},null,8,["labels","labels_exist"]),M(),r(t).length<=0?(u(),m("div",Co)):O("",!0),i(Os,{class:"pt-s",edit:!0,pina:r(s),variations:r(_)},null,8,["pina","variations"]),M(),r(_).length<=0?(u(),m("div",qo)):O("",!0),i(Ds,{class:"pt-s",pina:r(s),remarks:r(a)},null,8,["pina","remarks"]),M(),r(a).length<=0?(u(),m("div",Eo)):O("",!0),Vo])}}}),Bo=h({__name:"ProduWarehouseTabie",props:{aii:{}},setup(f){const{one_of_edit:s}=w(C()),a={view:t=>k(()=>{U().save("inventory_of_store",t),R(110)}),transtock:t=>k(()=>{U().save("store_of_transtock",t),console.log("V =",t),R(125)})};return(t,o)=>{const n=Zs;return u(),B(n,{aii:t.aii,one_of_edit:r(s),onView:a.view,onTranstock:a.transtock},null,8,["aii","one_of_edit","onView","onTranstock"])}}}),No=e("div",{class:"py-row"},null,-1),Uo=e("div",{class:"py-row"},null,-1),Oo=e("div",{class:"py-row"},null,-1),Do=h({__name:"ProductEditRight",setup(f){const{one_of_edit:s}=w(C()),a=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),t=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),o=g({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(n,_)=>{const c=nt;return u(),m("div",null,[No,i(st,{aii:r(o),one_of_edit:r(s),kiii_option:!0},null,8,["aii","one_of_edit"]),Uo,i(Bo,{aii:r(t)},null,8,["aii"]),Oo,i(tt,{aii:r(a),one_of_edit:r(s)},null,8,["aii","one_of_edit"]),i(c,{one_of_edit:r(s)},null,8,["one_of_edit"])])}}}),Ro=h({__name:"product_edit",setup(f){const s=js(),a=C(),t=g({ioading:!1,msg:"",can:!1,sign:0,search:""}),{one_of_edit:o,variations:n,labels:_}=w(a),c={buiid:()=>t.can?a.form():null,success:()=>{K("產品修改成功！！！"),a.ciear(),c.dump(0),s.back()},submit:()=>z(t,c.buiid,async p=>{c.iabei_deai(),c.variation_deai();const l=await As(p,o.value.id);J(l)?W(l,t):c.success()}),iabei_deai:()=>k(async()=>{const p=_.value,l=o.value.id;for(let v=0;v<p.length;v++)await a.tag_pius(l,p[v])}),variation_deai:()=>k(async()=>{let p=!0;const l=n.value;for(let v=0;v<l.length;v++){const $=l[v];$.name&&($.id?p=await a.variation_edit($.name,$.id):p=await a.variation_add($.name,o.value.id))}console.log("樣式修改結果",p)}),dump:p=>k(()=>{a.switch_pag(p||0)}),init:()=>k(()=>{D(0),mt().ciear(),o.value.id||s.back()})};return N(c.init),(p,l)=>{const v=Z,$=Rs,I=Ws;return u(),m(T,null,[i($n,null,{default:d(()=>[i(I,null,{ieft:d(()=>[i(So,{aii:r(t)},null,8,["aii"])]),ieft_bottom:d(()=>[i(v,{aii:r(t),onClick:l[0]||(l[0]=b=>c.submit()),class:"w-100",tit:"儲存"},null,8,["aii"])]),right:d(()=>[i($,{class:"fx-s",onInbad:l[1]||(l[1]=b=>c.dump(2)),onInstock:l[2]||(l[2]=b=>c.dump(1)),onInorder:l[3]||(l[3]=b=>c.dump(3))}),i(Do)]),_:1})]),_:1}),i(ko)],64)}}});typeof cs=="function"&&cs(Ro);export{Ro as default};
