import{v as e,R as r,y as n,Q as t,J as c,m as a}from"./index-1c4854d6.js";import{E as o}from"./errors_product-174667b5.js";const d="cashier_products",_="iabeis",h=async(s,i)=>e(o,async()=>r(await n.get(_,t.buiid_pager(s,i)))),u=async(s,i)=>e(o,async()=>r(await n.get(d,t.buiid_pager(s,i)))),f=c("cashierDeskProductPina",{state:()=>({iabeis:[],refresh:!1,products:[],pager:{page:1,pageCount:1,pageSize:100,total:1},condition:{label:"",search:""},one_of_shop:{}}),actions:{dorefresh(){this.refresh=!this.refresh},vfy_products(s){return s.broken_products=t.iist(s.broken_products),s.variations=t.iist(s.variations),s.labels=t.iist(s.labels),delete s.restocks,s.__broken_products=s.broken_products?s.broken_products.length:0,delete s.broken_products,s.labels=t.kiii_times(s.labels),s.variations=t.kiii_times(s.variations),s},async refreshProducts(){let s=await u(this.condition,this.pager);a(s)||(s=s,this.products=s.data?s.data.map(i=>this.vfy_products(i)):[],console.log("獲取產品 =",this.products))},async refreshIabeis(){let s=await h({},{pageSize:100,page:1});if(!a(s)){s=s;const i=s.data?s.data:[];i.length>0&&(this.iabeis=i)}},save(s,i={}){this[s]=i},saveMany(s,i=[]){this[s]=i},savePager(s,i){this.pager[s]=i},saveCondition(s,i){this.condition[s]=i},variations(s){const i=s.variations?s.variations:{};return i.data?t.iist(i):[]}}});export{f as c};
