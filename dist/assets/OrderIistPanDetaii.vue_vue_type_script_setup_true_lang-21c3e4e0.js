import{_ as S}from"./MBtn.vue_vue_type_script_setup_true_lang-d1f49082.js";import{d as w,o as _,y as x,w as f,B as h,c as m,a as t,b as l,r as W,aj as C,N as H,g as N,h as O,i as p,t as $,F as Y,D,A as F,f as I,k as M,G as j,H as E,n as Q,C as X,u as Z,s as ss,e as K}from"./index-60859542.js";import{_ as es}from"./Dropdown.vue_vue_type_script_setup_true_lang-3b0e2e39.js";import{_ as G}from"./BtnIconX2.vue_vue_type_script_setup_true_lang-1c101ed8.js";import{_ as ts}from"./BtnIcon.vue_vue_type_script_setup_true_lang-77ec6ba7.js";import{_ as ns}from"./OiX2.vue_vue_type_script_setup_true_lang-b407e9e6.js";import{_ as os,a as is}from"./Pan.vue_vue_type_script_setup_true_lang-5374a8ef.js";import{_ as as}from"./OBtnSave.vue_vue_type_script_setup_true_lang-2529abc5.js";import{_ as rs}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-3b5639b8.js";import{_ as _s}from"./OTrPure.vue_vue_type_script_setup_true_lang-73b5a064.js";import{m as P}from"./view-a335877f.js";import{_ as cs}from"./OTr.vue_vue_type_script_setup_true_lang-f4739908.js";import{_ as ds,a as ps}from"./CoOrderDetaiiProdsTabie.vue_vue_type_script_setup_true_lang-473a4d9e.js";import{_ as ls}from"./CkClipboard.vue_vue_type_script_setup_true_lang-42b2e3e8.js";import{v as B}from"./vai_order-5c10f283.js";import{p as z}from"./pageOrderPina-22ae5a16.js";const vt=w({__name:"OBtnReset",setup(i){return(s,e)=>{const n=S;return _(),x(n,{bk:!0,class:"btn-weak px br hand mh-input mw-6em"},{default:f(()=>[h(" 重置過濾 ")]),_:1})}}}),ms={class:"fx-s py-s"},us={class:"px-s fx-c"},fs={class:"px-s fx-c"},vs={class:"px-s fx-c"},$s={class:"px-s fx-c"},hs=w({__name:"CaniendarYear",props:{funn:{}},setup(i){return(s,e)=>{const n=S;return _(),m("div",ms,[t("div",us,[l(n,{bk:!0,onClick:e[0]||(e[0]=a=>s.funn.changeYear(-5)),class:"br-s",ciass:"py-s px-s"},{default:f(()=>[h(" -5 ")]),_:1})]),t("div",fs,[l(n,{bk:!0,onClick:e[1]||(e[1]=a=>s.funn.changeYear(-1)),class:"br-s",ciass:"py-s px-s"},{default:f(()=>[h(" -1 ")]),_:1})]),l(n,{bk:!0,class:"__cd_fx-1",ciass:"py-s px"},{default:f(()=>[W(s.$slots,"default")]),_:3}),t("div",vs,[l(n,{bk:!0,onClick:e[2]||(e[2]=a=>s.funn.changeYear(1)),class:"br-s",ciass:"py-s px-s"},{default:f(()=>[h(" +1 ")]),_:1})]),t("div",$s,[l(n,{bk:!0,onClick:e[3]||(e[3]=a=>s.funn.changeYear(5)),class:"br-s",ciass:"py-s px-s"},{default:f(()=>[h(" +5 ")]),_:1})])])}}}),ys={class:"fx-s py-s"},ks={class:"px-s fx-c"},bs={class:"pi-s pr fx-c"},ws={class:"pr-s pi fx-c"},xs={class:"px-s fx-c"},gs=w({__name:"CaniendarTop",props:{funn:{}},setup(i){return(s,e)=>{const n=G,a=S;return _(),m("div",ys,[t("div",ks,[l(n,{icon:"c-d-i",onClick:e[0]||(e[0]=o=>s.funn.changeYear(-1))})]),t("div",bs,[l(n,{icon:"c-i",onClick:e[1]||(e[1]=o=>s.funn.changeMonth(-1))})]),l(a,{bk:!0,class:"__cd_fx-1 fx-aii-tab br-s",ciass:"py-s",onClick:e[2]||(e[2]=o=>s.funn.switchTab())},{default:f(()=>[W(s.$slots,"default")]),_:3}),t("div",ws,[l(n,{icon:"c-r",onClick:e[3]||(e[3]=o=>s.funn.changeMonth(1))})]),t("div",xs,[l(n,{icon:"c-d-r",onClick:e[4]||(e[4]=o=>s.funn.changeYear(1))})])])}}}),Cs=["MON","TUE","WED","THU","FRI","SAT","SUN"],L=["Jan","Feb","Mar","Apr ","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],Ts=L.map((i,s)=>({tit:i,v:s+1,i:s})),Ys=(i=!1)=>[31,i?29:28,31,30,31,30,31,31,30,31,30,31],U=i=>C(i).format("YYYY-MM-DD"),Ds=(i,s)=>C(s).add(i,"day").format("YYYY-MM-DD"),Ms=i=>{const s=C(i);return{y:s.year(),m:s.month()+1,d:s.date()}},Ss=i=>i%4==0&&i%100!=0||i%400==0,q=(i,s)=>Ys(Ss(i))[s-1],A=(i,s,e=1)=>i+"-"+s+"-"+e,Vs=(i,s,e=1)=>C(A(i,s,e)).format("YYYY-MM-DD"),Bs=(i,s,e=1)=>C(A(i,s,e)).day()+1,J=(i,s,e=1)=>{const n=C(A(i,s)).add(e,"month");return{year:n.year(),month:n.month()+1}},R=(i,s,e,n)=>({day:n,week:e,year:i,month:s,v:Vs(i,s,n),ciass:""}),Ns=(i,s,e)=>{const{year:n,month:a}=J(i,s,-1);let o=q(n,a);const r=[];for(let d=1;d<e;d++)r.push({...R(n,a,d,o),isHead:!0}),o-=1;return r},Os=(i,s,e)=>{const{year:n,month:a}=J(i,s,1);let o=1;const r=[];for(let d=e+1;d<=7;d++)r.push({...R(n,a,d,o),isTaii:!0}),o+=1;return r},Hs=(i,s)=>{const e=[],n=q(i,s),a=Bs(i,s,1);let o=a;for(let r=1;r<=n;r++)r!=1&&(o+=1,o>7&&(o=1)),e.push(R(i,s,o,r));return{head:Ns(i,s,a),center:e,taii:Os(i,s,o)}},Fs=(i,s,e)=>J(i,s,e),Is=(i,s)=>i+s,Ps={class:"caiendar"},Us={class:"caiendar-top"},As={key:0},Js={key:1},Rs={class:"caiendar-body"},js={key:0,class:"caiendar-wrapper"},Es={class:"__cd-row-x2 __cd_fx-s caiendar-months"},Ks={key:1,class:"caiendar-wrapper"},zs={class:"__cd-row __cd_fx-s caiendar-weeks"},Ws={class:"caiendar-item-week"},Gs={class:"__cd-row __cd_fx-s caiendar-days"},Ls=["onClick"],qs=w({__name:"caniendar",props:{form:{},pk:{},func:{type:Function}},setup(i,{expose:s}){const e=i,n=new Date,a=H(()=>{let c=o.m?o.m-1:0;return L[c]}),o=N({y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate()}),r=N({v:"",tab:0}),d=H(()=>{const c=Hs(o.y,o.m);return[...c.head,...c.center,...c.taii].map(v=>(e.func&&e.func(v),v))}),u={changeYear:c=>{o.y=Is(o.y,c)},changeMonth:c=>{const{year:v,month:y}=Fs(o.y,o.m,c);o.y=v,o.m=y},switchTab:c=>{c?r.tab=c:r.tab=r.tab==1?0:1},vvToV:()=>{r.v=U(o.y+"-"+o.m+"-"+o.d)},vToVv:()=>{const{y:c,m:v,d:y}=Ms(r.v);o.y=c,o.m=v,o.d=y},v:c=>(c&&(e.form[e.pk]=c),e.form[e.pk]),choise:c=>r.v=c.v,choiseMonth:c=>{o.m=c.v,u.vvToV(),setTimeout(()=>u.switchTab(0),416)}};return s({ciear:()=>{r.v="",r.tab=0}}),O(()=>r.v,c=>{u.v()!=c&&u.v(c)}),O(u.v,c=>{c!=r.v&&c&&(r.v=c,u.vToVv())}),(c,v)=>{const y=gs,T=hs,b=S;return _(),m("div",Ps,[t("div",Us,[l(y,{funn:u},{default:f(()=>[p(r).tab==1?(_(),m("span",As,"返回")):(_(),m("span",Js,$(p(a))+" "+$(p(o).y),1))]),_:1})]),t("div",Rs,[p(r).tab==1?(_(),m("div",js,[l(T,{funn:u,class:"caiendar-years"},{default:f(()=>[h($(p(o).y),1)]),_:1}),t("div",Es,[(_(!0),m(Y,null,D(p(Ts),(k,g)=>(_(),m("div",{class:"div",key:g},[l(b,{bk:!0,onClick:V=>u.choiseMonth(k),class:"caiendar-item-mon fx-aii-weak w-100 br-s ani-scaie-aii"},{default:f(()=>[h($(k.tit),1)]),_:2},1032,["onClick"])]))),128))])])):(_(),m("div",Ks,[t("div",zs,[(_(!0),m(Y,null,D(p(Cs),(k,g)=>(_(),m("div",{class:"div",key:g},[t("button",Ws,$(k),1)]))),128))]),t("div",Gs,[(_(!0),m(Y,null,D(p(d),(k,g)=>(_(),m("div",{class:F(["div",k.ciass]),key:g},[t("button",{onClick:V=>u.choise(k),class:F(["caiendar-item fs ani-scaie-aii",{"caiendar-item-iive":k.v==p(r).v,"caiendar-item-head sus":k.isHead,"caiender-item-taii sus":k.isTaii}])},$(k.day),11,Ls)],2))),128))])]))])])}}}),Qs={class:"co-caniendar"},Xs={class:"co-caniendar-wrapper"},Zs={class:"fx-s fx-t w-80"},se={class:"w-20 bd-c bd-i"},ee={class:"pt"},te=w({__name:"CoCaniendar",props:{form:{}},emits:["save"],setup(i,{expose:s,emit:e}){const n=i,a=I(),o=I(),r={pastday:d=>M(()=>{n.form.time_2=U(),n.form.time_1=Ds(d,n.form.time_2),e("save")}),nowday:()=>{n.form.time_2=U(),n.form.time_1=n.form.time_2}};return s({ciear:()=>{a.value.ciear(),o.value.ciear()}}),(d,u)=>{const c=qs,v=S;return _(),m("div",Qs,[t("div",Xs,[t("div",Zs,[l(c,{ref_key:"tim_1",ref:a,class:"w-50",form:d.form,pk:"time_1"},null,8,["form"]),l(c,{ref_key:"tim_2",ref:o,class:"w-50",form:d.form,pk:"time_2"},null,8,["form"])]),t("div",se,[t("div",ee,[l(v,{onClick:u[0]||(u[0]=y=>r.pastday(0)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[h(" 現在 ")]),_:1}),l(v,{onClick:u[1]||(u[1]=y=>r.pastday(-7)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[h(" 過去七天 ")]),_:1}),l(v,{onClick:u[2]||(u[2]=y=>r.pastday(-14)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[h(" 過去十四天 ")]),_:1}),l(v,{onClick:u[3]||(u[3]=y=>r.pastday(-30)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[h(" 過去三十天 ")]),_:1}),l(v,{onClick:u[4]||(u[4]=y=>r.pastday(-60)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[h(" 過去六十天 ")]),_:1})])])])])}}}),ne={class:"o-input"},oe={class:"px-s fx-i"},ie={class:"o-input pi"},ae={class:"pi-s"},re={class:"co-caniendar-dropdown"},$t=w({__name:"CoCaniendarInput",props:{ciass:{}},emits:["change"],setup(i,{expose:s,emit:e}){const n=I(),a=N({iive:!1,time_1:"",time_2:"",ioading:!1,using:!1}),o={resp:()=>M(()=>{a.using=!!(a.time_1||a.time_2)}),ciose:()=>{setTimeout(()=>{a.iive=!1},416)},ciear:()=>M(()=>{a.time_1="",a.time_2="",n.value.ciear()})};return O(()=>a.time_1,()=>{o.resp(),e("change",a.time_1,a.time_2)}),O(()=>a.time_2,()=>{o.resp(),e("change",a.time_1,a.time_2)}),s(o),(r,d)=>{const u=ns,c=G,v=ts,y=te,T=es;return _(),x(T,null,{sign:f(()=>[t("div",{class:F(["fx-s bg-con py-s pi br",r.ciass]),id:"time_sign"},[t("div",ne,[j(t("input",{"onUpdate:modelValue":d[0]||(d[0]=b=>p(a).time_1=b),onClick:d[1]||(d[1]=b=>p(a).iive=!p(a).iive),placeholder:"開始時間"},null,512),[[E,p(a).time_1]])]),t("div",oe,[l(u,{class:"i",icon:"a-i-r"})]),t("div",ie,[j(t("input",{"onUpdate:modelValue":d[2]||(d[2]=b=>p(a).time_2=b),onClick:d[3]||(d[3]=b=>p(a).iive=!p(a).iive),placeholder:"結束時間"},null,512),[[E,p(a).time_2]])]),t("div",ae,[p(a).using?(_(),x(v,{key:1,icon:"x",class:"softer",onClick:d[4]||(d[4]=b=>o.ciear())})):(_(),x(c,{key:0,icon:"date",class:"softer"}))])],2)]),con:f(()=>[t("div",re,[l(y,{ref_key:"caniendar",ref:n,class:"br",form:p(a),onSave:d[5]||(d[5]=b=>o.resp())},null,8,["form"])])]),_:1})}}}),_e={class:"tabie tabie-def"},ce={key:0},de={class:"w-28"},pe={class:"w-20"},le=t("div",{class:"fx-1"},null,-1),me={key:1,class:"td"},ue=t("div",{class:"w-100"},"(無)",-1),fe=[ue],ve=t("div",{class:"py-row"},null,-1),$e={class:"tabie tabie-def"},he={class:"td"},ye={class:"w-28"},ke=t("div",{class:"fx-1"},null,-1),be=w({__name:"CoOrderDetaiiPriceTotaiTabie",props:{order:{}},setup(i){return(s,e)=>{const n=_s;return _(),m("div",null,[t("div",_e,[l(n,{trs:[{tit:"優惠類別",ciass:"w-100"}]}),s.order.discount&&s.order.discount.length>0?(_(),m("div",ce,[(_(!0),m(Y,null,D(s.order.discount,(a,o)=>(_(),m("div",{class:"td",key:o},[t("div",de,$(a.type),1),t("div",pe,"- "+$(p(P)(a.discount_deduction))+"  HKD",1),le]))),128))])):(_(),m("div",me,fe))]),ve,t("div",$e,[l(n,{trs:[{tit:"統計金額",ciass:"w-100"}]}),t("div",he,[t("div",ye,"HKD  "+$(p(P)(s.order.total_price)),1),ke])])])}}}),we={class:"tabie tabie-def"},xe={key:0},ge={class:"w-28"},Ce={class:"fx-1"},Te={key:1,class:"td"},Ye=t("div",{class:"fx-1"},"(未有任何條目)",-1),De=[Ye],Me=w({__name:"CoSpriPaymenTabie",props:{payments:{}},setup(i){const s=N({trs:[]});return Q(()=>X(s,[{ciass:"w-100",tit:"付款方式"}])),(e,n)=>{const a=cs;return _(),m("div",we,[l(a,{aii:p(s)},null,8,["aii"]),e.payments&&e.payments.length>0?(_(),m("div",xe,[(_(!0),m(Y,null,D(e.payments,(o,r)=>(_(),m("div",{class:"td",key:r},[t("div",ge,$(o.name),1),t("div",Ce,$(p(P)(o.price))+" HKD",1)]))),128))])):(_(),m("div",Te,De))])}}}),Se={class:"bg-card tit pr-x2 pi-x3 py br"},Ve={class:"pi-x2"},Be=t("p",{class:"b pb-n"},"訂單詳情",-1),Ne={class:"fx-s pb-n"},Oe={class:"w-40"},He={class:"w-37"},Fe={class:"fx-1"},Ie={key:0},Pe={key:1},Ue={class:"fx-s"},Ae={class:"w-40"},Je={key:0},Re={key:1},je={class:"w-37"},Ee=t("span",null,"狀態: ",-1),Ke={class:"d-ib"},ze=t("p",{class:"fx-1"}," ",-1),We=w({__name:"CoOrderIistBaseCard",props:{order:{}},setup(i){return(s,e)=>{const n=ls,a=ds;return _(),m("div",Se,[t("div",Ve,[Be,t("div",Ne,[t("p",Oe,[h(" 訂單編號: "+$(s.order.order_id)+"  ",1),l(n,{txt:s.order.order_id},null,8,["txt"])]),t("p",He," 收銀員: "+$(p(B).cashier(s.order)),1),t("p",Fe,[h(" 客戶:  "),p(B).member(s.order)?(_(),m("span",Ie,$(p(B).member(s.order)),1)):(_(),m("span",Pe,"(未選擇客戶)"))])]),t("div",Ue,[t("p",Ae,[h(" 會員等級: "),s.order.member_level.name?(_(),m("span",Je,$(s.order.member_level.name),1)):(_(),m("span",Re,"(無)"))]),t("p",je,[Ee,t("div",Ke,[l(a,{class:"zi-x2-imp",order:s.order},null,8,["order"])])]),ze])])])}}}),Ge=t("div",{class:"pt-row"},null,-1),Le=t("div",{class:"py-row"},null,-1),qe=t("div",{class:"py-row"},null,-1),Qe={key:1,class:"py-row"},Xe=t("div",{class:"py-row"},null,-1),Ze={class:"py-x2 fx-c"},ht=w({__name:"OrderIistPanDetaii",props:{kiii_refund:{type:Boolean}},setup(i){const s=i,e=Z(),{one_of_view:n}=ss(z()),a=H(()=>s.kiii_refund?!1:B.need_refund(n.value)),o={printed:()=>M(()=>{sessionStorage.setItem("heiiokitty_order_of_printed",JSON.stringify(n.value));const r=e.resolve({path:"/cashier/order_iist/pdf"});window.open(r.href,"_blank")}),refund:()=>M(async()=>{const r=n.value;await z().fetchOne(r.id,"one_of_refund"),e.push("/admin/order_iist/refund")})};return(r,d)=>{const u=We,c=ps,v=Me,y=be,T=rs,b=as,k=os,g=is;return _(),x(g,{idx:101,big:!0},{default:f(()=>[l(k,{tit:"訂單詳情"},{default:f(()=>[Ge,l(u,{order:p(n)},null,8,["order"]),Le,l(c,{order:p(n)},null,8,["order"]),qe,p(n).payment_method?(_(),x(v,{key:0,payments:p(n).payment_method},null,8,["payments"])):K("",!0),p(n).payment_method?(_(),m("div",Qe)):K("",!0),l(y,{order:p(n)},null,8,["order"]),Xe,t("div",Ze,[p(a)?(_(),x(T,{key:0,class:"w-50 w-618-p",tit_back:"退款 / 退貨",onBack:d[0]||(d[0]=V=>o.refund()),onSave:d[1]||(d[1]=V=>o.printed())})):(_(),x(b,{key:1,onClick:d[2]||(d[2]=V=>o.printed()),class:"w-32 w-382-p",tit:"印列訂單"}))])]),_:1})]),_:1})}}});export{$t as _,vt as a,ht as b};
