import{b as Rs,_ as it,a as ot}from"./CoDeskIeftWrapper.vue_vue_type_script_setup_true_lang-45d00a79.js";import{b as zs,_ as _s,a as et,r as nt}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-54cc45ed.js";import{_ as V}from"./MBtn.vue_vue_type_script_setup_true_lang-7421d565.js";import{_ as bs}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-6e843afd.js";import{n as ns,m as I}from"./view-c92e9bc2.js";import{Q as at,J as _t,T as ys,d as y,s as A,o as _,c as l,i as e,e as B,a as t,n as K,D as cs,z as C,w as m,F as O,G as H,b as c,B as S,t as f,C as g,k as x,g as D,U as P,P as N,V as Z,$ as U,_ as Is,r as L,f as ct,W as Os,H as G,I as ss,X as rt,v as dt,x as pt,y as lt,m as ut,p as mt,Y as ft,S as ht,h as W,Z as ts,a0 as vt,a1 as $t,a2 as As,q as Es,a3 as bt,O as yt,a4 as gt,a5 as wt,a6 as gs,a7 as kt,a8 as ws,A as xt}from"./index-1c4854d6.js";import{f as k}from"./fioat-e27af979.js";import{_ as Hs}from"./Itemdash.vue_vue_type_script_setup_true_lang-99078e95.js";import{_ as Ct}from"./Msgiine.vue_vue_type_script_setup_true_lang-5ae1b6d1.js";import{_ as Q}from"./OBtnSave.vue_vue_type_script_setup_true_lang-8855a42d.js";import{c as w,_ as rs,a as Ns}from"./CoCashierBiiisHeader.vue_vue_type_script_setup_true_lang-024b6d62.js";import{_ as Ks,a as Dt}from"./OTabieTrash-3a576e95.js";import{_ as Tt}from"./cioseitem.vue_vue_type_script_setup_true_lang-971d8f3d.js";import{a as ks,_ as At}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-85c5c547.js";import{v as qt}from"./vai_order-616c753f.js";import{c as F}from"./cashierDeskProductPina-8134737e.js";import{_ as Pt}from"./OPager.vue_vue_type_script_setup_true_lang-70bc572c.js";import{_ as St}from"./scroiiy-86a0139c.js";import{_ as Vs}from"./Oi.vue_vue_type_script_setup_true_lang-150d8ca2.js";import{v as as}from"./vai_member-6f8c9195.js";import{s as Bt}from"./serv_member_iist-a2db0f54.js";import{_ as Mt}from"./OIoadDot.vue_vue_type_script_setup_true_lang-da7d1b6c.js";import{_ as Us}from"./OIoadCir.vue_vue_type_script_setup_true_lang-09dac1f9.js";import{_ as js}from"./BtnIconX2.vue_vue_type_script_setup_true_lang-46e0700d.js";import{_ as Rt}from"./OSearch.vue_vue_type_script_setup_true_lang-cddf3e8c.js";import{_ as zt}from"./BtnPriOut.vue_vue_type_script_setup_true_lang-87dd7bfd.js";import{_ as It}from"./OModSure.vue_vue_type_script_setup_true_lang-1e11a154.js";import{_ as is,a as xs}from"./Pan.vue_vue_type_script_setup_true_lang-acc72b92.js";import{_ as Gs,a as Ot}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-37098c45.js";import{_ as Cs}from"./OInput.vue_vue_type_script_setup_true_lang-ec4fb52b.js";import{t as Et}from"./product_trs-754059ff.js";import{_ as Ht}from"./CoPidProductExpan.vue_vue_type_script_setup_true_lang-29ac0d4c.js";import{_ as Nt}from"./ProduNewInstockTabie.vue_vue_type_script_setup_true_lang-5fc5393d.js";import{_ as Kt}from"./BtnIcon.vue_vue_type_script_setup_true_lang-1f32d0e2.js";import{_ as Ds}from"./OTr.vue_vue_type_script_setup_true_lang-01fa8e91.js";import{b as qs}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-7b74d979.js";import"./errors_product-174667b5.js";import"./XMarkIcon-c017f066.js";import"./giobaiPina-6c5d2147.js";import"./serv_iabei_iist-b6673396.js";import"./serv_suppiier_iist-7db89bfd.js";import"./serv_user_iist-bde3c35f.js";import"./serv_warehouse_iist-5aa49886.js";import"./OiX2.vue_vue_type_script_setup_true_lang-08d57bd1.js";import"./ArrowLongRightIcon-12d20e0f.js";import"./pageProductInstockPina-eb60b6d2.js";import"./serv_product_iist-cc1a5cd7.js";const es=o=>o&&o.quantity?o.quantity:0,vs=o=>{const s=o&&o.__product?o.__product:{};return s.id&&s.new_selling_price?s.new_selling_price:0},Vt=o=>k.floatMul(vs(o),es(o)),Ws=(o,s=0)=>{const i=Vt(o);return o.is_ratio?s=k.floatMul(i,o.discount):s=k.floatAdd(i,-o.discount),s},Ps=(o,s=0)=>(o.map(i=>{s=k.floatAdd(s,Ws(i))}),s),Ss=(o,s,i,n)=>{let a=0,p=o;if(i.iive){const r=i.discount;o=k.floatMul(r,o),a=k.floatAdd(a,k.floatAdd(p,-o)),p=o}if(s.iive){const r=s.discount;o=k.floatMul(r,o),a=k.floatAdd(a,k.floatAdd(p,-o)),p=o}if(n.iive){const r=n.discount;o=k.floatAdd(o,-r),a=k.floatAdd(a,k.floatAdd(p,-o)),p=o}return a},E={quantity:es,product_price:vs,product_name:o=>o&&o.__product?o.__product.name:"",proudct_price_restock:o=>{const s=o&&o.__product?o.__product:{};return s.id&&s.average_restock_price?s.average_restock_price:0},variation:o=>(o&&o.__variation?at.data(o.__variation):{}).name,comput_num_x_price(o){const s=vs(o);return k.floatMul(s||0,es(o))},comput_one_totai:Ws,comput_carts_totai:Ps,carts_aii_num:(o,s=0)=>(o.map(i=>{const n=es(i);s+=n}),s),comput_aii_order_discount:Ss,computed_finai_totai_for_recept(o){const s=o.carts?o.carts:[],i=Ps(s),n=o.ratio_of_aii?o.ratio_of_aii:{},a=o.ratio_of_member?o.ratio_of_member:{},p=o.discount_of_aii?o.discount_of_aii:{},r=Ss(i,n,a,p);return k.floatAdd(i,-r)},is_money_same:(o,s)=>{let i=0;return o>s?(i=k.floatAdd(o,-s),i<1e-4):o<s?(i=k.floatAdd(s,-o),i<1e-4):!0}},us=()=>ys({iive:!1,discount:1,is_ratio:!0,txt:"會員優惠",discount_deduction:0,type:"全單折扣"}),ms=()=>ys({iive:!1,discount:1,is_ratio:!0,txt:"全單折扣",discount_deduction:0,type:"全單折扣"}),fs=()=>ys({iive:!1,discount:0,is_ratio:!1,txt:"全單減價",discount_deduction:0,type:"全單折扣"}),q=_t("cashierDeskCartPina",{state:()=>({stating:!1,carts:[],member:{},ratio_of_member:us(),ratio_of_aii:ms(),discount_of_aii:fs()}),getters:{has_choise(o){let s=!1;return o.carts.map(i=>{i.__choise&&(s=!0)}),s},choiseOne(o){let s={};return o.carts.map(i=>{i.__choise&&(s=i)}),s}},actions:{checkoutSucc(){this.carts=[],this.member={},this.discount_of_aii=fs(),this.ratio_of_member=us(),this.ratio_of_aii=ms()},save_sts(o,s=!1){this[o]=s},ciear_carts(){this.stating||(this.carts=[],this.ratio_of_member.discount=1,this.ratio_of_aii.discount=1)},ciear_choise(){this.carts.map(o=>{o.__choise=!1})},save(o,s={}){this[o]=s},save_member(o={}){if(!this.stating)if(o.id){this.member=o;const s=this.member.member_level?this.member.member_level:{};this.ratio_of_member.iive=!0,this.ratio_of_member.discount=s.discount?s.discount:1}else this.member={},this.ratio_of_member.iive=!1,this.ratio_of_member.discount=1},add_cart(o,s,i){this.stating||this.carts.push({__product:o,product:o.id,quantity:s,__variation:i,variation:i.id,__choise:!1,discount_deduction:0,discount:0,is_ratio:!1,time_updated:ns(),time:ns()})},remove_cart(o=0){this.stating||(this.carts.map((s,i)=>{s.__choise&&(o=i)}),this.carts.splice(o,1))},switch_cart_choise(o){this.carts.map((s,i)=>{s.__choise=i===o})},ciear_discount(){this.ratio_of_member=us(),this.ratio_of_aii=ms(),this.discount_of_aii=fs()},comput_num_x_price(o){return E.comput_num_x_price(o)},comput_one_totai(o){return E.comput_one_totai(o)},comput_one_discount(o){const s=this.comput_one_totai(o),i=this.comput_num_x_price(o);return k.floatAdd(i,-s)},comput_carts_totai(){return E.comput_carts_totai(this.carts)},comput_one_profit(o){const s=E.product_price(o),i=E.proudct_price_restock(o),n=E.quantity(o),a=k.floatMul(k.floatAdd(s,-i),n),p=this.comput_one_discount(o);return k.floatAdd(a,-p)},comput_aii_order_discount(o){return E.comput_aii_order_discount(o,this.ratio_of_aii,this.ratio_of_member,this.discount_of_aii)},computed_finai_totai(){let o=this.comput_carts_totai();const s=this.comput_aii_order_discount(o);return k.floatAdd(o,-s)},buiid_ordered_product(o=[]){return this.carts.map(s=>{const i=this.comput_num_x_price(s);if(s.is_ratio){const n=k.floatMul(i,s.discount);s.discount_deduction=k.floatAdd(i,-n)}else s.discount_deduction=s.discount}),o.length=0,this.carts.map(s=>{o.push({product:s.product,variation:s.variation,quantity:s.quantity,discount_deduction:s.discount_deduction})}),o},buiid_discount(o=[]){let s=this.comput_carts_totai(),i=s;if(this.ratio_of_member.iive){const n=this.ratio_of_member.discount;s=k.floatMul(n,s),o.push({type:this.ratio_of_member.txt,discount_deduction:k.floatAdd(i,-s)}),i=s}if(this.ratio_of_aii.iive){const n=this.ratio_of_aii.discount;s=k.floatMul(n,s),o.push({type:this.ratio_of_aii.txt,discount_deduction:k.floatAdd(i,-s)}),i=s}if(this.discount_of_aii.iive){const n=this.discount_of_aii.discount;s=k.floatAdd(s,-n),o.push({type:this.discount_of_aii.txt,discount_deduction:k.floatAdd(i,-s)}),i=s}return o}}}),Ut={class:"py"},jt=t("div",{class:"py-x2"},null,-1),Gt={key:0,class:"py-x2"},Wt=t("br",null,null,-1),Ft=[Wt],Jt={key:1,class:"py-x2"},Xt=t("br",null,null,-1),Lt=[Xt],Qt={key:2,class:"py-x2"},Yt=t("br",null,null,-1),Zt=[Yt],si=y({__name:"DcCartItemSpacer",setup(o){const s=q(),{ratio_of_member:i,ratio_of_aii:n,discount_of_aii:a}=A(s);return(p,r)=>(_(),l("div",Ut,[jt,e(i).iive?(_(),l("div",Gt,Ft)):B("",!0),e(a).iive?(_(),l("div",Jt,Lt)):B("",!0),e(n).iive?(_(),l("div",Qt,Zt)):B("",!0)]))}}),ti={key:0,class:"ani-fade-b"},ii={class:"td tit-son"},oi={class:"fx-1 px fx-i"},ei={class:"mw-2em"},ni={class:"sus fs-s"},ai={class:"w-15 fs-n"},_i={key:0},ci={key:1},ri={class:"w-19 fs-n fw-300"},di={class:"w-18 fs-n fx-r pr fw-800"},pi={key:1},li=y({__name:"DeskIeftTabie",props:{aii:{}},setup(o){const s=o,i=q(),{carts:n}=A(i),a={vai_totai:p=>I(i.comput_one_totai(p)),chiose:p=>x(()=>{i.switch_cart_choise(p)})};return K(()=>cs(s.aii,[{ciass:"fx-1 h6",tit:"序號/商品名稱"},{ciass:"w-15 h6",tit:"附加"},{ciass:"w-19 h6",tit:"單價*數量"},{ciass:"w-18 h6 fx-r pr-0",tit:"統計金額"}])),(p,r)=>{const d=bs,u=V,h=zs,v=_s;return _(),C(v,{aii:p.aii,pure:!0},{default:m(()=>[e(n)&&e(n).length>0?(_(),l("div",ti,[(_(!0),l(O,null,H(e(n),(b,$)=>(_(),l("div",{class:"py-s br ani-scaie-aii",key:$},[c(u,{bk:!0,class:"w-100 ta-i br fx-aii-tab",onClick:T=>a.chiose($)},{default:m(()=>[c(d,{class:S({"bg-con-x2":b.__choise})},{default:m(()=>[t("div",ii,[t("div",oi,[t("div",ei,f($+1)+"    ",1),t("div",null,[t("p",null,f(b.__product.name),1),t("p",ni,f(b.__variation.name),1)])]),t("div",ai,[b.is_ratio?(_(),l("span",_i,"x")):(_(),l("span",ci,"-")),g(f(b.discount),1)]),t("div",ri,f(b.__product.new_selling_price)+" * "+f(b.quantity),1),t("div",di,f(a.vai_totai(b)),1)])]),_:2},1032,["class"])]),_:2},1032,["onClick"])]))),128)),c(si)])):(_(),l("div",pi,[c(h,{class:"mh-oti"})]))]),_:1},8,["aii"])}}}),ui=y({__name:"DeskIeft",setup(o){const s=D({many:[{}],chooseAii:!1,chooses:[],many_origin:[],condition:{},ioading:!1,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}});return(i,n)=>(_(),l("div",null,[c(li,{class:"pt-s ani-fade-b",aii:e(s)},null,8,["aii"])]))}}),mi={class:"pt pb px-n"},fi={key:0,class:"ani-softer mb"},hi={key:1,class:"ani-softer mb"},vi={key:2,class:"ani-softer"},$i=y({__name:"DcDiscountTips",setup(o){const{ratio_of_member:s,ratio_of_aii:i,discount_of_aii:n}=A(q()),a=()=>x(()=>{P(202)});return(p,r)=>{const d=Ct;return _(),l("div",mi,[e(s).iive?(_(),l("div",fi,[c(d,{onClick:r[0]||(r[0]=u=>a()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:m(()=>[g(f(e(s).txt)+":  "+f(e(s).discount),1)]),_:1})])):B("",!0),e(i).iive?(_(),l("div",hi,[c(d,{onClick:r[1]||(r[1]=u=>a()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:m(()=>[g(f(e(i).txt)+":  "+f(e(i).discount),1)]),_:1})])):B("",!0),e(n).iive?(_(),l("div",vi,[c(d,{onClick:r[2]||(r[2]=u=>a()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:m(()=>[g(f(e(n).txt)+":  "+f(e(n).discount),1)]),_:1})])):B("",!0)])}}}),bi={class:"d-ib"},os=y({__name:"DcTotiPriceNum",setup(o){const s=q();return(i,n)=>(_(),l("div",bi,f(e(I)(e(s).computed_finai_totai())),1))}}),yi={class:"d-ib"},Fs=y({__name:"DcTotiDiscountNum",setup(o){const s=q(),i=N(()=>{let n=s.comput_carts_totai();return s.comput_aii_order_discount(n)});return(n,a)=>(_(),l("div",yi,f(e(I)(e(i))),1))}}),gi=y({__name:"DcDoOrderNext",setup(o){const s=D({ioading:!1,msg:""}),i=q(),{carts:n}=A(i),a=()=>x(()=>{if(n.value.length<=0)return Z("結算清單為空！！！"),!0;const r=w().r_page;P(0),U(0),w().save_sts("ioading",!1),r<3?(w().switch_r_page(3),w().save_sts("checking",!1)):r==3&&(w().save_sts("checking",!0),w().switch_r_page(100))});return(p,r)=>{const d=Q;return _(),C(d,{aii:e(s),onClick:a,tit:"結算"},null,8,["aii"])}}}),wi={class:"fx-s h6 fw-600 fx-b pb-s"},ki={class:""},xi=t("span",{class:"sus"},"優惠",-1),Ci={class:"d-ib ani-scaie-hv"},Di=t("span",null,"統計金額:  ",-1),Ti={class:"d-ib txt-money h5 ani-scaie-hv"},Ai=y({__name:"DeskIeftBottom",setup(o){return(s,i)=>{const n=Hs;return _(),l("aside",null,[c($i),c(n,null,{default:m(()=>[t("div",wi,[t("div",ki,[xi,g(":   "),t("div",Ci,[g("HKD "),c(Fs)])]),t("div",null,[Di,t("div",Ti,[g("HKD "),c(os)])])])]),_:1}),c(gi,{class:"mt w-100"})])}}}),qi={},Pi={class:"pi-row"},Si={class:"px-row py-row"};function Bi(o,s){const i=Rs;return _(),l("div",Pi,[c(i,{class:"ps-r"},{default:m(()=>[t("div",Si,[L(o.$slots,"default")])]),_:3})])}const ds=Is(qi,[["render",Bi]]),Bs="/src/assets/payment/",Y=(o,s,i,n="w-25")=>({tit:s,code:i,ciass:n,id:o,img:Bs+"origin/"+i+".svg",img_wht:Bs+"wht/"+i+".svg"}),$s=[Y(1,"支付寶","Alipay"),Y(2,"微信支付","Wechat"),Y(3,"銀聯","UnionPay"),Y(4,"master card","MasterCard"),Y(5,"八連通","Octopus","w-333"),Y(6,"EPS","Eps","w-333"),Y(7,"現金支付","Cash","w-333")];$s[0];const Mi={class:"fx-i fx-wp row"},Ri={class:"fx-c mh-3em mxh-3em"},zi=["src"],Ii={class:"ta-c pt fs-s"},Oi={class:"fx-c mh-3em mxh-3em"},Ei=["src"],Hi={class:"ta-c pt fs-s"},Ni=y({__name:"DrnCheckouTab",setup(o){const s=ct(0),i=w(),{payments:n}=A(i),a={has:(p,r=!1)=>{const d=p.id;return n.value&&n.value.map(u=>{d==u.id&&(r=!0)}),r},insrt_payment:p=>x(()=>{i.insert_payment(p)})};return K(()=>Os($s.length,()=>s.value+=1,32)),(p,r)=>{const d=V;return _(),l("div",Mi,[(_(!0),l(O,null,H(e($s),(u,h)=>(_(),l("div",{class:S(u.ciass),key:h},[t("div",{class:S([{"ani-card":e(s)>=h},"op-0 mb ani-scaie-aii"])},[a.has(u)?(_(),C(d,{key:0,class:"px py hand bg-card br w-100 fx-shd-pri paymentcard-iive fx-shd-pri"},{default:m(()=>[t("div",Ri,[t("img",{src:u.img_wht,class:"mxw-100"},null,8,zi)]),t("p",Ii,f(u.tit),1)]),_:2},1024)):(_(),C(d,{key:1,bk:!0,onClick:v=>a.insrt_payment(u),class:"px py hand bg-card br w-100 fx-shd-tab"},{default:m(()=>[t("div",Oi,[t("img",{src:u.img,class:""},null,8,Ei)]),t("p",Hi,f(u.tit),1)]),_:2},1032,["onClick"]))],2)],2))),128))])}}}),Ki={class:"py-row"},Vi={class:"fx-i pi-row"},Ui=t("h6",{class:"mxw-3em ta-c"},"小計",-1),ji={class:"fw-700"},Gi={class:"py"},Wi={class:"fx-i pi-row"},Fi={class:"pr fx-i"},Ji=["src"],Xi={class:"fw-600 ps-r zi-s"},Li=t("div",{class:"middie i-0 d-ib h5"},"HKD",-1),Qi={class:"pi-row"},Yi=["onUpdate:modelValue"],Zi={key:0,class:"ani-fade-b"},so={key:0,class:"d-ib"},to=y({__name:"DrnCheckouItems",setup(o){const s=w(),{payments:i}=A(s),n=D({ani:0,trashIdx:-1,ioading:!1,msg:""}),a=N(()=>{let r=0;const d=i.value;return d&&d.map(u=>{r=k.floatAdd(r,u.price)}),r}),p={sureTrash:r=>x(()=>{n.trashIdx=rt(r),U(-210)}),trash:()=>x(()=>{const r=i.value;if(r.length>0&&n.trashIdx>=0){const d=r[n.trashIdx];d&&d.id?s.trash_payment(d):Z("刪除項丟失，需重新選區。"),U(0),n.trashIdx=-1}})};return K(()=>Os(7,()=>n.ani+=1,32)),(r,d)=>{const u=Tt,h=Hs,v=Ks;return _(),l("div",null,[t("div",Ki,[c(u,{class:"drn-checkout-item bs-x3 ani-scaie-hv"},{default:m(()=>[t("div",Vi,[Ui,t("h5",ji,[g(" :     HKD "),c(os)])])]),_:1})]),t("aside",Gi,[(_(!0),l(O,null,H(e(i),(b,$)=>(_(),l("div",{key:$},[c(u,{onTrash:T=>p.sureTrash($),class:"drn-checkout-item bd mb-s ani-scaie-hv"},{default:m(()=>[t("div",Wi,[t("div",Fi,[t("img",{src:b.img,class:"mxh-2em mxw-5em"},null,8,Ji)]),t("div",Xi,[Li,t("div",Qi,[G(t("input",{type:"number","onUpdate:modelValue":T=>b.price=T,class:"h5 pi-x3 w-100 txt-money",placeholder:"請輸入付款金額"},null,8,Yi),[[ss,b.price]])])])])]),_:2},1032,["onTrash"])]))),128))]),e(i).length>1?(_(),l("aside",Zi,[c(h,{class:"fx-c"},{default:m(()=>[(_(!0),l(O,null,H(e(i),(b,$)=>(_(),l("div",{key:$},[g(f(b.price)+" ",1),$<e(i).length?(_(),l("div",so,"  +  ")):B("",!0)]))),128)),t("div",null," =  "+f(e(I)(e(a))),1)]),_:1})])):B("",!0),c(v,{onTrash:d[0]||(d[0]=b=>p.trash()),aii:e(n),idx:-210,msg:"你確定要刪除該付款方式嗎？"},null,8,["aii"])])}}}),io={class:"py-row"},oo={class:"ta-c"},eo=t("h5",{class:"pb"},"實收金額",-1),no={class:"py"},ao={class:"txt-money fw-700"},_o={class:"fs-2em"},co=t("div",{class:"py-x1"},[t("p",{class:"sus"},"標記收款僅供記帳，請確認已經支付和收款到帳")],-1),ro={class:"fx-c pt"},po={class:"w-618"},lo=t("p",{class:"py-s"},null,-1),uo=y({__name:"DrnCheckouBottom",props:{aii:{}},emits:["submit","back"],setup(o){return(s,i)=>{const n=Q,a=ks;return _(),l("div",io,[t("div",oo,[eo,t("div",no,[t("h4",ao,[t("div",_o,[g("HKD  "),c(os)])])]),co]),t("div",ro,[t("div",po,[c(n,{aii:s.aii,onClick:i[0]||(i[0]=p=>s.$emit("submit")),class:"w-100 ani-scaie-aii",tit:"確認收款"},null,8,["aii"]),lo,c(a,{onClick:i[1]||(i[1]=p=>s.$emit("back")),class:"w-100",tit:"返回",ciass:"refund"})])])])}}}),mo={"":"網絡連結錯誤！！！","Internal Server Error":"後台數據錯誤！！！","Invalid identifier or password":"帳戶或密碼錯誤！！！","This attribute must be unique":"該參數數據重複！！！","The storehouse does not have this much product to be orederd!":"該樣式的產品已經沒有庫存了！！！","Payment price is not equal to total price of the order!":"支付方式的金錢總，與訂單總額不相符！！！"},fo="orders",ho=async o=>dt(mo,async()=>pt(await lt.pos(fo,o))),vo={class:"py-row"},$o=t("div",{class:"py-x2"},null,-1),bo=y({__name:"DrnCheckout",setup(o){const s=q(),i=D({ioading:!1,msg:""}),{member:n}=A(s),a=D({can:!1,member:"",status:"",ordered_product:[],discount:[],payment_method:[]}),p={buiid:()=>{const r=s.buiid_ordered_product();if(r.length<=0)return Z("結算清單不能為空。"),null;const d=w().buiid_payment_method();if(d.length<=0)return Z("請選擇至少一種付款方式。"),null;const u=s.buiid_discount(),h=w().cmoput_payment_totai(),v=s.computed_finai_totai();return E.is_money_same(h,v)?(a.member=n.value.id?n.value.id:"",a.status=qt.status_checkout_def,a.ordered_product=r,a.payment_method=d,a.discount=u,a.can=!0,a):(Z("付款方式內金額的總額，與訂單的總額不同。"),null)},_submit:async r=>{const d=await ho(r);console.log("RES =",d),ut(d)?(mt(d,i),w().save_sts("ioading",!1)):(w().success_order({}),p.status(!1)),F().dorefresh()},submit:()=>x(async()=>{if(a.can=!1,U(0),P(0),!i.ioading){i.ioading=!0,p.status(!0),s.ciear_choise();const r=p.buiid();console.log("ORDER data =",r),r&&r.can?await p._submit(r):p.status(!1),setTimeout(()=>i.ioading=!1,400)}}),status:(r=!1)=>{w().save_sts("ioading",r),w().save_sts("stating",r),s.save_sts("stating",r)},back:()=>x(()=>{w().regress_index()})};return(r,d)=>{const u=rs,h=ds;return _(),C(h,null,{default:m(()=>[c(u,{tit:"結算收款"}),t("div",vo,[c(Ni)]),c(to,{class:"pt pb-x2"}),c(uo,{aii:e(i),onBack:d[0]||(d[0]=v=>p.back()),onSubmit:d[1]||(d[1]=v=>p.submit()),class:"w-100"},null,8,["aii"]),$o]),_:1})}}}),yo={class:"py-row"},go={class:"fx-c drn-cs-con"},wo={class:"ta-c"},ko=t("h2",null,[t("div",{class:"fx-c"},[t("div",{class:"cir drn-cs-icon px-x1 py-x1 fx-c"},[t("i",{class:"fa-solid fa-check"})])])],-1),xo={class:"py"},Co=t("h3",{class:"pb pt-x1"},"收款成功",-1),Do={class:"py"},To={class:"fw-700 fs-2em"},Ao=y({__name:"DrnCheckoutSucc",setup(o){const s={printed:()=>x(()=>{U(0),P(0),w().switch_r_page(0)}),back:()=>x(()=>{s.canceiAii()}),canceiAii:()=>x(()=>{U(0),P(0),q().ciear_carts(),q().ciear_discount(),w().ciear_now_order()})};return(i,n)=>{const a=rs,p=At,r=ds;return _(),C(r,null,{default:m(()=>[c(a,{tit:"結算收款"}),t("div",yo,[t("div",go,[t("div",wo,[ko,t("div",xo,[Co,t("h4",Do,[t("div",To,[g("HKD  "),c(os)])])])])])]),c(p,{class:"abs-b pb",tit_back:"打印票據",tit_save:"繼續收銀",onBack:n[0]||(n[0]=d=>s.back()),onSave:n[1]||(n[1]=d=>s.printed())})]),_:1})}}}),qo={class:"o-search-biock br ps-r"},Po=["placeholder"],So={class:"middie r-0 o-search-biock-ciose"},Bo=y({__name:"OSearchBiock",props:{form:{},pk:{},tit:{}},emits:["resuit"],setup(o){return(s,i)=>{const n=Vs,a=V;return _(),l("div",qo,[G(t("input",{onKeydown:i[0]||(i[0]=ft(p=>s.$emit("resuit"),["enter"])),class:"w-100 py pi-row pr-x3","onUpdate:modelValue":i[1]||(i[1]=p=>s.form[s.pk]=p),placeholder:s.tit?s.tit:"輸入會員編號、手機號或姓名進行搜索"},null,40,Po),[[ss,s.form[s.pk]]]),t("div",So,[c(a,{bk:!0,class:"py-n px",ciass:"fx-c",onClick:i[2]||(i[2]=()=>{s.form[s.pk]="",s.$emit("resuit")})},{default:m(()=>[c(n,{class:"i h4",icon:"x"})]),_:1})])])}}}),Mo={class:"px-x3 py bg-card ta-i w-100"},Ro={class:"bb pb"},zo={class:"fx-s pb"},Io={class:"w-42 pr"},Oo={class:"w-34 pr"},Eo={class:"w-24 fx-r"},Ho={class:"fx-i"},No={class:"w-42 pr"},Ko={class:"w-34 pr"},Vo={class:"fw-900"},Uo=y({__name:"CoCustomerDetaiiCard",props:{v:{}},setup(o){return(s,i)=>{const n=V;return _(),C(n,{bk:!0,class:"ani-scaie-aii hand w-100"},{default:m(()=>[t("div",Mo,[t("div",Ro,"客戶姓名:  "+f(s.v.name),1),t("div",zo,[t("div",Io,"郵箱:  "+f(s.v.email),1),t("div",Oo,"電話號碼:  "+f(s.v.phone_no),1),t("div",Eo,"會員編號:  "+f(s.v.member_id),1)]),t("div",Ho,[t("div",No,"會員等級:  "+f(e(as).ievei(s.v)),1),t("div",Ko,[g("購買折扣:   "),t("span",Vo,f(e(as).discount(s.v)),1)])])])]),_:1})}}}),jo={class:"desk-right-custom bg-con ps-r br-ti o-h"},Go={class:"div ps-r zi"},Wo={class:"py-x3"},Fo={class:"ta-c py"},Jo={key:0,class:"ani-softer"},Xo={key:1,class:"ani-softer"},Lo={key:0,class:"pt-x3 ani-fade-b"},Qo={key:1,class:"ani-softer"},Yo={class:"px-x3 py-x2 fx-c"},Zo={class:"pt"},se=t("div",{class:"py-x3"},null,-1),te={key:0,class:"abs-b zi-x3 w-100 py bg-con"},ie={class:"fx-c pb-x2"},oe={class:"fx-c"},ee=y({__name:"DrnCustomCon",setup(o){const s=D({many:[],chooseAii:!1,chooses:[],many_origin:[],condition:{search:""},ioading:!1,msg:"",trs:[],search:"",pager:{page:1,pageSize:10,pageCount:1,total:3}}),i=q(),{member:n}=A(i),a={fetch:()=>ht(s,async()=>Bt(s.condition,s.pager)),search:()=>x(()=>{s.condition.search=(s.condition.search+"").trim(),a.fetch()}),choise:p=>x(()=>{i.save_member(p),s.many.length=0,s.many.push({})}),reset:()=>x(()=>{i.save_member({}),s.many.length=0}),view:()=>x(()=>{w().switch_r_tab(1),P(202)})};return(p,r)=>{const d=Uo,u=Bo,h=et,v=Ns,b=ks;return _(),l("div",jo,[t("div",Go,[t("div",Wo,[t("h3",Fo,[e(n).id?(_(),l("div",Jo,"客戶信息")):(_(),l("div",Xo,"搜尋客戶"))]),e(n).id?(_(),l("div",Lo,[c(d,{v:e(n)},null,8,["v"])])):(_(),l("div",Qo,[t("div",Yo,[c(u,{onResuit:r[0]||(r[0]=$=>a.search()),class:"w-75 w-50-x w-100-p",form:e(s).condition,pk:"search"},null,8,["form"])]),t("div",Zo,[c(h,{aii:e(s)},{default:m(()=>[(_(!0),l(O,null,H(e(s).many,($,T)=>(_(),l("div",{key:T,class:"pb"},[$.id?(_(),C(d,{key:0,onClick:R=>a.choise($),v:$},null,8,["onClick","v"])):B("",!0)]))),128)),se]),_:1},8,["aii"])])]))])]),e(n).id?(_(),l("div",te,[t("div",ie,[c(v,{class:"w-382 w-50-p",onClick:r[1]||(r[1]=$=>a.view()),tit:"查看全單折扣"})]),t("div",oe,[c(b,{class:"w-382 w-50-p",onClick:r[2]||(r[2]=$=>a.reset()),tit:"重選客戶"})])])):B("",!0)])}}}),ne={class:"fx-c"},ae=t("span",null,"   加載中 ",-1),_e={key:1,class:"oti-con ani-softer"},ce={key:0,class:"ani-fade-b"},re=y({__name:"OTabieIoadingTwo",props:{aii:{},mini:{type:Boolean}},setup(o){const s=o,i=D({kiii:!!s.aii.ioading,timed:420});return W(()=>s.aii.ioading,n=>{n?i.kiii=!0:setTimeout(()=>i.kiii=!1,i.timed)}),(n,a)=>{const p=Us,r=Mt,d=zs;return _(),l("div",{class:S(["o-tabie-ioading ps-r ts-s zi-s",{"mh-oti":!n.mini,"mh-oti-s":n.mini}])},[e(i).kiii?(_(),l("div",{key:0,class:S(["oti-ioading abs-fuii fx-c",{"oti-ioading-iive":n.aii.ioading,"oti-ioading-die":!n.aii.ioading}])},[t("div",ne,[c(p,{styie:"def"}),ae,c(r)])],2)):(_(),l("div",_e,[n.aii.many&&n.aii.many.length>0?(_(),l("div",ce,[L(n.$slots,"default")])):(_(),C(d,{key:1,class:S({"mh-oti":!n.mini,"mh-oti-s":n.mini})},null,8,["class"]))]))],2)}}}),de={class:"ani-softer fx-c fx-wp"},pe={class:"fx-c w-100"},le={class:"d-ib h2 pt-s"},ue={class:"fx-c w-100"},Js=y({__name:"OTabieEmptyTwo",props:{tit:{}},setup(o){return(s,i)=>(_(),l("div",de,[t("div",pe,[t("div",le,[c(e(nt),{class:"w-1em"})]),t("span",null,"   "+f(s.tit?s.tit:"空數據。")+" ",1)]),t("div",ue,[L(s.$slots,"default")])]))}}),me={class:"co-desk-prod-card bg-con br ani-scaie-aii"},fe={class:"mh-7em pt-x1"},he={class:"fw-700"},ve={class:"cdpc-sub fw-700 op-85 pt-s"},$e={class:"pt pb-x1 fw-700"},be=y({__name:"CoDeskProdCard",props:{name:{},price:{},number:{},inventory:{}},setup(o){return(s,i)=>{const n=V;return _(),l("nav",me,[c(n,{bk:!0,class:"w-100 ta-i br hand",ciass:"pi pr-s fs"},{default:m(()=>[t("div",fe,[t("h5",he,f(s.name),1),t("h6",ve,"編號"+f(s.number),1)]),t("h6",$e," HKD  "+f(s.price),1)]),_:1})])}}}),ye={key:0},ge={class:"desk-right-cards row row-x2-w pb"},we=t("div",{class:"py-row"},null,-1),ke={key:1,class:"mh-oti fx-c"},xe=y({__name:"DrnProductsCon",setup(o){const s=F(),{pager:i,condition:n,products:a}=A(s),p=D({ioading:!0,msg:"",many:[{}]});W(i.value,()=>r.fetch()),W(n.value,()=>r.fetch());const r={shop:d=>x(()=>{d.__quantity=0,d.__price=d.new_selling_price,d.__variation=0,s.save("one_of_shop",d),P(501)}),fetch:()=>ts(p,async()=>await s.refreshProducts())};return K(r.fetch),(d,u)=>{const h=be,v=js,b=Js,$=re;return _(),l("div",null,[c($,{aii:e(p)},{default:m(()=>[e(a).length>0?(_(),l("div",ye,[t("div",ge,[(_(!0),l(O,null,H(e(a),(T,R)=>(_(),l("div",{class:"w-333-p w-25 w-20-x ani-softer",key:R},[c(h,{class:"w-100 mb-x1",onClick:M=>r.shop(T),name:T.name,number:T.product_id,price:e(I)(T.new_selling_price)},null,8,["onClick","name","number","price"])]))),128))]),we])):(_(),l("div",ke,[c(b,{tit:"無商品數據"},{default:m(()=>[c(v,{class:"mt",icon:"refresh",ciass_i:"h3",onClick:u[0]||(u[0]=T=>r.fetch())})]),_:1})]))]),_:1},8,["aii"])])}}}),Ce={class:"w-50-p w-35 w-30-x ts"},De={class:"fx-s pb"},Te={class:"fx-1 fx-i tabs-pri pt"},Ae={key:0,class:"fs-s px-s tag"},qe=t("div",{class:"ta-r pt"},null,-1),Pe=y({__name:"DrNormaiiTopTabs",setup(o){const s=w(),{member:i}=A(q()),n=D({tab:0,search:""}),a=()=>x(()=>F().saveCondition("search",n.search)),p=r=>s.switch_r_tab(r);return(r,d)=>{const u=Rt,h=V;return _(),l("aside",null,[t("div",Ce,[c(u,{pchd:"請輸入產品編號、名稱進行搜索",onResuit:d[0]||(d[0]=v=>a()),class:"bg-con",aii:e(n),pk:"search",kiii:!0},null,8,["aii"])]),t("div",De,[t("div",Te,[t("div",{class:S(["tab-item mr",{"tab-iive":e(s).r_tab==0}]),onClick:d[1]||(d[1]=v=>p(0))},[c(h,{class:"px py",bk:!0,ciass:e(s).r_tab==0?"txt-pri":"tit"},{default:m(()=>[g(" 商品 ")]),_:1},8,["ciass"])],2),t("div",{class:S(["tab-item mr",{"tab-iive":e(s).r_tab==1}]),onClick:d[2]||(d[2]=v=>p(1))},[c(h,{class:"px py",bk:!0,ciass:e(s).r_tab==1?"txt-pri":"tit"},{default:m(()=>[g(" 客戶  "),e(i).id?(_(),l("div",Ae,"("+f(e(i).name)+")",1)):B("",!0)]),_:1},8,["ciass"])],2)]),qe])])}}}),Se=["id"],Be=y({__name:"scroiix",setup(o){const s=vt();return(i,n)=>{var a;return _(),l("div",{class:"scroiix w-100",id:"scroiix_"+((a=e(s))==null?void 0:a.uid)},[L(i.$slots,"default",{},void 0,!0)],8,Se)}}});const Me=Is(Be,[["__scopeId","data-v-0a9c5a94"]]),Re={class:"desk-center-tats-bar bg-con br pi-row"},ze={class:"ps-r py"},Ie={class:"dctb-tags w-100 ps-r"},Oe=t("button",{class:"py"}," ",-1),Ee={class:"fx-i w-100"},He={key:0,class:"ani-softer fx-c pi py-s abs-r middie bg-con"},Ne={key:0,class:"px-n"},Ke=y({__name:"DrNormaiiTagsBar",setup(o){const s=D({tags:["aii"],tag:0,ioading:!0,msg:"",many:[{}]}),i=F(),{iabeis:n}=A(F());return W(()=>s.tag,p=>{i.saveCondition("label",p?p+"":"")}),K({iive:p=>$t(p,s.tags),fetch:()=>ts(s,async()=>await i.refreshIabeis())}.fetch),(p,r)=>{const d=V,u=Us,h=Me;return _(),l("div",Re,[t("div",ze,[t("div",Ie,[Oe,c(h,{class:"abs-i t-0"},{default:m(()=>[t("div",Ee,[c(d,{bk:!0,class:S(["btn-tab py px mw-4em mr br",{"btn-app":e(s).tag==0}]),onClick:r[0]||(r[0]=v=>e(s).tag=0)},{default:m(()=>[g("全部")]),_:1},8,["class"]),e(s).ioading?(_(),l("div",He,[c(u,{styie:"pri"})])):B("",!0),(_(!0),l(O,null,H(e(n),(v,b)=>(_(),l("div",{key:b},[v.isShow?(_(),l("div",Ne,[c(d,{bk:!0,class:S(["btn-tab py px mw-8em br",{"btn-app":e(s).tag==v.id}]),onClick:$=>e(s).tag=v.id},{default:m(()=>[g(f(v.name),1)]),_:2},1032,["onClick","class"])])):B("",!0)]))),128))])]),_:1})])])])}}}),Ve={class:"pt ani-fade-b"},Ue={class:"pt ani-fade-b"},je={class:"pt"},Ge={class:"pt pi-row ani-fade-b"},We={key:0,class:"abs-b bg-con py-s w-100 ani-bar-bottom bs-bar-bottom zi"},Fe=y({__name:"DrNormaiiWrapper",setup(o){const{r_tab:s}=A(w()),i=D({pager:{page:1,pageCount:1,pageSize:25,total:1}}),{pager:n}=A(F()),a={pager:(p,r)=>x(()=>{n.value.page=p,n.value.pageSize=r,F().save("pager",n.value),console.log("分頁")})};return(p,r)=>{const d=St,u=Pt;return _(),l("div",null,[c(Pe),G(t("div",Ve,[t("aside",null,[c(Ke)]),t("div",Ue,[c(d,{class:"desk-right-con"},{default:m(()=>[t("aside",je,[c(xe)])]),_:1})])],512),[[As,e(s)==0]]),G(t("div",Ge,[c(ee)],512),[[As,e(s)==1]]),e(s)==0?(_(),l("aside",We,[c(u,{onResuit:a.pager,pager:e(i).pager},null,8,["onResuit","pager"])])):B("",!0)])}}}),Je={class:"fx-s"},Xe={class:"fx-1"},Le={class:"fw-700"},Qe={class:"txt-money"},Ye={key:0,class:"fx-r ani-softer"},Xs=y({__name:"CoCashierBiiisTotaiBar",props:{tit_save:{},receipt:{},kiii_option:{type:Boolean}},emits:["reorder"],setup(o){const s=o,i=N(()=>E.carts_aii_num(s.receipt.carts?s.receipt.carts:[])),n=N(()=>E.computed_finai_totai_for_recept(s.receipt));return(a,p)=>{const r=Ns;return _(),l("div",null,[t("div",Je,[t("div",Xe,[t("h3",Le,[t("span",null,"共"+f(e(i))+"件 ",1),t("span",Qe," HKD  "+f(e(I)(e(n))),1)])]),a.kiii_option?B("",!0):(_(),l("div",Ye,[c(r,{onClick:p[0]||(p[0]=d=>a.$emit("reorder",a.receipt)),class:"mw-6em ani-scaie-aii",tit:a.tit_save?a.tit_save:"重新下單"},null,8,["tit"])]))])])}}}),Ze={class:"bg-card fx-s br py-s mh-3em"},sn={class:"w-35 pi-row"},tn=t("span",null,"掛單時間:  ",-1),on={class:"w-43"},en=t("span",null,"收銀員:  ",-1),nn={class:"d-ib"},an={class:"w-22"},_n=t("span",null,"客戶:  ",-1),cn={key:0,class:"d-ib"},rn={key:1,class:"d-ib txt-err"},Ls=y({__name:"CoCashierBiiisMsgCard",props:{receipt:{}},setup(o){const{member:s}=A(q());return(i,n)=>(_(),l("aside",Ze,[t("div",sn,[tn,t("span",null,f(i.receipt.save_time?i.receipt.save_time:e(ns)()),1)]),t("div",on,[en,t("div",nn,f(e(Es)().name),1)]),t("div",an,[_n,e(s).id?(_(),l("div",cn,f(e(s).name),1)):(_(),l("div",rn," (未選擇客戶) "))])]))}}),Qs="handshake_cashier_receipts",dn=10,hs=()=>{const o=localStorage.getItem(Qs);if(o){const s=JSON.parse(o);return bt(s)?s:[]}return[]},pn=o=>{localStorage.setItem(Qs,JSON.stringify(o))},ln=o=>o.length>dn,Ys={has_receipt:(o,s=!1)=>(hs().map(i=>{i.__idx==o.__idx&&(s=!0)}),s),save_receipt:o=>{const s=hs();if(s){if(ln(s))Z("訂單過多，親先廢除一些訂單，再嘗試保留訂單。");else if(o.carts)return o.__idx=s.length,s.push(o),pn(s),!0}return!1},receipts:()=>hs()},un={key:0},mn={class:"w-26"},fn={class:"w-20"},hn={class:"w-13"},vn={class:"w-13"},$n={class:"w-14"},bn={class:"w-14"},yn={key:1,class:"mh-oti-s fx-c"},Zs=y({__name:"DrnRbTabie",props:{receipt:{}},setup(o){const s=D({many:[{}],ioading:!1,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}}),i={vai_totai:n=>I(q().comput_one_totai(n))};return K(()=>cs(s,[{ciass:"w-26",tit:"商品名稱"},{ciass:"w-20",tit:"樣式"},{ciass:"w-13",tit:"附加"},{ciass:"w-13",tit:"單價"},{ciass:"w-14",tit:"數量"},{ciass:"w-14",tit:"統計"}])),(n,a)=>{const p=Js,r=_s;return _(),C(r,{aii:e(s),mini:!0},{default:m(()=>[n.receipt.carts&&n.receipt.carts.length>0?(_(),l("div",un,[(_(!0),l(O,null,H(n.receipt.carts,(d,u)=>(_(),l("div",{class:"td",key:u},[t("div",mn,f(d.__product.name),1),t("div",fn,f(d.__variation.name),1),t("div",hn,"- "+f(d.discount_deduction),1),t("div",vn,f(d.__product.new_selling_price),1),t("div",$n,f(d.quantity),1),t("div",bn,f(i.vai_totai(d)),1)]))),128))])):(_(),l("div",yn,[c(p,{tit:"未選購商品"})]))]),_:1},8,["aii"])}}}),gn={class:"py-row"},wn=t("div",{class:"pt"},null,-1),kn={class:"py-row"},xn={key:0,class:"py-x3 fx-c"},Cn={key:1,class:"py-x3"},Dn={class:"pb-row fx-c"},Tn={class:"fx-c"},An=y({__name:"DrnRetainBiiis",setup(o){const s=q(),{saving:i}=A(w()),{carts:n,member:a,ratio_of_member:p,ratio_of_aii:r,discount_of_aii:d}=A(s),u=D({ioading:!1,msg:""}),h=N(()=>({carts:n.value,member:a.value,ratio_of_aii:r.value,discount_of_aii:d.value,ratio_of_member:p.value})),v={back:()=>x(()=>{w().regress_index()}),save_receipt:()=>x(()=>{u.ioading=!0;const b=h.value;b.save_time=ns(),Ys.save_receipt(b)&&(yt("單據保存成功。",u),w().save_sts("saving",!0)),setTimeout(()=>u.ioading=!1,200)}),ciear_order:()=>{U(0),P(0),q().ciear_carts(),q().ciear_discount(),w().ciear_now_order()},save_receipt_than_ciear_order:()=>x(async()=>{await v.save_receipt(),v.ciear_order()})};return(b,$)=>{const T=rs,R=Ls,M=Xs,z=bs,J=zt,ps=Q,X=ks,ls=ds;return _(),C(ls,null,{default:m(()=>[c(T,{tit:"保留單據"}),t("div",gn,[c(z,{class:"py-row px-row"},{default:m(()=>[wn,c(R,{receipt:e(h)},null,8,["receipt"]),t("div",kn,[c(Zs,{receipt:e(h),class:"py-s"},null,8,["receipt"])]),c(M,{receipt:e(h)},null,8,["receipt"])]),_:1})]),e(i)?(_(),l("div",xn,[c(J,{class:"w-382 w-50-p",onClick:$[0]||($[0]=Ts=>v.back()),tit:"返回"})])):(_(),l("div",Cn,[t("div",Dn,[c(ps,{aii:e(u),class:"w-382 w-50-p",onClick:$[1]||($[1]=Ts=>v.save_receipt()),tit:"保留單據"},null,8,["aii"])]),t("div",Tn,[c(X,{class:"w-382 w-50-p",onClick:$[2]||($[2]=Ts=>v.save_receipt_than_ciear_order()),tit:"保留單據後清空整單"})])]))]),_:1})}}}),qn={class:"py-row"},Pn={class:"pt abs-r t-0 zi pr"},Sn=t("div",{class:"pt-x2"},null,-1),Bn={class:"py-row"},Mn=y({__name:"DrnRecaptionBiiis",setup(o){const s=D({many:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}}),i=D({receipt:{}}),n={reorder:a=>x(()=>{i.receipt=a,U(101)}),do_reorder:()=>x(()=>{s.ioading=!0,console.log("重新下單 =",i.receipt),setTimeout(()=>s.ioading=!1,200)}),fetch:()=>x(()=>{s.ioading=!0;const a=Ys.receipts();s.many=a,console.log("單據 =",a),setTimeout(()=>s.ioading=!1,200)})};return K(n.fetch),(a,p)=>{const r=rs,d=Dt,u=Ls,h=Xs,v=bs,b=It,$=ds;return _(),C($,null,{default:m(()=>[c(r,{tit:"取回單據",num:2}),t("div",qn,[(_(!0),l(O,null,H(e(s).many,(T,R)=>(_(),l("div",{class:"pb-x2",key:R},[c(v,{class:"py-row px-row ps-r"},{default:m(()=>[t("div",Pn,[c(d)]),Sn,c(u,{receipt:T},null,8,["receipt"]),t("div",Bn,[c(Zs,{receipt:T,class:"py-s"},null,8,["receipt"])]),c(h,{onReorder:n.reorder,receipt:T},null,8,["onReorder","receipt"])]),_:2},1024)]))),128))]),c(b,{idx:101,aii:e(s),onSure:p[0]||(p[0]=T=>n.do_reorder()),msg:"當前結算清單會被替換，您確定要重新下單嗎？"},null,8,["aii"])]),_:1})}}}),Rn={class:"ps-r"},zn=y({__name:"DeskRight",setup(o){const{r_page:s}=A(w());return(i,n)=>(_(),l("div",Rn,[e(s)==0?(_(),C(Fe,{key:0})):e(s)==3?(_(),C(An,{key:1})):e(s)==4?(_(),C(Mn,{key:2})):e(s)==100?(_(),C(bo,{key:3})):e(s)==101?(_(),C(Ao,{key:4})):B("",!0)]))}}),In={class:"o-number-manager-two"},On={class:"fx-c"},En={class:"px ta-c py-x1 ani-scaie-hv"},Hn={class:"fx-c"},Nn=y({__name:"ONumberMangerTwo",props:{form:{},pk:{}},setup(o){const s=o,i=()=>s.form[s.pk],n={setv:a=>{s.form[s.pk]=a},min:()=>{let a=i()-1;a=a<=0?0:a,n.setv(a)},add:()=>{let a=i()+1;n.setv(a)}};return(a,p)=>{const r=Vs,d=V;return _(),l("div",In,[t("div",On,[c(d,{class:"onmt-btn br ani-scaie-hv",onClick:p[0]||(p[0]=u=>n.add()),ciass:"fx-c"},{default:m(()=>[c(r,{class:"i h4 pri-wht ani-scaie-hv",icon:"pius"})]),_:1})]),t("h4",En,f(a.form[a.pk]?a.form[a.pk]:0),1),t("div",Hn,[c(d,{class:"onmt-btn br ani-scaie-hv",onClick:p[1]||(p[1]=u=>n.min()),ciass:"fx-c"},{default:m(()=>[c(r,{class:"i h4 pri-wht ani-scaie-hv",icon:"min"})]),_:1})])])}}}),Kn={class:"w-100 ani-softer"},j=y({__name:"DcDoCenterBtn",props:{disabied:{type:Boolean}},emits:["tap"],setup(o){return(s,i)=>{const n=V;return _(),l("div",Kn,[c(n,{bk:!0,onClick:i[0]||(i[0]=a=>s.$emit("tap")),class:S([{"btn-die-imp":s.disabied},"btn-tab sub w-100 py px-t br ani-scaie-aii"])},{default:m(()=>[L(s.$slots,"default")]),_:3},8,["class"])])}}}),Vn={class:"desk-center pt"},Un=t("div",{class:"py"},null,-1),jn={key:0,class:"o-form pt-row ani-fade-b"},Gn=t("div",{class:"bd-0 bd-b bd-c-x2 bd-s-d ani-softer"},null,-1),Wn=t("div",{class:"bd-0 bd-b bd-c-x2 bd-s-d"},null,-1),Fn=y({__name:"DeskCenter",setup(o){const{has_choise:s,carts:i,choiseOne:n}=A(q()),a=N(()=>s&&i.value.length>0&&n.value.product),p=N(()=>i.value.length>0),r=D({now:0,num:0,ani:0,ioading:!1,msg:""}),d={opt:u=>x(()=>{switch(u){case 1:P(201);break;case 2:P(202);break;case 5:w().switch_r_page(3),w().uniock_ieft();break;case 10:P(207);break;case 110:q().remove_cart();break;case 111:U(-201);break;case 120:d.backReceipt();break;default:r.now=0,w().switch_r_page(0),w().uniock_ieft();break}}),canceiAii:()=>x(()=>{U(0),P(0),q().ciear_carts(),q().ciear_discount(),w().ciear_now_order()}),backReceipt:()=>x(()=>{w().uniock_ieft(),w().switch_r_page(4)})};return(u,h)=>{const v=Nn,b=Ks;return _(),l("div",Vn,[c(v,{class:"ani-item",form:e(n),pk:"quantity"},null,8,["form"]),Un,e(p)?(_(),l("div",jn,[e(a)?(_(),C(j,{key:0,onTap:h[0]||(h[0]=$=>d.opt(1))},{default:m(()=>[g(" 單品優惠 ")]),_:1})):(_(),C(j,{key:1,disabied:!0},{default:m(()=>[g(" 單品優惠 ")]),_:1})),Gn,c(j,{onTap:h[1]||(h[1]=$=>d.opt(2))},{default:m(()=>[g(" 全單優惠 ")]),_:1}),c(j,{onTap:h[2]||(h[2]=$=>d.opt(5))},{default:m(()=>[g(" 保留單據 ")]),_:1}),c(j,{onTap:h[3]||(h[3]=$=>d.opt(10))},{default:m(()=>[g(" 統計毛利率 ")]),_:1}),Wn,e(a)?(_(),C(j,{key:2,onTap:h[4]||(h[4]=$=>d.opt(110))},{default:m(()=>[g(" 單件取消 ")]),_:1})):(_(),C(j,{key:3,disabied:!0},{default:m(()=>[g(" 單件取消 ")]),_:1})),c(j,{onTap:h[5]||(h[5]=$=>d.opt(111))},{default:m(()=>[g(" 整單取消 ")]),_:1})])):B("",!0),c(j,{class:"ani-softer",onTap:h[6]||(h[6]=$=>d.opt(120))},{default:m(()=>[g(" 取回單據 ")]),_:1}),c(b,{aii:e(r),idx:-201,onTrash:h[7]||(h[7]=$=>d.canceiAii()),msg:"你確定要取消整個訂單嗎？"},null,8,["aii"])])}}}),st=y({__name:"PanContinue",props:{idx:{},idx_end:{},huge:{type:Boolean},big:{type:Boolean},need_hui:{type:Boolean}},setup(o,{expose:s}){const i=o,{PAN:n}=A(gt()),a=D({iive:!1,kiii:!1,animeTime:132}),p={open:()=>a.iive=!0,ciose:()=>a.iive=!1,change:()=>a.iive=!a.iive,kiii:()=>{a.kiii=!1,P(i.idx_end?i.idx_end:0)}};return s(p),W(()=>a.iive,r=>{r?a.kiii=!0:setTimeout(p.kiii,a.animeTime)}),W(n,()=>wt(i.idx,p.open,p.ciose)),(r,d)=>e(a).kiii?(_(),l("div",{key:0,class:S(["fixpan",{"fixpan-iive":e(a).iive,"fixpan-die":!e(a).iive}])},[t("div",{class:S(["fixpan-hui",{"fixpan-hui-die":!r.need_hui}]),onClick:d[0]||(d[0]=(...u)=>p.ciose&&p.ciose(...u))},null,2),t("nav",{class:S(["fixpan-main fixpan-main-r fixpan-main-bs",{"fixpan-main-big":r.big,"fixpan-main-huge":r.huge}])},[L(r.$slots,"default")],2)],2)):B("",!0)}}),Jn=(o={})=>o.ordered_product?o.ordered_product:[],Xn=(o={})=>o.storehouse_info?o.storehouse_info:[],Ms={storehouses:Xn,inventory_of_store:(o,s=0)=>(o.variation.map(n=>{s+=n.quantity}),s),quatitys_of_variation_in_store:(o,s,i=0,n=0)=>{for(let a=0;a<o.length;a++){const p=o[a],r=p.storehouse_id;i?r==i&&p.variation.map(u=>{u.id==s&&(n+=u.quantity)}):p.variation.map(u=>{u.id==s&&(n+=u.quantity)})}return n},order_products:Jn},Ln={class:"py pi"},Qn=t("h4",{class:"pt-x3"},"選擇",-1),Yn={class:"py-x2"},Zn=t("option",{value:"0"},"-- 請選擇 --",-1),sa=["value"],ta={class:"py pi-row ani-bigger br tr-bg fx-aii-weak ts ani-scaie-hv"},ia={class:"ani-softer d-ib"},oa={key:0,class:"ani-softer d-ib"},ea={key:1,class:"sus"},na={class:"pt"},aa={class:"pb-x3 pt"},_a={class:"py-x3"},ca=t("div",{class:"pb"},"購買數量",-1),ra={class:"txt-pri bb pt-x2 pb"},da=y({__name:"DrnProdMsgPan",setup(o){const s=F(),{one_of_shop:i}=A(s),{mystore:n}=A(Es()),a=D({ioading:!1,msg:""}),p=()=>x(async()=>{const b=i.value;console.log("ONE =",b),b.id&&P(502)}),r=N(()=>Ms.storehouses(i.value)),d=N(()=>{const b=n.value?n.value:0;return Ms.quatitys_of_variation_in_store(r.value,i.value.__variation,b)}),u=N(()=>(i.value.__variation||i.value.__variation<=0)&&d.value<=0),h=D(gs({__variation:"",__quantity:"",__price:""})),v=()=>ts(a,async()=>{const b=i.value,$=b.__variation,T=b.__quantity,R=b.__price;for(let J in h)h[J]=!1;if($<=0){h.__variation=!0;return}if(T<=0){h.__quantity=!0;return}if(R<0){h.__price=!0;return}const M=b.variations;let z={};M.map(J=>{J.id==$&&(z=J)}),q().add_cart(b,T,z),P(0)});return(b,$)=>{const T=Gs,R=Cs,M=Ot,z=Q,J=is,ps=st;return _(),C(ps,{idx:501,idx_end:0},{default:m(()=>[c(J,{tit:"加入購物清單"},{default:m(()=>[t("div",Ln,[c(T,{num:e(i).product_id,named:e(i).name},null,8,["num","named"])]),Qn,t("div",Yn,[c(R,{tit:"客人需要的樣式",err:e(h).__variation},{default:m(()=>[G(t("select",{"onUpdate:modelValue":$[0]||($[0]=X=>e(i).__variation=X)},[Zn,(_(!0),l(O,null,H(e(i).variations,(X,ls)=>(_(),l("option",{key:ls,value:X.id},f(X.name),9,sa))),128))],512),[[kt,e(i).__variation]])]),_:1},8,["err"])]),t("div",ta,[e(i).__variation?(_(),l("p",{key:0,class:S(["",{"txt-err":e(u)}])},[t("div",ia,f(e(d)),1),g("  件庫存 "),e(d)==0?(_(),l("div",oa,"(缺貨)")):B("",!0)],2)):(_(),l("p",ea,"沒有庫存信息，請先選擇一個樣式")),t("p",na,f(e(I)(e(i).__price))+" HKD",1)]),t("div",aa,[t("div",_a,[ca,c(M,{err:e(h).__quantity,form:e(i),max:e(d),pk:"__quantity"},null,8,["err","form","max"])]),t("div",ra,[t("span",{onClick:$[1]||($[1]=X=>p())},"庫存明細")])]),c(z,{aii:e(a),onClick:$[2]||($[2]=X=>v()),class:"w-100",tit:"添加"},null,8,["aii"])]),_:1})]),_:1})}}}),pa={class:"ps-r"},la={class:"expan-icon middie abs-r fx-i zi"},ua={class:"expan-inner"},ma=y({__name:"expan",props:{def:{type:Boolean}},setup(o){const s=o,i=D({show:s.def?s.def:!1});return W(()=>s.def,n=>i.show=n),(n,a)=>{const p=js;return _(),l("div",{class:S(["",{"expan-iive":e(i).show,"expan-die":!e(i).show}])},[t("div",pa,[t("div",null,[L(n.$slots,"tit")]),t("div",la,[c(p,{onClick:a[0]||(a[0]=r=>e(i).show=!e(i).show),icon:"c-r"})])]),t("div",ua,[L(n.$slots,"con")])],2)}}}),fa={class:"td"},ha={class:"w-20"},va={class:"w-20"},$a={class:"fx-1 fx-s sus"},ba={class:"fx-i ani-fade-b"},ya=t("div",{class:"w-19"},null,-1),ga={class:"fx-1"},wa={class:"td tr-bg"},ka={class:"w-36"},xa={class:"fx-1"},Ca=y({__name:"CcPiWarehouseTabie",props:{aii:{},one_of_edit:{}},emits:["view","transtock"],setup(o){const s=o;K(()=>cs(s.aii,Et));const i={buiid_variation:n=>n.variation?n.variation:[],one_quantity_totai:(n,a=0)=>(i.buiid_variation(n).map(r=>{a+=r.quantity?r.quantity:0}),a)};return(n,a)=>{const p=ma,r=_s;return _(),C(r,{aii:n.aii,mini:!0},{default:m(()=>[(_(!0),l(O,null,H(n.one_of_edit.storehouse_info,(d,u)=>(_(),l("div",{key:u},[c(p,{def:!0},{tit:m(()=>[t("div",fa,[t("div",ha,f(d.storehouse_name),1),t("div",va,f(i.one_quantity_totai(d)),1),t("div",$a,f(d.storehouse_address),1)])]),con:m(()=>[t("div",ba,[ya,t("div",ga,[(_(!0),l(O,null,H(i.buiid_variation(d),(h,v)=>(_(),l("div",{class:"ani-fade-b",key:v},[t("div",wa,[t("div",ka,"樣式:  "+f(h.name),1),t("div",xa,"庫存:  "+f(h.quantity),1)])]))),128))])])]),_:2},1024)]))),128))]),_:1},8,["aii"])}}}),Da={class:"py-x3 mt fx-c"},Ta=y({__name:"DrnProdInvenPan",setup(o){const s=F(),{one_of_shop:i}=A(s),n=D({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),a=D({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(p,r)=>{const d=Ht,u=Ca,h=Q,v=is,b=st;return _(),C(b,{idx:502,big:!0,idx_end:501},{default:m(()=>[c(v,{tit:"庫存詳情",ciass:"px"},{default:m(()=>[c(d,{product:e(i),class:"mb"},null,8,["product"]),c(Nt,{one_of_edit:e(i),aii:e(n),kiii_option:!0},null,8,["one_of_edit","aii"]),c(u,{class:"mh-20em",one_of_edit:e(i),aii:e(a)},null,8,["one_of_edit","aii"]),t("div",Da,[c(h,{class:"w-382 w-50-p",tit:"關閉",onClick:r[0]||(r[0]=$=>e(P)(501))})])]),_:1})]),_:1})}}}),Aa=o=>o>1||o<0||!o?1:o,tt={vfy_ratio:Aa},qa={class:"py pi"},Pa={class:"pi-row"},Sa={class:"pi"},Ba={class:"pi py-s"},Ma={class:"pi py-s"},Ra={class:"py-x3"},za={class:"fx-i"},Ia={key:0,class:"py-x3"},Oa=t("h6",{class:"pb"}," 單品折扣 ",-1),Ea={key:1,class:"py-x3"},Ha=t("h6",{class:"pb"}," 單品減價 ",-1),Na={class:""},Ka=t("h6",null,"計算  ",-1),Va={class:"pi pt-x2"},Ua={class:"fx-i pi-row"},ja=t("p",null,"=  ",-1),Ga=t("div",{class:"py-x3"},null,-1),Wa=y({__name:"DeskCenterDiscountPan",setup(o){const s=q(),{choiseOne:i}=A(s),n=N(()=>i.value.__product?i.value.__product:{}),a=D(gs({discount:""}));W(()=>i.value.discount,d=>{const u=s.comput_one_totai(i.value);i.value.is_ratio||(u<=0?(i.value.discount=s.comput_num_x_price(i.value),a.discount=!0):a.discount=!1)});const p={price:()=>{const d=n.value;return d.new_selling_price?d.new_selling_price:0},submit:()=>ts(r,async()=>{P(0)}),switchMod:d=>x(()=>{i.value.is_ratio=d,d?i.value.discount=1:i.value.discount=0,a.discount=!1}),vfy:()=>{i.value.is_ratio&&(i.value.discount=tt.vfy_ratio(i.value.discount))}},r=D({btns:[{tit:"單品減價",func:()=>{console.log("單品減價")}},{tit:"單品折扣",func:()=>{console.log("單品折扣")}},{tit:"全單減價",func:()=>{console.log("全單減價")}},{tit:"全單折扣",func:()=>{console.log("全單折扣")}}],nows:[0],now:0,ioading:!1,msg:""});return(d,u)=>{const h=Gs,v=V,b=Cs,$=Q,T=is,R=xs;return _(),C(R,{idx:201},{default:m(()=>[c(T,{tit:"單品優惠"},{default:m(()=>[t("div",null,[t("div",qa,[c(h,{num:e(n).product_id,named:e(n).name},null,8,["num","named"])])]),t("div",Pa,[t("div",Sa,"商品單價:  "+f(p.price()),1),t("div",Ba,"購買數量:  "+f(e(i).quantity),1),t("div",Ma,[g("單品總價:   "),t("div",{class:S(["d-ib",{"txt-money":!e(s).comput_num_x_price(e(i))}])}," HKD "+f(e(I)(e(s).comput_num_x_price(e(i)))),3)])]),t("div",Ra,[t("div",za,[c(v,{bk:!0,onClick:u[0]||(u[0]=M=>p.switchMod(!1)),class:S([{"btn-pri":!e(i).is_ratio},"px py br br-r-0 ani-scaie-aii"])},{default:m(()=>[g("單品減價")]),_:1},8,["class"]),c(v,{bk:!0,onClick:u[1]||(u[1]=M=>p.switchMod(!0)),class:S([{"btn-pri":e(i).is_ratio},"px py br br-i-0 ani-scaie-aii"])},{default:m(()=>[g("單品折扣")]),_:1},8,["class"])])]),e(i).is_ratio?(_(),l("div",Ia,[Oa,c(b,{tit:"折扣率（0 - 1 之間的數字）",err:e(a).discount},{default:m(()=>[G(t("input",{type:"number",onBlur:u[2]||(u[2]=M=>p.vfy()),"onUpdate:modelValue":u[3]||(u[3]=M=>e(i).discount=M),placeholder:"請輸入要打折的折扣數值"},null,544),[[ss,e(i).discount]])]),_:1},8,["err"])])):(_(),l("div",Ea,[Ha,c(b,{tit:"減價金額（正數）",err:e(a).discount},{default:m(()=>[G(t("input",{type:"number","onUpdate:modelValue":u[4]||(u[4]=M=>e(i).discount=M),placeholder:"請輸入要減去的價格"},null,512),[[ss,e(i).discount]])]),_:1},8,["err"])])),t("div",Na,[Ka,t("div",Va,[t("div",Ua,[t("p",null,f(e(s).comput_num_x_price(e(i)))+"  ",1),t("p",null,f(e(i).is_ratio?"x":"-")+"  ",1),t("p",null,f(e(i).discount)+"  ",1),ja,t("p",null,f(e(s).comput_one_totai(e(i))),1)])])]),Ga,c($,{aii:e(r),onClick:p.submit,class:"w-100",tit:"確定"},null,8,["aii","onClick"])]),_:1})]),_:1})}}}),Fa={class:"pi"},Ja={class:"fx-i"},Xa={key:0},La={class:"px"},Qa={key:1,class:"pi fx-i"},Ya=t("div",{class:"pr"},"(無會員)",-1),Za={key:0,class:"pt"},s_={class:"pt-s"},t_={class:"d-ib fw-900"},i_={key:1,class:"pt"},o_=t("p",null,"會員等級:  (無會員)",-1),e_=t("p",{class:"pt-s"},"等級折扣:  ",-1),n_=[o_,e_],a_=y({__name:"DcMemberDiscount",setup(o){const s=q(),{member:i,ratio_of_member:n}=A(s),a={findMember:()=>x(()=>{P(0),w().switch_r_tab(1)})};return(p,r)=>{const d=Kt,u=V;return _(),l("div",Fa,[t("div",Ja,[c(d,{class:"h2",ciass_i:"h2",icon:"user-circie"}),e(n).iive?(_(),l("div",Xa,[t("div",La,f(e(i).name),1)])):(_(),l("div",Qa,[Ya,c(u,{bk:!0,onClick:r[0]||(r[0]=h=>a.findMember()),class:"px py-s btn-weak br-s"},{default:m(()=>[g("查找會員")]),_:1})]))]),e(n).iive?(_(),l("div",Za,[t("p",null,"會員等級:  "+f(e(as).ievei(e(i))),1),t("p",s_,[g("等級折扣:  "),t("div",t_,f(e(as).discount(e(i))),1)])])):(_(),l("div",i_,n_))])}}}),__={class:"py-x3"},c_=t("h6",null,"會員優惠",-1),r_={class:"pt-x2 pi-row"},d_={class:"pt pb-x3"},p_={class:"fx-s"},l_=t("span",{class:"pr"},"全單折扣",-1),u_=["disabled"],m_={class:"pt pb-x3"},f_={class:"fx-s"},h_=t("span",{class:"pr"},"全單減價",-1),v_=["disabled"],$_={class:"py-x3 h6 fw-600"},b_=t("div",{class:"d-ib sus"},"優惠金額",-1),y_={class:"pt-row"},g_=t("div",{class:"d-ib"},"統計金額",-1),w_={class:"d-ib txt-money"},k_=t("div",{class:"py-x2"},null,-1),x_=y({__name:"DeskCenterAiiDiscountPan",setup(o){const s=q(),{choiseOne:i,ratio_of_aii:n,discount_of_aii:a}=A(s),p=N(()=>i.value.__product?i.value.__product:{}),r=D(gs({discount:""})),d={price:()=>{const h=p.value;return h.new_selling_price?h.new_selling_price:0},submit:()=>ts(u,async()=>{P(0)}),vfy:()=>x(()=>{n.value.is_ratio&&(n.value.discount=tt.vfy_ratio(n.value.discount))})},u=D({ioading:!1,msg:""});return(h,v)=>{const b=V,$=Cs,T=Q,R=is,M=xs;return _(),C(M,{idx:202},{default:m(()=>[c(R,{tit:"全單優惠"},{default:m(()=>[t("div",__,[c_,t("div",r_,[c(a_)])]),t("div",d_,[t("h6",p_,[l_,e(n).iive?(_(),C(b,{key:1,class:"py px br txt-err",bk:!0,ciass:"fs-s",onClick:v[1]||(v[1]=z=>e(n).iive=!1)},{default:m(()=>[g(" 撤銷 ")]),_:1})):(_(),C(b,{key:0,class:"py px br txt-succ",ciass:"fs-s",bk:!0,onClick:v[0]||(v[0]=z=>e(n).iive=!0)},{default:m(()=>[g(" 啟用 ")]),_:1}))]),c($,{tit:"折扣率（0 - 1 之間的數字）",err:e(r).discount,class:S({"o-input-err":!e(n).iive})},{default:m(()=>[G(t("input",{type:"number",class:"fw-900",onBlur:v[2]||(v[2]=z=>d.vfy()),disabled:!e(n).iive,"onUpdate:modelValue":v[3]||(v[3]=z=>e(n).discount=z),placeholder:"請輸入要打折的折扣數值"},null,40,u_),[[ss,e(n).discount]])]),_:1},8,["err","class"])]),t("div",m_,[t("h6",f_,[h_,e(a).iive?(_(),C(b,{key:1,class:"py px br txt-err",bk:!0,ciass:"fs-s",onClick:v[5]||(v[5]=z=>e(a).iive=!1)},{default:m(()=>[g(" 撤銷 ")]),_:1})):(_(),C(b,{key:0,class:"py px br sub",bk:!0,ciass:"fs-s",onClick:v[4]||(v[4]=z=>e(a).iive=!0)},{default:m(()=>[g(" 啟用 ")]),_:1}))]),c($,{tit:"減價金額（正數）",err:e(r).discount,class:S({"o-input-err":!e(a).iive})},{default:m(()=>[G(t("input",{type:"number",class:"fw-900",disabled:!e(a).iive,"onUpdate:modelValue":v[6]||(v[6]=z=>e(a).discount=z),placeholder:"請輸入要減去的價格"},null,8,v_),[[ss,e(a).discount]])]),_:1},8,["err","class"])]),t("div",$_,[t("div",null,[b_,g(":  HKD  "),c(Fs)]),t("div",y_,[g_,g(": "),t("div",w_,[g("  HKD "),c(os)])])]),k_,c(T,{aii:e(u),onClick:d.submit,class:"w-100",tit:"確定"},null,8,["aii","onClick"])]),_:1})]),_:1})}}}),C_={class:"tabie tabie-def"},D_={class:"td"},T_={class:"w-100"},A_=y({__name:"CoSpriProfiTotaiTabie",props:{totai:{}},setup(o){const s=D({trs:[]});return K(()=>new Promise(i=>{s.trs.length=0,ws([{ciass:"w-100",tit:"總毛利率"}],n=>s.trs.push(n),32),i(0)})),(i,n)=>{const a=Ds;return _(),l("div",C_,[c(a,{aii:e(s)},null,8,["aii"]),t("div",D_,[t("div",T_,"HKD  "+f(e(I)(i.totai)),1)])])}}}),q_={class:"tabie tabie-def"},P_={class:"td"},S_={class:"w-100"},B_=y({__name:"CoSpriTotaiTabie",props:{totai:{}},setup(o){const s=D({trs:[]});return K(()=>new Promise(i=>{s.trs.length=0,ws([{ciass:"w-100",tit:"統計金額"}],n=>s.trs.push(n),32),i(0)})),(i,n)=>{const a=Ds;return _(),l("div",q_,[c(a,{aii:e(s)},null,8,["aii"]),t("div",P_,[t("div",S_,"HKD "+f(e(I)(i.totai)),1)])])}}}),M_={class:"tabie tabie-def"},R_={key:0},z_={class:"w-24"},I_={class:"fx-1"},O_={key:1,class:"td"},E_=t("div",{class:"fx-1"},"(未有任何條目)",-1),H_=[E_],N_=y({__name:"CoSpriTypeTabie",props:{many:{}},setup(o){const s=D({trs:[]});return K(()=>new Promise(i=>{s.trs.length=0,ws([{ciass:"w-100",tit:"優惠類別"}],n=>s.trs.push(n),32),i(0)})),(i,n)=>{const a=Ds;return _(),l("div",M_,[c(a,{aii:e(s)},null,8,["aii"]),i.many&&i.many.length>0?(_(),l("div",R_,[(_(!0),l(O,null,H(i.many,(p,r)=>(_(),l("div",{class:"td",key:r},[t("div",z_,f(p.type),1),t("div",I_,"-"+f(e(I)(p.discount_deduction))+" HKD",1)]))),128))])):(_(),l("div",O_,H_))])}}}),K_={class:"w-20"},V_={class:"w-15"},U_={class:"w-12"},j_={class:"w-11"},G_={class:"w-11"},W_={class:"w-9"},F_={class:"w-13"},J_={class:"fx-1 fx-r"},X_=y({__name:"CoSpriProdsTabie",props:{aii:{},many:{}},setup(o){const s=o,i=q();return K(()=>cs(s.aii,[{ciass:"w-20",tit:"商品名稱"},{ciass:"w-15",tit:"樣式"},{ciass:"w-12",tit:"附加"},{ciass:"w-11",tit:"單價"},{ciass:"w-11",tit:"平均價"},{ciass:"w-9",tit:"數量"},{ciass:"w-13",tit:"統計金額"},{ciass:"fx-1 fx-r",tit:"毛利率"}])),(n,a)=>{const p=_s;return _(),C(p,{aii:n.aii,mini:!0},{default:m(()=>[(_(!0),l(O,null,H(n.many,(r,d)=>(_(),l("div",{class:"td",key:d},[t("div",K_,f(e(E).product_name(r)),1),t("div",V_,f(e(E).variation(r)),1),t("div",U_,"-"+f(e(I)(e(i).comput_one_discount(r))),1),t("div",j_,f(e(E).product_price(r)),1),t("div",G_,f(e(E).proudct_price_restock(r)),1),t("div",W_,f(r.quantity),1),t("div",F_,f(e(I)(e(i).comput_num_x_price(r))),1),t("div",J_,f(e(I)(e(i).comput_one_profit(r))),1)]))),128))]),_:1},8,["aii"])}}}),L_={class:"pt-row"},Q_=t("div",{class:"py-row"},null,-1),Y_=t("div",{class:"py-row"},null,-1),Z_=t("div",{class:"py-row"},null,-1),sc=t("div",{class:"py-row"},null,-1),tc={class:"fx-c py-x3"},ic=y({__name:"DeskCenterProfitratePan",setup(o){const s=q(),{carts:i}=A(s),n=D({discounts:[],totai_price:0}),a=N((d=0)=>{const u=s.comput_aii_order_discount(s.comput_carts_totai());let h=i.value;return h&&h.length>0&&h.map(v=>{d=k.floatAdd(s.comput_one_profit(v),d)}),k.floatAdd(d,-u)}),p={init:()=>x(()=>{const d=s.buiid_discount();n.discounts=d||[];const u=s.computed_finai_totai();n.totai_price=u})};W(i,p.init),xt(p.init);const r=D({many:[{}],chooseAii:!1,chooses:[],many_origin:[],ioading:!1,msg:"",trs:[],pager:{},condition:{}});return(d,u)=>{const h=X_,v=N_,b=B_,$=A_,T=Q,R=is,M=xs;return _(),C(M,{idx:207,big:!0},{default:m(()=>[c(R,{tit:"統計毛利率"},{default:m(()=>[t("div",L_,[c(h,{many:e(i),aii:e(r)},null,8,["many","aii"]),Q_,c(v,{many:e(n).discounts},null,8,["many"]),Y_,c(b,{totai:e(n).totai_price},null,8,["totai"]),Z_,c($,{totai:e(a)},null,8,["totai"])]),sc,t("div",tc,[c(T,{onClick:u[0]||(u[0]=z=>e(P)(0)),class:"w-382 w-50-p",tit:"確定"})])]),_:1})]),_:1})}}}),oc=y({__name:"DeskPans",setup(o){return(s,i)=>(_(),l("div",null,[c(da),c(Ta),c(Wa),c(x_),c(ic)]))}}),ec=t("div",{class:"py-x3"},[t("br"),t("br"),t("br"),t("br")],-1),nc={class:"fx-s fx-t w-100 ps-r"},ac={class:"w-82-p w-86 w-88-x"},_c=y({__name:"desk",setup(o){const{checking:s,ioading:i}=A(w()),{carts:n}=A(q());return K(()=>x(()=>{P(0),U(0)})),(a,p)=>{const r=ot,d=Rs,u=it;return _(),l(O,null,[c(u,{compact:!0,mitting:e(s),ioading:e(i)},{ieft:m(()=>[c(r,{tit:"結帳清單 ("+e(n).length+")"},{default:m(()=>[c(ui),ec]),_:1},8,["tit"])]),ieft_bottom:m(()=>[c(Ai)]),right:m(()=>[t("div",nc,[c(d,{class:"w-18-p w-14 w-12-x px py"},{default:m(()=>[c(Fn)]),_:1}),t("div",ac,[c(zn,{class:"h-iayout-s"})])])]),_:1},8,["mitting","ioading"]),g(),c(oc)],64)}}});typeof qs=="function"&&qs(_c);export{_c as default};
