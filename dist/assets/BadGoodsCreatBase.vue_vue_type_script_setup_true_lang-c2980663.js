import{_ as E,a as F}from"./ModInner.vue_vue_type_script_setup_true_lang-7dc7e8b1.js";import{_ as K}from"./OPager.vue_vue_type_script_setup_true_lang-09711a0d.js";import{_ as P}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-3d92b0ef.js";import{_ as A}from"./MBtn.vue_vue_type_script_setup_true_lang-1e643208.js";import{_ as G}from"./Itemdash.vue_vue_type_script_setup_true_lang-c186de6f.js";import{_ as I}from"./cioseitem.vue_vue_type_script_setup_true_lang-10dbf346.js";import{d as T,g as U,n as L,o as u,e as z,w as r,b as i,a as s,x as w,y as V,u as a,z as O,c as h,f as D,F as M,t as f,s as H,B as l,v as S,E as J,m as Q}from"./index-080b1a3a.js";import{b as N}from"./index-6fcba4a6.js";import{c as k,_ as W}from"./CoWarehouseSeiect.vue_vue_type_script_setup_true_lang-8b5f53a4.js";import{s as X}from"./serv_product_iist-5a6dca85.js";import{f as $,b as Y,i as Z,g as oo,j as y}from"./credit-bc5fa170.js";import{_ as to}from"./OInputI.vue_vue_type_script_setup_true_lang-869c2209.js";import{_ as eo}from"./OTime.vue_vue_type_script_setup_true_lang-6a659a52.js";import{_ as so}from"./OInput.vue_vue_type_script_setup_true_lang-67e44fd5.js";import{b as ao}from"./net-tooi-3112abf7.js";import{a as io}from"./judge-13dfac2e.js";const ro={class:"py fx-c"},no={class:"py"},_o=s("div",{class:"pb"},[s("p",{class:"fs-s sus"},"篩選結果")],-1),co={class:"w-24"},mo={class:"w-26"},po={class:"w-24"},uo={class:"fx-1"},lo={class:"pt"},fo=T({__name:"CoProduChoiseMod",setup(q){const t=U({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:15,total:1},condition:{search:""},many_origin:[]}),m={search:()=>$(()=>{console.log("搜索條件 =",t.condition)}),choise:e=>$(()=>{e.id&&(k().save_product_choise(e),N(0))}),ciear:()=>$(()=>{t.condition.search="";const e=k().products;e&&e.length?m.fetch():t.many=e}),fetch:()=>Y(t,async()=>X(t.condition,t.pager),e=>{e.data&&k().save_products(e.data)}),pager:(e,n)=>$(()=>{t.pager.page=e,t.pager.pageSize=n,m.fetch()})};return L(()=>Z(t,[{ciass:"w-24",tit:"產品編號"},{ciass:"w-26",tit:"產品名稱"},{ciass:"w-24",tit:"最新入庫時間"},{ciass:"fx-1",tit:"庫存"}])),(e,n)=>{const v=I,g=G,b=A,C=P,o=K,c=E,p=F;return u(),z(p,{idx:1e3},{default:r(()=>[i(c,{tit:"篩選產品"},{default:r(()=>[s("div",ro,[i(g,{class:"w-618 pi-row"},{default:r(()=>[i(v,{onTrash:n[2]||(n[2]=_=>m.ciear())},{default:r(()=>[w(s("input",{class:"w-100",onKeydown:n[0]||(n[0]=O(_=>m.search(),["enter"])),placeholder:"請輸入產品名稱後，按下回車進行搜索。","onUpdate:modelValue":n[1]||(n[1]=_=>a(t).condition.search=_)},null,544),[[V,a(t).condition.search]])]),_:1})]),_:1})]),s("div",no,[_o,i(C,{aii:a(t)},{default:r(()=>[(u(!0),h(M,null,D(a(t).many,(_,B)=>(u(),h("div",{key:B},[i(b,{onClick:x=>m.choise(_),bk:!0,class:"w-100 hand br-s fx-aii-weak",ciass:"td ta-i br-0-imp"},{default:r(()=>[s("div",co,f(_.product_id),1),s("div",mo,f(_.name),1),s("div",po,f(_.new_restock_date),1),s("div",uo,f(_.total_stock),1)]),_:2},1032,["onClick"])]))),128))]),_:1},8,["aii"])]),s("div",lo,[i(o,{pager:a(t).pager,onResuit:m.pager},null,8,["pager","onResuit"])])]),_:1})]),_:1})}}}),ho={class:"o-form"},vo=["value"],go=s("option",{value:0},"-- 請選擇 --",-1),$o=["value"],Ro=T({__name:"BadGoodsCreatBase",props:{form:{},aii:{}},setup(q){const t=q,m=["product_id","variation","quantity","storehouse_id","date","remarks"],e=U(oo(t.form)),{product_id:n,storehouse_id:v,product_of_choise:g}=H(k());l(n,o=>t.form.product_id=o),l(v,o=>{t.form.storehouse_id=o,console.log("storeID 改动 =",o)});const b=S(()=>{const o=g.value;return o.id?`[${o.product_id}]  ${o.name}`:""}),C=S(()=>{let o=g.value.variations;return io(o)?o:ao.iist(o)});return l(()=>t.aii.sign,()=>{t.form.storehouse_id=v.value,m.map(o=>{if(y(e,o,t.form[o],t.aii)){t.aii.can=!1;return}}),t.aii.can=!0}),l(()=>t.form.variation,o=>y(e,"variation",o,t.aii)),l(()=>t.form.quantity,o=>y(e,"quantity",o,t.aii)),l(()=>t.form.date,o=>y(e,"date",o,t.aii)),(o,c)=>{const p=so,_=W,B=eo,x=to,R=fo;return u(),h("div",null,[s("div",ho,[i(p,{tit:"產品編號",err:a(e).product_id},{default:r(()=>[s("input",{onClick:c[0]||(c[0]=d=>a(N)(1e3)),value:a(b),placeholder:"請輸入"},null,8,vo)]),_:1},8,["err"]),i(p,{tit:"數量",err:a(e).quantity},{default:r(()=>[w(s("input",{type:"number","onUpdate:modelValue":c[1]||(c[1]=d=>o.form.quantity=d),placeholder:"請輸入"},null,512),[[V,o.form.quantity]])]),_:1},8,["err"]),a(n)?(u(),z(p,{key:0,tit:"樣式",err:a(e).variation},{default:r(()=>[w(s("select",{"onUpdate:modelValue":c[2]||(c[2]=d=>o.form.variation=d)},[go,(u(!0),h(M,null,D(a(C),(d,j)=>(u(),h("option",{key:j,value:d.id},f(d.name),9,$o))),128))],512),[[J,o.form.variation]])]),_:1},8,["err"])):Q("",!0),i(p,{tit:"壞貨位置",err:a(e).storehouse_id},{default:r(()=>[i(_)]),_:1},8,["err"]),i(x,{tit:"日期",err:a(e).date,icon:"date"},{default:r(()=>[i(B,{form:o.form,pk:"date"},null,8,["form"])]),_:1},8,["err"]),i(p,{tit:"備註",err:!1},{default:r(()=>[w(s("textarea",{rows:"3","onUpdate:modelValue":c[3]||(c[3]=d=>o.form.remarks=d),placeholder:"請輸入"},null,512),[[V,o.form.remarks]])]),_:1})]),i(R)])}}});export{Ro as _};
