import{t as hs,a as Ds,_ as Ws,b as Rs,c as Os,d as As,e as Hs,f as js,g as Fs,h as Ms,i as zs,j as Gs,k as Ks,l as Ls}from"./ProduCeRemark.vue_vue_type_script_setup_true_lang-95c5bd6e.js";import{_ as J}from"./OBtnSave.vue_vue_type_script_setup_true_lang-d159c384.js";import{_ as Js}from"./scroiiy-e9ecbbda.js";import{_ as Qs,o as l,c as m,d as $,f as I,e as V,w as d,b as n,a as i,t as h,F as w,s as P,g as b,B as g,D as Xs,z as Ys,u as _,r as Q,x as q,y as W,E as X,k as R,v as Y,n as B,m as j,q as vs,G,h as L,i as Zs}from"./index-080b1a3a.js";import{pageProducEditPina as E}from"./pageProducEditPina-7943e686.js";import{a as st,_ as tt}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-9e0a3dbf.js";import{n as it}from"./errors_user-cb2ffdc2.js";import{a as ot,s as nt,b as et}from"./net-tooi-3112abf7.js";import{E as at}from"./serv_product_iist-5a6dca85.js";import{f as k,g as M,j as x,a as rt,i as D,d as $s,e as ys,m as Z,s as ss,h as as}from"./credit-bc5fa170.js";import{t as ns,d as bs,i as rs}from"./judge-13dfac2e.js";import{_ as ks}from"./IayoutForm.vue_vue_type_script_setup_true_lang-0ab567f5.js";import{a as _t}from"./anim-34f746ba.js";import{v as ts,g as ds,d as ct}from"./iodash-69df2803.js";import{a as ws,v as gs}from"./view-60076a03.js";import{_ as xs}from"./Dropdown.vue_vue_type_script_setup_true_lang-8389cc3f.js";import{_ as lt}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-f5596b57.js";import{_ as ut}from"./Oi.vue_vue_type_script_setup_true_lang-054e6baf.js";import{_ as _s}from"./BtnIcon.vue_vue_type_script_setup_true_lang-0e25613f.js";import{g as cs}from"./giobaiPina-04b762eb.js";import{_ as z}from"./OInput.vue_vue_type_script_setup_true_lang-67e44fd5.js";import{_ as Ps}from"./OInputI.vue_vue_type_script_setup_true_lang-869c2209.js";import{_ as Is}from"./OTime.vue_vue_type_script_setup_true_lang-6a659a52.js";import{_ as ls}from"./OModTrash.vue_vue_type_script_setup_true_lang-4f4e7de9.js";import{_ as O}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-3d92b0ef.js";import{_ as is}from"./OTabieOpera.vue_vue_type_script_setup_true_lang-cacf540f.js";import{_ as Cs}from"./OTabieTrash-b74f83a1.js";import{_ as pt}from"./OTabieEdit.vue_vue_type_script_setup_true_lang-f6bc5f4f.js";import{b as F,$ as es}from"./index-6fcba4a6.js";import{_ as A,a as H}from"./Pan.vue_vue_type_script_setup_true_lang-539e89e7.js";import{a as Ts,_ as dt}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-e2816906.js";import{s as mt,a as ft}from"./serv_bad_opera-a0af46be.js";import{_ as ht}from"./OSeiect.vue_vue_type_script_setup_true_lang-fcec1312.js";import{_ as vt}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-6ae575d3.js";import{_ as $t}from"./MBtn.vue_vue_type_script_setup_true_lang-1e643208.js";import{pageProductInstockPina as yt}from"./pageProductInstockPina-c49e8036.js";import{i as ms,_ as bt}from"./iabeiPina-28d81d78.js";import{_ as kt}from"./OTrPure.vue_vue_type_script_setup_true_lang-044f4bb5.js";import{_ as us}from"./OOpenPan.vue_vue_type_script_setup_true_lang-24fed950.js";import{pageProductPina as wt}from"./pageProductPina-83ef33fb.js";import{b as fs}from"./route-block-83d24a4e.js";import"./BtnPriOut.vue_vue_type_script_setup_true_lang-8db8d813.js";import"./OBtnPius.vue_vue_type_script_setup_true_lang-6a79a156.js";import"./XMarkIcon-ffa10a4a.js";import"./Cardmsg.vue_vue_type_script_setup_true_lang-1a1e37e8.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-38be770d.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-3b1de02f.js";import"./serv_iabei_with_product-68d5deb5.js";import"./utii-59cd2ad1.js";import"./serv_variation_with_product-96f894bf.js";import"./OiX2.vue_vue_type_script_setup_true_lang-2a3b8e1f.js";import"./ArrowLongRightIcon-db1df792.js";import"./dayjs.min-bdea528d.js";import"./serv_suppiier_iist-018df284.js";import"./serv_warehouse_iist-3a1e725e.js";import"./datepicker.esm-dc991c6f.js";import"./ModInner.vue_vue_type_script_setup_true_lang-7dc7e8b1.js";import"./mittPina-a7314744.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-ca3b15ce.js";import"./OTr.vue_vue_type_script_setup_true_lang-feb82e39.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-1d03f00c.js";import"./errors_member-9994a70b.js";const gt={};function xt(f,s){return l(),m("div",null," IN BAD ")}const Pt=Qs(gt,[["render",xt]]),It="instock",Ct=async f=>ot(at,async()=>nt(await it.pos(It,f))),Tt={class:"mw-4em"},qt={class:"pi-s"},Et=$({__name:"CoSsItem",props:{many:{},aii:{},pk:{}},emits:["switchWH"],setup(f){return(s,r)=>{const o=ut,t=lt;return l(!0),m(w,null,I(s.many,(e,c)=>(l(),V(t,{onClick:a=>s.$emit("switchWH",e),iive:s.aii.pk==e.id,class:"fx-i",aii:s.aii,key:c},{default:d(()=>[n(o,{class:"i h5 mr-s",icon:"ioc"}),i("div",Tt,h(e.name),1),i("div",qt,"(負責人: "+h(e.contact_person)+")",1)]),_:2},1032,["onClick","iive","aii"]))),128)}}}),Vt={class:"ps-r"},St=["value"],Bt={class:"middie r-0 pr-row pi-s ani-softer"},Ut=$({__name:"CoSuppiierSeiect",props:{form:{},pk:{}},setup(f){const s=f,{suppiiers:r}=P(cs()),o=b({search:"",ioading:!1,nowId:0}),t={many:()=>r.value,v:()=>{if(s.pk&&s.form)return s.form[s.pk]},setV:e=>{s.pk&&s.form&&(s.form[s.pk]=e)},search:()=>k(()=>{}),view:()=>{const e=ts(o.nowId,r.value,"id");return e.id?e.name+"  (負責人: "+e.contact_person+")":""},switchWh:e=>k(()=>{o.ioading=!0,o.nowId=e.id,t.setV(e.id),setTimeout(()=>{o.ioading=!1},400)})};return g(t.v,e=>{e&&e!==o.nowId&&(o.nowId=ns(e))}),Xs(()=>{let e=t.v();const c=ns(e);c&&c!=o.nowId&&(o.nowId=c)}),(e,c)=>{const a=_s,u=Et,p=xs;return l(),m("div",null,[n(p,{class:"w-100",fuii:!0},{sign:d(()=>[i("div",Vt,[i("input",{class:"w-100",onKeydown:c[0]||(c[0]=Ys(v=>t.search(),["enter"])),value:t.view(),placeholder:"請選擇"},null,40,St),i("div",Bt,[n(a,{class:"ani-scaie-aii",onClick:c[1]||(c[1]=v=>t.search()),icon:"down"})])])]),con:d(()=>[n(u,{aii:_(o),pk:"nowId",many:_(r),onSwitchWH:t.switchWh},null,8,["aii","many","onSwitchWH"])]),_:1})])}}}),Nt={class:"o-hour-minus ps-r"},Dt=i("div",{class:"fx-s abs-t i-0 r-0 bg-con"},[i("div",{class:"w-382 pi pb-x1 sus"},"時"),i("div",{class:"w-618 pi pb-x1 sus"},"分")],-1),Wt={class:"fx-s fx-t"},Rt={class:"o-hours w-382 pt-s"},Ot=i("button",null,"0",-1),At=["onClick"],Ht={class:"o-minus w-618 pt-s"},jt=i("button",null,"0",-1),Ft=["onClick"],Mt=$({__name:"OHours",props:{form:{},pk_hours:{},pk_minus:{}},setup(f){const s=f,r=b({hours:ds(24),minus:ds(60)}),o={v_minus:()=>s.form[s.pk_minus],v_hour:()=>s.form[s.pk_hours],v:()=>o.v_hour()+":"+o.v_minus(),setv_minus:t=>{s.form[s.pk_minus]=t},setv_hour:t=>{s.form[s.pk_hours]=t}};return(t,e)=>{const c=xs;return l(),V(c,null,{sign:d(()=>[Q(t.$slots,"default")]),con:d(()=>[i("div",Nt,[Dt,i("div",Wt,[i("div",Rt,[Ot,(l(!0),m(w,null,I(_(r).hours,(a,u)=>(l(),m("div",{class:"pi br br-i-0 fx-aii-weak ani-scaie-fcs hand",onClick:p=>o.setv_hour(a),key:u},h(a),9,At))),128))]),i("div",Ht,[jt,(l(!0),m(w,null,I(_(r).minus,(a,u)=>(l(),m("div",{class:"py-t pi br br-r-0 fx-aii-weak ani-scaie-fcs hand",onClick:p=>o.setv_minus(a),key:u},h(a),9,Ft))),128))])])])]),_:3})}}}),zt={class:"row"},Gt={class:"w-333"},Kt={class:"w-333"},Lt=["value"],Jt={class:"w-333"},Qt=i("div",{class:"py-s"},null,-1),Xt={class:"row"},Yt={class:"w-333"},Zt=i("div",{class:"w-333"},null,-1),si=i("div",{class:"w-333"},null,-1),ti=$({__name:"PiisBase",props:{form:{},aii:{}},setup(f){const s=f,r=["restock_date","hour","quantity","supplier"],o=b(M(s.form));return g(()=>s.aii.sign,()=>{r.map(t=>{if(x(o,t,s.form[t],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),g(()=>s.form.restock_date,t=>x(o,"restock_date",t,s.aii)),g(()=>s.form.hour,t=>x(o,"hour",t,s.aii)),g(()=>s.form.quantity,t=>x(o,"quantity",t,s.aii)),g(()=>s.form.supplier,t=>x(o,"supplier",t,s.aii)),(t,e)=>{const c=Is,a=Ps,u=Mt,p=z,v=Ut;return l(),m("div",null,[i("div",zt,[i("div",Gt,[n(a,{icon:"date",err:_(o).restock_date,tit:"入貨日期"},{default:d(()=>[n(c,{form:t.form,pk:"restock_date"},null,8,["form"])]),_:1},8,["err"])]),i("div",Kt,[n(a,{icon:"time",err:_(o).hour,tit:"入貨時間"},{default:d(()=>[n(u,{form:t.form,pk_hours:"hour",pk_minus:"minus"},{default:d(()=>[i("input",{value:_(ws)(t.form.hour,t.form.minus)},null,8,Lt)]),_:1},8,["form"])]),_:1},8,["err"])]),i("div",Jt,[n(p,{err:_(o).quantity,tit:"入貨數量"},{default:d(()=>[q(i("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=y=>t.form.quantity=y),placeholder:"請輸入"},null,512),[[W,t.form.quantity]])]),_:1},8,["err"])])]),Qt,i("div",Xt,[i("div",Yt,[n(p,{err:_(o).supplier,tit:"供應商"},{default:d(()=>[n(v,{form:t.form,pk:"supplier"},null,8,["form"])]),_:1},8,["err"])]),Zt,si])])}}}),ii={class:"row"},oi={class:"w-333"},ni={class:"w-333"},ei={class:"w-333"},ai=$({__name:"PiisPrice",props:{form:{},aii:{}},setup(f){const s=f,r=["restock_price","lowest_price","selling_price"],o=b(M(s.form));return g(()=>s.aii.sign,()=>{r.map(t=>{if(x(o,t,s.form[t],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),g(()=>s.form.restock_price,t=>x(o,"restock_price",t,s.aii)),g(()=>s.form.lowest_price,t=>x(o,"lowest_price",t,s.aii)),g(()=>s.form.selling_price,t=>x(o,"selling_price",t,s.aii)),(t,e)=>{const c=z;return l(),m("div",ii,[i("div",oi,[n(c,{err:_(o).restock_price,tit:"入貨價錢"},{default:d(()=>[q(i("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=a=>t.form.restock_price=a),placeholder:"請輸入"},null,512),[[W,t.form.restock_price]])]),_:1},8,["err"])]),i("div",ni,[n(c,{err:_(o).lowest_price,tit:"最低價錢"},{default:d(()=>[q(i("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>t.form.lowest_price=a),placeholder:"請輸入"},null,512),[[W,t.form.lowest_price]])]),_:1},8,["err"])]),i("div",ei,[n(c,{err:_(o).selling_price,tit:"售價"},{default:d(()=>[q(i("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>t.form.selling_price=a),placeholder:"請輸入"},null,512),[[W,t.form.selling_price]])]),_:1},8,["err"])])])}}}),ri=i("option",{value:0}," -- 請選 -- ",-1),_i=["value"],qs=$({__name:"CoWarehouseSeiectPure",props:{form:{},pk:{}},setup(f){const{warehouses:s}=P(cs());return(r,o)=>q((l(),m("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>r.form[r.pk]=t)},[ri,(l(!0),m(w,null,I(_(s),(t,e)=>(l(),m("option",{value:t.id,key:e},h(t.name)+"   (負責人: "+h(t.contact_person)+") ",9,_i))),128))],512)),[[X,r.form[r.pk]]])}}),ci=$({__name:"OInpuTd",props:{iive:{type:Boolean},tit:{},err:{type:Boolean},ciass:{}},setup(f){return(s,r)=>(l(),m("div",{class:R(["o-input input o-input-td",{"o-input-iive":s.iive,"input-err":s.err}])},[i("div",{class:R(["fx-1",s.ciass])},[Q(s.$slots,"default")],2)],2))}}),li=$({__name:"CoWarehouseText",props:{v:{}},setup(f){const s=f,r=()=>{const o=ts(s.v,cs().warehouses,"id");return o.id?o.name+"  (負責人: "+o.contact_person+")":"未選擇倉庫"};return(o,t)=>(l(),m("div",null,h(r()),1))}}),ui=$({__name:"CoVariationsText",props:{v:{},many:{}},setup(f){const s=f,r=()=>{const o=ts(s.v,s.many,"id");return o.id?o.name:"未選擇倉庫"};return(o,t)=>(l(),m("div",null,h(r()),1))}}),pi={key:0,class:"td"},di={class:"fx-1 fx-s"},mi={class:"fx-r"},fi={key:1,class:"td"},hi={class:"w-30"},vi=["onUpdate:modelValue"],$i=["value"],yi={class:"w-30"},bi={class:"fx-1 fx-s"},ki=["onUpdate:modelValue"],wi={class:"pi fx-r"},Es=$({__name:"PiisStyieInventoryTabie",props:{aii:{}},emits:["sureTrash"],setup(f,{emit:s}){const r=f,{one_of_edit:o}=P(E()),t=Y(()=>{const a=o.value,u=a.variations?a.variations:[];return u.length<=0&&ys("該產品無可用標籤！！！"),u});B(()=>D(r.aii,[{ciass:"w-30",tit:"樣式名稱"},{ciass:"w-30",tit:"入貨位置"},{ciass:"fx-1",tit:"入貨數量"}]));const e=b({origin:{},trashIdx:0}),c={edit:a=>k(()=>{a.edit=!0,e.origin[a.id+""]=bs(a)}),cancei:a=>k(()=>{const u=e.origin[a.id+""];u?(u.edit=!1,$s(u,a)):a.edit=!1}),sureTrash:a=>k(()=>{e.trashIdx=a,s("sureTrash",a),F(-201)}),trash:()=>rt(r.aii,()=>{r.aii.many.splice(e.trashIdx,1),F(0)})};return(a,u)=>{const p=ui,v=li,y=pt,C=Cs,T=ci,N=qs,os=is,Ss=_s,Bs=O,Us=ls;return l(),m(w,null,[n(Bs,{aii:a.aii,mini:!0},{default:d(()=>[(l(!0),m(w,null,I(a.aii.many,(S,ps)=>(l(),m("div",{key:ps},[S.edit?(l(),m("div",fi,[i("div",hi,[n(T,null,{default:d(()=>[q(i("select",{"onUpdate:modelValue":U=>S.variation=U},[(l(!0),m(w,null,I(_(t),(U,Ns)=>(l(),m("option",{key:Ns,value:U.id},h(U.name),9,$i))),128))],8,vi),[[X,S.variation]])]),_:2},1024)]),i("div",yi,[n(T,null,{default:d(()=>[n(N,{form:S,pk:"storehouse"},null,8,["form"])]),_:2},1024)]),i("div",bi,[n(T,{class:"fx-1"},{default:d(()=>[q(i("input",{"onUpdate:modelValue":U=>S.quantity=U,placeholder:"請輸入"},null,8,ki),[[W,S.quantity]])]),_:2},1024),i("div",wi,[n(os,{class:"pr",tit:"儲存",onClick:U=>S.edit=!1},null,8,["onClick"]),i("div",null,[n(Ss,{icon:"x",onClick:U=>c.cancei(S)},null,8,["onClick"])])])])])):(l(),m("div",pi,[n(p,{class:"w-30",many:_(t),v:S.variation},null,8,["many","v"]),n(v,{class:"w-30",v:S.storehouse},null,8,["v"]),i("div",di,[i("div",null,h(S.quantity),1),i("div",mi,[n(y,{onClick:U=>c.edit(S),class:"mr-s txt-pri"},null,8,["onClick"]),n(C,{onClick:U=>c.sureTrash(ps)},null,8,["onClick"])])])]))]))),128))]),_:1},8,["aii"]),n(Us,{idx:-201,aii:a.aii,onTrash:c.trash},null,8,["aii","onTrash"])],64)}}}),gi={key:0,class:"abs-b ps-f-imp r-0 w-36 w-50-p py"},xi=$({__name:"ProduInvInStockInner",props:{aii:{}},setup(f,{expose:s}){const r=f,o=b({restock_date:"",hour:0,minus:0,quantity:"",supplier:""}),t=b({restock_price:"",lowest_price:"",selling_price:""}),e=b({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[],ani:0}),{one_of_edit:c}=P(E()),a=Y(()=>{const p=c.value;return p.variations?p.variations:[]}),u={buiid:()=>{const p={...o,...t,restock_distribute:u.fiiter()};return p.restock_date=o.restock_date+" "+ws(o.hour,o.minus,!0),p.product=c.value.id,r.aii.can&&p.restock_distribute.length<=0?(Z("您沒有添加任何樣式的庫存數據!!!",r.aii),null):r.aii.can?p:null},fiiter:(p=[])=>(e.many.map(v=>{let y=!0;v.storehouse&&v.quantity?v.edit=!1:y=!1,y&&p.push(v)}),p),pius:()=>k(()=>{u.fiiter().length==e.many.length&&e.many.push(u.GEN_ONE())}),GEN_ONE:()=>bs({idx:e.many.length,variation:ct(a.value,"id"),storehouse:0,quantity:null,edit:!0,ioading:!1})};return s(u),B(()=>_t(4,()=>e.ani+=1)),(p,v)=>{const y=ks,C=st;return l(),m("div",null,[n(y,{tit:"時間及供應商",class:R(["pb-x3 op-0",{"ani-page":_(e).ani>=0}])},{default:d(()=>[n(ti,{form:_(o),aii:p.aii},null,8,["form","aii"])]),_:1},8,["class"]),n(y,{tit:"價錢",class:R(["pb-x3 op-0",{"ani-page":_(e).ani>=1}])},{default:d(()=>[n(ai,{form:_(t),aii:p.aii},null,8,["form","aii"])]),_:1},8,["class"]),n(y,{tit:"樣式及庫存分配數量",class:R(["pt pb-x3 op-0",{"ani-page":_(e).ani>=2}])},{default:d(()=>[n(Es,{aii:_(e)},null,8,["aii"])]),_:1},8,["class"]),i("div",null,[n(C,{onClick:v[0]||(v[0]=T=>u.pius()),class:"w-100 py-s ani-scaie-aii",tit:"添加樣式"})]),_(e).ani>=3?(l(),m("section",gi,[Q(p.$slots,"default")])):j("",!0)])}}}),Pi=i("h3",{class:"py-x3 mb"},"添加入貨信息(僅加貨)",-1),Ii=$({__name:"ProduInvInStock",setup(f){const s=vs(),{pag:r,one_of_edit:o}=P(E()),t=b({ioading:!1,msg:"",can:!1,sign:0}),e={submit:()=>ss(t,s.value.buiid,async c=>{if(console.log("BASE =",c),c){const a=await Ct(c);rs(a)?Z(a,t):(e.back(),as("產品入貨成功！！！"))}}),back:()=>k(()=>{r.value=0}),init:()=>k(()=>{o.value.id||(r.value=0)})};return B(e.init),(c,a)=>{const u=tt;return l(),m("section",null,[Pi,n(xi,{aii:_(t),ref_key:"inner",ref:s,onSubmit:e.submit},{default:d(()=>[n(u,{ciass:"w-100",tit_save:"儲存",onBack:a[0]||(a[0]=p=>e.back()),onSave:a[1]||(a[1]=p=>e.submit())})]),_:1},8,["aii","onSubmit"])])}}}),Ci=$({__name:"ProduInvInOrder",setup(f){return(s,r)=>(l(),m("div",null," IN ORDER "))}}),Ti={class:"ps-r"},qi={key:0,class:"prod-pag-wrapper abs-t i-0 r-0 b-0 bg-con zi-x2 ani-softer"},Ei=$({__name:"ProductPagWrapper",setup(f){const{pag:s}=P(E());s.value=0;const r=vs(!1);return g(s,o=>o==0?r.value=!1:r.value=!0),(o,t)=>{const e=Js;return l(),m("div",Ti,[i("div",null,[Q(o.$slots,"default")]),_(r)?(l(),m("div",qi,[q(n(e,{class:"h-iayout h-iayout-max"},{default:d(()=>[q(n(Ii,null,null,512),[[G,_(s)==1]]),q(n(Pt,null,null,512),[[G,_(s)==2]]),q(n(Ci,null,null,512),[[G,_(s)==3]])]),_:1},512),[[G,_(s)>0]])])):j("",!0)])}}}),Vi=i("h4",{class:"py-x2"},"樣式及庫存分配數量",-1),Si={class:"pb-x3"},Bi=$({__name:"ProductEditPanPriview",setup(f){const s=b({msg:"",many:[{idx:1,styie:1,store:1,num:10,edit:!1,ioading:!1},{idx:2,styie:1,store:1,num:100,edit:!1,ioading:!1}],trashIdx:0,pager:{},ioading:!1,trs:[]});return(r,o)=>{const t=A,e=H;return l(),V(e,{idx:112,big:!0},{default:d(()=>[n(t,{tit:"檢視"},{default:d(()=>[Vi,i("div",Si,[n(Es,{aii:_(s)},null,8,["aii"])])]),_:1})]),_:1})}}}),Ui=i("h4",{class:"py-x2"},"樣式",-1),Ni={class:"w-50"},Di={class:"w-50"},Wi=i("h4",{class:"py-x2"},"倉庫",-1),Ri={class:"w-333"},Oi={class:"w-333"},Ai={class:"w-333"},Hi=$({__name:"ProductEditPanInstock",setup(f){const s=b({msg:"",many:[{}],pager:{},ioading:!0,trs:[]}),r=b({msg:"",many:[{}],pager:{},ioading:!0,trs:[]});return B(()=>{D(s,hs),D(r,Ds)}),(o,t)=>{const e=O,c=A,a=H;return l(),V(a,{idx:111,big:!0},{default:d(()=>[n(c,{tit:"入貨詳情"},{default:d(()=>[Ui,n(e,{aii:_(s),mini:!0},{default:d(()=>[(l(!0),m(w,null,I(_(s).many,(u,p)=>(l(),m("div",{class:"td",key:p},[i("div",Ni,h(u.o_1),1),i("div",Di,h(u.o_2),1)]))),128))]),_:1},8,["aii"]),Wi,n(e,{aii:_(r),mini:!0},{default:d(()=>[(l(!0),m(w,null,I(_(r).many,(u,p)=>(l(),m("div",{class:"td",key:p},[i("div",Ri,h(u.o_1),1),i("div",Oi,h(u.o_2),1),i("div",Ai,h(u.o_2),1)]))),128))]),_:1},8,["aii"])]),_:1})]),_:1})}}}),ji=i("h4",{class:"py-x2"},"倉庫 A",-1),Fi={class:"w-50"},Mi={class:"w-50"},zi=$({__name:"ProductEditPanInventory",setup(f){const s=b({msg:"",many:[{}],pager:{},ioading:!0,trs:[]});return B(()=>{D(s,hs)}),(r,o)=>{const t=O,e=A,c=H;return l(),V(c,{idx:110,big:!0},{default:d(()=>[n(e,{tit:"庫存詳情"},{default:d(()=>[ji,n(t,{aii:_(s),mini:!0},{default:d(()=>[(l(!0),m(w,null,I(_(s).many,(a,u)=>(l(),m("div",{class:"td",key:u},[i("div",Fi,h(a.o_1),1),i("div",Mi,h(a.o_2),1)]))),128))]),_:1},8,["aii"])]),_:1})]),_:1})}}}),Gi={class:"py-x2"},Ki={class:"o-form"},Li=$({__name:"PepbForm",props:{form:{},aii:{}},setup(f){const s=f,r=["quantity","storehouse_id","date"],o=b(M(s.form));return g(()=>s.aii.sign,(t=!0)=>{r.map(e=>{x(o,e,s.form[e],s.aii)&&(s.aii.can=!1,t=!1)}),s.aii.can=t}),g(()=>s.form.date,t=>x(o,"date",t,s.aii)),g(()=>s.form.quantity,t=>x(o,"quantity",t,s.aii)),g(()=>s.form.storehouse_id,t=>x(o,"storehouse_id",t,s.aii)),(t,e)=>{const c=Ts,a=qs,u=z,p=Is,v=Ps;return l(),m(w,null,[i("div",Gi,[n(c,{form:t.form,pk:"quantity",err:_(o).quantity},null,8,["form","err"])]),i("div",Ki,[i("div",null,[n(u,{tit:"壞貨位置",err:_(o).storehouse_id},{default:d(()=>[n(a,{form:t.form,pk:"storehouse_id"},null,8,["form"])]),_:1},8,["err"])]),i("div",null,[n(v,{tit:"添加日期",err:_(o).date,icon:"date"},{default:d(()=>[n(p,{form:t.form,pk:"date",class:"input-timed-for-pan"},null,8,["form"])]),_:1},8,["err"])]),i("div",null,[n(u,{tit:"壞貨備註"},{default:d(()=>[q(i("textarea",{placeholder:"請輸入","onUpdate:modelValue":e[0]||(e[0]=y=>t.aii.remarks=y),rows:"12"},null,512),[[W,t.aii.remarks]])]),_:1})])])],64)}}}),Ji={class:"o-form"},Qi=i("option",{value:""},"-- 請選擇 --",-1),Xi=["value"],Yi=$({__name:"PepbFormStyie",props:{form:{},aii:{}},setup(f){const s=f,r=["variation"],{one_of_edit:o}=P(E()),t=Y(()=>{const c=o.value;return c.variations?c.variations:[]}),e=b(M(s.form));return g(()=>s.aii.sign,(c=!0)=>{r.map(a=>{x(e,a,s.form[a],s.aii)&&(s.aii.can=!1,c=!1)}),s.aii.can=c}),g(()=>s.form.variation,c=>x(e,"variation",c,s.aii)),(c,a)=>{const u=z;return l(),m("div",Ji,[n(u,{tit:"樣式",err:_(e).variation},{default:d(()=>[q(i("select",{"onUpdate:modelValue":a[0]||(a[0]=p=>c.form.variation=p)},[Qi,(l(!0),m(w,null,I(_(t),(p,v)=>(l(),m("option",{key:v,value:p.id},h(p.name),9,Xi))),128))],512),[[X,c.form.variation]])]),_:1},8,["err"])])}}}),Zi=i("div",{class:"py-row"},null,-1),so=$({__name:"ProductEditPanBad",setup(f){const{one_of_edit:s}=P(E()),r=b({ioading:!1,msg:"",can:!1,sign:0}),o=b({quantity:0,storehouse_id:null,date:"",remarks:"",variation:"",product_id:""}),t={buiid:()=>(o.product_id=s.value.id,r.can?o:null),submit:()=>ss(r,t.buiid,async e=>{if(e){let c=await mt(e);rs(c)?Z(c,r):t.success()}}),success:()=>k(()=>{as("壞貨資料新增成功。"),es(0),setTimeout(()=>$s({quantity:0},o),400)}),init:()=>k(()=>{console.log(s.value)})};return B(t.init),(e,c)=>{const a=dt,u=J,p=A,v=H;return l(),V(v,{idx:120},{default:d(()=>[n(p,{tit:"壞貨"},{default:d(()=>[n(a,{num:_(s).product_id,named:_(s).name},null,8,["num","named"]),n(Yi,{class:"pt-x3",form:_(o),aii:_(r)},null,8,["form","aii"]),n(Li,{form:_(o),aii:_(r)},null,8,["form","aii"]),Zi,n(u,{aii:_(r),onClick:c[0]||(c[0]=y=>t.submit()),tit:"儲存",class:"w-100"},null,8,["aii"])]),_:1})]),_:1})}}}),Vs=[{txt:"頭部",v:"head",ciass:""},{txt:"背部",v:"back",ciass:""}],to="head",io=[...Vs,{txt:"壞貨位置",v:"",ciass:"o-fiiter-reset"}],K={seiect_badpos:Vs,seiect_badpos_def:to,seiect_badpos_fiiter:io},oo={class:"o-form"},no={class:"o-form-pan"},eo=i("h5",null,"調貨樣式",-1),ao={class:"o-form-pan"},ro=i("h5",null,"調貨倉庫",-1),_o=$({__name:"PepdFormHouse",props:{form:{},aii:{}},setup(f){const s=f,r=["styie","store"],o=b(M(s.form));return g(()=>s.aii.sign,()=>{r.map(t=>{if(x(o,t,s.form[t],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),g(()=>s.form.styie,t=>x(o,"styie",t,s.aii)),g(()=>s.form.store,t=>x(o,"store",t,s.aii)),(t,e)=>{const c=ht,a=z;return l(),m("div",oo,[i("div",no,[eo,n(a,{tit:"樣式",err:_(o).styie},{default:d(()=>[n(c,{many:_(K).seiect_badpos,form:t.form,pk:"styie",def:_(K).seiect_badpos_def},null,8,["many","form","def"])]),_:1},8,["err"])]),i("div",ao,[ro,n(a,{tit:"入貨倉庫",err:_(o).styie},{default:d(()=>[n(c,{many:_(K).seiect_badpos,form:t.form,pk:"styie",def:_(K).seiect_badpos_def},null,8,["many","form","def"])]),_:1},8,["err"])])])}}}),co=i("div",{class:"px-row py"},[i("div",null,"倉庫名稱: 倉庫A")],-1),lo=i("div",{class:"o-form-pan pt-x3"},[i("h5",null,"產品數量"),i("div",{class:"px-row fx-i py"},[i("div",{class:"w-50"},"紅色"),i("div",{class:"w-50"},"10")])],-1),uo={class:"o-form-pan"},po=i("h5",null,"調貨數量",-1),mo=i("div",{class:"py-row"},null,-1),fo=$({__name:"ProductEditPanDepioy",setup(f){const s=b({ioading:!1,msg:"",can:!1,sign:0}),r=b({num:0,styie:"",store:0});return(o,t)=>{const e=Ts,c=J,a=A,u=H;return l(),V(u,{idx:125},{default:d(()=>[n(a,{tit:"調貨"},{default:d(()=>[co,lo,n(_o,{class:"pt-x2",form:_(r),aii:_(s)},null,8,["form","aii"]),i("div",uo,[po,n(e,{form:_(r),pk:"num"},null,8,["form"])]),mo,n(c,{tit:"確定",class:"w-100"})]),_:1})]),_:1})}}}),ho={class:"i abs-r mr"},vo={class:"pt-row"},$o=i("p",null,"數量",-1),yo={class:"py-s"},bo=i("p",null,"壞貨位置",-1),ko={class:"sut py-s"},wo=i("p",null,"添加日期",-1),go={class:"sut py-s"},xo=i("p",null,"壞貨備註",-1),Po={class:"sut pt-s"},Io=$({__name:"CoProduBaDetaiiCard",props:{broken:{},ciose:{type:Boolean}},emits:["trash","ciose"],setup(f){return(s,r)=>{const o=_s,t=$t,e=vt;return l(),V(e,{class:"px-row ps-r"},{default:d(()=>[i("div",ho,[s.ciose?(l(),V(t,{key:1,class:"fx-aii-weak br-s ani-scaie-aii",bk:!0,onClick:r[1]||(r[1]=c=>s.$emit("ciose",s.broken))},{default:d(()=>[L(" 撤銷 ")]),_:1})):(l(),V(o,{key:0,class:"h5",onClick:r[0]||(r[0]=c=>s.$emit("trash",s.broken)),ciass_i:"txt-err h3",icon:"trash"}))]),i("div",vo,[$o,i("p",yo,h(s.broken.quantity),1)]),i("div",null,[bo,i("p",ko,h(s.broken.storehouse_name),1)]),i("div",null,[wo,i("p",go,h(s.broken.date),1)]),i("div",null,[xo,i("p",Po,h(s.broken.remarks),1)])]),_:1})}}}),Co=i("div",{class:"pt"},null,-1),To={class:"px-row pb"},qo={class:"fs-n"},Eo={class:"pb-x2 pt-x3"},Vo=i("div",{class:"py-row"},null,-1),So=$({__name:"ProductEditPanBadDetaii",setup(f){const{one_of_edit:s}=P(E()),{broken_of_view:r}=P(yt()),o=b({ioading:!1,msg:"",trashing:!1}),t={init:()=>k(()=>{console.log(s.value)}),sureTrash:()=>k(()=>{o.trashing=!0}),trash:()=>k(()=>{}),submit:()=>ss(o,()=>({}),async e=>{if(o.trashing){const c=r.value.id,a=await ft(c);rs(a)?Z(a,o):(as("壞貨資料刪除成功。"),es(0))}else es(0)})};return B(t.init),(e,c)=>{const a=Io,u=J,p=A,v=H,y=ls;return l(),m(w,null,[n(v,{idx:121},{default:d(()=>[n(p,{tit:"壞貨詳情"},{default:d(()=>[Co,i("div",To,[i("div",null,"產品編號:  "+h(_(s).product_id),1),i("div",qo,"產品名稱:  "+h(_(s).name),1)]),i("div",Eo,[n(a,{class:R({"bg-con-x2":_(o).trashing}),ciose:_(o).trashing,broken:_(r),onCiose:c[0]||(c[0]=C=>_(o).trashing=!1),onTrash:c[1]||(c[1]=C=>t.sureTrash())},null,8,["class","ciose","broken"])]),Vo,n(u,{onClick:c[2]||(c[2]=C=>t.submit()),tit:"儲存",class:"w-100"})]),_:1})]),_:1}),n(y,{aii:_(o),idx:-205,onTrash:c[3]||(c[3]=C=>t.trash())},null,8,["aii"])],64)}}}),Bo=$({__name:"ProductEditPans",setup(f){const s=E();return F(0),(r,o)=>(l(),m(w,null,[n(Ws,{pina:_(s)},null,8,["pina"]),n(Rs,{pina:_(s)},null,8,["pina"]),n(Bi),n(Hi),n(zi),n(fo),n(so),n(So)],64))}}),Uo={class:"py"},No={class:"py-s"},Do=["onUpdate:modelValue"],Wo=["value"],Ro=$({__name:"ProduCeTagsEdit",props:{labels_exist:{},labels:{}},setup(f){const s=f,{many:r}=P(ms()),o=b({activeId:0,ioading:!1,msg:""}),t=E(),{one_of_edit:e}=P(t),c={pius:()=>k(()=>{if(r.value.length>0){const a=r.value[0];a.id&&t.pius_iabei(a.id)}else ys("沒有一個可用標籤，請先新增標籤。")}),init:()=>k(()=>{ms().refreshMany()}),sureTrash:a=>k(()=>{F(-202),o.activeId=ns(a)}),trash:()=>k(async()=>{await t.tag_trash(e.value.id,o.activeId)&&(s.labels_exist.map((u,p)=>{u==o.activeId&&t.trash_iabei_exist(p)}),o.activeId=0)})};return B(c.init),(a,u)=>{const p=bt,v=Os,y=ls;return l(),m("div",null,[n(p,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:u[0]||(u[0]=C=>c.pius())}),i("div",Uo,[(l(!0),m(w,null,I(a.labels_exist,(C,T)=>(l(),m("div",{class:"pb-x2 ani-fade-b",key:T},[n(v,{class:"ani-scaie-hv",iive:!0,tit:"已存在的標籤",onTap:N=>c.sureTrash(C)},{default:d(()=>[i("div",No,h(_(ts)(C,_(r),"id").name),1)]),_:2},1032,["onTap"])]))),128)),(l(!0),m(w,null,I(a.labels,(C,T)=>(l(),m("div",{class:"pb-x2 ani-fade-b",key:T},[n(v,{tit:"新加入的標籤",onTap:N=>_(t).trash_iabei(T)},{default:d(()=>[q(i("select",{"onUpdate:modelValue":N=>a.labels[T]=N},[(l(!0),m(w,null,I(_(r),(N,os)=>(l(),m("option",{key:os,value:N.id},h(N.name),9,Wo))),128))],8,Do),[[X,a.labels[T]]])]),_:2},1032,["onTap"])]))),128))]),n(y,{aii:_(o),idx:-202,onTrash:u[1]||(u[1]=C=>c.trash()),msg:"此次操作系聯網操作，您確定要移除該標籤嗎？"},null,8,["aii"])])}}}),Oo=i("div",{class:"pt"},null,-1),Ao=i("div",{class:"py"},null,-1),Ho={key:0,class:"py-x2"},jo={key:1,class:"py-x2"},Fo={key:2,class:"py-x2"},Mo=i("div",{class:"py-x2"},null,-1),zo=$({__name:"ProductEditIeft",props:{aii:{}},setup(f){const s=E(),{remarks:r,labels_exist:o,labels:t,base:e,variations:c}=P(s);return(a,u)=>{const p=ks;return l(),m("div",null,[n(p,{tit:"編輯產品",back:!0},{default:d(()=>[Oo,n(As,{form:_(e),aii:a.aii,edit:!0},null,8,["form","aii"])]),_:1}),Ao,n(Ro,{class:"pt-s",labels:_(t),labels_exist:_(o)},null,8,["labels","labels_exist"]),L(),_(o).length<=0?(l(),m("div",Ho)):j("",!0),n(Hs,{class:"pt-s",edit:!0,pina:_(s),variations:_(c)},null,8,["pina","variations"]),L(),_(c).length<=0?(l(),m("div",jo)):j("",!0),n(js,{class:"pt-s",pina:_(s),remarks:_(r)},null,8,["pina","remarks"]),L(),_(r).length<=0?(l(),m("div",Fo)):j("",!0),Mo])}}}),Go={class:"w-18 pr"},Ko={class:"w-13"},Lo={class:"w-14"},Jo={class:"w-10"},Qo={class:"w-12"},Xo={class:"w-12"},Yo={class:"fx-1 fx-r"},Zo={class:"fx-1 fx-r fx-wp pi-t"},sn={class:"pi-s"},tn=$({__name:"ProduInstockTabie",props:{aii:{}},setup(f){const s=f,{one_of_edit:r}=P(E()),o=Y(()=>{const t=r.value.restocks;return t?(t.map(e=>(e.supplier=e.supplier?et.data(e.supplier):{},e)),t):[]});return B(()=>D(s.aii,Fs)),(t,e)=>{const c=is,a=us,u=Cs,p=O;return l(),V(p,{aii:t.aii,mini:!0},{default:d(()=>[(l(!0),m(w,null,I(_(o),(v,y)=>(l(),m("div",{class:"td",key:y},[i("div",Go,h(_(gs)(v.restock_date)),1),i("div",Ko,h(v.restock_price),1),i("div",Lo,h(v.lowest_price),1),i("div",Jo,h(v.selling_price),1),i("div",Qo,h(v.quantity),1),i("div",Xo,h(v.quantity),1),i("div",Yo,[i("div",null,h(v.supplier.name),1),i("div",Zo,[n(a,{idx:112},{default:d(()=>[n(c,{tit:"檢視"})]),_:1}),i("div",sn,[n(u)])])])]))),128))]),_:1},8,["aii"])}}}),on={class:"w-18"},nn={class:"w-14"},en={class:"w-16"},an={class:"fx-1 fx-r"},rn={class:"d-ib"},_n=$({__name:"ProduWarehouseTabie",props:{aii:{}},setup(f){const s=f;return B(()=>D(s.aii,Ms)),(r,o)=>{const t=is,e=us,c=O;return l(),V(c,{aii:r.aii,mini:!0},{default:d(()=>[(l(!0),m(w,null,I(r.aii.many,(a,u)=>(l(),m("div",{class:"td",key:u},[i("div",on,h(a.o_1),1),i("div",nn,h(a.o_2),1),i("div",en,h(a.o_3),1),i("div",an,[i("div",rn,h(a.o_4),1),n(e,{idx:110,class:"pr-s"},{default:d(()=>[n(t,{tit:"庫存詳情"})]),_:1}),n(e,{idx:125},{default:d(()=>[n(t,{tit:"調貨"})]),_:1})])]))),128))]),_:1},8,["aii"])}}}),cn={class:"w-22 pr-s"},ln={class:"w-18"},un={class:"w-18"},pn={class:"w-15"},dn={class:"fx-1 fx-s"},mn={class:"pi-s fx-1 fx-wp fx-r"},fn=$({__name:"ProduNewInstockTabie",props:{aii:{}},setup(f){const s=f,{one_of_edit:r}=P(E());return B(()=>D(s.aii,zs)),(o,t)=>{const e=is,c=us,a=O;return l(),V(a,{aii:o.aii,mini:!0},{default:d(()=>[(l(),m(w,null,I([{}],(u,p)=>i("div",{class:"td",key:p},[i("div",cn,h(_(gs)(_(r).new_restock_date)),1),i("div",ln,h(_(r).new_restock_price),1),i("div",un,h(_(r).new_lowest_price),1),i("div",pn,h(_(r).new_selling_price),1),i("div",dn,[i("div",null,h(_(r).total_broken_products),1),i("div",mn,[n(c,{idx:121},{default:d(()=>[n(e,{tit:"壞貨詳情"})]),_:1}),n(c,{class:"pi",idx:111},{default:d(()=>[n(e,{tit:"入貨詳情"})]),_:1})])])])),64))]),_:1},8,["aii"])}}}),hn=i("div",{class:"py-row"},null,-1),vn=i("div",{class:"py-row"},null,-1),$n=i("div",{class:"py-row"},null,-1),yn=i("div",{class:"py-row"},null,-1),bn={class:"tabie tabie-def"},kn={class:"td"},wn={class:"w-100"},gn=$({__name:"ProductEditRight",setup(f){const{one_of_edit:s}=P(E()),r=b({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),o=b({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),t=b({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(e,c)=>{const a=kt;return l(),m("div",null,[hn,n(fn,{aii:_(t)},null,8,["aii"]),vn,n(_n,{aii:_(o)},null,8,["aii"]),$n,n(tn,{aii:_(r)},null,8,["aii"]),yn,i("div",bn,[n(a,{trs:_(Gs)},null,8,["trs"]),i("div",kn,[i("div",wn,h(_(s).total_broken_products),1)])])])}}}),xn=$({__name:"product_edit",setup(f){const s=Zs(),r=E(),o=b({ioading:!1,msg:"",can:!1,sign:0,search:""}),{one_of_edit:t,variations:e,labels:c}=P(r),a={buiid:()=>o.can?r.form():null,submit:()=>ss(o,a.buiid,async()=>{a.iabei_deai()}),iabei_deai:()=>k(async()=>{const u=c.value,p=t.value.id;for(let v=0;v<u.length;v++)await r.tag_pius(u[v],p)}),variation_deai:()=>k(async()=>{let u=!0;const p=e.value;for(let v=0;v<p.length;v++){const y=p[v];y.id?u=await r.variation_edit(y.name,y.id):u=await r.variation_add(y.name,t.value.id)}console.log(u)}),dump:u=>k(()=>{r.switch_pag(u||0)}),init:()=>k(()=>{F(0),wt().ciear(),t.value.id||s.back()})};return B(a.init),(u,p)=>{const v=J,y=Ks,C=Ls;return l(),m(w,null,[n(Ei,null,{default:d(()=>[n(C,null,{ieft:d(()=>[n(zo,{aii:_(o)},null,8,["aii"])]),ieft_bottom:d(()=>[n(v,{aii:_(o),onClick:p[0]||(p[0]=T=>a.submit()),class:"w-100",tit:"儲存"},null,8,["aii"])]),right:d(()=>[n(y,{class:"fx-s",onInbad:p[1]||(p[1]=T=>a.dump(2)),onInstock:p[2]||(p[2]=T=>a.dump(1)),onInorder:p[3]||(p[3]=T=>a.dump(3))}),n(gn)]),_:1})]),_:1}),n(Bo)],64)}}});typeof fs=="function"&&fs(xn);export{xn as default};
