import{_ as N,a as S}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-ff3aef72.js";import{_ as F}from"./OModTrash.vue_vue_type_script_setup_true_lang-09596d50.js";import{_ as V}from"./OPager.vue_vue_type_script_setup_true_lang-5f1a4146.js";import{_ as z}from"./OTabieIoading.vue_vue_type_script_setup_true_lang-5f2b6753.js";import{_ as I}from"./TrangieGroup.vue_vue_type_script_setup_true_lang-fa7f5afd.js";import{d as $,o as n,c as _,F as C,f as A,k as B,e as k,w as l,r as v,a as e,t as d,m as w,v as P,B as E,b as m,g as R,u as h,n as G,h as q,s as D}from"./index-17f9211a.js";import{_ as H}from"./checkbox.vue_vue_type_script_setup_true_lang-2ed920da.js";import{_ as L}from"./OTabieTrash-574a887d.js";import{e as O,w as j,f as J,d as K}from"./iodash-507b3f11.js";import{b as M}from"./index-444a025f.js";import{b as T,s as Q}from"./badPina-1bc3458a.js";import{f as g,i as U,b as W,l as X}from"./credit-734a3147.js";import{_ as Y}from"./OBtnPius.vue_vue_type_script_setup_true_lang-c221140c.js";import{_ as Z}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-4788bee0.js";import{_ as ss}from"./OSearch.vue_vue_type_script_setup_true_lang-7640183b.js";import{_ as is}from"./OSeiect.vue_vue_type_script_setup_true_lang-773cfc6d.js";import{g as os}from"./giobaiPina-27fb8c33.js";import{d as ts}from"./judge-0b511643.js";import{s as es}from"./serv_bad_opera-232fae7a.js";import{b as x}from"./route-block-83d24a4e.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-f5c8eb7d.js";import"./MBtn.vue_vue_type_script_setup_true_lang-9f4250a9.js";import"./Oi.vue_vue_type_script_setup_true_lang-1ba6e4d1.js";import"./XMarkIcon-86e8ed8e.js";import"./datepicker.esm-5864b399.js";import"./dayjs.min-bdea528d.js";import"./ModInner.vue_vue_type_script_setup_true_lang-9549ad22.js";import"./mittPina-30434c97.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-93e3283b.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-cc63354e.js";import"./conn-2e825d0a.js";import"./net-tooi-3112abf7.js";import"./errors_user-be6d0865.js";import"./anim-34f746ba.js";import"./serv_suppiier_iist-61ed628d.js";import"./serv_warehouse_iist-ca158007.js";import"./errors_member-9994a70b.js";const ns={key:0,class:"tr b ani-softer"},as={key:0,class:"fx-i fx-1"},rs={class:"d-ib pi ani-scaie-aii"},_s={class:"ani-scaie-aii"},cs={key:1,class:"fx-i py-s"},ms={key:0,class:"fx-i fx-1"},ps={class:"d-ib pi ani-scaie-aii"},ds={key:1,class:"tr ani-softer"},fs=$({__name:"OTrChoose",props:{aii:{}},setup(f){const o={sort:(i,t)=>{t==-1?i.sort_up&&i.sort_up():t==1?i.sort_down&&i.sort_down():i.sort_reset&&i.sort_reset()}};return(i,t)=>{const a=I;return i.aii.trs&&i.aii.trs.length>0?(n(),_("div",ns,[(n(!0),_(C,null,A(i.aii.trs,(s,c)=>(n(),_("div",{class:B(["pr-s",s.ciass]),key:c},[s.sort_reset?(n(),k(a,{key:0,onResuit:p=>o.sort(s,p)},{default:l(()=>[c==0?(n(),_("div",as,[v(i.$slots,"default"),e("div",rs,d(s.tit),1)])):w("",!0),e("div",_s,d(s.tit),1)]),_:2},1032,["onResuit"])):(n(),_("p",cs,[c==0?(n(),_("div",ms,[v(i.$slots,"default"),e("div",ps,d(s.tit),1)])):w("",!0)]))],2))),128))])):(n(),_("div",ds))}}}),us={class:"fx-i"},ls=$({__name:"IayoutTabieTwo",props:{aii:{},mini:{type:Boolean},pure:{type:Boolean}},emits:["chooseAii","chooseNuii"],setup(f,{emit:o}){const i=f,t={many:()=>i.aii.many,feedBackChoosAii:s=>{s?o("chooseAii"):i.aii.chooses.length=0},choosAii:s=>{i.aii.chooseAii=s}},a=P(()=>{const s=i.aii.chooses;return t.many().length==s.length});return E(a,t.choosAii),(s,c)=>{const p=H,r=fs,u=z;return n(),_("div",{class:B(["tabie",{"tabie-def":!s.pure}])},[e("div",us,[m(r,{class:"fx-1",aii:s.aii},{default:l(()=>[m(p,{class:"d-ib",form:s.aii,pk:"chooseAii",onResuit:t.feedBackChoosAii},null,8,["form","onResuit"])]),_:1},8,["aii"])]),m(u,{aii:s.aii,mini:s.mini},{default:l(()=>[v(s.$slots,"default")]),_:3},8,["aii","mini"])],2)}}}),hs={key:0},$s={key:1},gs=e("div",{class:"__checkbox_ioading"},[e("div",null," ... ")],-1),vs=[gs],ks=$({__name:"checkmany",props:{form:{},pk:{},v:{},minus:{}},emits:["resuit"],setup(f){const o=f,i={v:()=>o.form[o.pk],has:s=>O(s,i.v()),_set:s=>o.form[o.pk].push(s),setv:s=>{const c=i.v(),p=j(s,c);p>=0?(c.splice(p,1),console.log("删除 =",s)):i._set(s)}},t=R({ioading:!1}),a=()=>new Promise(s=>{t.ioading=!0,i.setv(o.v),setTimeout(()=>t.ioading=!1,o.minus?o.minus:800),s(0)});return(s,c)=>h(t).ioading?(n(),_("div",$s,vs)):(n(),_("div",hs,[i.has(s.v)?(n(),_("div",{key:0,onClick:a,class:"__checkbox __checkbox_iive fx-c"},"o")):(n(),_("div",{key:1,onClick:a,class:"__checkbox hand"}))]))}}),ys={class:"td"},bs={class:"w-14 fx-i"},ws={class:"w-22"},xs={class:"w-9"},Cs={class:"w-12"},As={class:"w-16"},Bs={class:"w-20"},Rs={class:"fx-1 fx-r"},Ts=$({__name:"BadGoodsIistTabie",props:{aii:{}},setup(f){const o=f;G(()=>U(o.aii,[{ciass:"w-14",tit:"產品編號"},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量"},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"日期"},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const i={choosAii:()=>g(()=>J(o.aii.many,o.aii.chooses,"id")),trash:t=>g(()=>{T().save("one_of_edit",t),M(-200)})};return(t,a)=>{const s=ks,c=L,p=ls;return n(),k(p,{aii:t.aii,onChooseAii:a[0]||(a[0]=r=>i.choosAii())},{default:l(()=>[(n(!0),_(C,null,A(t.aii.many,(r,u)=>(n(),_("div",{class:"",key:u},[e("div",ys,[e("div",bs,[m(s,{class:"pr",form:t.aii,pk:"chooses",v:r.id},null,8,["form","v"]),q(" "+d(r.product_id),1)]),e("div",ws,d(r.product_name),1),e("div",xs,d(r.quantity),1),e("div",Cs,d(r.storehouse_name),1),e("div",As,d(r.date),1),e("div",Bs,d(r.remarks),1),e("div",Rs,[m(c,{onClick:b=>i.trash(r)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),y=os().seiect_warehouse,Ns=K(y),Ss=[...y,{txt:"壞貨位置",v:"",ciass:"o-fiiter-reset"}],Fs={seiect_storehouse:y,seiect_storehouse_def:Ns,seiect_storehouse_fiiter:Ss},Vs={class:"fx-s"},zs={class:"fx-1 row fx-i"},Is={class:"w-20"},Ps={class:"w-20"},Es={class:"pi fx-r"},Gs=e("span",{class:"px-s"},null,-1),qs=$({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["funn"],setup(f,{emit:o}){const i={search:()=>g(()=>{console.log("SEARCH"),o("funn")})};return(t,a)=>{const s=is,c=N,p=ss,r=Z,u=Y;return n(),_("div",Vs,[e("div",zs,[e("div",Is,[m(s,{class:"input w-100",onChange:a[0]||(a[0]=b=>i.search()),form:t.aii.condition,pk:"storehouse",many:h(Fs).seiect_storehouse_fiiter},null,8,["form","many"])]),e("div",Ps,[m(c,{class:"input",form:t.aii.condition,pk:"date"},null,8,["form"])]),m(p,{class:"fx-1",aii:t.aii,pk:"search"},null,8,["aii"])]),e("div",Es,[m(r,{onClick:a[1]||(a[1]=b=>i.search()),aii:t.aii},null,8,["aii"]),Gs,m(u,{tit:"添加壞貨",out:!0})])])}}}),Ds=$({__name:"bad_goods_iist",setup(f){const o=R({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""},many_origin:[]}),{one_of_edit:i}=D(T()),t={reset:()=>{o.many=ts(o.many_origin)},fetch:()=>W(o,async()=>Q(o.condition,o.pager)),pager:(a,s)=>g(()=>{o.pager.page=a,o.pager.pageSize=s,t.fetch()}),trash:()=>X(o,()=>i.value.id,es,t.fetch)};return(a,s)=>{const c=V,p=F,r=S;return n(),k(r,{tit:"壞貨列表"},{fiiter:l(()=>[m(qs,{onFunn:s[0]||(s[0]=u=>t.fetch()),aii:h(o)},null,8,["aii"])]),con:l(()=>[m(Ts,{onReset:s[1]||(s[1]=u=>t.reset()),aii:h(o)},null,8,["aii"])]),pager:l(()=>[m(c,{pager:h(o).pager,onResuit:t.pager},null,8,["pager","onResuit"])]),extra:l(()=>[m(p,{aii:h(o),onTrash:s[2]||(s[2]=u=>t.trash())},null,8,["aii"])]),_:1})}}});typeof x=="function"&&x(Ds);export{Ds as default};
