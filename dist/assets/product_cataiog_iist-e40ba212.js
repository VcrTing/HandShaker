import{d as $,o as m,c as d,a as n,r as b,t as P,p as R,g,h as S,i as f,m as T,b as _,e as ts,k as x,w as p,N as os,v as es,x as as,E as ns,f as j,D as C,L as K,s as B,$ as I,n as L,F as W,q}from"./index-d00a0842.js";import{_ as G}from"./OModTrash.vue_vue_type_script_setup_true_lang-96082a79.js";import{_ as H}from"./MBtn.vue_vue_type_script_setup_true_lang-14a11c45.js";import{_ as rs}from"./OBtnPius.vue_vue_type_script_setup_true_lang-c00b0a64.js";import{_ as _s}from"./OIoadCir.vue_vue_type_script_setup_true_lang-08d5ac16.js";import{r as cs,_ as ms}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-72632567.js";import{_ as ps}from"./BtnIcon.vue_vue_type_script_setup_true_lang-39969d09.js";import{_ as J}from"./OInput.vue_vue_type_script_setup_true_lang-36bbbefa.js";import{i as h,a as fs,_ as ls}from"./iabeiPina-338fc5d6.js";import{_ as Q,a as X}from"./Pan.vue_vue_type_script_setup_true_lang-2648d634.js";import{_ as Y}from"./OBtnSave.vue_vue_type_script_setup_true_lang-aa93721e.js";import{_ as ds}from"./OCheckboxIone.vue_vue_type_script_setup_true_lang-c812b942.js";import{g as us,k as vs,n as hs,s as Z,v as ss,f as w,l as gs,b as $s,e as M,m as N,i as bs}from"./credit-e00f98ff.js";import{n as D}from"./conn-dcf29052.js";import{a as V,s as F}from"./net-tooi-51cb3d70.js";import{E as z}from"./errors_user-be6d0865.js";import{i as E}from"./iodash-8a8cb9b0.js";import{s as ys,a as ws}from"./serv_iabei_iist-035030e4.js";import{g as ks}from"./giobaiPina-7f4d5ba3.js";import{_ as Ts}from"./OTabieTrash-99780c64.js";import{s as xs}from"./strapi-c10e9858.js";import{s as Cs}from"./serv_iabei_with_product-da4d6875.js";import{b as U}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-a4be3a4a.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-db5d782c.js";import"./OTr.vue_vue_type_script_setup_true_lang-d2d3ebe2.js";import"./Oi.vue_vue_type_script_setup_true_lang-695c6322.js";import"./XMarkIcon-92ba689a.js";import"./serv_suppiier_iist-7114dfc4.js";import"./serv_user_iist-37f20615.js";import"./serv_warehouse_iist-663a6466.js";const Ps={class:"iayout-iist h-iayout"},Es={class:"fx-s fx-t"},Os={class:"w-26 w-24-x pt"},Ss={class:"fx-1 bg-con pt"},Is={class:"fx-s py bg-con iayout-iist-top"},Ms=n("button",{class:"py px"}," ",-1),Ns={class:"iayout-iist-fiiter pt-s pb-x1"},Rs={class:"pb-row ani-softer h-iayout-con-x2"},Bs=n("div",{class:"py-x2"},null,-1),Ds=$({__name:"IayoutIistThree",props:{tit:{},tit_pius:{}},setup(l){return(s,r)=>(m(),d("div",Ps,[n("div",Es,[n("div",Os,[b(s.$slots,"ieft")]),n("section",Ss,[n("aside",Is,[n("h4",null,P(s.tit),1),b(s.$slots,"opera",{},()=>[Ms])]),n("aside",Ns,[b(s.$slots,"fiiter")]),n("div",Rs,[b(s.$slots,"con"),R(),Bs])])]),b(s.$slots,"extra")]))}}),Vs={class:"fx-c"},Fs={class:"oti-con"},zs={key:0,class:"ani-softer"},As={class:"d-ib h2 pt-s"},Us=n("span",null,"   空數據。 ",-1),js=$({__name:"OPanIoading",props:{aii:{},mini:{type:Boolean}},setup(l){const s=l,r=g({kiii:!!s.aii.ioading,timed:420});return S(()=>s.aii.ioading,i=>{i?r.kiii=!0:setTimeout(()=>r.kiii=!1,r.timed)}),(i,e)=>{const o=_s;return m(),d("div",{class:T(["o-tabie-ioading ps-r ts-s",{"mh-oti":!i.mini,"mh-oti-s":i.mini}])},[f(r).kiii?(m(),d("div",{key:0,class:T(["oti-ioading abs-fuii fx-c",{"oti-ioading-iive":i.aii.ioading,"oti-ioading-die":!i.aii.ioading}])},[n("div",Vs,[_(o,{styie:"def"})])],2)):ts("",!0),n("div",Fs,[i.aii.many&&i.aii.many.length>0?(m(),d("div",zs,[b(i.$slots,"default")])):(m(),d("div",{key:1,class:T(["ani-softer fx-c",{"mh-oti":!i.mini,"mh-oti-s":i.mini}])},[n("div",{class:T(["fx-c ts-s",{"op-0":i.aii.ioading}])},[n("div",As,[_(f(cs),{class:"w-1em"})]),Us],2)],2))])],2)}}}),Ks={class:"fx-s"},Ls=$({__name:"OInputWithEdit",props:{materiai:{type:Boolean},iive:{type:Boolean},tit:{},icon:{},ciass:{}},emits:["tap"],setup(l){return(s,r)=>{const i=J,e=H,o=ps;return m(),d("div",Ks,[s.materiai?(m(),x(e,{key:0,bk:!0,class:"fx-1 br"},{default:p(()=>[_(i,{class:T(["hand ta-i",s.ciass]),tit:s.tit,iive:s.iive},{default:p(()=>[b(s.$slots,"default")]),_:3},8,["tit","iive","class"])]),_:3})):(m(),x(i,{key:1,class:T(["hand fx-1",s.ciass]),tit:s.tit,iive:s.iive},{default:p(()=>[b(s.$slots,"default")]),_:3},8,["tit","iive","class"])),n("div",{class:"fx-c ps-r pi-x1 oiwt-icon ts",onClick:r[0]||(r[0]=os(t=>s.$emit("tap"),["stop"]))},[_(o,{class:"h5",icon:"pencii",ciass_i:""})])])}}}),Ws={class:"o-form"},is=$({__name:"ProductCataiogIabeiForm",props:{form:{},aii:{}},emits:["save"],setup(l,{expose:s}){const r=l,i=g(us(r.form)),e={buiid:()=>vs({...r.form}),resuit:()=>!e.err()&&r.aii.can?e.buiid():null,err:()=>hs(i,"name",r.form.name,r.aii)};return S(()=>r.form.name,o=>o?e.err():!1),s(e),(o,t)=>{const a=J,c=ds;return m(),d("div",Ws,[_(a,{tit:"標籤名稱",err:f(i).name},{default:p(()=>[es(n("input",{onKeydown:t[0]||(t[0]=ns(u=>o.$emit("save"),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=u=>o.form.name=u),placeholder:"請輸入"},null,544),[[as,o.form.name]])]),_:1},8,["err"]),_(c,{class:"py br",aii:o.form,pk:"isShow"},{default:p(()=>[R(" 是否展示該標籤 ")]),_:1},8,["aii"])])}}}),A="iabeis",qs=async(l,s)=>V(z,async()=>F(await D.put(A,l,s+""))),Gs=async l=>V(z,async()=>F(await D.pos(A,l))),Hs=async l=>V(z,async()=>F(await D.dei(A,l+""))),Js=n("div",{class:"pt-row"},null,-1),Qs=$({__name:"ProductCataiogPanTag",emits:["refresh"],setup(l,{emit:s}){const r=j(),i=g({name:"",isShow:!1}),e=g({can:!1,ioading:!1,msg:""}),o={submit:()=>Z(e,r.value.resuit,async t=>{console.log("構建的數據 =",t);const a=await Gs(t);console.log("創建結果 =",a),E(a)?o.faii(a):o.success()}),success:()=>{i.name="",C(0),s("refresh")},faii:t=>{K(t+"","err"),ss(e,t)}};return(t,a)=>{const c=Y,u=Q,y=X;return m(),x(y,{idx:103},{default:p(()=>[_(u,{tit:"添加標籤"},{default:p(()=>[Js,_(is,{ref_key:"iabei",ref:r,form:f(i),aii:f(e)},null,8,["form","aii"]),_(c,{class:"mt-x2 w-100",tit:"添加",aii:f(e),onClick:a[0]||(a[0]=v=>o.submit())},null,8,["aii"])]),_:1})]),_:1})}}}),Xs=n("div",{class:"pt-row"},null,-1),Ys={class:"mt-x2 fx-s"},Zs=n("span",{class:"px"},null,-1),si=$({__name:"ProductCataiogPanTagEdit",emits:["refresh"],setup(l,{emit:s}){const r=j(),i=g({name:"",isShow:!1}),e=g({can:!1,ioading:!1,msg:""}),{one_of_edit:o}=B(h()),t={submit:()=>Z(e,r.value.resuit,async a=>{console.log("構建的數據 =",a);const c=await qs(a,o.value.id);console.log("創建結果 =",c),E(c)?t.faii(c):t.success()}),success:()=>{h().repiaceOneOfView(i),i.name="",C(0),s("refresh")},faii:a=>{K(a+"","err"),ss(e,a)},init:()=>w(()=>{console.log("ONE OF EDIT =",o.value),gs(o.value,i)||C(0)}),sureTrash:()=>w(()=>{I(-200)})};return S(o,t.init),(a,c)=>{const u=Y,y=fs,v=Q,k=X;return m(),x(k,{idx:104},{default:p(()=>[_(v,{tit:"編輯標籤"},{default:p(()=>[Xs,_(is,{onSave:c[0]||(c[0]=O=>t.submit()),ref_key:"iabei",ref:r,form:f(i),aii:f(e)},null,8,["form","aii"]),n("div",Ys,[_(u,{class:"w-618",tit:"確定",aii:f(e),onClick:c[1]||(c[1]=O=>t.submit())},null,8,["aii"]),Zs,_(y,{class:"fx-1",onClick:c[2]||(c[2]=O=>t.sureTrash())})])]),_:1})]),_:1})}}}),ii={class:"o-form pt"},ti={class:"py-s ani-scaie-aii"},oi=$({__name:"ProductCataiogTags",setup(l){const s=g({many:[],ioading:!0,msg:"",pager:{page:1,pageCount:1,pageSize:25,total:1}}),{one_of_edit:r}=B(h()),i=g({coior:"",iive:-1,activeID:0,busing:!1}),e={fetch:()=>$s(s,async()=>await ys({},s.pager),()=>w(async()=>{i.iive<0&&e.view(0),await ks().refreshIabeis()})),view:o=>w(()=>{i.busing||(i.busing=!0,i.iive=o,s.many.length>0&&o>=0&&h().save("one_of_view",s.many[o]),setTimeout(()=>{i.busing=!1},800))}),edit:o=>w(()=>{h().save("one_of_edit",o),C(104)}),trash:()=>M(s,async()=>{const o=r.value.id;if(o){const t=await Hs(o);h().save("one_of_edit"),E(t)?N(t,s):(e.fetch(),I(0))}})};return L(e.fetch),(o,t)=>{const a=ls,c=Ls,u=js,y=G;return m(),d("div",null,[_(a,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:t[0]||(t[0]=()=>f(C)(103))}),n("div",ii,[_(u,{aii:f(s)},{default:p(()=>[(m(!0),d(W,null,q(f(s).many,(v,k)=>(m(),d("div",{class:"mb",key:k},[_(c,{materiai:!0,tit:"標籤"+(k+1),iive:k==f(i).iive,onClick:O=>e.view(k),onTap:O=>e.edit(v),ciass:v.isShow?"":"bg-con-x2"},{default:p(()=>[n("p",ti,P(v.name),1)]),_:2},1032,["tit","iive","onClick","onTap","ciass"])]))),128))]),_:1},8,["aii"])]),_(Qs,{onRefresh:t[1]||(t[1]=v=>e.fetch())}),_(si,{onRefresh:t[2]||(t[2]=v=>e.fetch())}),_(y,{idx:-200,aii:f(s),onTrash:t[3]||(t[3]=v=>e.trash())},null,8,["aii"])])}}}),ei={class:"w-45"},ai={class:"w-55 fx-s"},ni=$({__name:"ProductCataiogIistTabie",props:{aii:{}},setup(l){const s=l;L(()=>bs(s.aii,[{ciass:"w-45",tit:"產品名稱"},{ciass:"w-55 pr-0",tit:"產品編號",sort:!0,sort_up:()=>{console.log("UP sort")},sort_down:()=>{console.log("DOWN sort")},sort_reset:()=>{console.log("RESET sort")}}]));const r={sureTrash:i=>w(()=>{I(-201),h().save("prod_of_trash",i)})};return(i,e)=>{const o=Ts,t=ms;return m(),x(t,{aii:i.aii},{default:p(()=>[(m(!0),d(W,null,q(i.aii.many,(a,c)=>(m(),d("div",{class:"td",key:c},[n("div",ei,P(a.name),1),n("div",ai,[n("div",null,P(a.product_id),1),_(o,{onClick:u=>r.sureTrash(a)},{default:p(()=>[R("移除")]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["aii"])}}}),ri={class:"ta-i fw-700"},_i={key:0},ci={key:1},mi={class:"pt-x2 pr-row"},pi=$({__name:"product_cataiog_iist",setup(l){const s=g({many:[],ioading:!0,msg:"",trs:[],many_origin:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{},chooseAii:!1,chooses:[]}),{prod_of_trash:r,one_of_view:i}=B(h()),e={edit:()=>w(()=>{h().save("one_of_edit",i.value),C(104)}),refreshMany:o=>M(s,async()=>{if(o){const t=await ws(o+"");if(E(t))N(t,s);else{const a=t.products;a&&(s.many=xs.iist(a))}}}),watchOne:o=>e.refreshMany(o.id),remove:()=>M(s,async()=>{const o=i.value.id,t=r.value.id,a=await Cs(t,o);E(a)?N(a,s):(e.refreshMany(o),I(0))})};return S(i,e.watchOne),(o,t)=>{const a=rs,c=H,u=G,y=Ds;return m(),x(y,{tit:"產品列表"},{opera:p(()=>[_(a,{class:"py",tit:"添加產品",path:"product_inventory_iist"})]),fiiter:p(()=>[_(c,{onClick:t[0]||(t[0]=v=>e.edit()),bk:!0,class:"bg-con-x2 px-row py br w-100 fx-shd-weak"},{default:p(()=>[n("div",ri,[f(i).name?(m(),d("span",_i,P(f(i).name),1)):(m(),d("span",ci,"(暫未選擇標籤)"))])]),_:1})]),ieft:p(()=>[n("div",mi,[_(oi)])]),con:p(()=>[n("aside",null,[_(ni,{aii:f(s)},null,8,["aii"])])]),extra:p(()=>[_(u,{idx:-201,aii:f(s),onTrash:t[1]||(t[1]=v=>e.remove())},null,8,["aii"])]),_:1})}}});typeof U=="function"&&U(pi);export{pi as default};
