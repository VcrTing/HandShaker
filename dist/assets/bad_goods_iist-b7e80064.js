import{_ as S,a as N}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-bc1eb50d.js";import{_ as F}from"./OModTrash.vue_vue_type_script_setup_true_lang-de33db08.js";import{_ as I}from"./OPager.vue_vue_type_script_setup_true_lang-36e2ec03.js";import{_ as V}from"./OTabieIoading.vue_vue_type_script_setup_true_lang-ccfc6ee7.js";import{_ as z}from"./TrangieGroup.vue_vue_type_script_setup_true_lang-38915df2.js";import{d as h,o as e,c as r,F as C,f as A,k as B,e as k,w as u,r as v,a,t as f,m as w,v as O,B as P,b as c,g as R,u as $,n as E,h as G,s as q}from"./index-f6fc0cc4.js";import{_ as D}from"./checkbox.vue_vue_type_script_setup_true_lang-10a6ab97.js";import{_ as H}from"./OTabieTrash-87cba4ac.js";import{b as L,w as j,e as J,d as K}from"./iodash-66372aee.js";import{b as M}from"./index-ddf506e4.js";import{b as T,s as Q}from"./badPina-b2f5f0ab.js";import{f as g,i as U,b as W,k as X}from"./credit-f97b8a61.js";import{_ as Y}from"./OBtnPius.vue_vue_type_script_setup_true_lang-d449a3bd.js";import{_ as Z}from"./MBtn.vue_vue_type_script_setup_true_lang-0d6d885e.js";import{_ as ss}from"./OIoadCir.vue_vue_type_script_setup_true_lang-66a6e81d.js";import{_ as is}from"./OSearch.vue_vue_type_script_setup_true_lang-39cdca07.js";import{_ as os}from"./OSeiect.vue_vue_type_script_setup_true_lang-02b5b728.js";import{g as ts}from"./giobaiPina-e8b819bf.js";import{d as es}from"./judge-0b511643.js";import{s as ns}from"./serv_bad_opera-1f067f92.js";import{b as x}from"./route-block-83d24a4e.js";import"./Oi.vue_vue_type_script_setup_true_lang-27f979d1.js";import"./XMarkIcon-ec82c7d5.js";import"./datepicker.esm-590b1acd.js";import"./dayjs.min-bdea528d.js";import"./ModInner.vue_vue_type_script_setup_true_lang-a56831b6.js";import"./mittPina-8a35d841.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-bc6edd41.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-e94305df.js";import"./errors_user-6dfd8f12.js";import"./net-tooi-3112abf7.js";import"./anim-34f746ba.js";import"./serv_warehouse_iist-5f91aba7.js";import"./errors_member-9994a70b.js";const as={key:0,class:"tr b ani-softer"},rs={key:0,class:"fx-i fx-1"},_s={class:"d-ib pi ani-scaie-aii"},cs={class:"ani-scaie-aii"},ms={key:1,class:"fx-i py-s"},ps={key:0,class:"fx-i fx-1"},ds={class:"d-ib pi ani-scaie-aii"},fs={key:1,class:"tr ani-softer"},us=h({__name:"OTrChoose",props:{aii:{}},setup(d){const i={sort:(o,t)=>{t==-1?o.sort_up&&o.sort_up():t==1?o.sort_down&&o.sort_down():o.sort_reset&&o.sort_reset()}};return(o,t)=>{const n=z;return o.aii.trs&&o.aii.trs.length>0?(e(),r("div",as,[(e(!0),r(C,null,A(o.aii.trs,(s,m)=>(e(),r("div",{class:B(["pr-s",s.ciass]),key:m},[s.sort_reset?(e(),k(n,{key:0,onResuit:p=>i.sort(s,p)},{default:u(()=>[m==0?(e(),r("div",rs,[v(o.$slots,"default"),a("div",_s,f(s.tit),1)])):w("",!0),a("div",cs,f(s.tit),1)]),_:2},1032,["onResuit"])):(e(),r("p",ms,[m==0?(e(),r("div",ps,[v(o.$slots,"default"),a("div",ds,f(s.tit),1)])):w("",!0)]))],2))),128))])):(e(),r("div",fs))}}}),ls={class:"fx-i"},hs=h({__name:"IayoutTabieTwo",props:{aii:{},mini:{type:Boolean},pure:{type:Boolean}},emits:["chooseAii","chooseNuii"],setup(d,{emit:i}){const o=d,t={many:()=>o.aii.many,feedBackChoosAii:s=>{s?i("chooseAii"):o.aii.chooses.length=0},choosAii:s=>{o.aii.chooseAii=s}},n=O(()=>{const s=o.aii.chooses;return t.many().length==s.length});return P(n,t.choosAii),(s,m)=>{const p=D,_=us,l=V;return e(),r("div",{class:B(["tabie",{"tabie-def":!s.pure}])},[a("div",ls,[c(_,{class:"fx-1",aii:s.aii},{default:u(()=>[c(p,{class:"d-ib",form:s.aii,pk:"chooseAii",onResuit:t.feedBackChoosAii},null,8,["form","onResuit"])]),_:1},8,["aii"])]),c(l,{aii:s.aii,mini:s.mini},{default:u(()=>[v(s.$slots,"default")]),_:3},8,["aii","mini"])],2)}}}),$s={key:0},gs={key:1},ks=a("div",{class:"__checkbox_ioading"},[a("div",null," ... ")],-1),vs=[ks],ys=h({__name:"checkmany",props:{form:{},pk:{},v:{},minus:{}},emits:["resuit"],setup(d){const i=d,o={v:()=>i.form[i.pk],has:s=>L(s,o.v()),_set:s=>i.form[i.pk].push(s),setv:s=>{const m=o.v(),p=j(s,m);p>=0?(m.splice(p,1),console.log("删除 =",s)):o._set(s)}},t=R({ioading:!1}),n=()=>new Promise(s=>{t.ioading=!0,o.setv(i.v),setTimeout(()=>t.ioading=!1,i.minus?i.minus:800),s(0)});return(s,m)=>$(t).ioading?(e(),r("div",gs,vs)):(e(),r("div",$s,[o.has(s.v)?(e(),r("div",{key:0,onClick:n,class:"__checkbox __checkbox_iive fx-c"},"o")):(e(),r("div",{key:1,onClick:n,class:"__checkbox hand"}))]))}}),bs={class:"td"},ws={class:"w-14 fx-i"},xs={class:"w-22"},Cs={class:"w-9"},As={class:"w-12"},Bs={class:"w-16"},Rs={class:"w-20"},Ts={class:"fx-1 fx-r"},Ss=h({__name:"BadGoodsIistTabie",props:{aii:{}},setup(d){const i=d;E(()=>U(i.aii,[{ciass:"w-14",tit:"產品編號"},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量"},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"日期"},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const o={choosAii:()=>g(()=>J(i.aii.many,i.aii.chooses,"id")),trash:t=>g(()=>{T().save("one_of_edit",t),M(-200)})};return(t,n)=>{const s=ys,m=H,p=hs;return e(),k(p,{aii:t.aii,onChooseAii:n[0]||(n[0]=_=>o.choosAii())},{default:u(()=>[(e(!0),r(C,null,A(t.aii.many,(_,l)=>(e(),r("div",{class:"",key:l},[a("div",bs,[a("div",ws,[c(s,{class:"pr",form:t.aii,pk:"chooses",v:_.id},null,8,["form","v"]),G(" "+f(_.product_id),1)]),a("div",xs,f(_.product_name),1),a("div",Cs,f(_.quantity),1),a("div",As,f(_.storehouse_name),1),a("div",Bs,f(_.date),1),a("div",Rs,f(_.remarks),1),a("div",Ts,[c(m,{onClick:b=>o.trash(_)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),Ns={key:0,class:"ani-softer fx-s"},Fs={key:1,class:"mxh-1em ani-softer"},Is=h({__name:"OBtnSearch",props:{aii:{}},setup(d){return(i,o)=>{const t=ss,n=Z;return e(),k(n,{class:"btn-pri hand mh-input br mw-8em",ciass:"fx-c"},{default:u(()=>[i.aii.ioading?(e(),r("div",Fs,[c(t,{class:"h5",styie:"wht"})])):(e(),r("div",Ns," 搜索 "))]),_:1})}}}),y=ts().seiect_warehouse,Vs=K(y),zs=[...y,{txt:"壞貨位置",v:"",ciass:"o-fiiter-reset"}],Os={seiect_storehouse:y,seiect_storehouse_def:Vs,seiect_storehouse_fiiter:zs},Ps={class:"fx-s"},Es={class:"fx-1 row fx-i"},Gs={class:"w-20"},qs={class:"w-20"},Ds={class:"pi fx-r"},Hs=a("span",{class:"px-s"},null,-1),Ls=h({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["funn"],setup(d,{emit:i}){const o={search:()=>g(()=>{console.log("SEARCH"),i("funn")})};return(t,n)=>{const s=os,m=S,p=is,_=Is,l=Y;return e(),r("div",Ps,[a("div",Es,[a("div",Gs,[c(s,{class:"input w-100",onChange:n[0]||(n[0]=b=>o.search()),form:t.aii.condition,pk:"storehouse",many:$(Os).seiect_storehouse_fiiter},null,8,["form","many"])]),a("div",qs,[c(m,{class:"input",form:t.aii.condition,pk:"date"},null,8,["form"])]),c(p,{class:"fx-1",aii:t.aii,pk:"search"},null,8,["aii"])]),a("div",Ds,[c(_,{onClick:n[1]||(n[1]=b=>o.search()),aii:t.aii},null,8,["aii"]),Hs,c(l,{tit:"添加壞貨",out:!0})])])}}}),js=h({__name:"bad_goods_iist",setup(d){const i=R({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""},many_origin:[]}),{one_of_edit:o}=q(T()),t={reset:()=>{i.many=es(i.many_origin)},fetch:()=>W(i,async()=>Q(i.condition,i.pager)),pager:(n,s)=>g(()=>{i.pager.page=n,i.pager.pageSize=s,t.fetch()}),trash:()=>X(i,()=>o.value.id,ns,t.fetch)};return(n,s)=>{const m=I,p=F,_=N;return e(),k(_,{tit:"壞貨列表"},{fiiter:u(()=>[c(Ls,{onFunn:s[0]||(s[0]=l=>t.fetch()),aii:$(i)},null,8,["aii"])]),con:u(()=>[c(Ss,{onReset:s[1]||(s[1]=l=>t.reset()),aii:$(i)},null,8,["aii"])]),pager:u(()=>[c(m,{pager:$(i).pager,onResuit:t.pager},null,8,["pager","onResuit"])]),extra:u(()=>[c(p,{aii:$(i),onTrash:s[2]||(s[2]=l=>t.trash())},null,8,["aii"])]),_:1})}}});typeof x=="function"&&x(js);export{js as default};
