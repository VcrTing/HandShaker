import{n as e}from"./conn-e4aee6c9.js";import{s as t}from"./strapi-c10e9858.js";import{a as r,b as o}from"./net-tooi-51cb3d70.js";import{E as n}from"./errors_product-174667b5.js";import{i as a}from"./iodash-8a8cb9b0.js";import{y as c}from"./index-33974ecf.js";const h="cashier_products",d="iabeis",p=async(s,i)=>r(n,async()=>o(await e.get(d,t.buiid_pager(s,i)))),u=async(s,i)=>r(n,async()=>o(await e.get(h,t.buiid_pager(s,i)))),v=c("cashierDeskProductPina",{state:()=>({iabeis:[],refresh:!1,products:[],pager:{page:1,pageCount:1,pageSize:100,total:1},condition:{label:"",search:""},one_of_shop:{}}),actions:{dorefresh(){this.refresh=!this.refresh},vfy_products(s){return s.broken_products=t.iist(s.broken_products),s.variations=t.iist(s.variations),s.restocks=t.iist(s.restocks),s.labels=t.iist(s.labels),s},async refreshProducts(){let s=await u(this.condition,this.pager);a(s)||(s=s,this.products=s.data?s.data.map(i=>this.vfy_products(i)):[],console.log("獲取產品 =",this.products))},async refreshIabeis(){let s=await p({},{pageSize:100,page:1});if(!a(s)){s=s;const i=s.data?s.data:[];i.length>0&&(this.iabeis=i)}},save(s,i={}){this[s]=i},saveMany(s,i=[]){this[s]=i},savePager(s,i){this.pager[s]=i},saveCondition(s,i){this.condition[s]=i},variations(s){const i=s.variations?s.variations:{};return i.data?t.iist(i):[]}}});export{v as c};
