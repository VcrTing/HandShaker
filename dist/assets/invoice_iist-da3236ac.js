import{_ as j,a as H}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-3c9f47a5.js";import{_ as J}from"./OPager.vue_vue_type_script_setup_true_lang-5422dbd7.js";import{_ as K}from"./OBtnPius.vue_vue_type_script_setup_true_lang-d9b7ba4d.js";import{q as A,O as W,x as F,P as I,at as X,d as v,s as z,G as Y,a7 as Z,o as d,c as m,a as t,t as _,F as S,D as R,i as n,A as w,f as x,n as q,U as ii,b as u,k as f,M as ti,g,C as B,y as k,w as l,m as si,au as oi,S as ei,af as h,ag as C,N as E,e as ai,Q as ni}from"./index-9f6d9a11.js";import{E as M}from"./errors_product-d5275ad5.js";import{_ as ri}from"./OBtnReset.vue_vue_type_script_setup_true_lang-182f18f4.js";import{_ as ci}from"./OSearch.vue_vue_type_script_setup_true_lang-f84b5738.js";import{_ as _i}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-74d5cd3a.js";import{g as pi}from"./giobaiPina-b74534ed.js";import{_ as V}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-f78d5f5c.js";import{_ as ui}from"./OTabieDetaii.vue_vue_type_script_setup_true_lang-3f974e03.js";import{a as di,m as P}from"./view-051b25fc.js";import{invoiceCreatPina as O}from"./invoiceCreatPina-a37915bb.js";import{_ as mi,a as li}from"./Pan.vue_vue_type_script_setup_true_lang-25642326.js";import{b as N}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-0282de24.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-ea342a96.js";import"./Oi.vue_vue_type_script_setup_true_lang-7b515ad1.js";import"./DocumentTextIcon-02c33e07.js";import"./XMarkIcon-5cf953f7.js";import"./OiX2.vue_vue_type_script_setup_true_lang-472cf126.js";import"./PlusCircleIcon-4f33172d.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-effae3a2.js";import"./datepicker.esm-0c1068a9.js";import"./serv_suppiier_iist-2b4bb402.js";import"./serv_user_iist-a41f7fe2.js";import"./serv_warehouse_iist-e58f48da.js";import"./InboxIcon-ef6b2d0c.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-8eab646c.js";import"./OTr.vue_vue_type_script_setup_true_lang-2dd2a12b.js";import"./serv_product_iist-67ffcbbf.js";const U="invoices",fi=async(o,i)=>A(M,async()=>W(await F.get(U,I.buiid_pager(o,i)),["supplier"])),vi=async o=>A(M,async()=>X(await F.one(U,o+""))),hi={value:""},wi=["value"],$i=v({__name:"CoSuppiierSeiectPure",props:{form:{},pk:{},tit_def:{}},emits:["resuit"],setup(o){const{suppiiers:i}=z(pi());return(e,r)=>Y((d(),m("select",{onChange:r[0]||(r[0]=s=>e.$emit("resuit")),"onUpdate:modelValue":r[1]||(r[1]=s=>e.form[e.pk]=s),class:w({"o-fiiter-reset":!e.form[e.pk]})},[t("option",hi,_(e.tit_def?e.tit_def:"供應商"),1),(d(!0),m(S,null,R(n(i),(s,a)=>(d(),m("option",{value:s.id,key:a},_(s.name)+"   (負責人: "+_(s.contact_person)+") ",9,wi))),128))],34)),[[Z,e.form[e.pk]]])}}),yi={class:"fx-s"},gi={class:"fx-1 row fx-i"},ki=v({__name:"InvoiceIistFiiter",props:{aii:{}},emits:["search"],setup(o,{emit:i}){const e=o,r=x(),s={search:()=>e.aii.ioading?void 0:i("search"),reset:()=>f(()=>{ti({},e.aii.condition),r.value&&r.value.ciear(),s.search()})},a=x(0);return q(()=>ii(7,()=>a.value+=1,32)),(c,p)=>{const b=$i,D=_i,G=ci,L=ri,Q=j;return d(),m("div",yi,[t("div",gi,[t("div",{class:w(["w-25 op-0",{"ani-fiiter":n(a)>=1}])},[u(b,{onResuit:p[0]||(p[0]=y=>s.search()),class:"input w-100 ip-fiiter fix-seiect",form:c.aii.condition,pk:"supplier"},null,8,["form"])],2),t("div",{class:w(["w-28 op-0 ip-fiiter",{"ani-fiiter":n(a)>=2}])},[u(D,{onResuit:p[1]||(p[1]=y=>s.search()),class:"input ip-fiiter",form:c.aii.condition,pk:"date"},null,8,["form"])],2),t("div",{class:w(["w-36 ip-fiiter op-0",{"ani-fiiter":n(a)>=3}])},[u(G,{onResuit:p[2]||(p[2]=y=>s.search()),aii:c.aii.condition,pk:"invoice_id",pchd:"請輸入供應商參考編號"},null,8,["aii"])],2)]),t("div",{class:w(["pi op-0",{"ani-fiiter":n(a)>=5}])},[u(L,{onClick:p[3]||(p[3]=y=>s.reset())})],2),t("div",{class:w(["pi op-0",{"ani-fiiter":n(a)>=6}])},[u(Q,{onClick:p[4]||(p[4]=y=>s.search()),aii:c.aii},null,8,["aii"])],2)])}}}),T=o=>o.supplier?o.supplier:{},$={suppiier_id:(o={})=>T(o).supplier_id,suppiier_name:(o={})=>T(o).name,restock_product_id:o=>(o.product?o.product:{}).product_id,restock_product_name:o=>(o.product?o.product:{}).name,restock_qunatity:o=>{const i=o.variations?o.variations:[];let e=0;return i.map(r=>{e+=r.quantity}),e}},bi={class:"w-20"},Ci={class:"w-16"},Ii={class:"w-13"},Si={class:"w-14"},Ri={class:"w-15"},qi={class:"w-16"},Pi={class:"fx-1 fx-r"},Di=v({__name:"InvoiceIistTabie",props:{aii:{}},setup(o){const i=o;g({ioading:!1,iiveId:-1});const e={editFuture:async r=>{let s=await vi(r);si(s)?oi(s+""):(s=s,O().save("one_of_view",s))},dump:()=>{ei(100)}};return q(()=>B(i.aii,[{ciass:"w-20",tit:"供應商參考編號",sort_up:()=>f(()=>h(i.aii.many,"order_id",!0)),sort_down:()=>f(()=>h(i.aii.many,"order_id")),sort_reset:()=>C(i.aii)},{ciass:"w-16",tit:"發票日期"},{ciass:"w-13",tit:"合計數量",sort_up:()=>f(()=>h(i.aii.many,"total_quantity",!0)),sort_down:()=>f(()=>h(i.aii.many,"total_quantity")),sort_reset:()=>C(i.aii)},{ciass:"w-14",tit:"合計金額",sort_up:()=>f(()=>h(i.aii.many,"total_price",!0)),sort_down:()=>f(()=>h(i.aii.many,"total_price")),sort_reset:()=>C(i.aii)},{ciass:"w-15",tit:"供應商編號"},{ciass:"w-22",tit:"供應商名稱"}])),(r,s)=>{const a=ui,c=V;return d(),k(c,{aii:r.aii},{default:l(()=>[(d(!0),m(S,null,R(r.aii.many,(p,b)=>(d(),m("div",{class:"td",key:b},[t("div",bi,_(p.invoice_id),1),t("div",Ci,_(n(di)(p.date)),1),t("div",Ii,_(p.total_quantity),1),t("div",Si,_(n(P)(p.total_price)),1),t("div",Ri,_(n($).suppiier_id(p)),1),t("div",qi,_(n($).suppiier_name(p)),1),t("div",Pi,[u(a,{tit:"產品詳情",func:e.editFuture,id:p.id,onTap:s[0]||(s[0]=D=>e.dump())},null,8,["func","id"])])]))),128))]),_:1},8,["aii"])}}}),xi={class:"w-13"},Ni={class:"w-20"},Ti={class:"w-10"},Ai={class:"w-10"},Fi={class:"w-9"},zi={class:"w-11"},Bi={class:"w-10"},Ei={class:"w-10"},Mi={class:"fx-1"},Vi=v({__name:"IpdiTabie",props:{aii:{},many:{}},setup(o){const i=o;return g({ioading:!1,iiveId:-1}),q(()=>B(i.aii,[{ciass:"w-13",tit:"貨號"},{ciass:"w-20",tit:"貨品名稱 / 摘要"},{ciass:"w-10",tit:"數量總數"},{ciass:"w-10",tit:"單價"},{ciass:"w-9",tit:"折扣"},{ciass:"w-11",tit:"最新入貨價錢"},{ciass:"w-10",tit:"統計"},{ciass:"w-10",tit:"最低價錢"},{ciass:"fx-1",tit:"售價"}])),(e,r)=>{const s=V;return d(),k(s,{aii:e.aii,mini:!0},{default:l(()=>[(d(!0),m(S,null,R(e.many,(a,c)=>(d(),m("div",{class:"td",key:c},[t("div",xi,_(n($).restock_product_id(a)),1),t("div",Ni,_(n($).restock_product_name(a)),1),t("div",Ti,_(n($).restock_qunatity(a)),1),t("div",Ai,_(a.unit_price),1),t("div",Fi,_(a.discount),1),t("div",zi,_(a.net_price),1),t("div",Bi,_(n(P)(a.total_amount)),1),t("div",Ei,_(a.lowest_price),1),t("div",Mi,_(a.selling_price),1)]))),128))]),_:1},8,["aii"])}}}),Oi={class:"pt"},Ui=v({__name:"InvoicePanDetaiiIist",props:{one:{}},setup(o){const i=o,e=E(()=>{const s=i.one?i.one:{};return(s.restocks?s.restocks:[]).map(c=>(c.product=c.product?I.data(c.product):{},c.variations=c.variations?c.variations:[],c.__totai=s.total_quantity,c))}),r=g({many:[{}],condition:{},chooseAii:!1,chooses:[],ioading:!1,msg:"",trs:[],many_origin:[],pager:{page:1,pageSize:25,pageCount:1,total:1}});return(s,a)=>(d(),m("div",Oi,[u(Vi,{aii:n(r),many:n(e)},null,8,["aii","many"])]))}}),Gi={class:"py"},Li=t("div",{class:"pb"},"入貨倉庫  ",-1),Qi={key:0,class:"row ani-softer py-x3"},ji={class:"w-50"},Hi=t("div",null," 合計數量 ",-1),Ji={class:"pt"},Ki={class:"w-50"},Wi=t("div",null," 合計金額 ",-1),Xi={class:"pt"},Yi=v({__name:"InvoicePanDetaii",setup(o){const{one_of_view:i}=z(O()),e=E(()=>{const r=i.value?i.value:{};return(r.storehouse?I.data(r.storehouse):{}).name});return(r,s)=>{const a=mi,c=li;return d(),k(c,{idx:100,big:!0},{default:l(()=>[u(a,{tit:"入單產品詳情"},{default:l(()=>[t("div",Gi,[Li,t("h6",null,[t("span",null,_(n(e)),1)])]),u(Ui,{one:n(i)},null,8,["one"]),n(i)?(d(),m("div",Qi,[t("div",ji,[Hi,t("div",Ji,[t("h4",null,_(n(i).total_quantity),1)])]),t("div",Ki,[Wi,t("div",Xi,[t("h4",null,_(n(P)(n(i).total_price)),1)])])])):ai("",!0)]),_:1})]),_:1})}}}),Zi=v({__name:"invoice_iist",setup(o){const i=g({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{supplier:"",date:"",invoice_id:""}}),e={fetch:()=>ni(i,async()=>fi(i.condition,i.pager)),pager:(r,s)=>f(()=>{i.pager.page=r,i.pager.pageSize=s,e.fetch()})};return(r,s)=>{const a=K,c=J,p=H;return d(),k(p,{tit:"發票列表",tit_pius:"快速入單"},{pius:l(()=>[u(a,{class:"py mi",tit:"快速入單"})]),fiiter:l(()=>[u(ki,{aii:n(i),onSearch:e.fetch},null,8,["aii","onSearch"])]),con:l(()=>[u(Di,{aii:n(i)},null,8,["aii"])]),pager:l(()=>[u(c,{pager:n(i).pager,onResuit:e.pager},null,8,["pager","onResuit"])]),extra:l(()=>[u(Yi)]),_:1})}}});typeof N=="function"&&N(Zi);export{Zi as default};
