import{n as c}from"./conn-18cb3692.js";import{a as p,c as u,b as i,d as _}from"./net-tooi-4fdf0d83.js";import{E as l}from"./errors_user-be6d0865.js";import{o as m}from"./credit-f7bb6a57.js";import{i as h}from"./iodash-8a8cb9b0.js";import{y as f}from"./index-ecdfbad0.js";const g={floatAdd(t,r){let e,s,o;try{e=t.toString().split(".")[1].length}catch{e=0}try{s=r.toString().split(".")[1].length}catch{s=0}return o=Math.pow(10,Math.max(e,s)),(t*o+r*o)/o},floatSub(t,r){let e,s,o,a;try{e=t.toString().split(".")[1].length}catch{e=0}try{s=r.toString().split(".")[1].length}catch{s=0}return o=Math.pow(10,Math.max(e,s)),a=(e=s)?e:s,((t*o-r*o)/o).toFixed(a)},floatMul(t,r){let e=0,s=t.toString(),o=r.toString();try{e+=s.split(".")[1].length}catch{}try{e+=o.split(".")[1].length}catch{}return Number(s.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,e)},floatDiv(t,r){let e=0,s=0,o,a;try{e=t.toString().split(".")[1].length}catch{}try{s=r.toString().split(".")[1].length}catch{}return o=Number(t.toString().replace(".","")),a=Number(r.toString().replace(".","")),o/a*Math.pow(10,s-e)}},d="orders",R=async(t,r)=>p(l,async()=>u(await c.get(d,i.buiid_pager(t,r)))),b=async t=>p(l,async()=>_(await c.one(d,t+""))),y=f("pageOrderPina",{state:()=>({one_of_view:{},one_of_refund:{},refund_products:[]}),getters:{refund_price(t){let r=0;return t.refund_products.map(s=>{g.floatAdd(s.refunded_price,r)}),r}},actions:{ciear_product_refund(){this.refund_products.length=0},pius_product_refund(t){this.refund_products.push(t)},trash_product_refund(t){let r=0;this.refund_products.map((e,s)=>{e.id==t.id}),this.refund_products.splice(r,1)},save(t,r={}){this[t]=r},async fetchOne(t,r="one_of_view"){const e=await b(t);h(e)?m("網絡錯誤，訂單獲取失敗!!!"):this.save(r,this._vai_order(e))},_vai_order(t){return t.member=t.member?i.data(t.member):{},t.cashier=t.cashier?i.data(t.cashier):{},t.member_level=t.member_level?i.data(t.member_level):{},console.log("ORDER OF VIEW =",t),t}}}),x=Object.freeze(Object.defineProperty({__proto__:null,pageOrderPina:y},Symbol.toStringTag,{value:"Module"}));export{x as a,g as f,y as p,R as s};
