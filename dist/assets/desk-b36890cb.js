import{b as ws,_ as zs,a as As}from"./CoDeskIeftWrapper.vue_vue_type_script_setup_true_lang-cb210ea0.js";import{b as Rs,_ as ss,a as ys}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-984174c6.js";import{_ as A}from"./MBtn.vue_vue_type_script_setup_true_lang-868db3ff.js";import{_ as os}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-25121498.js";import{m as J,n as qs}from"./view-45b23436.js";import{i as gs,f as k,c as Y,d as xs,b as as,e as ts,g as cs,h as Q}from"./credit-aafde702.js";import{c as D,_ as _s,d as P,a as is,b as ks}from"./DcTotiPriceNum.vue_vue_type_script_setup_true_lang-655a84bf.js";import{d as $,s as C,n as M,o as _,j as y,w as m,i as e,c as p,F as H,p as z,b as a,l as S,a as s,t as h,m as w,g,e as K,D as B,B as O,$ as L,_ as rs,r as j,f as Ns,q,v as F,E as Vs,C as Os,h as E,G as Es,H as vs,y as Us,x as Cs,I as Gs,J as js,K as Fs}from"./index-1fb82353.js";import{_ as U}from"./OBtnSave.vue_vue_type_script_setup_true_lang-61cade88.js";import{_ as ds}from"./Itemdash.vue_vue_type_script_setup_true_lang-0b426dc1.js";import{_ as Ws}from"./Msgiine.vue_vue_type_script_setup_true_lang-7025bfd9.js";import{_ as Ds}from"./OModTrash.vue_vue_type_script_setup_true_lang-15ff5d61.js";import{_ as Js}from"./cioseitem.vue_vue_type_script_setup_true_lang-3cc0ab19.js";import{f as Ls}from"./fioat-e27af979.js";import{t as Qs,h as Xs}from"./iodash-2c16ffcb.js";import{_ as ps}from"./BtnTab.vue_vue_type_script_setup_true_lang-d208f5f2.js";import{v as Ys}from"./vai_order-883c2048.js";import{_ as Zs}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-a964ca96.js";import{_ as st}from"./OPager.vue_vue_type_script_setup_true_lang-270d4908.js";import{_ as tt}from"./scroiiy-41bc14db.js";import{_ as ls}from"./Oi.vue_vue_type_script_setup_true_lang-7b242647.js";import{v as Z}from"./vai_member-dddcb4a6.js";import{s as it}from"./serv_member_iist-9b3007c9.js";import{n as Ps}from"./conn-88770a94.js";import{s as G}from"./strapi-c10e9858.js";import{a as Ts,b as Ss}from"./net-tooi-962a533f.js";import{E as Bs}from"./errors_product-174667b5.js";import{_ as nt}from"./OSearch.vue_vue_type_script_setup_true_lang-4b47123d.js";import{_ as X,a as us}from"./Pan.vue_vue_type_script_setup_true_lang-0a93e41a.js";import{_ as ms,a as et}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-5b9d4a5c.js";import{_ as hs}from"./OInput.vue_vue_type_script_setup_true_lang-849850a7.js";import{_ as ot}from"./BtnIcon.vue_vue_type_script_setup_true_lang-aeb00cbe.js";import{_ as fs}from"./OTr.vue_vue_type_script_setup_true_lang-b017fc3b.js";import{b as $s}from"./route-block-83d24a4e.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-281b26d4.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-a966f17b.js";import"./dayjs.min-668a802a.js";import"./ModInner.vue_vue_type_script_setup_true_lang-ebaed574.js";import"./XMarkIcon-7255455b.js";import"./giobaiPina-2d78b6d8.js";import"./serv_iabei_iist-1af3be75.js";import"./errors_user-be6d0865.js";import"./serv_suppiier_iist-84fbf535.js";import"./serv_user_iist-a9e045ed.js";import"./serv_warehouse_iist-6e9e5965.js";const at={key:0,class:"ani-fade-b"},ct={class:"td tit-son"},_t={class:"fx-1 px fx-i"},rt={class:"mw-2em"},dt={class:"sus fs-s"},pt={class:"w-15 fs-n"},lt={key:0},ut={key:1},mt={class:"w-19 fs-n fw-300"},ht={class:"w-18 fs-n fx-r pr fw-800"},ft={key:1},vt=$({__name:"DeskIeftTabie",props:{aii:{}},setup(l){const t=l,{carts:i}=C(D()),n={vai_totai:o=>J(D().comput_one_totai(o)),chiose:o=>k(()=>{t.aii.many.map(r=>{r.__choise=!1}),o.__choise=!0,console.log("選擇的變動 =",t.aii.many)})};return M(()=>gs(t.aii,[{ciass:"fx-1 h6",tit:"序號/商品名稱"},{ciass:"w-15 h6",tit:"附加"},{ciass:"w-19 h6",tit:"單價*數量"},{ciass:"w-18 h6 fx-r pr-0",tit:"統計金額"}])),(o,r)=>{const c=os,d=A,u=Rs,v=ss;return _(),y(v,{aii:o.aii,pure:!0},{default:m(()=>[e(i)&&e(i).length>0?(_(),p("div",at,[(_(!0),p(H,null,z(e(i),(f,b)=>(_(),p("div",{class:"py-s br ani-scaie-aii",key:b},[a(d,{bk:!0,class:"w-100 ta-i br fx-aii-tab",onClick:x=>n.chiose(f)},{default:m(()=>[a(c,{class:S({"bg-con-x2":f.__choise})},{default:m(()=>[s("div",ct,[s("div",_t,[s("div",rt,h(b+1)+"    ",1),s("div",null,[s("p",null,h(f.__product.name),1),s("p",dt,h(f.__variation.name),1)])]),s("div",pt,[f.is_ratio?(_(),p("span",lt,"x")):(_(),p("span",ut,"-")),w(" "+h(f.discount),1)]),s("div",mt,h(f.__product.new_selling_price)+"*"+h(f.quantity),1),s("div",ht,h(n.vai_totai(f)),1)])]),_:2},1032,["class"])]),_:2},1032,["onClick"])]))),128))])):(_(),p("div",ft,[a(u,{class:"mh-oti"})]))]),_:1},8,["aii"])}}}),$t=$({__name:"DeskIeft",setup(l){const t=g({many:[{}],chooseAii:!1,chooses:[],many_origin:[],condition:{},ioading:!1,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}});return(i,n)=>(_(),p("div",null,[a(vt,{class:"pt-s ani-fade-b",aii:e(t)},null,8,["aii"])]))}}),bt={class:"pt pb px-n"},wt={key:0,class:"ani-softer mb"},yt={key:1,class:"ani-softer mb"},gt={key:2,class:"ani-softer"},xt=$({__name:"DcDiscountTips",setup(l){const{ratio_of_member:t,ratio_of_aii:i,discount_of_aii:n}=C(D()),o=()=>k(()=>{B(202)});return(r,c)=>{const d=Ws;return _(),p("div",bt,[e(t).iive?(_(),p("div",wt,[a(d,{onClick:c[0]||(c[0]=u=>o()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:m(()=>[w(h(e(t).txt)+":  "+h(e(t).discount),1)]),_:1})])):K("",!0),e(i).iive?(_(),p("div",yt,[a(d,{onClick:c[1]||(c[1]=u=>o()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:m(()=>[w(h(e(i).txt)+":  "+h(e(i).discount),1)]),_:1})])):K("",!0),e(n).iive?(_(),p("div",gt,[a(d,{onClick:c[2]||(c[2]=u=>o()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:m(()=>[w(h(e(n).txt)+":  "+h(e(n).discount),1)]),_:1})])):K("",!0)])}}}),kt={class:"d-ib"},Ms=$({__name:"DcTotiDiscountNum",setup(l){const t=D(),i=O(()=>{let n=t.comput_carts_totai();return t.comput_aii_order_discount(n)});return(n,o)=>(_(),p("div",kt,h(e(J)(e(i))),1))}}),Ct={class:"fx-s h6 fw-600 fx-b pb-s"},Dt={class:""},Pt=s("span",{class:"sus"},"優惠",-1),Tt={class:"d-ib ani-scaie-hv"},St=s("span",null,"統計金額:  ",-1),Bt={class:"d-ib txt-money h5 ani-scaie-hv"},Mt={class:"pt"},Kt=$({__name:"DeskIeftBottom",setup(l){const t=D(),{carts:i}=C(t),n=g({ioading:!1,msg:""}),o=()=>k(()=>{if(i.value.length<=0)return Y("結算清單為空！！！"),!0;const c=P().r_page;B(0),L(0),P().save_sts("ioading",!1),c<3?(P().switch_r_page(3),P().save_sts("checking",!1)):c==3&&(P().save_sts("checking",!0),P().switch_r_page(100))});return(r,c)=>{const d=ds,u=U;return _(),p("aside",null,[a(xt),a(d,null,{default:m(()=>[s("div",Ct,[s("div",Dt,[Pt,w(":   "),s("div",Tt,[w("HKD "),a(Ms)])]),s("div",null,[St,s("div",Bt,[w("HKD "),a(_s)])])])]),_:1}),s("div",Mt,[a(u,{aii:e(n),onClick:o,class:"w-100",tit:"結算"},null,8,["aii"])])])}}}),Ht={},It={class:"pi-row"},zt={class:"px-row py-row"};function At(l,t){const i=ws;return _(),p("div",It,[a(i,{class:"ps-r"},{default:m(()=>[s("div",zt,[j(l.$slots,"default")])]),_:3})])}const ns=rs(Ht,[["render",At]]),bs="/src/assets/payment/",V=(l,t,i,n="w-25")=>({tit:t,code:i,ciass:n,id:l,img:bs+"origin/"+i+".svg",img_wht:bs+"wht/"+i+".svg"}),es=[V(1,"支付寶","Alipay"),V(2,"微信支付","Wechat"),V(3,"銀聯","UnionPay"),V(4,"master card","MasterCard"),V(5,"八連通","Octopus","w-333"),V(6,"EPS","Eps","w-333"),V(7,"現金支付","Cash","w-333")];es[0];const Rt={class:"fx-i fx-wp row"},qt={class:"fx-c mh-3em mxh-3em"},Nt=["src"],Vt={class:"ta-c pt fs-s"},Ot={class:"fx-c mh-3em mxh-3em"},Et=["src"],Ut={class:"ta-c pt fs-s"},Gt=$({__name:"DrnCheckouTab",setup(l){const t=Ns(0),i=P(),{payments:n}=C(i),o={has:(r,c=!1)=>{const d=r.id;return n.value&&n.value.map(u=>{d==u.id&&(c=!0)}),c},insrt_payment:r=>k(()=>{i.insert_payment(r)})};return M(()=>xs(es.length,()=>t.value+=1,32)),(r,c)=>{const d=A;return _(),p("div",Rt,[(_(!0),p(H,null,z(e(es),(u,v)=>(_(),p("div",{class:S(u.ciass),key:v},[s("div",{class:S([{"ani-card":e(t)>=v},"op-0 mb ani-scaie-aii"])},[o.has(u)?(_(),y(d,{key:0,class:"px py hand bg-card br w-100 fx-shd-pri paymentcard-iive fx-shd-pri"},{default:m(()=>[s("div",qt,[s("img",{src:u.img_wht,class:"mxw-100"},null,8,Nt)]),s("p",Vt,h(u.tit),1)]),_:2},1024)):(_(),y(d,{key:1,bk:!0,onClick:f=>o.insrt_payment(u),class:"px py hand bg-card br w-100 fx-shd-tab"},{default:m(()=>[s("div",Ot,[s("img",{src:u.img,class:""},null,8,Et)]),s("p",Ut,h(u.tit),1)]),_:2},1032,["onClick"]))],2)],2))),128))])}}}),jt={class:"py-row"},Ft={class:"fx-i pi-row"},Wt=s("h6",{class:"mxw-3em ta-c"},"小計",-1),Jt={class:"fw-700"},Lt={class:"py"},Qt={class:"fx-i pi-row"},Xt={class:"pr fx-i"},Yt=["src"],Zt={class:"fw-600 ps-r zi-s"},si=s("div",{class:"middie i-0 d-ib h5"},"HKD",-1),ti={class:"pi-row"},ii=["onUpdate:modelValue"],ni={key:0,class:"ani-fade-b"},ei={key:0,class:"d-ib"},oi=$({__name:"DrnCheckouItems",setup(l){const t=P(),{payments:i}=C(t),n=g({ani:0,trashIdx:-1,ioading:!1,msg:""}),o=O(()=>{let c=0;const d=i.value;return d&&d.map(u=>{c=Ls.floatAdd(c,u.price)}),c}),r={sureTrash:c=>k(()=>{n.trashIdx=Qs(c),L(-210)}),trash:()=>k(()=>{const c=i.value;if(c.length>0&&n.trashIdx>=0){const d=c[n.trashIdx];d&&d.id?t.trash_payment(d):Y("刪除項丟失，需重新選區。"),L(0),n.trashIdx=-1}})};return M(()=>xs(7,()=>n.ani+=1,32)),(c,d)=>{const u=Js,v=ds,f=Ds;return _(),p("div",null,[s("div",jt,[a(u,{class:"drn-checkout-item bs-x3 ani-scaie-hv"},{default:m(()=>[s("div",Ft,[Wt,s("h5",Jt,[w(" :     HKD "),a(_s)])])]),_:1})]),s("aside",Lt,[(_(!0),p(H,null,z(e(i),(b,x)=>(_(),p("div",{key:x},[a(u,{onTrash:I=>r.sureTrash(x),class:"drn-checkout-item bd mb-s ani-scaie-hv"},{default:m(()=>[s("div",Qt,[s("div",Xt,[s("img",{src:b.img,class:"mxh-2em mxw-5em"},null,8,Yt)]),s("div",Zt,[si,s("div",ti,[q(s("input",{"onUpdate:modelValue":I=>b.price=I,class:"h5 pi-x3 w-100",placeholder:"請輸入付款金額"},null,8,ii),[[F,b.price]])])])])]),_:2},1032,["onTrash"])]))),128))]),e(i).length>1?(_(),p("aside",ni,[a(v,{class:"fx-c"},{default:m(()=>[(_(!0),p(H,null,z(e(i),(b,x)=>(_(),p("div",{key:x},[w(h(b.price)+" ",1),x<e(i).length?(_(),p("div",ei,"  +  ")):K("",!0)]))),128)),s("div",null," =  "+h(e(J)(e(o))),1)]),_:1})])):K("",!0),a(f,{onTrash:d[0]||(d[0]=b=>r.trash()),aii:e(n),idx:-210,msg:"你確定要刪除該付款方式嗎？"},null,8,["aii"])])}}}),ai={class:"py-row"},ci={class:"ta-c"},_i=s("h5",{class:"pb"},"實收金額",-1),ri={class:"py"},di={class:"txt-money fw-700"},pi={class:"fs-2em"},li=s("div",{class:"py-x1"},[s("p",{class:"sus"},"標記收款僅供記帳，請確認已經支付和收款到帳")],-1),ui={class:"fx-c pt"},mi={class:"w-618"},hi=s("p",{class:"py-s"},null,-1),fi=$({__name:"DrnCheckouBottom",props:{aii:{}},emits:["submit","back"],setup(l){return(t,i)=>{const n=U,o=ps;return _(),p("div",ai,[s("div",ci,[_i,s("div",ri,[s("h4",di,[s("div",pi,[w("HKD  "),a(_s)])])]),li]),s("div",ui,[s("div",mi,[a(n,{aii:t.aii,onClick:i[0]||(i[0]=r=>t.$emit("submit")),class:"w-100 ani-scaie-aii",tit:"確認收款"},null,8,["aii"]),hi,a(o,{onClick:i[1]||(i[1]=r=>t.$emit("back")),class:"w-100",tit:"返回",ciass:"refund"})])])])}}}),vi={class:"py-row"},$i=s("div",{class:"py-x2"},null,-1),bi=$({__name:"DrnCheckout",setup(l){const t=g({ioading:!1,msg:""}),{member:i}=C(D()),n=g({member:"",status:"",storehouse:"",ordered_product:[],discount:[],payment_method:[]}),o={submit:()=>k(()=>{const r=D().buiid_ordered_product();if(r.length<=0){Y("結算清單不能為空。");return}const c=P().buiid_payment_method();if(c.length<=0){Y("請選擇至少一種付款方式。");return}const d=D().buiid_discount();n.member=i.value.id?i.value.id:"",n.status=Ys.status_checkout_def,n.ordered_product=r,n.payment_method=c,n.discount=d,console.log("FORM =",n)}),back:()=>k(()=>{P().regress_index()})};return(r,c)=>{const d=is,u=ns;return _(),y(u,null,{default:m(()=>[a(d,{tit:"結算收款"}),s("div",vi,[a(Gt)]),a(oi,{class:"pt pb-x2"}),a(fi,{aii:e(t),onBack:c[0]||(c[0]=v=>o.back()),onSubmit:c[1]||(c[1]=v=>o.submit()),class:"w-100"},null,8,["aii"]),$i]),_:1})}}}),wi=s("div",{class:"py-row"},[s("div",{class:"fx-c drn-cs-con"},[s("div",{class:"ta-c"},[s("h2",null,[s("div",{class:"fx-c"},[s("div",{class:"cir drn-cs-icon px-x1 py-x1 fx-c"},[s("i",{class:"fa-solid fa-check"})])])]),s("div",{class:"py"},[s("h3",{class:"pb pt-x1"},"收款成功"),s("h4",{class:"py"},[s("div",{class:"fw-700 fs-2em"},"HKD 1500.0")])])])])],-1),yi=$({__name:"DrnCheckoutSucc",setup(l){return(t,i)=>{const n=is,o=Zs,r=ns;return _(),y(r,null,{default:m(()=>[a(n,{tit:"結算收款"}),wi,a(o,{class:"abs-b pb",tit_back:"打印票據",tit_save:"繼續收銀",onSave:i[0]||(i[0]=c=>e(P)().switch_r_page(0))})]),_:1})}}}),gi={class:"o-search-biock br ps-r"},xi=["placeholder"],ki={class:"middie r-0 o-search-biock-ciose"},Ci=$({__name:"OSearchBiock",props:{form:{},pk:{},tit:{}},emits:["resuit"],setup(l){return(t,i)=>{const n=ls,o=A;return _(),p("div",gi,[q(s("input",{onKeydown:i[0]||(i[0]=Vs(r=>t.$emit("resuit"),["enter"])),class:"w-100 py pi-row pr-x3","onUpdate:modelValue":i[1]||(i[1]=r=>t.form[t.pk]=r),placeholder:t.tit?t.tit:"輸入會員編號、手機號或姓名進行搜索"},null,40,xi),[[F,t.form[t.pk]]]),s("div",ki,[a(o,{bk:!0,class:"py-n px",ciass:"fx-c",onClick:i[2]||(i[2]=()=>{t.form[t.pk]="",t.$emit("resuit")})},{default:m(()=>[a(n,{class:"i h4",icon:"x"})]),_:1})])])}}}),Di={class:"px-x3 py bg-card ta-i w-100"},Pi={class:"bb pb"},Ti={class:"fx-s pb"},Si={class:"w-42 pr"},Bi={class:"w-34 pr"},Mi={class:"w-24 fx-r"},Ki={class:"fx-i"},Hi={class:"w-42 pr"},Ii={class:"w-34 pr"},zi={class:"fw-900"},Ai=$({__name:"CoCustomerDetaiiCard",props:{v:{}},setup(l){return(t,i)=>{const n=A;return _(),y(n,{bk:!0,class:"ani-scaie-aii hand w-100"},{default:m(()=>[s("div",Di,[s("div",Pi,"客戶姓名:  "+h(t.v.name),1),s("div",Ti,[s("div",Si,"郵箱:  "+h(t.v.email),1),s("div",Bi,"電話號碼:  "+h(t.v.phone_no),1),s("div",Mi,"會員編號:  "+h(t.v.member_id),1)]),s("div",Ki,[s("div",Hi,"會員等級:  "+h(e(Z).ievei(t.v)),1),s("div",Ii,[w("購買折扣:   "),s("span",zi,h(e(Z).discount(t.v)),1)])])])]),_:1})}}}),Ri={class:"desk-right-custom bg-con ps-r br-ti o-h"},qi={class:"div ps-r zi"},Ni={class:"py-x3"},Vi={class:"ta-c py"},Oi={key:0,class:"ani-softer"},Ei={key:1,class:"ani-softer"},Ui={key:0,class:"pt-x3 ani-fade-b"},Gi={key:1,class:"ani-softer"},ji={class:"px-x3 py-x2 fx-c"},Fi={class:"pt"},Wi=s("div",{class:"py-x3"},null,-1),Ji={key:0,class:"abs-b zi-x3 w-100 py bg-con"},Li={class:"fx-c pb-x2"},Qi={class:"fx-c"},Xi=$({__name:"DrnCustomCon",setup(l){const t=g({many:[],chooseAii:!1,chooses:[],many_origin:[],condition:{search:""},ioading:!1,msg:"",trs:[],search:"",pager:{page:1,pageSize:10,pageCount:1,total:3}}),i=D(),{member:n}=C(i),o={fetch:()=>as(t,async()=>it(t.condition,t.pager)),search:()=>k(()=>{t.condition.search=(t.condition.search+"").trim(),o.fetch()}),choise:r=>k(()=>{i.save_member(r),t.many.length=0,t.many.push({})}),reset:()=>k(()=>{i.save_member({}),t.many.length=0}),view:()=>k(()=>{P().switch_r_tab(1),B(202)})};return(r,c)=>{const d=Ai,u=Ci,v=ys,f=ks,b=ps;return _(),p("div",Ri,[s("div",qi,[s("div",Ni,[s("h3",Vi,[e(n).id?(_(),p("div",Oi,"客戶信息")):(_(),p("div",Ei,"搜尋客戶"))]),e(n).id?(_(),p("div",Ui,[a(d,{v:e(n)},null,8,["v"])])):(_(),p("div",Gi,[s("div",ji,[a(u,{onResuit:c[0]||(c[0]=x=>o.search()),class:"w-75 w-50-x w-100-p",form:e(t).condition,pk:"search"},null,8,["form"])]),s("div",Fi,[a(v,{aii:e(t)},{default:m(()=>[(_(!0),p(H,null,z(e(t).many,(x,I)=>(_(),p("div",{key:I,class:"pb"},[x.id?(_(),y(d,{key:0,onClick:T=>o.choise(x),v:x},null,8,["onClick","v"])):K("",!0)]))),128)),Wi]),_:1},8,["aii"])])]))])]),e(n).id?(_(),p("div",Ji,[s("div",Li,[a(f,{class:"w-382 w-50-p",onClick:c[1]||(c[1]=x=>o.view()),tit:"查看全單折扣"})]),s("div",Qi,[a(b,{class:"w-382 w-50-p",onClick:c[2]||(c[2]=x=>o.reset()),tit:"重選客戶"})])])):K("",!0)])}}}),Yi={class:"co-desk-prod-card bg-con br ani-scaie-aii"},Zi={class:"mh-7em pt-x1"},sn={class:"fw-700"},tn={class:"cdpc-sub fw-700 op-85 pt-s"},nn={class:"pt pb-x1 fw-700"},en=$({__name:"CoDeskProdCard",props:{name:{},price:{},number:{},inventory:{}},setup(l){return(t,i)=>{const n=A;return _(),p("nav",Yi,[a(n,{bk:!0,class:"w-100 ta-i br hand",ciass:"pi pr-s fs"},{default:m(()=>[s("div",Zi,[s("h5",sn,h(t.name),1),s("h6",tn,"編號"+h(t.number),1)]),s("h6",nn," HKD  "+h(t.price),1)]),_:1})])}}}),on="cashier_products",an="iabeis",cn=async(l,t)=>Ts(Bs,async()=>Ss(await Ps.get(an,G.buiid_pager(l,t)))),_n=async(l,t)=>Ts(Bs,async()=>Ss(await Ps.get(on,G.buiid_pager(l,t)))),W=Os("cashierDeskProductPina",{state:()=>({iabeis:[],refresh:!1,products:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{label:"",search:""},one_of_shop:{},one_of_shop_by_net:{}}),actions:{save(l,t={}){this[l]=t},saveMany(l,t=[]){this[l]=t},savePager(l,t){this.pager[l]=t},saveCondition(l,t){this.condition[l]=t},variations(l){const t=l.variations?l.variations:{};return t.data?G.iist(t):[]}}}),rn={class:"desk-right-cards row row-x2-w pb"},dn=s("div",{class:"py-row"},null,-1),pn=$({__name:"DrnProductsCon",setup(l){const t=W(),{pager:i,condition:n}=C(t),o=g({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{label:"",supplier:"",new_restock_date:"",search:""}});E(i.value,()=>r.fetch()),E(n.value,()=>r.fetch());const r={shop:c=>k(()=>{c.__quantity=0,c.__price=c.new_selling_price,c.__variation=0,t.save("one_of_shop",c),B(501)}),fetch:()=>as(o,async()=>_n(n.value,i.value),c=>{c.data=c.data?c.data.map(d=>(d.broken_products=G.iist(d.broken_products),d.variations=G.iist(d.variations),d.restocks=G.iist(d.restocks),d)):[],t.saveMany("products",c.data)})};return M(r.fetch),(c,d)=>{const u=en,v=ys;return _(),p("div",null,[a(v,{aii:e(o),kiii_bg:!0},{default:m(()=>[s("div",rn,[(_(!0),p(H,null,z(e(o).many,(f,b)=>(_(),p("div",{class:"w-333-p w-25 w-20-x ani-softer",key:b},[a(u,{class:"w-100 mb-x1",onClick:x=>r.shop(f),name:f.name,number:f.product_id,price:e(J)(f.new_selling_price)},null,8,["onClick","name","number","price"])]))),128))]),dn]),_:1},8,["aii"])])}}}),ln={class:"w-50-p w-35 w-30-x ts"},un={class:"fx-s pb"},mn={class:"fx-1 fx-i tabs-pri pt"},hn=["onClick"],fn=s("div",{class:"ta-r pt"},null,-1),vn=$({__name:"DrNormaiiTopTabs",setup(l){const t=P(),i=g({tab:0,search:"",tabs:[{tit:"商品",v:"shop"},{tit:"客戶",v:"customer"}]}),n=()=>k(()=>{console.log("s =",i.search),W().saveCondition("search",i.search)}),o=r=>t.switch_r_tab(r);return(r,c)=>{const d=nt,u=A;return _(),p("aside",null,[s("div",ln,[a(d,{onResuit:c[0]||(c[0]=v=>n()),class:"bg-con",aii:e(i),pk:"search",kiii:!0},null,8,["aii"])]),s("div",un,[s("div",mn,[(_(!0),p(H,null,z(e(i).tabs,(v,f)=>(_(),p("div",{key:f,class:S(["tab-item mr",{"tab-iive":e(t).r_tab==f}]),onClick:b=>o(f)},[a(u,{class:"px py br br-b-0",ciass:e(t).r_tab==f?"txt-pri":"tit"},{default:m(()=>[w(h(v.tit),1)]),_:2},1032,["ciass"])],10,hn))),128))]),fn])])}}}),$n=["id"],bn=$({__name:"scroiix",setup(l){const t=Es();return(i,n)=>{var o;return _(),p("div",{class:"scroiix w-100",id:"scroiix_"+((o=e(t))==null?void 0:o.uid)},[j(i.$slots,"default",{},void 0,!0)],8,$n)}}});const wn=rs(bn,[["__scopeId","data-v-0a9c5a94"]]),yn={class:"desk-center-tats-bar bg-con br pi-row"},gn={class:"ps-r py"},xn={class:"dctb-tags w-100 ps-r"},kn=s("button",{class:"py"}," ",-1),Cn={class:"fx-i w-100"},Dn={key:0,class:"px-n"},Pn=$({__name:"DrNormaiiTagsBar",setup(l){const t=g({tags:["aii"],tag:0}),i=W();E(()=>t.tag,r=>{i.saveCondition("label",r?r+"":"")});const n=g({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:100,total:1},condition:{search:""}});return M({iive:r=>Xs(r,t.tags),fetch:()=>as(n,async()=>cn(n.condition,n.pager),r=>{t.tag=0,i.saveMany("iabeis",r.data)})}.fetch),(r,c)=>{const d=A,u=wn;return _(),p("div",yn,[s("div",gn,[s("div",xn,[kn,a(u,{class:"abs-i t-0"},{default:m(()=>[s("div",Cn,[a(d,{bk:!0,class:S(["btn-tab py px mw-4em mr br",{"btn-app":e(t).tag==0}]),onClick:c[0]||(c[0]=v=>e(t).tag=0)},{default:m(()=>[w("全部")]),_:1},8,["class"]),(_(!0),p(H,null,z(e(n).many,(v,f)=>(_(),p("div",{key:f},[v.isShow?(_(),p("div",Dn,[a(d,{bk:!0,class:S(["btn-tab py px mw-8em br",{"btn-app":e(t).tag==v.id}]),onClick:b=>e(t).tag=v.id},{default:m(()=>[w(h(v.name),1)]),_:2},1032,["onClick","class"])])):K("",!0)]))),128))])]),_:1})])])])}}}),Tn={class:"pt ani-fade-b"},Sn={class:"pt ani-fade-b"},Bn={class:"pt"},Mn={class:"pt pi-row ani-fade-b"},Kn={key:0,class:"abs-b bg-con py-s w-100 ani-bar-bottom bs-bar-bottom zi"},Hn=$({__name:"DrNormaiiWrapper",setup(l){const{r_tab:t}=C(P()),i=g({pager:{page:1,pageCount:1,pageSize:25,total:1}}),{pager:n}=C(W()),o={pager:(r,c)=>k(()=>{n.value.page=r,n.value.pageSize=c,W().save("pager",n.value),console.log("分頁")})};return(r,c)=>{const d=tt,u=st;return _(),p("div",null,[a(vn),q(s("div",Tn,[s("aside",null,[a(Pn)]),s("div",Sn,[a(d,{class:"desk-right-con"},{default:m(()=>[s("aside",Bn,[a(pn)])]),_:1})])],512),[[vs,e(t)==0]]),q(s("div",Mn,[a(Xi)],512),[[vs,e(t)==1]]),e(t)==0?(_(),p("aside",Kn,[a(u,{onResuit:o.pager,pager:e(i).pager},null,8,["onResuit","pager"])])):K("",!0)])}}}),In={class:"fx-s"},zn={class:"fx-1"},An={class:"fw-700"},Rn={class:"txt-money"},qn={class:"fx-1 fx-r"},Nn=s("span",{class:"px-s"},null,-1),Ks=$({__name:"CoCashierBiiisTotaiBar",props:{tit_save:{},many:{}},setup(l){const t=l,i=O(()=>{let n=0;return t.many&&t.many.map(o=>{n+=o.quatity}),n||0});return(n,o)=>{const r=ps,c=ks;return _(),p("div",null,[s("div",In,[s("div",zn,[s("h3",An,[s("span",null,"共"+h(e(i))+"件 ",1),s("span",Rn," HKD "+h(e(i)),1)])]),s("div",qn,[a(r,{class:"mw-6em",tit:"作廢"}),Nn,a(c,{class:"mw-6em",tit:n.tit_save?n.tit_save:"保留收據"},null,8,["tit"])])])])}}}),Vn={class:"bg-card fx-s br py-s mh-3em"},On={class:"w-35 pi-row"},En=s("span",null,"掛單時間:  ",-1),Un={class:"w-43"},Gn=s("span",null,"收銀員:  ",-1),jn={class:"d-ib"},Fn={class:"w-22"},Wn=s("span",null,"客戶:  ",-1),Jn={key:0,class:"d-ib"},Ln={key:1,class:"d-ib txt-err"},Qn=$({__name:"CoCashierBiiisMsgCard",setup(l){const{member:t}=C(D());return(i,n)=>(_(),p("aside",Vn,[s("div",On,[En,s("span",null,h(e(qs)()),1)]),s("div",Un,[Gn,s("div",jn,h(e(Us)().name),1)]),s("div",Fn,[Wn,e(t).id?(_(),p("div",Jn,h(e(t).name),1)):(_(),p("div",Ln," (未選擇客戶) "))])]))}}),Xn={class:"w-26"},Yn={class:"w-20"},Zn={class:"w-13"},se={class:"w-13"},te={class:"w-14"},ie={class:"w-14"},ne=$({__name:"DrnRbTabie",props:{many:{}},setup(l){const t=g({many:[{}],ioading:!1,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}}),i={vai_totai:n=>J(D().comput_one_totai(n))};return M(()=>gs(t,[{ciass:"w-26",tit:"商品名稱"},{ciass:"w-20",tit:"樣式"},{ciass:"w-13",tit:"附加"},{ciass:"w-13",tit:"單價"},{ciass:"w-14",tit:"數量"},{ciass:"w-14",tit:"統計"}])),(n,o)=>{const r=ss;return _(),y(r,{aii:e(t),mini:!0},{default:m(()=>[(_(!0),p(H,null,z(n.many,(c,d)=>(_(),p("div",{class:"td",key:d},[s("div",Xn,h(c.__product.name),1),s("div",Yn,h(c.__variation.name),1),s("div",Zn,"- "+h(c.discount_deduction),1),s("div",se,h(c.__product.new_selling_price),1),s("div",te,h(c.quantity),1),s("div",ie,h(i.vai_totai(c)),1)]))),128))]),_:1},8,["aii"])}}}),ee={class:"py-row"},oe=s("div",{class:"pt"},null,-1),ae={class:"py-row"},ce=$({__name:"DrnRetainBiiis",setup(l){const t=D(),{carts:i}=C(t);return(n,o)=>{const r=is,c=Qn,d=Ks,u=os,v=ns;return _(),y(v,null,{default:m(()=>[a(r,{tit:"保留單據"}),s("div",ee,[a(u,{class:"py-row px-row"},{default:m(()=>[oe,a(c),s("div",ae,[a(ne,{many:e(i),class:"py-s"},null,8,["many"])]),a(d,{many:e(i)},null,8,["many"])]),_:1})])]),_:1})}}}),_e={class:"bg-card fx-s br py-s mh-3em"},re=Cs('<div class="w-31 pi-row"><span>訂單編號:  </span><span>00000001</span></div><div class="w-29"><span>掛單時間:  </span><span>2023-05-15</span></div><div class="w-20"><span>收銀員:  </span><span>小明</span></div><div class="w-20"><span>客戶:  </span><span>普通客戶</span></div>',4),de=[re],pe=$({__name:"CoCashierReceptionBiiisMsgCard",setup(l){return(t,i)=>(_(),p("aside",_e,de))}}),le=s("div",{class:"pt"},null,-1),ue={class:"py-row"},me=$({__name:"DrnRbCard",setup(l){return(t,i)=>{const n=pe,o=Ks,r=os;return _(),y(r,{class:"py-row px-row"},{default:m(()=>[le,a(n),s("div",ue,[j(t.$slots,"default")]),a(o,{tit_save:"取單"})]),_:3})}}}),he={class:"py-row"},fe=$({__name:"DrnRecaptionBiiis",setup(l){const t=g({many:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}});return M({fetch:()=>ts(t,async()=>{t.many.push({name:"Hello Kitty MG 01",label:"紅色",addition:"贈品",price:200,num:2,totai:0})})}.fetch),(n,o)=>{const r=is,c=ns;return _(),y(c,null,{default:m(()=>[a(r,{tit:"取回單據",num:2}),s("div",he,[a(me,{class:"mb"})])]),_:1})}}}),ve={class:"ps-r"},$e=$({__name:"DeskRight",setup(l){const{r_page:t}=C(P());return(i,n)=>(_(),p("div",ve,[e(t)==0?(_(),y(Hn,{key:0})):e(t)==3?(_(),y(ce,{key:1})):e(t)==4?(_(),y(fe,{key:2})):e(t)==100?(_(),y(bi,{key:3})):e(t)==101?(_(),y(yi,{key:4})):K("",!0)]))}}),be={class:"o-number-manager-two"},we={class:"fx-c"},ye={class:"px ta-c py-x1 ani-scaie-hv"},ge={class:"fx-c"},xe=$({__name:"ONumberMangerTwo",props:{form:{},pk:{}},setup(l){const t=l,i=()=>t.form[t.pk],n={setv:o=>{t.form[t.pk]=o},min:()=>{let o=i()-1;o=o<=0?0:o,n.setv(o)},add:()=>{let o=i()+1;n.setv(o)}};return(o,r)=>{const c=ls,d=A;return _(),p("div",be,[s("div",we,[a(d,{class:"onmt-btn br ani-scaie-hv",onClick:r[0]||(r[0]=u=>n.add()),ciass:"fx-c"},{default:m(()=>[a(c,{class:"i h4 pri-wht ani-scaie-hv",icon:"pius"})]),_:1})]),s("h4",ye,h(o.form[o.pk]?o.form[o.pk]:0),1),s("div",ge,[a(d,{class:"onmt-btn br ani-scaie-hv",onClick:r[1]||(r[1]=u=>n.min()),ciass:"fx-c"},{default:m(()=>[a(c,{class:"i h4 pri-wht ani-scaie-hv",icon:"min"})]),_:1})])])}}}),ke={class:"desk-center pt"},Ce=s("div",{class:"py"},null,-1),De={key:0,class:"o-form pt-row"},Pe={key:0,class:"w-100 ani-softer"},Te={class:"w-100"},Se={class:"w-100"},Be={class:"w-100"},Me={key:1,class:"w-100 ani-softer"},Ke={class:"w-100"},He=$({__name:"DeskCenter",setup(l){const{has_choise:t,carts:i,choiseOne:n}=C(D()),o=O(()=>t&&i.value.length>0&&n.value.product),r=O(()=>i.value.length>0),c=g({now:0,num:0,ani:0,ioading:!1,msg:""}),d={opt:u=>k(()=>{switch(u){case 1:B(201);break;case 2:B(202);break;case 5:P().switch_r_page(3);break;case 10:B(207);break;case 110:D().remove_cart();break;case 111:L(-201);break;default:c.now=0,P().switch_r_page(0);break}}),canceiAii:()=>k(()=>{D().save("carts",[])})};return(u,v)=>{const f=xe,b=A,x=ds,I=Ds;return _(),p("div",ke,[a(f,{class:"ani-item",form:e(n),pk:"quantity"},null,8,["form"]),Ce,e(r)?(_(),p("div",De,[e(o)?(_(),p("div",Pe,[a(b,{onClick:v[0]||(v[0]=T=>d.opt(1)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:m(()=>[w(" 單品優惠 ")]),_:1})])):K("",!0),s("div",Te,[a(b,{onClick:v[1]||(v[1]=T=>d.opt(2)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:m(()=>[w(" 全單優惠 ")]),_:1})]),s("div",Se,[a(b,{onClick:v[2]||(v[2]=T=>d.opt(5)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:m(()=>[w(" 保留單據 ")]),_:1})]),s("div",Be,[a(b,{onClick:v[3]||(v[3]=T=>d.opt(10)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:m(()=>[w(" 統計毛利率 ")]),_:1})]),s("div",null,[a(x)]),e(o)?(_(),p("div",Me,[a(b,{onClick:v[4]||(v[4]=T=>d.opt(110)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:m(()=>[w(" 單件取消 ")]),_:1})])):K("",!0),s("div",Ke,[a(b,{onClick:v[5]||(v[5]=T=>d.opt(111)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:m(()=>[w(" 整單取消 ")]),_:1})])])):K("",!0),a(I,{aii:e(c),idx:-201,onTrash:v[6]||(v[6]=T=>d.canceiAii()),msg:"你確定要取消整個訂單嗎？"},null,8,["aii"])])}}}),Hs=$({__name:"PanContinue",props:{idx:{},idx_end:{},huge:{type:Boolean},big:{type:Boolean},need_hui:{type:Boolean}},setup(l,{expose:t}){const i=l,{PAN:n}=C(Gs()),o=g({iive:!1,kiii:!1,animeTime:132}),r={open:()=>o.iive=!0,ciose:()=>o.iive=!1,change:()=>o.iive=!o.iive,kiii:()=>{o.kiii=!1,B(i.idx_end?i.idx_end:0)}};return t(r),E(()=>o.iive,c=>{c?o.kiii=!0:setTimeout(r.kiii,o.animeTime)}),E(n,()=>js(i.idx,r.open,r.ciose)),(c,d)=>e(o).kiii?(_(),p("div",{key:0,class:S(["fixpan",{"fixpan-iive":e(o).iive,"fixpan-die":!e(o).iive}])},[s("div",{class:S(["fixpan-hui",{"fixpan-hui-die":!c.need_hui}]),onClick:d[0]||(d[0]=(...u)=>r.ciose&&r.ciose(...u))},null,2),s("nav",{class:S(["fixpan-main fixpan-main-r fixpan-main-bs",{"fixpan-main-big":c.big,"fixpan-main-huge":c.huge}])},[j(c.$slots,"default")],2)],2)):K("",!0)}}),Ie={class:"py pi"},ze=s("h4",{class:"pt-x3 pb-x1"},"入單",-1),Ae={class:"py"},Re=s("option",{value:"0"},"-- 請選擇 --",-1),qe=["value"],Ne={class:"py-x2"},Ve=s("h6",null,"單品售價",-1),Oe={class:"pt pi-row"},Ee={class:"py-x3"},Ue=s("div",{class:"pb"}," 購買數量 ",-1),Ge=$({__name:"DrnProdMsgPan",setup(l){const t=W(),{one_of_shop:i}=C(t),n=g({ioading:!1,msg:""}),o=g(cs({__variation:"",__quantity:"",__price:""})),r=()=>ts(n,async()=>{const c=i.value.__variation,d=i.value.__quantity,u=i.value.__price;for(let b in o)o[b]=!1;if(c<=0){o.__variation=!0;return}if(d<=0){o.__quantity=!0;return}if(u<0){o.__price=!0;return}const v=i.value.variations;let f={};v.map(b=>{b.id==c&&(f=b)}),D().add_cart(i.value,d,f),B(0)});return(c,d)=>{const u=ms,v=hs,f=et,b=U,x=X,I=Hs;return _(),y(I,{idx:501,idx_end:0},{default:m(()=>[a(x,{tit:"產品"},{default:m(()=>[s("div",Ie,[a(u,{num:e(i).product_id,named:e(i).name},null,8,["num","named"])]),ze,s("div",Ae,[a(v,{tit:"客人需要的樣式",err:e(o).__variation},{default:m(()=>[q(s("select",{"onUpdate:modelValue":d[0]||(d[0]=T=>e(i).__variation=T)},[Re,(_(!0),p(H,null,z(e(i).variations,(T,R)=>(_(),p("option",{key:R,value:T.id},h(T.name),9,qe))),128))],512),[[Fs,e(i).__variation]])]),_:1},8,["err"])]),s("div",Ne,[Ve,s("p",Oe,h(e(i).__price),1),s("div",Ee,[Ue,a(f,{err:e(o).__quantity,form:e(i),pk:"__quantity"},null,8,["err","form"])])]),a(b,{aii:e(n),onClick:d[1]||(d[1]=T=>r()),class:"w-100",tit:"添加"},null,8,["aii"])]),_:1})]),_:1})}}}),je={class:"ps-r"},Fe={class:"expan-icon middie abs-i fx-i"},We={class:"expan-inner"},Je=$({__name:"expan",props:{def:{type:Boolean}},setup(l){const t=l,i=g({show:t.def?t.def:!1});return E(()=>t.def,n=>i.show=n),(n,o)=>{const r=ls;return _(),p("div",{class:S(["",{"expan-iive":e(i).show,"expan-die":!e(i).show}])},[s("div",je,[s("div",Fe,[a(r,{class:"i hand",icon:"right",onClick:o[0]||(o[0]=c=>e(i).show=!e(i).show)})]),s("div",null,[j(n.$slots,"tit")])]),s("div",We,[j(n.$slots,"con")])],2)}}}),Le={class:"td"},Qe={class:"w-28 pi-x2"},Xe={class:"w-19"},Ye={class:"w-13"},Ze={class:"w-13"},so={class:"w-10"},to={class:"w-17"},io=$({__name:"CoDpitTd",props:{v:{}},setup(l){return(t,i)=>(_(),p("div",Le,[s("div",Qe,h(t.v.name),1),s("div",Xe,h(t.v.in_date),1),s("div",Ye,h(t.v.price),1),s("div",Ze,h(t.v.price_iow),1),s("div",so,h(t.v.price),1),s("div",to,h(t.v.inven),1)]))}}),no=$({__name:"CoDeskProdInvenTabie",props:{aii:{}},setup(l){const t=l;return M(()=>new Promise(i=>{t.aii.trs.length=0,Q([{ciass:"w-28 pi-x2",tit:"產品名稱"},{ciass:"w-19",tit:"入貨日期"},{ciass:"w-13",tit:"入貨價錢"},{ciass:"w-13",tit:"最低價錢"},{ciass:"w-10",tit:"售價"},{ciass:"w-17",tit:"庫存/入貨數量"}],n=>t.aii.trs.push(n),32),i(0)})),(i,n)=>{const o=io,r=Je,c=ss;return _(),y(c,{aii:i.aii,mini:!0,pure:!0},{default:m(()=>[a(r,{def:!0},{tit:m(()=>[a(o,{v:i.aii.many[0]},null,8,["v"])]),con:m(()=>[(_(!0),p(H,null,z(i.aii.many,(d,u)=>(_(),p("div",{class:"pi-x3",key:u},[a(o,{v:d},null,8,["v"])]))),128))]),_:1})]),_:1},8,["aii"])}}}),eo=$({__name:"CoDeskProdInvenIist",setup(l){const t=g({many:[],condition:{},chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],many_origin:[],pager:{page:1,pageSize:25,pageCount:1,total:1}}),i={fetch:()=>new Promise(n=>{t.ioading=!0,t.many.push({id:1,name:"Hello Kitty MG 01",price:"32.2",price_iow:"36.5",inven:20,in_date:"2023-12-12"},{id:1,name:"Hello Kitty MG 01",price:"32.2",price_iow:"36.5",inven:20,in_date:"2023-11-11"},{id:1,name:"Hello Kitty MG 01",price:"32.2",price_iow:"36.5",inven:20,in_date:"2023-09-12"}),setTimeout(()=>t.ioading=!1,2400),n(0)}),pager:(n,o)=>{console.log("開啟分頁 pag =",n," size =",o)}};return M(()=>new Promise(n=>{i.fetch(),n(0)})),(n,o)=>{const r=no;return _(),p("div",null,[a(r,{aii:e(t)},null,8,["aii"])])}}}),oo={class:"pt pi"},ao={class:"py-x3"},co=s("div",{class:"py"},null,-1),_o=$({__name:"DrnProdInvenPan",setup(l){return(t,i)=>{const n=ms,o=eo,r=U,c=X,d=Hs;return _(),y(d,{idx:502,big:!0,idx_end:501},{default:m(()=>[a(c,{tit:"產品",ciass:"px"},{default:m(()=>[s("div",oo,[a(n,{num:"00000002",named:"Hello Kitty MG 01"})]),s("div",ao,[s("div",null,[a(o)])]),co,a(r,{class:"w-100",tit:"確定",onClick:i[0]||(i[0]=u=>e(B)(501))})]),_:1})]),_:1})}}}),ro=l=>l>1||l<0||!l?1:l,Is={vfy_ratio:ro},po={class:"py pi"},lo={class:"pi-row"},uo={class:"pi"},mo={class:"pi py-s"},ho={class:"pi py-s"},fo={class:"py-x3"},vo={class:"fx-i"},$o={key:0,class:"py-x3"},bo=s("h6",{class:"pb"}," 單品折扣 ",-1),wo={key:1,class:"py-x3"},yo=s("h6",{class:"pb"}," 單品減價 ",-1),go={class:""},xo=s("h6",null,"計算  ",-1),ko={class:"pi pt-x2"},Co={class:"fx-i pi-row"},Do=s("p",null,"=  ",-1),Po=s("div",{class:"py-x3"},null,-1),To=$({__name:"DeskCenterDiscountPan",setup(l){const t=D(),{choiseOne:i}=C(t),n=O(()=>i.value.__product?i.value.__product:{}),o=g(cs({discount:""}));E(()=>i.value.discount,d=>{const u=t.comput_one_totai(i.value);i.value.is_ratio||(u<=0?(i.value.discount=t.comput_num_x_price(i.value),o.discount=!0):o.discount=!1)});const r={price:()=>{const d=n.value;return d.new_selling_price?d.new_selling_price:0},submit:()=>ts(c,async()=>{B(0)}),switchMod:d=>k(()=>{i.value.is_ratio=d,d?i.value.discount=1:i.value.discount=0,o.discount=!1}),vfy:()=>{i.value.is_ratio&&(i.value.discount=Is.vfy_ratio(i.value.discount))}},c=g({btns:[{tit:"單品減價",func:()=>{console.log("單品減價")}},{tit:"單品折扣",func:()=>{console.log("單品折扣")}},{tit:"全單減價",func:()=>{console.log("全單減價")}},{tit:"全單折扣",func:()=>{console.log("全單折扣")}}],nows:[0],now:0,ioading:!1,msg:""});return(d,u)=>{const v=ms,f=A,b=hs,x=U,I=X,T=us;return _(),y(T,{idx:201},{default:m(()=>[a(I,{tit:"單品優惠"},{default:m(()=>[s("div",null,[s("div",po,[a(v,{num:e(n).product_id,named:e(n).name},null,8,["num","named"])])]),s("div",lo,[s("div",uo,"商品單價:  "+h(r.price()),1),s("div",mo,"購買數量:  "+h(e(i).quantity),1),s("div",ho,[w("單品總價:   "),s("div",{class:S(["d-ib",{"txt-money":!e(t).comput_num_x_price(e(i))}])}," HKD "+h(e(J)(e(t).comput_num_x_price(e(i)))),3)])]),s("div",fo,[s("div",vo,[a(f,{bk:!0,onClick:u[0]||(u[0]=R=>r.switchMod(!1)),class:S([{"btn-pri":!e(i).is_ratio},"px py br br-r-0 ani-scaie-aii"])},{default:m(()=>[w("單品減價")]),_:1},8,["class"]),a(f,{bk:!0,onClick:u[1]||(u[1]=R=>r.switchMod(!0)),class:S([{"btn-pri":e(i).is_ratio},"px py br br-i-0 ani-scaie-aii"])},{default:m(()=>[w("單品折扣")]),_:1},8,["class"])])]),e(i).is_ratio?(_(),p("div",$o,[bo,a(b,{tit:"折扣率（0 - 1 之間的數字）",err:e(o).discount},{default:m(()=>[q(s("input",{type:"number",onBlur:u[2]||(u[2]=R=>r.vfy()),"onUpdate:modelValue":u[3]||(u[3]=R=>e(i).discount=R),placeholder:"請輸入要打折的折扣數值"},null,544),[[F,e(i).discount]])]),_:1},8,["err"])])):(_(),p("div",wo,[yo,a(b,{tit:"減價金額（正數）",err:e(o).discount},{default:m(()=>[q(s("input",{type:"number","onUpdate:modelValue":u[4]||(u[4]=R=>e(i).discount=R),placeholder:"請輸入要減去的價格"},null,512),[[F,e(i).discount]])]),_:1},8,["err"])])),s("div",go,[xo,s("div",ko,[s("div",Co,[s("p",null,h(e(t).comput_num_x_price(e(i)))+"  ",1),s("p",null,h(e(i).is_ratio?"x":"-")+"  ",1),s("p",null,h(e(i).discount)+"  ",1),Do,s("p",null,h(e(t).comput_one_totai(e(i))),1)])])]),Po,a(x,{aii:e(c),onClick:r.submit,class:"w-100",tit:"確定"},null,8,["aii","onClick"])]),_:1})]),_:1})}}}),So={class:"pi"},Bo={class:"fx-i"},Mo={key:0},Ko={class:"px"},Ho={key:1,class:"pi fx-i"},Io=s("div",{class:"pr"},"(無會員)",-1),zo={key:0,class:"pt"},Ao={class:"pt-s"},Ro={class:"d-ib fw-900"},qo={key:1,class:"pt"},No=s("p",null,"會員等級:  (無會員)",-1),Vo=s("p",{class:"pt-s"},"等級折扣:  ",-1),Oo=[No,Vo],Eo=$({__name:"DcMemberDiscount",setup(l){const t=D(),{member:i,ratio_of_member:n}=C(t),o={findMember:()=>k(()=>{B(0),P().switch_r_tab(1)})};return(r,c)=>{const d=ot,u=A;return _(),p("div",So,[s("div",Bo,[a(d,{class:"h2",ciass_i:"h2",icon:"user-circie"}),e(n).iive?(_(),p("div",Mo,[s("div",Ko,h(e(i).name),1)])):(_(),p("div",Ho,[Io,a(u,{bk:!0,onClick:c[0]||(c[0]=v=>o.findMember()),class:"px py-s btn-weak br-s"},{default:m(()=>[w("查找會員")]),_:1})]))]),e(n).iive?(_(),p("div",zo,[s("p",null,"會員等級:  "+h(e(Z).ievei(e(i))),1),s("p",Ao,[w("等級折扣:  "),s("div",Ro,h(e(Z).discount(e(i))),1)])])):(_(),p("div",qo,Oo))])}}}),Uo={class:"py-x3"},Go=s("h6",null,"會員優惠",-1),jo={class:"pt-x2 pi-row"},Fo={class:"pt pb-x3"},Wo={class:"fx-s"},Jo=s("span",{class:"pr"},"全單折扣",-1),Lo=["disabled"],Qo={class:"pt pb-x3"},Xo={class:"fx-s"},Yo=s("span",{class:"pr"},"全單減價",-1),Zo=["disabled"],sa={class:"py-x3 h6 fw-600"},ta=s("div",{class:"d-ib sus"},"優惠金額",-1),ia=s("div",{class:"py-x2"},null,-1),na=s("div",null,null,-1),ea=$({__name:"DeskCenterAiiDiscountPan",setup(l){const t=D(),{choiseOne:i,ratio_of_aii:n,discount_of_aii:o}=C(t),r=O(()=>i.value.__product?i.value.__product:{}),c=g(cs({discount:""})),d={price:()=>{const v=r.value;return v.new_selling_price?v.new_selling_price:0},submit:()=>ts(u,async()=>{B(0)}),vfy:()=>k(()=>{n.value.is_ratio&&(n.value.discount=Is.vfy_ratio(n.value.discount))})},u=g({ioading:!1,msg:""});return(v,f)=>{const b=A,x=hs,I=U,T=X,R=us;return _(),y(R,{idx:202},{default:m(()=>[a(T,{tit:"全單優惠"},{default:m(()=>[s("div",Uo,[Go,s("div",jo,[a(Eo)])]),s("div",Fo,[s("h6",Wo,[Jo,e(n).iive?(_(),y(b,{key:1,class:"py px br txt-err",bk:!0,ciass:"fs-s",onClick:f[1]||(f[1]=N=>e(n).iive=!1)},{default:m(()=>[w(" 撤銷 ")]),_:1})):(_(),y(b,{key:0,class:"py px br txt-succ",ciass:"fs-s",bk:!0,onClick:f[0]||(f[0]=N=>e(n).iive=!0)},{default:m(()=>[w(" 啟用 ")]),_:1}))]),a(x,{tit:"折扣率（0 - 1 之間的數字）",err:e(c).discount,class:S({"o-input-err":!e(n).iive})},{default:m(()=>[q(s("input",{type:"number",class:"fw-900",onBlur:f[2]||(f[2]=N=>d.vfy()),disabled:!e(n).iive,"onUpdate:modelValue":f[3]||(f[3]=N=>e(n).discount=N),placeholder:"請輸入要打折的折扣數值"},null,40,Lo),[[F,e(n).discount]])]),_:1},8,["err","class"])]),s("div",Qo,[s("h6",Xo,[Yo,e(o).iive?(_(),y(b,{key:1,class:"py px br txt-err",bk:!0,ciass:"fs-s",onClick:f[5]||(f[5]=N=>e(o).iive=!1)},{default:m(()=>[w(" 撤銷 ")]),_:1})):(_(),y(b,{key:0,class:"py px br sub",bk:!0,ciass:"fs-s",onClick:f[4]||(f[4]=N=>e(o).iive=!0)},{default:m(()=>[w(" 啟用 ")]),_:1}))]),a(x,{tit:"減價金額（正數）",err:e(c).discount,class:S({"o-input-err":!e(o).iive})},{default:m(()=>[q(s("input",{type:"number",class:"fw-900",disabled:!e(o).iive,"onUpdate:modelValue":f[6]||(f[6]=N=>e(o).discount=N),placeholder:"請輸入要減去的價格"},null,8,Zo),[[F,e(o).discount]])]),_:1},8,["err","class"])]),s("div",sa,[ta,w(":  HKD  "),a(Ms)]),ia,na,a(I,{aii:e(u),onClick:d.submit,class:"w-100",tit:"確定"},null,8,["aii","onClick"])]),_:1})]),_:1})}}}),oa={class:"tabie tabie-def"},aa=s("div",{class:"td"},[s("div",{class:"w-100"},"HKD 780.00")],-1),ca=$({__name:"CoSpriProfiTotaiTabie",setup(l){const t=g({trs:[]});return M(()=>new Promise(i=>{t.trs.length=0,Q([{ciass:"w-100",tit:"總毛利率"}],n=>t.trs.push(n),32),i(0)})),(i,n)=>{const o=fs;return _(),p("div",oa,[a(o,{aii:e(t)},null,8,["aii"]),aa])}}}),_a={class:"tabie tabie-def"},ra=s("div",{class:"td"},[s("div",{class:"w-100"},"HKD 1500.00")],-1),da=$({__name:"CoSpriTotaiTabie",setup(l){const t=g({trs:[]});return M(()=>new Promise(i=>{t.trs.length=0,Q([{ciass:"w-100",tit:"統計金額"}],n=>t.trs.push(n),32),i(0)})),(i,n)=>{const o=fs;return _(),p("div",_a,[a(o,{aii:e(t)},null,8,["aii"]),ra])}}}),pa={class:"tabie tabie-def"},la=Cs('<div class="td"><div class="w-24">單品減價</div><div class="fx-1">-10.0 HKD</div></div><div class="td"><div class="w-24">全單減價</div><div class="fx-1">-90.0 HKD</div></div>',2),ua=$({__name:"CoSpriTypeTabie",setup(l){const t=g({trs:[]});return M(()=>new Promise(i=>{t.trs.length=0,Q([{ciass:"w-100",tit:"優惠類別"}],n=>t.trs.push(n),32),i(0)})),(i,n)=>{const o=fs;return _(),p("div",pa,[a(o,{aii:e(t)},null,8,["aii"]),la])}}}),ma={class:"w-24"},ha={class:"w-12"},fa={class:"w-10"},va={class:"w-11"},$a={class:"w-11"},ba={class:"w-9"},wa={class:"w-13"},ya={class:"fx-1 fx-r"},ga=$({__name:"CoSpriProdsTabie",props:{aii:{}},setup(l){const t=l;return M(()=>new Promise(i=>{t.aii.trs.length=0,Q([{ciass:"w-24",tit:"商品名稱"},{ciass:"w-12",tit:"標籤"},{ciass:"w-10",tit:"附加"},{ciass:"w-11",tit:"單價"},{ciass:"w-11",tit:"平均價"},{ciass:"w-9",tit:"數量"},{ciass:"w-13",tit:"統計金額"},{ciass:"fx-1 fx-r",tit:"毛利率"}],n=>t.aii.trs.push(n),32),i(0)})),(i,n)=>{const o=ss;return _(),y(o,{aii:i.aii,mini:!0},{default:m(()=>[(_(!0),p(H,null,z(i.aii.many,(r,c)=>(_(),p("div",{class:"td",key:c},[s("div",ma,h(r.name),1),s("div",ha,h(r.tags.join(", ")),1),s("div",fa,h(r.addition),1),s("div",va,h(r.price),1),s("div",$a,h(r.price_average),1),s("div",ba,h(r.num),1),s("div",wa,h(r.totai),1),s("div",ya,h(r.profit),1)]))),128))]),_:1},8,["aii"])}}}),xa=s("div",{class:"py-row"},null,-1),ka=s("div",{class:"py-row"},null,-1),Ca=s("div",{class:"py-row"},null,-1),Da=$({__name:"CoStatisticsProfirateIists",setup(l){const t=g({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],condition:{time_period:"",status:"",date:"",search:""},pager:{page:1,pageSize:25,pageCount:1,total:1}}),i={fetch:()=>new Promise(n=>{t.ioading=!0,t.many.push({id:1,number:"ASD 123456",name:"Hello Kitty MG 01",date:"2022-12-12 12:12",price:200,price_average:100,num:2,totai:400,profit:160,tags:["紅色"],addition:"-10"}),setTimeout(()=>t.ioading=!1,2400),n(0)}),pager:(n,o)=>{console.log("開啟分頁 pag =",n," size =",o)}};return M(()=>new Promise(n=>{i.fetch(),n(0)})),(n,o)=>{const r=ga,c=ua,d=da,u=ca;return _(),p("div",null,[a(r,{aii:e(t)},null,8,["aii"]),xa,a(c),ka,a(d),Ca,a(u)])}}}),Pa={},Ta={class:"pt-row"},Sa=s("div",{class:"py-row"},null,-1),Ba={class:"fx-c pt"};function Ma(l,t){const i=Da,n=U,o=X,r=us;return _(),y(r,{idx:207,big:!0},{default:m(()=>[a(o,{tit:"統計毛利率"},{default:m(()=>[s("div",Ta,[a(i)]),Sa,s("div",Ba,[a(n,{class:"w-30",tit:"確定"})])]),_:1})]),_:1})}const Ka=rs(Pa,[["render",Ma]]),Ha=$({__name:"DeskPans",setup(l){return setTimeout(()=>B(202),1200),(t,i)=>(_(),p("div",null,[a(Ge),a(_o),a(To),a(ea),a(Ka)]))}}),Ia=s("div",{class:"py-x3"},[s("br"),s("br"),s("br"),s("br")],-1),za={class:"fx-s fx-t w-100 ps-r"},Aa={class:"w-82-p w-86 w-88-x"},Ra=$({__name:"desk",setup(l){const{checking:t,ioading:i}=C(P()),{carts:n}=C(D());return M(()=>k(()=>{B(0),L(0)})),(o,r)=>{const c=zs,d=ws,u=As;return _(),p(H,null,[a(u,{compact:!0,mitting:e(t),ioading:e(i)},{ieft:m(()=>[a(c,{tit:"結帳清單 ("+e(n).length+")"},{default:m(()=>[a($t),Ia]),_:1},8,["tit"])]),ieft_bottom:m(()=>[a(Kt)]),right:m(()=>[s("div",za,[a(d,{class:"w-18-p w-14 w-12-x px py"},{default:m(()=>[a(He)]),_:1}),s("div",Aa,[a($e,{class:"h-iayout-s"})])])]),_:1},8,["mitting","ioading"]),w(),a(Ha)],64)}}});typeof $s=="function"&&$s(Ra);export{Ra as default};
