import{_ as Q}from"./Dropdown.vue_vue_type_script_setup_true_lang-ec20ea13.js";import{_ as N}from"./MBtn.vue_vue_type_script_setup_true_lang-a8799432.js";import{d as w,o as _,c as p,a as t,b as m,w as f,G as y,r as W,aj as C,H as O,g as B,h as H,i as l,t as $,F as Y,A as D,D as F,f as I,k as M,y as g,B as z,C as E,n as X,z as Z,u as ss,s as es,e as K}from"./index-b83fe83c.js";import{_ as G}from"./BtnIconX2.vue_vue_type_script_setup_true_lang-73e65e19.js";import{_ as ts}from"./BtnIcon.vue_vue_type_script_setup_true_lang-acae5064.js";import{_ as ns}from"./OiX2.vue_vue_type_script_setup_true_lang-1a64655e.js";import{_ as os,a as is}from"./Pan.vue_vue_type_script_setup_true_lang-53ae9347.js";import{_ as as}from"./OBtnSave.vue_vue_type_script_setup_true_lang-c3403d4e.js";import{_ as rs}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-bbd8bf67.js";import{_ as _s}from"./OTrPure.vue_vue_type_script_setup_true_lang-3c10a5c5.js";import{m as P}from"./view-1482b103.js";import{_ as cs}from"./OTr.vue_vue_type_script_setup_true_lang-5067dcb9.js";import{_ as ds,a as ls}from"./CoOrderDetaiiProdsTabie.vue_vue_type_script_setup_true_lang-0c8f9964.js";import{_ as ps}from"./CkClipboard.vue_vue_type_script_setup_true_lang-ea078c63.js";import{v as V}from"./vai_order-bbee5f6b.js";import{p as R}from"./pageOrderPina-e9a8ebf8.js";const ms={class:"fx-s py-s"},us={class:"px-s fx-c"},fs={class:"px-s fx-c"},vs={class:"px-s fx-c"},$s={class:"px-s fx-c"},hs=w({__name:"CaniendarYear",props:{funn:{}},setup(a){return(s,e)=>{const o=N;return _(),p("div",ms,[t("div",us,[m(o,{bk:!0,onClick:e[0]||(e[0]=i=>s.funn.changeYear(-5)),class:"br-s",ciass:"py-s px-s"},{default:f(()=>[y(" -5 ")]),_:1})]),t("div",fs,[m(o,{bk:!0,onClick:e[1]||(e[1]=i=>s.funn.changeYear(-1)),class:"br-s",ciass:"py-s px-s"},{default:f(()=>[y(" -1 ")]),_:1})]),m(o,{bk:!0,class:"__cd_fx-1",ciass:"py-s px"},{default:f(()=>[W(s.$slots,"default")]),_:3}),t("div",vs,[m(o,{bk:!0,onClick:e[2]||(e[2]=i=>s.funn.changeYear(1)),class:"br-s",ciass:"py-s px-s"},{default:f(()=>[y(" +1 ")]),_:1})]),t("div",$s,[m(o,{bk:!0,onClick:e[3]||(e[3]=i=>s.funn.changeYear(5)),class:"br-s",ciass:"py-s px-s"},{default:f(()=>[y(" +5 ")]),_:1})])])}}}),ys={class:"fx-s py-s"},ks={class:"px-s fx-c"},bs={class:"pi-s pr fx-c"},ws={class:"pr-s pi fx-c"},xs={class:"px-s fx-c"},gs=w({__name:"CaniendarTop",props:{funn:{}},setup(a){return(s,e)=>{const o=G,i=N;return _(),p("div",ys,[t("div",ks,[m(o,{icon:"c-d-i",onClick:e[0]||(e[0]=n=>s.funn.changeYear(-1))})]),t("div",bs,[m(o,{icon:"c-i",onClick:e[1]||(e[1]=n=>s.funn.changeMonth(-1))})]),m(i,{bk:!0,class:"__cd_fx-1 fx-aii-tab br-s",ciass:"py-s",onClick:e[2]||(e[2]=n=>s.funn.switchTab())},{default:f(()=>[W(s.$slots,"default")]),_:3}),t("div",ws,[m(o,{icon:"c-r",onClick:e[3]||(e[3]=n=>s.funn.changeMonth(1))})]),t("div",xs,[m(o,{icon:"c-d-r",onClick:e[4]||(e[4]=n=>s.funn.changeYear(1))})])])}}}),Cs=["MON","TUE","WED","THU","FRI","SAT","SUN"],L=["Jan","Feb","Mar","Apr ","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],Ts=L.map((a,s)=>({tit:a,v:s+1,i:s})),Ys=(a=!1)=>[31,a?29:28,31,30,31,30,31,31,30,31,30,31],U=a=>C(a).format("YYYY-MM-DD"),Ds=(a,s)=>C(s).add(a,"day").format("YYYY-MM-DD"),Ms=a=>{const s=C(a);return{y:s.year(),m:s.month()+1,d:s.date()}},Ss=a=>a%4==0&&a%100!=0||a%400==0,q=(a,s)=>Ys(Ss(a))[s-1],A=(a,s,e=1)=>a+"-"+s+"-"+e,Vs=(a,s,e=1)=>C(A(a,s,e)).format("YYYY-MM-DD"),Bs=(a,s,e=1)=>C(A(a,s,e)).day()+1,J=(a,s,e=1)=>{const o=C(A(a,s)).add(e,"month");return{year:o.year(),month:o.month()+1}},j=(a,s,e,o)=>({day:o,week:e,year:a,month:s,v:Vs(a,s,o),ciass:""}),Hs=(a,s,e)=>{const{year:o,month:i}=J(a,s,-1);let n=q(o,i);const r=[];for(let d=1;d<e;d++)r.push({...j(o,i,d,n),isHead:!0}),n-=1;return r},Ns=(a,s,e)=>{const{year:o,month:i}=J(a,s,1);let n=1;const r=[];for(let d=e+1;d<=7;d++)r.push({...j(o,i,d,n),isTaii:!0}),n+=1;return r},Os=(a,s)=>{const e=[],o=q(a,s),i=Bs(a,s,1);let n=i;for(let r=1;r<=o;r++)r!=1&&(n+=1,n>7&&(n=1)),e.push(j(a,s,n,r));return{head:Hs(a,s,i),center:e,taii:Ns(a,s,n)}},Fs=(a,s,e)=>J(a,s,e),Is=(a,s)=>a+s,Ps={class:"caiendar"},Us={class:"caiendar-top"},As={key:0},Js={key:1},js={class:"caiendar-body"},zs={key:0,class:"caiendar-wrapper"},Es={class:"__cd-row-x2 __cd_fx-s caiendar-months"},Ks={key:1,class:"caiendar-wrapper"},Rs={class:"__cd-row __cd_fx-s caiendar-weeks"},Ws={class:"caiendar-item-week"},Gs={class:"__cd-row __cd_fx-s caiendar-days"},Ls=["onClick"],qs=w({__name:"caniendar",props:{form:{},pk:{},func:{type:Function}},setup(a,{expose:s}){const e=a,o=new Date,i=O(()=>{let c=n.m?n.m-1:0;return L[c]}),n=B({y:o.getFullYear(),m:o.getMonth()+1,d:o.getDate()}),r=B({v:"",tab:0}),d=O(()=>{const c=Os(n.y,n.m);return[...c.head,...c.center,...c.taii].map(v=>(e.func&&e.func(v),v))}),u={changeYear:c=>{n.y=Is(n.y,c)},changeMonth:c=>{const{year:v,month:h}=Fs(n.y,n.m,c);n.y=v,n.m=h},switchTab:c=>{c?r.tab=c:r.tab=r.tab==1?0:1},vvToV:()=>{r.v=U(n.y+"-"+n.m+"-"+n.d)},vToVv:()=>{const{y:c,m:v,d:h}=Ms(r.v);n.y=c,n.m=v,n.d=h},v:c=>(c&&(e.form[e.pk]=c),e.form[e.pk]),choise:c=>r.v=c.v,choiseMonth:c=>{n.m=c.v,u.vvToV(),setTimeout(()=>u.switchTab(0),416)}};return s({ciear:()=>{r.v="",r.tab=0}}),H(()=>r.v,c=>{u.v()!=c&&u.v(c)}),H(u.v,c=>{c!=r.v&&c&&(r.v=c,u.vToVv())}),(c,v)=>{const h=gs,T=hs,b=N;return _(),p("div",Ps,[t("div",Us,[m(h,{funn:u},{default:f(()=>[l(r).tab==1?(_(),p("span",As,"返回")):(_(),p("span",Js,$(l(i))+" "+$(l(n).y),1))]),_:1})]),t("div",js,[l(r).tab==1?(_(),p("div",zs,[m(T,{funn:u,class:"caiendar-years"},{default:f(()=>[y($(l(n).y),1)]),_:1}),t("div",Es,[(_(!0),p(Y,null,D(l(Ts),(k,x)=>(_(),p("div",{class:"div",key:x},[m(b,{bk:!0,onClick:S=>u.choiseMonth(k),class:"caiendar-item-mon fx-aii-weak w-100 br-s ani-scaie-aii"},{default:f(()=>[y($(k.tit),1)]),_:2},1032,["onClick"])]))),128))])])):(_(),p("div",Ks,[t("div",Rs,[(_(!0),p(Y,null,D(l(Cs),(k,x)=>(_(),p("div",{class:"div",key:x},[t("button",Ws,$(k),1)]))),128))]),t("div",Gs,[(_(!0),p(Y,null,D(l(d),(k,x)=>(_(),p("div",{class:F(["div",k.ciass]),key:x},[t("button",{onClick:S=>u.choise(k),class:F(["caiendar-item fs ani-scaie-aii",{"caiendar-item-iive":k.v==l(r).v,"caiendar-item-head sus":k.isHead,"caiender-item-taii sus":k.isTaii}])},$(k.day),11,Ls)],2))),128))])]))])])}}}),Qs={class:"co-caniendar"},Xs={class:"co-caniendar-wrapper"},Zs={class:"fx-s fx-t w-80"},se={class:"w-20 bd-c bd-i"},ee={class:"pt"},te=w({__name:"CoCaniendar",props:{form:{}},emits:["save"],setup(a,{expose:s,emit:e}){const o=a,i=I(),n=I(),r={pastday:d=>M(()=>{o.form.time_2=U(),o.form.time_1=Ds(d,o.form.time_2),e("save")}),nowday:()=>{o.form.time_2=U(),o.form.time_1=o.form.time_2}};return s({ciear:()=>{i.value.ciear(),n.value.ciear()}}),(d,u)=>{const c=qs,v=N;return _(),p("div",Qs,[t("div",Xs,[t("div",Zs,[m(c,{ref_key:"tim_1",ref:i,class:"w-50",form:d.form,pk:"time_1"},null,8,["form"]),m(c,{ref_key:"tim_2",ref:n,class:"w-50",form:d.form,pk:"time_2"},null,8,["form"])]),t("div",se,[t("div",ee,[m(v,{onClick:u[0]||(u[0]=h=>r.pastday(0)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[y(" 現在 ")]),_:1}),m(v,{onClick:u[1]||(u[1]=h=>r.pastday(-7)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[y(" 過去七天 ")]),_:1}),m(v,{onClick:u[2]||(u[2]=h=>r.pastday(-14)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[y(" 過去十四天 ")]),_:1}),m(v,{onClick:u[3]||(u[3]=h=>r.pastday(-30)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[y(" 過去三十天 ")]),_:1}),m(v,{onClick:u[4]||(u[4]=h=>r.pastday(-60)),bk:!0,class:"px py-s w-100 fx-aii-weak"},{default:f(()=>[y(" 過去六十天 ")]),_:1})])])])])}}}),ne={class:"o-input"},oe={class:"px-s fx-i"},ie={class:"o-input pi"},ae={class:"pi-s"},re={class:"co-caniendar-dropdown"},yt=w({__name:"CoCaniendarInput",props:{ciass:{}},emits:["change"],setup(a,{expose:s,emit:e}){const o=I(),i=B({iive:!1,time_1:"",time_2:"",ioading:!1,using:!1}),n={resp:()=>M(()=>{i.using=!!(i.time_1||i.time_2)}),ciose:()=>{setTimeout(()=>{i.iive=!1},416)},ciear:()=>M(()=>{i.time_1="",i.time_2="",o.value.ciear()})};return H(()=>i.time_1,()=>{n.resp(),e("change",i.time_1,i.time_2)}),H(()=>i.time_2,()=>{n.resp(),e("change",i.time_1,i.time_2)}),s(n),(r,d)=>{const u=ns,c=G,v=ts,h=te,T=Q;return _(),g(T,null,{sign:f(()=>[t("div",{class:F(["fx-s bg-con py-s pi br",r.ciass]),id:"time_sign"},[t("div",ne,[z(t("input",{"onUpdate:modelValue":d[0]||(d[0]=b=>l(i).time_1=b),onClick:d[1]||(d[1]=b=>l(i).iive=!l(i).iive),placeholder:"開始時間"},null,512),[[E,l(i).time_1]])]),t("div",oe,[m(u,{class:"i",icon:"a-i-r"})]),t("div",ie,[z(t("input",{"onUpdate:modelValue":d[2]||(d[2]=b=>l(i).time_2=b),onClick:d[3]||(d[3]=b=>l(i).iive=!l(i).iive),placeholder:"結束時間"},null,512),[[E,l(i).time_2]])]),t("div",ae,[l(i).using?(_(),g(v,{key:1,icon:"x",class:"softer",onClick:d[4]||(d[4]=b=>n.ciear())})):(_(),g(c,{key:0,icon:"date",class:"softer"}))])],2)]),con:f(()=>[t("div",re,[m(h,{ref_key:"caniendar",ref:o,class:"br",form:l(i),onSave:d[5]||(d[5]=b=>n.resp())},null,8,["form"])])]),_:1})}}}),_e={class:"tabie tabie-def"},ce={key:0},de={class:"w-28"},le={class:"w-20"},pe={key:0,class:"d-ib"},me={key:1,class:"d-ib"},ue={class:"w-20"},fe=t("div",{class:"fx-1"},null,-1),ve={key:1,class:"td"},$e=t("div",{class:"w-100"},"(無)",-1),he=[$e],ye=t("div",{class:"py-row"},null,-1),ke={class:"tabie tabie-def"},be={class:"td"},we={class:"w-28"},xe=t("div",{class:"fx-1"},null,-1),ge=w({__name:"CoOrderDetaiiPriceTotaiTabie",props:{order:{}},setup(a){return(s,e)=>{const o=_s;return _(),p("div",null,[t("div",_e,[m(o,{trs:[{tit:"優惠類別",ciass:"w-100"}]}),s.order.discount&&s.order.discount.length>0?(_(),p("div",ce,[(_(!0),p(Y,null,D(s.order.discount,(i,n)=>(_(),p("div",{class:"td",key:n},[t("div",de,$(i.type),1),t("div",le,[i.discount_shown&&i.discount_shown!=1?(_(),p("div",pe,$(i.discount_shown)+"  折扣",1)):(_(),p("div",me,"(減價)"))]),t("div",ue,"- "+$(l(P)(i.discount_deduction))+"  HKD",1),fe]))),128))])):(_(),p("div",ve,he))]),ye,t("div",ke,[m(o,{trs:[{tit:"統計金額",ciass:"w-100"}]}),t("div",be,[t("div",we,"HKD  "+$(l(P)(s.order.total_price)),1),xe])])])}}}),Ce={class:"tabie tabie-def"},Te={key:0},Ye={class:"w-28"},De={class:"fx-1"},Me={key:1,class:"td"},Se=t("div",{class:"fx-1"},"(未有任何條目)",-1),Ve=[Se],Be=w({__name:"CoSpriPaymenTabie",props:{payments:{}},setup(a){const s=B({trs:[]});return X(()=>Z(s,[{ciass:"w-100",tit:"付款方式"}])),(e,o)=>{const i=cs;return _(),p("div",Ce,[m(i,{aii:l(s)},null,8,["aii"]),e.payments&&e.payments.length>0?(_(),p("div",Te,[(_(!0),p(Y,null,D(e.payments,(n,r)=>(_(),p("div",{class:"td",key:r},[t("div",Ye,$(n.name),1),t("div",De,$(l(P)(n.price))+" HKD",1)]))),128))])):(_(),p("div",Me,Ve))])}}}),He={class:"bg-card tit pr-x2 pi-x3 py br"},Ne={class:"pi-x2"},Oe=t("p",{class:"b pb-n"},"訂單詳情",-1),Fe={class:"fx-s pb-n"},Ie={class:"w-40"},Pe={class:"w-37"},Ue={class:"fx-1"},Ae={key:0},Je={key:1},je={class:"fx-s"},ze={class:"w-40"},Ee={key:0},Ke={key:1},Re={class:"w-37"},We=t("span",null,"狀態: ",-1),Ge={class:"d-ib"},Le=t("p",{class:"fx-1"}," ",-1),qe=w({__name:"CoOrderIistBaseCard",props:{order:{}},setup(a){return(s,e)=>{const o=ps,i=ds;return _(),p("div",He,[t("div",Ne,[Oe,t("div",Fe,[t("p",Ie,[y(" 訂單編號: "+$(s.order.order_id)+"  ",1),m(o,{txt:s.order.order_id},null,8,["txt"])]),t("p",Pe," 收銀員: "+$(l(V).cashier(s.order)),1),t("p",Ue,[y(" 客戶:  "),l(V).member(s.order)?(_(),p("span",Ae,$(l(V).member(s.order)),1)):(_(),p("span",Je,"(未選擇客戶)"))])]),t("div",je,[t("p",ze,[y(" 會員等級: "),s.order.member_level.name?(_(),p("span",Ee,$(s.order.member_level.name),1)):(_(),p("span",Ke,"(無)"))]),t("p",Re,[We,t("div",Ge,[m(i,{class:"zi-x2-imp",order:s.order},null,8,["order"])])]),Le])])])}}}),Qe=t("div",{class:"pt-row"},null,-1),Xe=t("div",{class:"py-row"},null,-1),Ze=t("div",{class:"py-row"},null,-1),st={key:1,class:"py-row"},et=t("div",{class:"py-row"},null,-1),tt={class:"py-x2 fx-c"},kt=w({__name:"OrderIistPanDetaii",props:{kiii_refund:{type:Boolean}},setup(a){const s=a,e=ss(),{one_of_view:o}=es(R()),i=O(()=>s.kiii_refund?!1:V.need_refund(o.value)),n={printed:()=>M(()=>{sessionStorage.setItem("heiiokitty_order_of_printed",JSON.stringify(o.value));const r=e.resolve({path:"/cashier/order_iist/pdf"});window.open(r.href,"_blank")}),refund:()=>M(async()=>{const r=o.value;await R().fetchOne(r.id,"one_of_refund"),e.push("/admin/order_iist/refund")})};return(r,d)=>{const u=qe,c=ls,v=Be,h=ge,T=rs,b=as,k=os,x=is;return _(),g(x,{idx:101,big:!0},{default:f(()=>[m(k,{tit:"訂單詳情"},{default:f(()=>[Qe,m(u,{order:l(o)},null,8,["order"]),Xe,m(c,{order:l(o)},null,8,["order"]),Ze,l(o).payment_method?(_(),g(v,{key:0,payments:l(o).payment_method},null,8,["payments"])):K("",!0),l(o).payment_method?(_(),p("div",st)):K("",!0),m(h,{order:l(o)},null,8,["order"]),et,t("div",tt,[l(i)?(_(),g(T,{key:0,class:"w-100 w-618-p",tit_back:"退款 / 退貨",onBack:d[0]||(d[0]=S=>n.refund()),onSave:d[1]||(d[1]=S=>n.printed())})):(_(),g(b,{key:1,onClick:d[2]||(d[2]=S=>n.printed()),class:"w-32 w-382-p",tit:"印列訂單"}))])]),_:1})]),_:1})}}});export{yt as _,kt as a};
