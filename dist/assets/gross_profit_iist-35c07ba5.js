import{_ as H,a as L}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-359e2e04.js";import{_ as S}from"./OPager.vue_vue_type_script_setup_true_lang-47d33ab6.js";import{d as u}from"./dayjs.min-668a802a.js";import{t as D}from"./judge-13dfac2e.js";import{b as Y,v as B,m as M}from"./view-45b23436.js";import{r as R}from"./ArrowLongRightIcon-c07decbe.js";import{d as $,A as w,o as f,e as g,b as i,u as t,a as r,t as m,S as E,T as N,_ as P,g as x,j as A,c as b,w as v,k as z,F,f as O,D as V,n as j}from"./index-faaf2242.js";import{_ as G}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-a2bf2a22.js";import{_ as K}from"./OTabieDetaii.vue_vue_type_script_setup_true_lang-891d27a2.js";import{_ as U}from"./OIoadCir.vue_vue_type_script_setup_true_lang-147f8324.js";import{p as q}from"./pageOrderPina-59029a2a.js";import{i as J,f as C,d as Q}from"./credit-31b158dd.js";import{_ as W}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-c965547f.js";import{_ as X}from"./OSearch.vue_vue_type_script_setup_true_lang-171603f9.js";import{_ as Z}from"./OSeiect.vue_vue_type_script_setup_true_lang-999ea8a9.js";import{v as y}from"./vai_order-b0db0242.js";import{_ as ii}from"./OrderIistPanDetaii.vue_vue_type_script_setup_true_lang-e4f3fa5f.js";import{n as ti}from"./conn-a86a4b4d.js";import{a as si,c as oi,b as k}from"./net-tooi-b6898972.js";import{E as ai}from"./errors_user-be6d0865.js";import{b as T}from"./route-block-83d24a4e.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-09c59d90.js";import"./MBtn.vue_vue_type_script_setup_true_lang-38920cf0.js";import"./Oi.vue_vue_type_script_setup_true_lang-c9e2a4ab.js";import"./XMarkIcon-b1bb1e62.js";import"./datepicker.esm-30fd133d.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-cf20db78.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-102000b6.js";import"./OTr.vue_vue_type_script_setup_true_lang-f7143d25.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-f081fb69.js";import"./Pan.vue_vue_type_script_setup_true_lang-f15f28a5.js";import"./OBtnSave.vue_vue_type_script_setup_true_lang-344e894e.js";import"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-5dc854c0.js";import"./OTrPure.vue_vue_type_script_setup_true_lang-ca808ac4.js";const I=_=>(E("data-v-549a7566"),_=_(),N(),_),ei={class:"pt-x1 pb fx-s br co-profit-totai-bar"},ni={class:"w-50 fx-i"},ri={class:"mw-8em"},_i=["innerHTML"],ci=["innerHTML"],pi={class:"mw-7em"},di=I(()=>i("p",null," ",-1)),mi={class:"fx-c pr"},fi={class:"mw-8em"},li=["innerHTML"],ui=["innerHTML"],hi={class:"w-50 ta-r"},vi=I(()=>i("p",{class:""},"總毛利率",-1)),wi={class:"n"},gi=$({__name:"CoProfitTotaiBar",props:{totai:{},condition:{}},setup(_){const s=_,o=w(()=>d.is_empty()?"(全部年份)":u(d.is_period()?d.period_to_time():p()).format("YYYY")),c=w(()=>u().format("YYYY")),e=w(()=>d.is_empty()?"*":u(d.is_period()?d.period_to_time():p()).format("MM-DD")),n=w(()=>u().format("MM-DD")),p=()=>s.condition.date,l=()=>s.condition.time_period,d={is_date:()=>!!p(),is_period:()=>!p(),period_to_time:()=>{const a=l(),h=a?D(a):0;return Y(h>0?u().subtract(h,"day"):u())},is_empty:(a=!0)=>(p()&&(a=!1),l()&&(a=!1),a)};return(a,h)=>(f(),g("div",ei,[i("div",ni,[i("div",ri,[i("p",{class:"fx-1",innerHTML:t(o)},null,8,_i),i("h2",{class:"n fx-1",innerHTML:t(e)},null,8,ci)]),i("div",pi,[di,i("div",mi,[r(t(R),{class:"i h4"})])]),i("div",fi,[i("p",{class:"fx-1",innerHTML:t(c)},null,8,li),i("h2",{class:"n fx-1",innerHTML:t(n)},null,8,ui)])]),i("div",hi,[vi,i("h2",wi,"HKD "+m(a.totai),1)])]))}});const $i=P(gi,[["__scopeId","data-v-549a7566"]]),yi={class:"td"},xi=["onClick"],bi={class:"hand"},ki={class:"w-21"},Mi={class:"w-14"},Ti={class:"w-15"},Ci={class:"w-13"},Ii={class:"fx-1 fx-s"},Hi={class:"fx-1 ta-r"},Li=$({__name:"GrossProfitIistTabie",props:{aii:{}},setup(_){const s=_,o=x({ioading:!1,iiveId:-1}),c={view:e=>C(async()=>{o.ioading||(o.ioading=!0,o.iiveId=e,await q().fetchOne(e),V(101),setTimeout(()=>o.ioading=!1,400))})};return A(()=>J(s.aii,[{ciass:"w-24",tit:"訂單編號"},{ciass:"w-21",tit:"時間"},{ciass:"w-14",tit:"客戶"},{ciass:"w-15",tit:"收銀員"},{ciass:"w-13",tit:"統計金額"},{ciass:"fx-1",tit:"統計毛利率"}])),(e,n)=>{const p=U,l=K,d=G;return f(),b(d,{aii:e.aii},{default:v(()=>[(f(!0),g(F,null,z(e.aii.many,(a,h)=>(f(),g("div",{class:"",key:h},[i("div",yi,[i("div",{class:"w-24 fx-i",onClick:ji=>c.view(a.id)},[i("span",bi,m(a.order_id),1),t(o).ioading&&a.id==t(o).iiveId?(f(),b(p,{key:0,class:"mi"})):O("",!0)],8,xi),i("div",ki,m(t(B)(a.order_date)),1),i("div",Mi,m(a.member.name),1),i("div",Ti,m(a.cashier.name),1),i("div",Ci,m(t(M)(a.total_price)),1),i("div",Ii,[i("div",null,m(t(M)(a.total_profit)),1),i("div",Hi,[r(l,{id:a.id,func:c.view,tit:"詳情"},null,8,["id","func"])])])])]))),128))]),_:1},8,["aii"])}}}),Si={class:"fx-s"},Di={class:"fx-1 row fx-i"},Yi={class:"w-18"},Bi={class:"w-18"},Ri={class:"w-20"},Ei={class:"w-18"},Ni={class:"pi"},Pi=$({__name:"GrossProfitIistFiiter",props:{aii:{}},setup(_){return(s,o)=>{const c=Z,e=H,n=X,p=W;return f(),g("div",Si,[i("div",Di,[i("div",Yi,[r(c,{class:"input w-100 ip-fiiter",form:s.aii.condition,pk:"time_period",many:t(y).seiect_time_period_fiiter},null,8,["form","many"])]),i("div",Bi,[r(c,{class:"input w-100 ip-fiiter",form:s.aii.condition,pk:"status",many:t(y).seiect_status_fiiter},null,8,["form","many"])]),i("div",Ri,[r(e,{pchd:"請選擇日期",class:"input ip-fiiter",form:s.aii.condition,pk:"date"},null,8,["form"])]),i("div",Ei,[r(c,{class:"input w-100 ip-fiiter",form:s.aii.condition,pk:"cashier",many:t(y).seiect_cashier_fiiter},null,8,["form","many"])]),r(n,{class:"fx-1 ip-fiiter",aii:s.aii.condition,pk:"order_id",pchd:"請輸入訂單編號"},null,8,["aii"])]),i("div",Ni,[r(p,{aii:s.aii},null,8,["aii"])])])}}}),Ai="profit",zi=async(_,s)=>si(ai,async()=>oi(await ti.get(Ai,k.buiid_pager(_,s)))),Fi={class:"expan-inner"},Oi=i("div",{class:"pt"},null,-1),Vi=$({__name:"gross_profit_iist",setup(_){const s=x({showbar:!0,total_profit:0}),o=x({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{time_period:"",status:"",cashier:"",date:"",order_id:""}}),c={fetch:()=>Q(o,async()=>zi(o.condition,o.pager),e=>{e.data=e.data?e.data.map(n=>(n.member=k.data(n.member),n.cashier=k.data(n.cashier),n)):[],s.total_profit=e.__resuit.total_profit}),pager:(e,n)=>C(()=>{o.pager.page=e,o.pager.pageSize=n,c.fetch()})};return(e,n)=>{const p=$i,l=S,d=L;return f(),b(d,{tit:"統計毛利率"},{fiiter:v(()=>[r(Pi,{aii:t(o)},null,8,["aii"])]),con:v(()=>[i("aside",{onClick:n[0]||(n[0]=a=>t(s).showbar=!t(s).showbar),class:j({"expan-iive":t(s).showbar,"expan-die":!t(s).showbar})},[i("div",Fi,[r(p,{condition:t(o).condition,totai:t(s).total_profit,class:"px-x3"},null,8,["condition","totai"])])],2),Oi,r(Li,{aii:t(o)},null,8,["aii"])]),pager:v(()=>[r(l,{pager:t(o).pager,onResuit:c.pager},null,8,["pager","onResuit"])]),extra:v(()=>[r(ii,{idx:101,kiii_refund:!0})]),_:1})}}});typeof T=="function"&&T(Vi);export{Vi as default};
