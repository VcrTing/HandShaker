import{m as S,v as H}from"./view-01767316.js";import{d as h,o as i,c as d,a as s,t as a,i as f,B as g,p as m,F as b,q as y,H as N,r as B,g as E,b as c,w as u,m as x,f as T,n as V,l as q}from"./index-33974ecf.js";import{f as L}from"./fioat-e27af979.js";import{s as F}from"./strapi-c10e9858.js";import{v as $}from"./vai_order-7a27cec4.js";import{_ as M}from"./CuHtmIogo.vue_vue_type_script_setup_true_lang-de8b7c3a.js";import{f as A}from"./credit-db2ad5c3.js";const I={class:""},K=s("div",{class:"pdf-hr"},null,-1),R={class:"pt-pdf-x2 fx-r"},z=s("h5",{class:"pr-pdf n"},"統計金額:",-1),D={class:"fw-pdf-700"},J=h({__name:"CoOpTotai",props:{one:{}},setup(_){return(o,p)=>(i(),d("div",I,[K,s("div",R,[z,s("h3",D,"HK "+a(f(S)(o.one.total_price)),1)])]))}}),O=_=>_.ordered_product?_.ordered_product:[],P={product_aii_num:(_,o=0)=>(O(_).map(t=>{o+=t.quantity}),o),product_aii_price:(_,o=0)=>(O(_).map(t=>{o=L.floatAdd(o,t.total_price)}),o)},W={class:"px-pdf"},j=s("h2",{class:"pb-pdf"},"付款",-1),G={class:"fx-s"},Q=s("p",null,"產品",-1),U={class:"w-50 fx-r"},X={class:"sus"},Y={class:"mw-7em ta-r b"},Z=N('<div class="fx-s"><p>支付方式</p> <div class="w-50 fx-r"><p class="sus">現金支付</p><p class="mw-7em ta-r b">1500.0</p></div></div><div class="fx-s"><div></div><div class="w-50 fx-r"><p class="sus">微信支付</p><p class="mw-7em ta-r b">300.0</p></div></div><div class="fx-s"><div></div><div class="w-50 fx-r"><p class="sus">支付寶支付</p><p class="mw-7em ta-r b">200.0</p></div></div>',3),ss={class:""},os={class:"fx-s fx-t"},ts=s("p",null,"優惠類別",-1),es={key:0,class:"w-50"},ns={class:"sus"},cs={class:"mw-7em ta-r b"},_s={key:1},rs=h({__name:"CoOpPrice",props:{one:{}},setup(_){const o=_,p=g(()=>P.product_aii_num(o.one)),t=g(()=>P.product_aii_price(o.one));return(n,e)=>(i(),d("div",W,[j,s("div",null,[s("div",G,[Q,m(),s("div",U,[s("p",X,"數量"+a(f(p)),1),s("p",Y,a(f(t)),1)])]),Z]),s("div",ss,[s("div",os,[ts,n.one.discount?(i(),d("div",es,[(i(!0),d(b,null,y(n.one.discount,(r,l)=>(i(),d("div",{class:"fx-r",key:l},[s("p",ns,a(r.type),1),s("p",cs," -"+a(r.discount_deduction),1)]))),128))])):(i(),d("div",_s))])])]))}}),is={class:"pdf-bd br px-pdf py-pdf"},k=h({__name:"CoBdWrapper",setup(_){return(o,p)=>(i(),d("div",is,[B(o.$slots,"default")]))}}),ds=s("p",{class:"b fs-s-pdf"},"帳單展示備註 :",-1),as=["innerHTML"],ps=h({__name:"CoOpRemark",props:{one:{}},setup(_){const o=_,p=E({spiit:90}),t={string_too_iong:e=>(console.log(e.length),e.length>p.spiit),omit_string:e=>(t.string_too_iong(e)&&(e=e.substring(0,p.spiit)),e+"...")},n=g((e="")=>((o.one.ordered_product?o.one.ordered_product:[]).map(l=>{e+="<div>",(l.product?F.data(l.product):{}).remarks.map(w=>{e=e+t.omit_string(w.content)+" "}),e+="</div>"}),e));return(e,r)=>{const l=k;return i(),d("div",null,[c(l,{class:"_wrapper"},{default:u(()=>[ds,s("div",{class:"fs-s-pdf",innerHTML:f(n)},null,8,as)]),_:1})])}}}),ls={class:"pi-pdf-s"},us=s("h4",null,"產品",-1),fs={class:"fx-s fx-b"},ms={class:"w-30"},hs={class:"b"},vs={class:"sus fs-s-pdf"},$s={class:"w-17 fs-s-pdf sus"},ws={class:"d-ib"},gs={class:"w-19 fs-s-pdf sus"},xs={class:"w-18 fs-s-pdf sus"},bs={class:"w-16 b"},ys=h({__name:"CoOpProds",props:{one:{}},setup(_){return(o,p)=>{const t=k;return i(),d("div",null,[c(t,{class:"_wrapper"},{default:u(()=>[s("div",ls,[us,(i(!0),d(b,null,y(o.one.ordered_product,(n,e)=>(i(),d("div",{class:"pt-pdf",key:e},[s("div",fs,[s("div",ms,[s("p",hs,a(f($).order_product(n).name),1),s("p",vs,"樣式:  "+a(f($).order_product_variation(n).name),1)]),s("div",$s,[m("附加:  "),s("div",ws,"- "+a(n.discount_deduction),1)]),s("div",gs,"單價: "+a(n.selling_price),1),s("div",xs,"數量: "+a(n.quantity),1),s("div",bs,"金額: "+a(f(S)(n.total_price)),1)])]))),128))])]),_:1})])}}}),ks={class:"fx-s"},Cs=h({__name:"CoOpTitV",props:{tit:{},tit_ciass:{},v_ciass:{}},setup(_){return(o,p)=>(i(),d("div",ks,[s("p",{class:x(o.tit_ciass)},a(o.tit),3),s("p",{class:x(["b ta-r",o.v_ciass])},[B(o.$slots,"default")],2)]))}}),Ts={class:"fx-s"},Os={class:"fx-1"},Ps=s("div",{class:"w-1em"},null,-1),Ss={class:"fx-1"},Bs=h({__name:"CoOpMsg",props:{one:{}},setup(_){return(o,p)=>{const t=Cs,n=k;return i(),d("div",Ts,[s("div",Os,[c(n,{class:"px-pdf"},{default:u(()=>[c(t,{tit:"日期",v_ciass:"mw-6em ta-i"},{default:u(()=>[m(a(f(H)(o.one.order_date)),1)]),_:1}),c(t,{tit:"訂單編號",v_ciass:"mw-6em ta-i"},{default:u(()=>[m(a(o.one.order_id),1)]),_:1}),c(t,{tit:"會員名稱",v_ciass:"mw-6em ta-i"},{default:u(()=>[m(a(f($).member(o.one,"普通會員")),1)]),_:1}),c(t,{tit:"收銀員",v_ciass:"mw-6em ta-i"},{default:u(()=>[m(a(f($).cashier(o.one)),1)]),_:1})]),_:1})]),Ps,s("div",Ss,[c(n,{class:"px-pdf"},{default:u(()=>[c(t,{tit:"店鋪電話"},{default:u(()=>[m("9786 9898")]),_:1}),c(t,{tit:"Facebook"},{default:u(()=>[m("Hello Ketty")]),_:1}),c(t,{tit:"店鋪地址"},{default:u(()=>[m(" 店鋪 ")]),_:1}),c(t,{tit:""},{default:u(()=>[m(" ")]),_:1})]),_:1})])])}}}),Es={class:"w-100 bg-con pdf-wrapper co-order-pdf"},Hs={class:"fx-s"},Ns=s("h2",null,"銷售數據 SALE RECEIPT",-1),Vs=h({__name:"CoOrderPdfPapper",props:{one:{}},setup(_){return(o,p)=>{const t=M,n=Bs,e=ys,r=ps,l=rs,v=J;return i(),d("div",Es,[s("div",Hs,[Ns,s("div",null,[c(t,{class:"pdf-iogo"})])]),c(n,{one:o.one,class:"pt-pdf-x1"},null,8,["one"]),c(e,{one:o.one,class:"pt-pdf-x2 co-op-prods"},null,8,["one"]),c(r,{one:o.one,class:"pt-pdf-x2 co-op-remark"},null,8,["one"]),c(l,{one:o.one,class:"pt-pdf-x2"},null,8,["one"]),c(v,{one:o.one,class:"pt-1em"},null,8,["one"])])}}}),Rs=h({__name:"CoOrderPdfParcei",props:{ciass:{},kiii_printed:{type:Boolean}},setup(_){const o=_,p=T(!0),t=T({}),n=E({many:[]}),e={spiite_order:()=>{},init:()=>A(()=>{const r=sessionStorage.getItem("heiiokitty_order_of_printed");if(r){const l=JSON.parse(r);l&&l.id&&(t.value=l)}o.kiii_printed||setTimeout(()=>{p.value&&window.print()},800)}),effect:()=>{const r=t.value;r&&r.id&&(n.many.length=0,(r.ordered_product?r.ordered_product:[]).length>5&&console.log("啟用分頁"),n.many.push(r)),console.log(n.many)}};return V(e.init),q(e.effect),(r,l)=>{const v=Vs;return i(),d("div",null,[(i(!0),d(b,null,y(f(n).many,(C,w)=>(i(),d("div",{class:"fx-c",key:w},[c(v,{class:x(r.ciass),one:C},null,8,["class","one"])]))),128))])}}});export{Rs as _};
