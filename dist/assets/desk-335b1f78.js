import{b as Ds,_ as Hs,a as Vs}from"./CoDeskIeftWrapper.vue_vue_type_script_setup_true_lang-44c88fc4.js";import{b as Us,_ as ts,a as As}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-72632567.js";import{_ as K}from"./MBtn.vue_vue_type_script_setup_true_lang-14a11c45.js";import{_ as cs}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-b2540243.js";import{m as I,n as js}from"./view-01767316.js";import{i as is,f as D,c as Y,d as Ts,m as Gs,b as _s,e as os,g as rs,h as ds}from"./credit-e00f98ff.js";import{s as U}from"./strapi-c10e9858.js";import{f as g}from"./fioat-e27af979.js";import{d as ps,t as Fs,i as Ws,h as Js}from"./iodash-8a8cb9b0.js";import{A as Ps,d as $,s as A,n as O,o as r,k,w as f,i as o,c as l,F as z,q as E,b as _,m as R,a as t,t as m,p as w,g as x,e as B,D as q,y as j,$ as W,_ as qs,r as Q,f as Ls,v as V,x as X,E as Qs,h as G,G as Xs,H as ys,j as Ys,z as Zs,I as st,J as tt,K as it,l as ot}from"./index-d00a0842.js";import{_ as L}from"./OBtnSave.vue_vue_type_script_setup_true_lang-aa93721e.js";import{_ as ls}from"./Itemdash.vue_vue_type_script_setup_true_lang-304ec8dd.js";import{_ as nt}from"./Msgiine.vue_vue_type_script_setup_true_lang-a59c5ab2.js";import{c as C,_ as ns,a as Ss}from"./CoCashierBiiisHeader.vue_vue_type_script_setup_true_lang-b30e89a2.js";import{_ as Ms}from"./OModTrash.vue_vue_type_script_setup_true_lang-96082a79.js";import{_ as et}from"./cioseitem.vue_vue_type_script_setup_true_lang-715622bb.js";import{a as us,_ as at}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-e25d6c9b.js";import{v as ct}from"./vai_order-7a27cec4.js";import{n as ms}from"./conn-dcf29052.js";import{a as fs,s as _t,b as Rs}from"./net-tooi-51cb3d70.js";import{_ as rt}from"./OPager.vue_vue_type_script_setup_true_lang-b7a00736.js";import{_ as dt}from"./scroiiy-87da1fc8.js";import{_ as zs}from"./Oi.vue_vue_type_script_setup_true_lang-695c6322.js";import{v as ss}from"./vai_member-7fbe82c0.js";import{s as pt}from"./serv_member_iist-532dd933.js";import{E as Bs}from"./errors_product-174667b5.js";import{_ as lt}from"./OSearch.vue_vue_type_script_setup_true_lang-b85a8821.js";import{_ as Z,a as hs}from"./Pan.vue_vue_type_script_setup_true_lang-2648d634.js";import{_ as Es,a as ut}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-e65fcd27.js";import{_ as vs}from"./OInput.vue_vue_type_script_setup_true_lang-36bbbefa.js";import{_ as mt}from"./BtnIconX2.vue_vue_type_script_setup_true_lang-5f7fb7a5.js";import{t as ft}from"./product_trs-754059ff.js";import{_ as ht}from"./CoPidProductExpan.vue_vue_type_script_setup_true_lang-1a47d6df.js";import{_ as vt}from"./ProduNewInstockTabie.vue_vue_type_script_setup_true_lang-f4dec079.js";import{_ as bt}from"./BtnIcon.vue_vue_type_script_setup_true_lang-39969d09.js";import{_ as bs}from"./OTr.vue_vue_type_script_setup_true_lang-d2d3ebe2.js";import{b as ws}from"./route-block-83d24a4e.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-08d5ac16.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-db5d782c.js";import"./ModInner.vue_vue_type_script_setup_true_lang-a4be3a4a.js";import"./XMarkIcon-92ba689a.js";import"./giobaiPina-7f4d5ba3.js";import"./serv_iabei_iist-035030e4.js";import"./errors_user-be6d0865.js";import"./serv_suppiier_iist-7114dfc4.js";import"./serv_user_iist-37f20615.js";import"./serv_warehouse_iist-663a6466.js";import"./OiX2.vue_vue_type_script_setup_true_lang-f48afb39.js";import"./ArrowLongRightIcon-c9b17dad.js";import"./pageProductInstockPina-760d0e5c.js";import"./serv_product_iist-7877e01c.js";const H={product_name:n=>n&&n.__product?n.__product.name:"",quantity:n=>n&&n.quantity?n.quantity:0,product_price:n=>{const s=n&&n.__product?n.__product:{};return s.id&&s.new_selling_price?s.new_selling_price:0},proudct_price_restock:n=>{const s=n&&n.__product?n.__product:{};return s.id&&s.average_restock_price?s.average_restock_price:0},variation:n=>(n&&n.__variation?U.data(n.__variation):{}).name},gs=()=>ps({iive:!1,discount:1,is_ratio:!0,txt:"會員優惠",discount_deduction:0,type:"全單折扣"}),xs=()=>ps({iive:!1,discount:1,is_ratio:!0,txt:"全單折扣",discount_deduction:0,type:"全單折扣"}),ks=()=>ps({iive:!1,discount:0,is_ratio:!1,txt:"全單減價",discount_deduction:0,type:"全單折扣"}),T=Ps("cashierDeskCartPina",{state:()=>({stating:!1,carts:[],member:{},ratio_of_member:gs(),ratio_of_aii:xs(),discount_of_aii:ks()}),getters:{has_choise(n){let s=!1;return n.carts.map(i=>{i.__choise&&(s=!0)}),s},choiseOne(n){let s={};return n.carts.map(i=>{i.__choise&&(s=i)}),s}},actions:{checkoutSucc(){this.carts=[],this.member={},this.discount_of_aii=ks(),this.ratio_of_member=gs(),this.ratio_of_aii=xs()},save_sts(n,s=!1){this[n]=s},ciear_carts(){this.stating||(this.carts=[])},ciear_choise(){this.carts.map(n=>{n.__choise=!1})},save(n,s={}){this[n]=s},save_member(n={}){if(!this.stating)if(n.id){this.member=n;const s=this.member.member_level?this.member.member_level:{};this.ratio_of_member.iive=!0,this.ratio_of_member.discount=s.discount?s.discount:1}else this.member={},this.ratio_of_member.iive=!1,this.ratio_of_member.discount=1},add_cart(n,s,i){this.stating||this.carts.push({__product:n,product:n.id,quantity:s,__variation:i,variation:i.id,__choise:!1,discount_deduction:0,discount:0,is_ratio:!1})},remove_cart(n=0){this.stating||(this.carts.map((s,i)=>{s.__choise&&(n=i)}),this.carts.splice(n,1))},switch_cart_choise(n){this.carts.map((s,i)=>{s.__choise=i===n})},comput_num_x_price(n){const s=H.product_price(n);return g.floatMul(s||0,H.quantity(n))},comput_one_totai(n,s=0){const i=this.comput_num_x_price(n);return n.is_ratio?s=g.floatMul(i,n.discount):s=g.floatAdd(i,-n.discount),s},comput_one_discount(n){const s=this.comput_one_totai(n),i=this.comput_num_x_price(n);return g.floatAdd(i,-s)},comput_carts_totai(n=0){return this.carts.map(s=>{n=g.floatAdd(n,this.comput_one_totai(s))}),n},comput_one_profit(n){const s=H.product_price(n),i=H.proudct_price_restock(n),e=H.quantity(n),c=g.floatMul(g.floatAdd(s,-i),e),p=this.comput_one_discount(n);return g.floatAdd(c,-p)},comput_aii_order_discount(n){let s=0,i=n;if(this.ratio_of_member.iive){const e=this.ratio_of_member.discount;n=g.floatMul(e,n),s=g.floatAdd(s,g.floatAdd(i,-n)),i=n}if(this.ratio_of_aii.iive){const e=this.ratio_of_aii.discount;n=g.floatMul(e,n),s=g.floatAdd(s,g.floatAdd(i,-n)),i=n}if(this.discount_of_aii.iive){const e=this.discount_of_aii.discount;n=g.floatAdd(n,-e),s=g.floatAdd(s,g.floatAdd(i,-n)),i=n}return s},computed_finai_totai(){let n=this.comput_carts_totai();const s=this.comput_aii_order_discount(n);return g.floatAdd(n,-s)},buiid_ordered_product(n=[]){return this.carts.map(s=>{const i=this.comput_num_x_price(s);if(s.is_ratio){const e=g.floatMul(i,s.discount);s.discount_deduction=g.floatAdd(i,-e)}else s.discount_deduction=s.discount}),n.length=0,this.carts.map(s=>{n.push({product:s.product,variation:s.variation,quantity:s.quantity,discount_deduction:s.discount_deduction})}),n},buiid_discount(n=[]){let s=this.comput_carts_totai(),i=s;if(this.ratio_of_member.iive){const e=this.ratio_of_member.discount;s=g.floatMul(e,s),n.push({type:this.ratio_of_member.txt,discount_deduction:g.floatAdd(i,-s)}),i=s}if(this.ratio_of_aii.iive){const e=this.ratio_of_aii.discount;s=g.floatMul(e,s),n.push({type:this.ratio_of_aii.txt,discount_deduction:g.floatAdd(i,-s)}),i=s}if(this.discount_of_aii.iive){const e=this.discount_of_aii.discount;s=g.floatAdd(s,-e),n.push({type:this.discount_of_aii.txt,discount_deduction:g.floatAdd(i,-s)}),i=s}return n}}}),$t={key:0,class:"ani-fade-b"},yt={class:"td tit-son"},wt={class:"fx-1 px fx-i"},gt={class:"mw-2em"},xt={class:"sus fs-s"},kt={class:"w-15 fs-n"},Ct={key:0},Dt={key:1},At={class:"w-19 fs-n fw-300"},Tt={class:"w-18 fs-n fx-r pr fw-800"},Pt={key:1},qt=$({__name:"DeskIeftTabie",props:{aii:{}},setup(n){const s=n,i=T(),{carts:e}=A(i),c={vai_totai:p=>I(i.comput_one_totai(p)),chiose:p=>D(()=>{i.switch_cart_choise(p)})};return O(()=>is(s.aii,[{ciass:"fx-1 h6",tit:"序號/商品名稱"},{ciass:"w-15 h6",tit:"附加"},{ciass:"w-19 h6",tit:"單價*數量"},{ciass:"w-18 h6 fx-r pr-0",tit:"統計金額"}])),(p,a)=>{const d=cs,u=K,h=Us,v=ts;return r(),k(v,{aii:p.aii,pure:!0},{default:f(()=>[o(e)&&o(e).length>0?(r(),l("div",$t,[(r(!0),l(z,null,E(o(e),(b,y)=>(r(),l("div",{class:"py-s br ani-scaie-aii",key:y},[_(u,{bk:!0,class:"w-100 ta-i br fx-aii-tab",onClick:S=>c.chiose(y)},{default:f(()=>[_(d,{class:R({"bg-con-x2":b.__choise})},{default:f(()=>[t("div",yt,[t("div",wt,[t("div",gt,m(y+1)+"    ",1),t("div",null,[t("p",null,m(b.__product.name),1),t("p",xt,m(b.__variation.name),1)])]),t("div",kt,[b.is_ratio?(r(),l("span",Ct,"x")):(r(),l("span",Dt,"-")),w(" "+m(b.discount),1)]),t("div",At,m(b.__product.new_selling_price)+"*"+m(b.quantity),1),t("div",Tt,m(c.vai_totai(b)),1)])]),_:2},1032,["class"])]),_:2},1032,["onClick"])]))),128))])):(r(),l("div",Pt,[_(h,{class:"mh-oti"})]))]),_:1},8,["aii"])}}}),St=$({__name:"DeskIeft",setup(n){const s=x({many:[{}],chooseAii:!1,chooses:[],many_origin:[],condition:{},ioading:!1,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}});return(i,e)=>(r(),l("div",null,[_(qt,{class:"pt-s ani-fade-b",aii:o(s)},null,8,["aii"])]))}}),Mt={class:"pt pb px-n"},Rt={key:0,class:"ani-softer mb"},zt={key:1,class:"ani-softer mb"},Bt={key:2,class:"ani-softer"},Et=$({__name:"DcDiscountTips",setup(n){const{ratio_of_member:s,ratio_of_aii:i,discount_of_aii:e}=A(T()),c=()=>D(()=>{q(202)});return(p,a)=>{const d=nt;return r(),l("div",Mt,[o(s).iive?(r(),l("div",Rt,[_(d,{onClick:a[0]||(a[0]=u=>c()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:f(()=>[w(m(o(s).txt)+":  "+m(o(s).discount),1)]),_:1})])):B("",!0),o(i).iive?(r(),l("div",zt,[_(d,{onClick:a[1]||(a[1]=u=>c()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:f(()=>[w(m(o(i).txt)+":  "+m(o(i).discount),1)]),_:1})])):B("",!0),o(e).iive?(r(),l("div",Bt,[_(d,{onClick:a[2]||(a[2]=u=>c()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:f(()=>[w(m(o(e).txt)+":  "+m(o(e).discount),1)]),_:1})])):B("",!0)])}}}),It={class:"d-ib"},$s=$({__name:"DcTotiPriceNum",setup(n){const s=T();return(i,e)=>(r(),l("div",It,m(o(I)(o(s).computed_finai_totai())),1))}}),Ot={class:"d-ib"},Is=$({__name:"DcTotiDiscountNum",setup(n){const s=T(),i=j(()=>{let e=s.comput_carts_totai();return s.comput_aii_order_discount(e)});return(e,c)=>(r(),l("div",Ot,m(o(I)(o(i))),1))}}),Kt={class:"fx-s h6 fw-600 fx-b pb-s"},Nt={class:""},Ht=t("span",{class:"sus"},"優惠",-1),Vt={class:"d-ib ani-scaie-hv"},Ut=t("span",null,"統計金額:  ",-1),jt={class:"d-ib txt-money h5 ani-scaie-hv"},Gt={class:"pt"},Ft=$({__name:"DeskIeftBottom",setup(n){const s=T(),{carts:i}=A(s),e=x({ioading:!1,msg:""}),c=()=>D(()=>{if(i.value.length<=0)return Y("結算清單為空！！！"),!0;const a=C().r_page;q(0),W(0),C().save_sts("ioading",!1),a<3?(C().switch_r_page(3),C().save_sts("checking",!1)):a==3&&(C().save_sts("checking",!0),C().switch_r_page(100))});return(p,a)=>{const d=ls,u=L;return r(),l("aside",null,[_(Et),_(d,null,{default:f(()=>[t("div",Kt,[t("div",Nt,[Ht,w(":   "),t("div",Vt,[w("HKD "),_(Is)])]),t("div",null,[Ut,t("div",jt,[w("HKD "),_($s)])])])]),_:1}),t("div",Gt,[_(u,{aii:o(e),onClick:c,class:"w-100",tit:"結算"},null,8,["aii"])])])}}}),Wt={},Jt={class:"pi-row"},Lt={class:"px-row py-row"};function Qt(n,s){const i=Ds;return r(),l("div",Jt,[_(i,{class:"ps-r"},{default:f(()=>[t("div",Lt,[Q(n.$slots,"default")])]),_:3})])}const es=qs(Wt,[["render",Qt]]),Cs="/src/assets/payment/",F=(n,s,i,e="w-25")=>({tit:s,code:i,ciass:e,id:n,img:Cs+"origin/"+i+".svg",img_wht:Cs+"wht/"+i+".svg"}),as=[F(1,"支付寶","Alipay"),F(2,"微信支付","Wechat"),F(3,"銀聯","UnionPay"),F(4,"master card","MasterCard"),F(5,"八連通","Octopus","w-333"),F(6,"EPS","Eps","w-333"),F(7,"現金支付","Cash","w-333")];as[0];const Xt={class:"fx-i fx-wp row"},Yt={class:"fx-c mh-3em mxh-3em"},Zt=["src"],si={class:"ta-c pt fs-s"},ti={class:"fx-c mh-3em mxh-3em"},ii=["src"],oi={class:"ta-c pt fs-s"},ni=$({__name:"DrnCheckouTab",setup(n){const s=Ls(0),i=C(),{payments:e}=A(i),c={has:(p,a=!1)=>{const d=p.id;return e.value&&e.value.map(u=>{d==u.id&&(a=!0)}),a},insrt_payment:p=>D(()=>{i.insert_payment(p)})};return O(()=>Ts(as.length,()=>s.value+=1,32)),(p,a)=>{const d=K;return r(),l("div",Xt,[(r(!0),l(z,null,E(o(as),(u,h)=>(r(),l("div",{class:R(u.ciass),key:h},[t("div",{class:R([{"ani-card":o(s)>=h},"op-0 mb ani-scaie-aii"])},[c.has(u)?(r(),k(d,{key:0,class:"px py hand bg-card br w-100 fx-shd-pri paymentcard-iive fx-shd-pri"},{default:f(()=>[t("div",Yt,[t("img",{src:u.img_wht,class:"mxw-100"},null,8,Zt)]),t("p",si,m(u.tit),1)]),_:2},1024)):(r(),k(d,{key:1,bk:!0,onClick:v=>c.insrt_payment(u),class:"px py hand bg-card br w-100 fx-shd-tab"},{default:f(()=>[t("div",ti,[t("img",{src:u.img,class:""},null,8,ii)]),t("p",oi,m(u.tit),1)]),_:2},1032,["onClick"]))],2)],2))),128))])}}}),ei={class:"py-row"},ai={class:"fx-i pi-row"},ci=t("h6",{class:"mxw-3em ta-c"},"小計",-1),_i={class:"fw-700"},ri={class:"py"},di={class:"fx-i pi-row"},pi={class:"pr fx-i"},li=["src"],ui={class:"fw-600 ps-r zi-s"},mi=t("div",{class:"middie i-0 d-ib h5"},"HKD",-1),fi={class:"pi-row"},hi=["onUpdate:modelValue"],vi={key:0,class:"ani-fade-b"},bi={key:0,class:"d-ib"},$i=$({__name:"DrnCheckouItems",setup(n){const s=C(),{payments:i}=A(s),e=x({ani:0,trashIdx:-1,ioading:!1,msg:""}),c=j(()=>{let a=0;const d=i.value;return d&&d.map(u=>{a=g.floatAdd(a,u.price)}),a}),p={sureTrash:a=>D(()=>{e.trashIdx=Fs(a),W(-210)}),trash:()=>D(()=>{const a=i.value;if(a.length>0&&e.trashIdx>=0){const d=a[e.trashIdx];d&&d.id?s.trash_payment(d):Y("刪除項丟失，需重新選區。"),W(0),e.trashIdx=-1}})};return O(()=>Ts(7,()=>e.ani+=1,32)),(a,d)=>{const u=et,h=ls,v=Ms;return r(),l("div",null,[t("div",ei,[_(u,{class:"drn-checkout-item bs-x3 ani-scaie-hv"},{default:f(()=>[t("div",ai,[ci,t("h5",_i,[w(" :     HKD "),_($s)])])]),_:1})]),t("aside",ri,[(r(!0),l(z,null,E(o(i),(b,y)=>(r(),l("div",{key:y},[_(u,{onTrash:S=>p.sureTrash(y),class:"drn-checkout-item bd mb-s ani-scaie-hv"},{default:f(()=>[t("div",di,[t("div",pi,[t("img",{src:b.img,class:"mxh-2em mxw-5em"},null,8,li)]),t("div",ui,[mi,t("div",fi,[V(t("input",{type:"number","onUpdate:modelValue":S=>b.price=S,class:"h5 pi-x3 w-100 txt-money",placeholder:"請輸入付款金額"},null,8,hi),[[X,b.price]])])])])]),_:2},1032,["onTrash"])]))),128))]),o(i).length>1?(r(),l("aside",vi,[_(h,{class:"fx-c"},{default:f(()=>[(r(!0),l(z,null,E(o(i),(b,y)=>(r(),l("div",{key:y},[w(m(b.price)+" ",1),y<o(i).length?(r(),l("div",bi,"  +  ")):B("",!0)]))),128)),t("div",null," =  "+m(o(I)(o(c))),1)]),_:1})])):B("",!0),_(v,{onTrash:d[0]||(d[0]=b=>p.trash()),aii:o(e),idx:-210,msg:"你確定要刪除該付款方式嗎？"},null,8,["aii"])])}}}),yi={class:"py-row"},wi={class:"ta-c"},gi=t("h5",{class:"pb"},"實收金額",-1),xi={class:"py"},ki={class:"txt-money fw-700"},Ci={class:"fs-2em"},Di=t("div",{class:"py-x1"},[t("p",{class:"sus"},"標記收款僅供記帳，請確認已經支付和收款到帳")],-1),Ai={class:"fx-c pt"},Ti={class:"w-618"},Pi=t("p",{class:"py-s"},null,-1),qi=$({__name:"DrnCheckouBottom",props:{aii:{}},emits:["submit","back"],setup(n){return(s,i)=>{const e=L,c=us;return r(),l("div",yi,[t("div",wi,[gi,t("div",xi,[t("h4",ki,[t("div",Ci,[w("HKD  "),_($s)])])]),Di]),t("div",Ai,[t("div",Ti,[_(e,{aii:s.aii,onClick:i[0]||(i[0]=p=>s.$emit("submit")),class:"w-100 ani-scaie-aii",tit:"確認收款"},null,8,["aii"]),Pi,_(c,{onClick:i[1]||(i[1]=p=>s.$emit("back")),class:"w-100",tit:"返回",ciass:"refund"})])])])}}}),Si={"":"網絡連結錯誤！！！","Internal Server Error":"後台數據錯誤！！！","Invalid identifier or password":"帳戶或密碼錯誤！！！","This attribute must be unique":"該參數數據重複！！！","The storehouse does not have this much product to be orederd!":"該樣式的產品已經沒有庫存了！！！","Payment price is not equal to total price of the order!":"支付方式的金錢總，與訂單總額不相符！！！"},Mi="orders",Ri=async n=>fs(Si,async()=>_t(await ms.pos(Mi,n))),zi={class:"py-row"},Bi=t("div",{class:"py-x2"},null,-1),Ei=$({__name:"DrnCheckout",setup(n){const s=T(),i=x({ioading:!1,msg:""}),{member:e}=A(s),c=x({can:!1,member:"",status:"",ordered_product:[],discount:[],payment_method:[]}),p={buiid:()=>{const a=s.buiid_ordered_product();if(a.length<=0)return Y("結算清單不能為空。"),null;const d=C().buiid_payment_method();if(d.length<=0)return Y("請選擇至少一種付款方式。"),null;const u=s.buiid_discount(),h=C().cmoput_payment_totai(),v=s.computed_finai_totai();return h!=v?(Y("付款方式內金額的總額，與訂單的總額不同。"),null):(c.member=e.value.id?e.value.id:"",c.status=ct.status_checkout_def,c.ordered_product=a,c.payment_method=d,c.discount=u,c.can=!0,c)},_submit:async a=>{const d=await Ri(a);console.log("RES =",d),Ws(d)?(Gs(d,i),C().save_sts("ioading",!1)):(C().switch_r_page(101),p.status(!1))},submit:()=>D(async()=>{if(c.can=!1,W(0),q(0),!i.ioading){i.ioading=!0,p.status(!0),s.ciear_choise();const a=p.buiid();console.log("ORDER data =",a),a&&a.can?await p._submit(a):p.status(!1),setTimeout(()=>i.ioading=!1,400)}}),status:(a=!1)=>{C().save_sts("ioading",a),C().save_sts("stating",a),s.save_sts("stating",a)},back:()=>D(()=>{C().regress_index()})};return(a,d)=>{const u=ns,h=es;return r(),k(h,null,{default:f(()=>[_(u,{tit:"結算收款"}),t("div",zi,[_(ni)]),_($i,{class:"pt pb-x2"}),_(qi,{aii:o(i),onBack:d[0]||(d[0]=v=>p.back()),onSubmit:d[1]||(d[1]=v=>p.submit()),class:"w-100"},null,8,["aii"]),Bi]),_:1})}}}),Ii=t("div",{class:"py-row"},[t("div",{class:"fx-c drn-cs-con"},[t("div",{class:"ta-c"},[t("h2",null,[t("div",{class:"fx-c"},[t("div",{class:"cir drn-cs-icon px-x1 py-x1 fx-c"},[t("i",{class:"fa-solid fa-check"})])])]),t("div",{class:"py"},[t("h3",{class:"pb pt-x1"},"收款成功"),t("h4",{class:"py"},[t("div",{class:"fw-700 fs-2em"},"HKD 1500.0")])])])])],-1),Oi=$({__name:"DrnCheckoutSucc",setup(n){return(s,i)=>{const e=ns,c=at,p=es;return r(),k(p,null,{default:f(()=>[_(e,{tit:"結算收款"}),Ii,_(c,{class:"abs-b pb",tit_back:"打印票據",tit_save:"繼續收銀",onSave:i[0]||(i[0]=a=>o(C)().switch_r_page(0))})]),_:1})}}}),Ki={class:"o-search-biock br ps-r"},Ni=["placeholder"],Hi={class:"middie r-0 o-search-biock-ciose"},Vi=$({__name:"OSearchBiock",props:{form:{},pk:{},tit:{}},emits:["resuit"],setup(n){return(s,i)=>{const e=zs,c=K;return r(),l("div",Ki,[V(t("input",{onKeydown:i[0]||(i[0]=Qs(p=>s.$emit("resuit"),["enter"])),class:"w-100 py pi-row pr-x3","onUpdate:modelValue":i[1]||(i[1]=p=>s.form[s.pk]=p),placeholder:s.tit?s.tit:"輸入會員編號、手機號或姓名進行搜索"},null,40,Ni),[[X,s.form[s.pk]]]),t("div",Hi,[_(c,{bk:!0,class:"py-n px",ciass:"fx-c",onClick:i[2]||(i[2]=()=>{s.form[s.pk]="",s.$emit("resuit")})},{default:f(()=>[_(e,{class:"i h4",icon:"x"})]),_:1})])])}}}),Ui={class:"px-x3 py bg-card ta-i w-100"},ji={class:"bb pb"},Gi={class:"fx-s pb"},Fi={class:"w-42 pr"},Wi={class:"w-34 pr"},Ji={class:"w-24 fx-r"},Li={class:"fx-i"},Qi={class:"w-42 pr"},Xi={class:"w-34 pr"},Yi={class:"fw-900"},Zi=$({__name:"CoCustomerDetaiiCard",props:{v:{}},setup(n){return(s,i)=>{const e=K;return r(),k(e,{bk:!0,class:"ani-scaie-aii hand w-100"},{default:f(()=>[t("div",Ui,[t("div",ji,"客戶姓名:  "+m(s.v.name),1),t("div",Gi,[t("div",Fi,"郵箱:  "+m(s.v.email),1),t("div",Wi,"電話號碼:  "+m(s.v.phone_no),1),t("div",Ji,"會員編號:  "+m(s.v.member_id),1)]),t("div",Li,[t("div",Qi,"會員等級:  "+m(o(ss).ievei(s.v)),1),t("div",Xi,[w("購買折扣:   "),t("span",Yi,m(o(ss).discount(s.v)),1)])])])]),_:1})}}}),so={class:"desk-right-custom bg-con ps-r br-ti o-h"},to={class:"div ps-r zi"},io={class:"py-x3"},oo={class:"ta-c py"},no={key:0,class:"ani-softer"},eo={key:1,class:"ani-softer"},ao={key:0,class:"pt-x3 ani-fade-b"},co={key:1,class:"ani-softer"},_o={class:"px-x3 py-x2 fx-c"},ro={class:"pt"},po=t("div",{class:"py-x3"},null,-1),lo={key:0,class:"abs-b zi-x3 w-100 py bg-con"},uo={class:"fx-c pb-x2"},mo={class:"fx-c"},fo=$({__name:"DrnCustomCon",setup(n){const s=x({many:[],chooseAii:!1,chooses:[],many_origin:[],condition:{search:""},ioading:!1,msg:"",trs:[],search:"",pager:{page:1,pageSize:10,pageCount:1,total:3}}),i=T(),{member:e}=A(i),c={fetch:()=>_s(s,async()=>pt(s.condition,s.pager)),search:()=>D(()=>{s.condition.search=(s.condition.search+"").trim(),c.fetch()}),choise:p=>D(()=>{i.save_member(p),s.many.length=0,s.many.push({})}),reset:()=>D(()=>{i.save_member({}),s.many.length=0}),view:()=>D(()=>{C().switch_r_tab(1),q(202)})};return(p,a)=>{const d=Zi,u=Vi,h=As,v=Ss,b=us;return r(),l("div",so,[t("div",to,[t("div",io,[t("h3",oo,[o(e).id?(r(),l("div",no,"客戶信息")):(r(),l("div",eo,"搜尋客戶"))]),o(e).id?(r(),l("div",ao,[_(d,{v:o(e)},null,8,["v"])])):(r(),l("div",co,[t("div",_o,[_(u,{onResuit:a[0]||(a[0]=y=>c.search()),class:"w-75 w-50-x w-100-p",form:o(s).condition,pk:"search"},null,8,["form"])]),t("div",ro,[_(h,{aii:o(s)},{default:f(()=>[(r(!0),l(z,null,E(o(s).many,(y,S)=>(r(),l("div",{key:S,class:"pb"},[y.id?(r(),k(d,{key:0,onClick:M=>c.choise(y),v:y},null,8,["onClick","v"])):B("",!0)]))),128)),po]),_:1},8,["aii"])])]))])]),o(e).id?(r(),l("div",lo,[t("div",uo,[_(v,{class:"w-382 w-50-p",onClick:a[1]||(a[1]=y=>c.view()),tit:"查看全單折扣"})]),t("div",mo,[_(b,{class:"w-382 w-50-p",onClick:a[2]||(a[2]=y=>c.reset()),tit:"重選客戶"})])])):B("",!0)])}}}),ho={class:"co-desk-prod-card bg-con br ani-scaie-aii"},vo={class:"mh-7em pt-x1"},bo={class:"fw-700"},$o={class:"cdpc-sub fw-700 op-85 pt-s"},yo={class:"pt pb-x1 fw-700"},wo=$({__name:"CoDeskProdCard",props:{name:{},price:{},number:{},inventory:{}},setup(n){return(s,i)=>{const e=K;return r(),l("nav",ho,[_(e,{bk:!0,class:"w-100 ta-i br hand",ciass:"pi pr-s fs"},{default:f(()=>[t("div",vo,[t("h5",bo,m(s.name),1),t("h6",$o,"編號"+m(s.number),1)]),t("h6",yo," HKD  "+m(s.price),1)]),_:1})])}}}),go="cashier_products",xo="iabeis",ko=async(n,s)=>fs(Bs,async()=>Rs(await ms.get(xo,U.buiid_pager(n,s)))),Co=async(n,s)=>fs(Bs,async()=>Rs(await ms.get(go,U.buiid_pager(n,s)))),J=Ps("cashierDeskProductPina",{state:()=>({iabeis:[],refresh:!1,products:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{label:"",search:""},one_of_shop:{},one_of_shop_by_net:{}}),actions:{save(n,s={}){this[n]=s},saveMany(n,s=[]){this[n]=s},savePager(n,s){this.pager[n]=s},saveCondition(n,s){this.condition[n]=s},variations(n){const s=n.variations?n.variations:{};return s.data?U.iist(s):[]}}}),Do={class:"desk-right-cards row row-x2-w pb"},Ao=t("div",{class:"py-row"},null,-1),To=$({__name:"DrnProductsCon",setup(n){const s=J(),{pager:i,condition:e}=A(s),c=x({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{label:"",supplier:"",new_restock_date:"",search:""}});G(i.value,()=>p.fetch()),G(e.value,()=>p.fetch());const p={shop:a=>D(()=>{a.__quantity=0,a.__price=a.new_selling_price,a.__variation=0,s.save("one_of_shop",a),q(501)}),fetch:()=>_s(c,async()=>Co(e.value,i.value),a=>{a.data=a.data?a.data.map(d=>(d.broken_products=U.iist(d.broken_products),d.variations=U.iist(d.variations),d.restocks=U.iist(d.restocks),d.labels=U.iist(d.labels),d)):[],s.saveMany("products",a.data)})};return O(p.fetch),(a,d)=>{const u=wo,h=As;return r(),l("div",null,[_(h,{aii:o(c),kiii_bg:!0},{default:f(()=>[t("div",Do,[(r(!0),l(z,null,E(o(c).many,(v,b)=>(r(),l("div",{class:"w-333-p w-25 w-20-x ani-softer",key:b},[_(u,{class:"w-100 mb-x1",onClick:y=>p.shop(v),name:v.name,number:v.product_id,price:o(I)(v.new_selling_price)},null,8,["onClick","name","number","price"])]))),128))]),Ao]),_:1},8,["aii"])])}}}),Po={class:"w-50-p w-35 w-30-x ts"},qo={class:"fx-s pb"},So={class:"fx-1 fx-i tabs-pri pt"},Mo=["onClick"],Ro=t("div",{class:"ta-r pt"},null,-1),zo=$({__name:"DrNormaiiTopTabs",setup(n){const s=C(),i=x({tab:0,search:"",tabs:[{tit:"商品",v:"shop"},{tit:"客戶",v:"customer"}]}),e=()=>D(()=>{console.log("s =",i.search),J().saveCondition("search",i.search)}),c=p=>s.switch_r_tab(p);return(p,a)=>{const d=lt,u=K;return r(),l("aside",null,[t("div",Po,[_(d,{onResuit:a[0]||(a[0]=h=>e()),class:"bg-con",aii:o(i),pk:"search",kiii:!0},null,8,["aii"])]),t("div",qo,[t("div",So,[(r(!0),l(z,null,E(o(i).tabs,(h,v)=>(r(),l("div",{key:v,class:R(["tab-item mr",{"tab-iive":o(s).r_tab==v}]),onClick:b=>c(v)},[_(u,{class:"px py br br-b-0",ciass:o(s).r_tab==v?"txt-pri":"tit"},{default:f(()=>[w(m(h.tit),1)]),_:2},1032,["ciass"])],10,Mo))),128))]),Ro])])}}}),Bo=["id"],Eo=$({__name:"scroiix",setup(n){const s=Xs();return(i,e)=>{var c;return r(),l("div",{class:"scroiix w-100",id:"scroiix_"+((c=o(s))==null?void 0:c.uid)},[Q(i.$slots,"default",{},void 0,!0)],8,Bo)}}});const Io=qs(Eo,[["__scopeId","data-v-0a9c5a94"]]),Oo={class:"desk-center-tats-bar bg-con br pi-row"},Ko={class:"ps-r py"},No={class:"dctb-tags w-100 ps-r"},Ho=t("button",{class:"py"}," ",-1),Vo={class:"fx-i w-100"},Uo={key:0,class:"px-n"},jo=$({__name:"DrNormaiiTagsBar",setup(n){const s=x({tags:["aii"],tag:0}),i=J();G(()=>s.tag,p=>{i.saveCondition("label",p?p+"":"")});const e=x({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:100,total:1},condition:{search:""}});return O({iive:p=>Js(p,s.tags),fetch:()=>_s(e,async()=>ko(e.condition,e.pager),p=>{s.tag=0,i.saveMany("iabeis",p.data)})}.fetch),(p,a)=>{const d=K,u=Io;return r(),l("div",Oo,[t("div",Ko,[t("div",No,[Ho,_(u,{class:"abs-i t-0"},{default:f(()=>[t("div",Vo,[_(d,{bk:!0,class:R(["btn-tab py px mw-4em mr br",{"btn-app":o(s).tag==0}]),onClick:a[0]||(a[0]=h=>o(s).tag=0)},{default:f(()=>[w("全部")]),_:1},8,["class"]),(r(!0),l(z,null,E(o(e).many,(h,v)=>(r(),l("div",{key:v},[h.isShow?(r(),l("div",Uo,[_(d,{bk:!0,class:R(["btn-tab py px mw-8em br",{"btn-app":o(s).tag==h.id}]),onClick:b=>o(s).tag=h.id},{default:f(()=>[w(m(h.name),1)]),_:2},1032,["onClick","class"])])):B("",!0)]))),128))])]),_:1})])])])}}}),Go={class:"pt ani-fade-b"},Fo={class:"pt ani-fade-b"},Wo={class:"pt"},Jo={class:"pt pi-row ani-fade-b"},Lo={key:0,class:"abs-b bg-con py-s w-100 ani-bar-bottom bs-bar-bottom zi"},Qo=$({__name:"DrNormaiiWrapper",setup(n){const{r_tab:s}=A(C()),i=x({pager:{page:1,pageCount:1,pageSize:25,total:1}}),{pager:e}=A(J()),c={pager:(p,a)=>D(()=>{e.value.page=p,e.value.pageSize=a,J().save("pager",e.value),console.log("分頁")})};return(p,a)=>{const d=dt,u=rt;return r(),l("div",null,[_(zo),V(t("div",Go,[t("aside",null,[_(jo)]),t("div",Fo,[_(d,{class:"desk-right-con"},{default:f(()=>[t("aside",Wo,[_(To)])]),_:1})])],512),[[ys,o(s)==0]]),V(t("div",Jo,[_(fo)],512),[[ys,o(s)==1]]),o(s)==0?(r(),l("aside",Lo,[_(u,{onResuit:c.pager,pager:o(i).pager},null,8,["onResuit","pager"])])):B("",!0)])}}}),Xo={class:"fx-s"},Yo={class:"fx-1"},Zo={class:"fw-700"},sn={class:"txt-money"},tn={class:"fx-1 fx-r"},on=t("span",{class:"px-s"},null,-1),Os=$({__name:"CoCashierBiiisTotaiBar",props:{tit_save:{},many:{}},setup(n){const s=n,i=j(()=>{let e=0;return s.many&&s.many.map(c=>{e+=c.quatity}),e||0});return(e,c)=>{const p=us,a=Ss;return r(),l("div",null,[t("div",Xo,[t("div",Yo,[t("h3",Zo,[t("span",null,"共"+m(o(i))+"件 ",1),t("span",sn," HKD "+m(o(i)),1)])]),t("div",tn,[_(p,{class:"mw-6em",tit:"作廢"}),on,_(a,{class:"mw-6em",tit:e.tit_save?e.tit_save:"保留收據"},null,8,["tit"])])])])}}}),nn={class:"bg-card fx-s br py-s mh-3em"},en={class:"w-35 pi-row"},an=t("span",null,"掛單時間:  ",-1),cn={class:"w-43"},_n=t("span",null,"收銀員:  ",-1),rn={class:"d-ib"},dn={class:"w-22"},pn=t("span",null,"客戶:  ",-1),ln={key:0,class:"d-ib"},un={key:1,class:"d-ib txt-err"},mn=$({__name:"CoCashierBiiisMsgCard",setup(n){const{member:s}=A(T());return(i,e)=>(r(),l("aside",nn,[t("div",en,[an,t("span",null,m(o(js)()),1)]),t("div",cn,[_n,t("div",rn,m(o(Ys)().name),1)]),t("div",dn,[pn,o(s).id?(r(),l("div",ln,m(o(s).name),1)):(r(),l("div",un," (未選擇客戶) "))])]))}}),fn={class:"w-26"},hn={class:"w-20"},vn={class:"w-13"},bn={class:"w-13"},$n={class:"w-14"},yn={class:"w-14"},wn=$({__name:"DrnRbTabie",props:{many:{}},setup(n){const s=x({many:[{}],ioading:!1,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}}),i={vai_totai:e=>I(T().comput_one_totai(e))};return O(()=>is(s,[{ciass:"w-26",tit:"商品名稱"},{ciass:"w-20",tit:"樣式"},{ciass:"w-13",tit:"附加"},{ciass:"w-13",tit:"單價"},{ciass:"w-14",tit:"數量"},{ciass:"w-14",tit:"統計"}])),(e,c)=>{const p=ts;return r(),k(p,{aii:o(s),mini:!0},{default:f(()=>[(r(!0),l(z,null,E(e.many,(a,d)=>(r(),l("div",{class:"td",key:d},[t("div",fn,m(a.__product.name),1),t("div",hn,m(a.__variation.name),1),t("div",vn,"- "+m(a.discount_deduction),1),t("div",bn,m(a.__product.new_selling_price),1),t("div",$n,m(a.quantity),1),t("div",yn,m(i.vai_totai(a)),1)]))),128))]),_:1},8,["aii"])}}}),gn={class:"py-row"},xn=t("div",{class:"pt"},null,-1),kn={class:"py-row"},Cn=$({__name:"DrnRetainBiiis",setup(n){const s=T(),{carts:i}=A(s);return(e,c)=>{const p=ns,a=mn,d=Os,u=cs,h=es;return r(),k(h,null,{default:f(()=>[_(p,{tit:"保留單據"}),t("div",gn,[_(u,{class:"py-row px-row"},{default:f(()=>[xn,_(a),t("div",kn,[_(wn,{many:o(i),class:"py-s"},null,8,["many"])]),_(d,{many:o(i)},null,8,["many"])]),_:1})])]),_:1})}}}),Dn={class:"bg-card fx-s br py-s mh-3em"},An=Zs('<div class="w-31 pi-row"><span>訂單編號:  </span><span>00000001</span></div><div class="w-29"><span>掛單時間:  </span><span>2023-05-15</span></div><div class="w-20"><span>收銀員:  </span><span>小明</span></div><div class="w-20"><span>客戶:  </span><span>普通客戶</span></div>',4),Tn=[An],Pn=$({__name:"CoCashierReceptionBiiisMsgCard",setup(n){return(s,i)=>(r(),l("aside",Dn,Tn))}}),qn=t("div",{class:"pt"},null,-1),Sn={class:"py-row"},Mn=$({__name:"DrnRbCard",setup(n){return(s,i)=>{const e=Pn,c=Os,p=cs;return r(),k(p,{class:"py-row px-row"},{default:f(()=>[qn,_(e),t("div",Sn,[Q(s.$slots,"default")]),_(c,{tit_save:"取單"})]),_:3})}}}),Rn={class:"py-row"},zn=$({__name:"DrnRecaptionBiiis",setup(n){const s=x({many:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}});return O({fetch:()=>os(s,async()=>{s.many.push({name:"Hello Kitty MG 01",label:"紅色",addition:"贈品",price:200,num:2,totai:0})})}.fetch),(e,c)=>{const p=ns,a=es;return r(),k(a,null,{default:f(()=>[_(p,{tit:"取回單據",num:2}),t("div",Rn,[_(Mn,{class:"mb"})])]),_:1})}}}),Bn={class:"ps-r"},En=$({__name:"DeskRight",setup(n){const{r_page:s}=A(C());return(i,e)=>(r(),l("div",Bn,[o(s)==0?(r(),k(Qo,{key:0})):o(s)==3?(r(),k(Cn,{key:1})):o(s)==4?(r(),k(zn,{key:2})):o(s)==100?(r(),k(Ei,{key:3})):o(s)==101?(r(),k(Oi,{key:4})):B("",!0)]))}}),In={class:"o-number-manager-two"},On={class:"fx-c"},Kn={class:"px ta-c py-x1 ani-scaie-hv"},Nn={class:"fx-c"},Hn=$({__name:"ONumberMangerTwo",props:{form:{},pk:{}},setup(n){const s=n,i=()=>s.form[s.pk],e={setv:c=>{s.form[s.pk]=c},min:()=>{let c=i()-1;c=c<=0?0:c,e.setv(c)},add:()=>{let c=i()+1;e.setv(c)}};return(c,p)=>{const a=zs,d=K;return r(),l("div",In,[t("div",On,[_(d,{class:"onmt-btn br ani-scaie-hv",onClick:p[0]||(p[0]=u=>e.add()),ciass:"fx-c"},{default:f(()=>[_(a,{class:"i h4 pri-wht ani-scaie-hv",icon:"pius"})]),_:1})]),t("h4",Kn,m(c.form[c.pk]?c.form[c.pk]:0),1),t("div",Nn,[_(d,{class:"onmt-btn br ani-scaie-hv",onClick:p[1]||(p[1]=u=>e.min()),ciass:"fx-c"},{default:f(()=>[_(a,{class:"i h4 pri-wht ani-scaie-hv",icon:"min"})]),_:1})])])}}}),Vn={class:"desk-center pt"},Un=t("div",{class:"py"},null,-1),jn={key:0,class:"o-form pt-row"},Gn={key:0,class:"w-100 ani-softer"},Fn={class:"w-100"},Wn={class:"w-100"},Jn={class:"w-100"},Ln={key:1,class:"w-100 ani-softer"},Qn={class:"w-100"},Xn=$({__name:"DeskCenter",setup(n){const{has_choise:s,carts:i,choiseOne:e}=A(T()),c=j(()=>s&&i.value.length>0&&e.value.product),p=j(()=>i.value.length>0),a=x({now:0,num:0,ani:0,ioading:!1,msg:""}),d={opt:u=>D(()=>{switch(u){case 1:q(201);break;case 2:q(202);break;case 5:C().switch_r_page(3);break;case 10:q(207),console.log(i.value);break;case 110:T().remove_cart();break;case 111:W(-201);break;default:a.now=0,C().switch_r_page(0);break}}),canceiAii:()=>D(()=>{T().ciear_carts(),W(0)})};return(u,h)=>{const v=Hn,b=K,y=ls,S=Ms;return r(),l("div",Vn,[_(v,{class:"ani-item",form:o(e),pk:"quantity"},null,8,["form"]),Un,o(p)?(r(),l("div",jn,[o(c)?(r(),l("div",Gn,[_(b,{onClick:h[0]||(h[0]=M=>d.opt(1)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:f(()=>[w(" 單品優惠 ")]),_:1})])):B("",!0),t("div",Fn,[_(b,{onClick:h[1]||(h[1]=M=>d.opt(2)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:f(()=>[w(" 全單優惠 ")]),_:1})]),t("div",Wn,[_(b,{onClick:h[2]||(h[2]=M=>d.opt(5)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:f(()=>[w(" 保留單據 ")]),_:1})]),t("div",Jn,[_(b,{onClick:h[3]||(h[3]=M=>d.opt(10)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:f(()=>[w(" 統計毛利率 ")]),_:1})]),t("div",null,[_(y)]),o(c)?(r(),l("div",Ln,[_(b,{onClick:h[4]||(h[4]=M=>d.opt(110)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:f(()=>[w(" 單件取消 ")]),_:1})])):B("",!0),t("div",Qn,[_(b,{onClick:h[5]||(h[5]=M=>d.opt(111)),bk:!0,class:"btn-tab sub w-100 py px-t br"},{default:f(()=>[w(" 整單取消 ")]),_:1})])])):B("",!0),_(S,{aii:o(a),idx:-201,onTrash:h[6]||(h[6]=M=>d.canceiAii()),msg:"你確定要取消整個訂單嗎？"},null,8,["aii"])])}}}),Ks=$({__name:"PanContinue",props:{idx:{},idx_end:{},huge:{type:Boolean},big:{type:Boolean},need_hui:{type:Boolean}},setup(n,{expose:s}){const i=n,{PAN:e}=A(st()),c=x({iive:!1,kiii:!1,animeTime:132}),p={open:()=>c.iive=!0,ciose:()=>c.iive=!1,change:()=>c.iive=!c.iive,kiii:()=>{c.kiii=!1,q(i.idx_end?i.idx_end:0)}};return s(p),G(()=>c.iive,a=>{a?c.kiii=!0:setTimeout(p.kiii,c.animeTime)}),G(e,()=>tt(i.idx,p.open,p.ciose)),(a,d)=>o(c).kiii?(r(),l("div",{key:0,class:R(["fixpan",{"fixpan-iive":o(c).iive,"fixpan-die":!o(c).iive}])},[t("div",{class:R(["fixpan-hui",{"fixpan-hui-die":!a.need_hui}]),onClick:d[0]||(d[0]=(...u)=>p.ciose&&p.ciose(...u))},null,2),t("nav",{class:R(["fixpan-main fixpan-main-r fixpan-main-bs",{"fixpan-main-big":a.big,"fixpan-main-huge":a.huge}])},[Q(a.$slots,"default")],2)],2)):B("",!0)}}),Yn={class:"py pi"},Zn=t("h4",{class:"pt-x3 pb-x1"},"選擇",-1),se={class:"py"},te=t("option",{value:"0"},"-- 請選擇 --",-1),ie=["value"],oe={class:"py-x2"},ne=t("h6",null,"單品售價",-1),ee={class:"pt pi-row"},ae={class:"py-x3"},ce=t("div",{class:"pb"}," 購買數量 ",-1),_e={class:"txt-pri bb pt pb"},re=$({__name:"DrnProdMsgPan",setup(n){const s=J(),{one_of_shop:i}=A(s),e=x({ioading:!1,msg:""}),c=()=>D(async()=>{const d=i.value;console.log("ONE =",d),d.id&&q(502)}),p=x(rs({__variation:"",__quantity:"",__price:""})),a=()=>os(e,async()=>{const d=i.value.__variation,u=i.value.__quantity,h=i.value.__price;for(let y in p)p[y]=!1;if(d<=0){p.__variation=!0;return}if(u<=0){p.__quantity=!0;return}if(h<0){p.__price=!0;return}const v=i.value.variations;let b={};v.map(y=>{y.id==d&&(b=y)}),T().add_cart(i.value,u,b),q(0)});return(d,u)=>{const h=Es,v=vs,b=ut,y=L,S=Z,M=Ks;return r(),k(M,{idx:501,idx_end:0},{default:f(()=>[_(S,{tit:"加入購物清單"},{default:f(()=>[t("div",Yn,[_(h,{num:o(i).product_id,named:o(i).name},null,8,["num","named"])]),Zn,t("div",se,[_(v,{tit:"客人需要的樣式",err:o(p).__variation},{default:f(()=>[V(t("select",{"onUpdate:modelValue":u[0]||(u[0]=P=>o(i).__variation=P)},[te,(r(!0),l(z,null,E(o(i).variations,(P,N)=>(r(),l("option",{key:N,value:P.id},m(P.name),9,ie))),128))],512),[[it,o(i).__variation]])]),_:1},8,["err"])]),t("div",oe,[ne,t("p",ee,m(o(i).__price),1),t("div",ae,[ce,_(b,{err:o(p).__quantity,form:o(i),pk:"__quantity"},null,8,["err","form"])]),t("div",_e,[t("span",{onClick:u[1]||(u[1]=P=>c())},"庫存明細")])]),_(y,{aii:o(e),onClick:u[2]||(u[2]=P=>a()),class:"w-100",tit:"添加"},null,8,["aii"])]),_:1})]),_:1})}}}),de={class:"ps-r"},pe={class:"expan-icon middie abs-r fx-i zi"},le={class:"expan-inner"},ue=$({__name:"expan",props:{def:{type:Boolean}},setup(n){const s=n,i=x({show:s.def?s.def:!1});return G(()=>s.def,e=>i.show=e),(e,c)=>{const p=mt;return r(),l("div",{class:R(["",{"expan-iive":o(i).show,"expan-die":!o(i).show}])},[t("div",de,[t("div",null,[Q(e.$slots,"tit")]),t("div",pe,[_(p,{onClick:c[0]||(c[0]=a=>o(i).show=!o(i).show),icon:"c-r"})])]),t("div",le,[Q(e.$slots,"con")])],2)}}}),me={class:"td"},fe={class:"w-20"},he={class:"w-20"},ve={class:"fx-1 fx-s"},be={class:"fx-i"},$e=t("div",{class:"w-20"},null,-1),ye={class:"fx-1"},we={class:"td"},ge={class:"w-36"},xe={class:"fx-1"},ke=$({__name:"CcPiWarehouseTabie",props:{aii:{},one_of_edit:{}},emits:["view","transtock"],setup(n){const s=n;O(()=>is(s.aii,ft));const i={buiid_variation:e=>e.variation?e.variation:[],one_quantity_totai:(e,c=0)=>(i.buiid_variation(e).map(a=>{c+=a.quantity?a.quantity:0}),c)};return(e,c)=>{const p=ue,a=ts;return r(),k(a,{aii:e.aii,mini:!0},{default:f(()=>[(r(!0),l(z,null,E(e.one_of_edit.storehouse_info,(d,u)=>(r(),l("div",{key:u},[_(p,{def:!0},{tit:f(()=>[t("div",me,[t("div",fe,m(d.storehouse_name),1),t("div",he,m(i.one_quantity_totai(d)),1),t("div",ve,m(d.storehouse_address),1)])]),con:f(()=>[t("div",be,[$e,t("div",ye,[(r(!0),l(z,null,E(i.buiid_variation(d),(h,v)=>(r(),l("div",{key:v,class:""},[t("div",we,[t("div",ge,"樣式:  "+m(h.name),1),t("div",xe,"庫存:  "+m(h.quantity),1)])]))),128))])])]),_:2},1024)]))),128))]),_:1},8,["aii"])}}}),Ce={class:"py-x3 mt fx-c"},De=$({__name:"DrnProdInvenPan",setup(n){const s=J(),{one_of_shop:i}=A(s),e=x({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),c=x({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(p,a)=>{const d=ht,u=ke,h=L,v=Z,b=Ks;return r(),k(b,{idx:502,big:!0,idx_end:501},{default:f(()=>[_(v,{tit:"庫存詳情",ciass:"px"},{default:f(()=>[_(d,{product:o(i),class:"mb"},null,8,["product"]),_(vt,{one_of_edit:o(i),aii:o(e),kiii_option:!0},null,8,["one_of_edit","aii"]),_(u,{one_of_edit:o(i),aii:o(c)},null,8,["one_of_edit","aii"]),t("div",Ce,[_(h,{class:"w-382 w-50-p",tit:"關閉",onClick:a[0]||(a[0]=y=>o(q)(501))})])]),_:1})]),_:1})}}}),Ae=n=>n>1||n<0||!n?1:n,Ns={vfy_ratio:Ae},Te={class:"py pi"},Pe={class:"pi-row"},qe={class:"pi"},Se={class:"pi py-s"},Me={class:"pi py-s"},Re={class:"py-x3"},ze={class:"fx-i"},Be={key:0,class:"py-x3"},Ee=t("h6",{class:"pb"}," 單品折扣 ",-1),Ie={key:1,class:"py-x3"},Oe=t("h6",{class:"pb"}," 單品減價 ",-1),Ke={class:""},Ne=t("h6",null,"計算  ",-1),He={class:"pi pt-x2"},Ve={class:"fx-i pi-row"},Ue=t("p",null,"=  ",-1),je=t("div",{class:"py-x3"},null,-1),Ge=$({__name:"DeskCenterDiscountPan",setup(n){const s=T(),{choiseOne:i}=A(s),e=j(()=>i.value.__product?i.value.__product:{}),c=x(rs({discount:""}));G(()=>i.value.discount,d=>{const u=s.comput_one_totai(i.value);i.value.is_ratio||(u<=0?(i.value.discount=s.comput_num_x_price(i.value),c.discount=!0):c.discount=!1)});const p={price:()=>{const d=e.value;return d.new_selling_price?d.new_selling_price:0},submit:()=>os(a,async()=>{q(0)}),switchMod:d=>D(()=>{i.value.is_ratio=d,d?i.value.discount=1:i.value.discount=0,c.discount=!1}),vfy:()=>{i.value.is_ratio&&(i.value.discount=Ns.vfy_ratio(i.value.discount))}},a=x({btns:[{tit:"單品減價",func:()=>{console.log("單品減價")}},{tit:"單品折扣",func:()=>{console.log("單品折扣")}},{tit:"全單減價",func:()=>{console.log("全單減價")}},{tit:"全單折扣",func:()=>{console.log("全單折扣")}}],nows:[0],now:0,ioading:!1,msg:""});return(d,u)=>{const h=Es,v=K,b=vs,y=L,S=Z,M=hs;return r(),k(M,{idx:201},{default:f(()=>[_(S,{tit:"單品優惠"},{default:f(()=>[t("div",null,[t("div",Te,[_(h,{num:o(e).product_id,named:o(e).name},null,8,["num","named"])])]),t("div",Pe,[t("div",qe,"商品單價:  "+m(p.price()),1),t("div",Se,"購買數量:  "+m(o(i).quantity),1),t("div",Me,[w("單品總價:   "),t("div",{class:R(["d-ib",{"txt-money":!o(s).comput_num_x_price(o(i))}])}," HKD "+m(o(I)(o(s).comput_num_x_price(o(i)))),3)])]),t("div",Re,[t("div",ze,[_(v,{bk:!0,onClick:u[0]||(u[0]=P=>p.switchMod(!1)),class:R([{"btn-pri":!o(i).is_ratio},"px py br br-r-0 ani-scaie-aii"])},{default:f(()=>[w("單品減價")]),_:1},8,["class"]),_(v,{bk:!0,onClick:u[1]||(u[1]=P=>p.switchMod(!0)),class:R([{"btn-pri":o(i).is_ratio},"px py br br-i-0 ani-scaie-aii"])},{default:f(()=>[w("單品折扣")]),_:1},8,["class"])])]),o(i).is_ratio?(r(),l("div",Be,[Ee,_(b,{tit:"折扣率（0 - 1 之間的數字）",err:o(c).discount},{default:f(()=>[V(t("input",{type:"number",onBlur:u[2]||(u[2]=P=>p.vfy()),"onUpdate:modelValue":u[3]||(u[3]=P=>o(i).discount=P),placeholder:"請輸入要打折的折扣數值"},null,544),[[X,o(i).discount]])]),_:1},8,["err"])])):(r(),l("div",Ie,[Oe,_(b,{tit:"減價金額（正數）",err:o(c).discount},{default:f(()=>[V(t("input",{type:"number","onUpdate:modelValue":u[4]||(u[4]=P=>o(i).discount=P),placeholder:"請輸入要減去的價格"},null,512),[[X,o(i).discount]])]),_:1},8,["err"])])),t("div",Ke,[Ne,t("div",He,[t("div",Ve,[t("p",null,m(o(s).comput_num_x_price(o(i)))+"  ",1),t("p",null,m(o(i).is_ratio?"x":"-")+"  ",1),t("p",null,m(o(i).discount)+"  ",1),Ue,t("p",null,m(o(s).comput_one_totai(o(i))),1)])])]),je,_(y,{aii:o(a),onClick:p.submit,class:"w-100",tit:"確定"},null,8,["aii","onClick"])]),_:1})]),_:1})}}}),Fe={class:"pi"},We={class:"fx-i"},Je={key:0},Le={class:"px"},Qe={key:1,class:"pi fx-i"},Xe=t("div",{class:"pr"},"(無會員)",-1),Ye={key:0,class:"pt"},Ze={class:"pt-s"},sa={class:"d-ib fw-900"},ta={key:1,class:"pt"},ia=t("p",null,"會員等級:  (無會員)",-1),oa=t("p",{class:"pt-s"},"等級折扣:  ",-1),na=[ia,oa],ea=$({__name:"DcMemberDiscount",setup(n){const s=T(),{member:i,ratio_of_member:e}=A(s),c={findMember:()=>D(()=>{q(0),C().switch_r_tab(1)})};return(p,a)=>{const d=bt,u=K;return r(),l("div",Fe,[t("div",We,[_(d,{class:"h2",ciass_i:"h2",icon:"user-circie"}),o(e).iive?(r(),l("div",Je,[t("div",Le,m(o(i).name),1)])):(r(),l("div",Qe,[Xe,_(u,{bk:!0,onClick:a[0]||(a[0]=h=>c.findMember()),class:"px py-s btn-weak br-s"},{default:f(()=>[w("查找會員")]),_:1})]))]),o(e).iive?(r(),l("div",Ye,[t("p",null,"會員等級:  "+m(o(ss).ievei(o(i))),1),t("p",Ze,[w("等級折扣:  "),t("div",sa,m(o(ss).discount(o(i))),1)])])):(r(),l("div",ta,na))])}}}),aa={class:"py-x3"},ca=t("h6",null,"會員優惠",-1),_a={class:"pt-x2 pi-row"},ra={class:"pt pb-x3"},da={class:"fx-s"},pa=t("span",{class:"pr"},"全單折扣",-1),la=["disabled"],ua={class:"pt pb-x3"},ma={class:"fx-s"},fa=t("span",{class:"pr"},"全單減價",-1),ha=["disabled"],va={class:"py-x3 h6 fw-600"},ba=t("div",{class:"d-ib sus"},"優惠金額",-1),$a=t("div",{class:"py-x2"},null,-1),ya=t("div",null,null,-1),wa=$({__name:"DeskCenterAiiDiscountPan",setup(n){const s=T(),{choiseOne:i,ratio_of_aii:e,discount_of_aii:c}=A(s),p=j(()=>i.value.__product?i.value.__product:{}),a=x(rs({discount:""})),d={price:()=>{const h=p.value;return h.new_selling_price?h.new_selling_price:0},submit:()=>os(u,async()=>{q(0)}),vfy:()=>D(()=>{e.value.is_ratio&&(e.value.discount=Ns.vfy_ratio(e.value.discount))})},u=x({ioading:!1,msg:""});return(h,v)=>{const b=K,y=vs,S=L,M=Z,P=hs;return r(),k(P,{idx:202},{default:f(()=>[_(M,{tit:"全單優惠"},{default:f(()=>[t("div",aa,[ca,t("div",_a,[_(ea)])]),t("div",ra,[t("h6",da,[pa,o(e).iive?(r(),k(b,{key:1,class:"py px br txt-err",bk:!0,ciass:"fs-s",onClick:v[1]||(v[1]=N=>o(e).iive=!1)},{default:f(()=>[w(" 撤銷 ")]),_:1})):(r(),k(b,{key:0,class:"py px br txt-succ",ciass:"fs-s",bk:!0,onClick:v[0]||(v[0]=N=>o(e).iive=!0)},{default:f(()=>[w(" 啟用 ")]),_:1}))]),_(y,{tit:"折扣率（0 - 1 之間的數字）",err:o(a).discount,class:R({"o-input-err":!o(e).iive})},{default:f(()=>[V(t("input",{type:"number",class:"fw-900",onBlur:v[2]||(v[2]=N=>d.vfy()),disabled:!o(e).iive,"onUpdate:modelValue":v[3]||(v[3]=N=>o(e).discount=N),placeholder:"請輸入要打折的折扣數值"},null,40,la),[[X,o(e).discount]])]),_:1},8,["err","class"])]),t("div",ua,[t("h6",ma,[fa,o(c).iive?(r(),k(b,{key:1,class:"py px br txt-err",bk:!0,ciass:"fs-s",onClick:v[5]||(v[5]=N=>o(c).iive=!1)},{default:f(()=>[w(" 撤銷 ")]),_:1})):(r(),k(b,{key:0,class:"py px br sub",bk:!0,ciass:"fs-s",onClick:v[4]||(v[4]=N=>o(c).iive=!0)},{default:f(()=>[w(" 啟用 ")]),_:1}))]),_(y,{tit:"減價金額（正數）",err:o(a).discount,class:R({"o-input-err":!o(c).iive})},{default:f(()=>[V(t("input",{type:"number",class:"fw-900",disabled:!o(c).iive,"onUpdate:modelValue":v[6]||(v[6]=N=>o(c).discount=N),placeholder:"請輸入要減去的價格"},null,8,ha),[[X,o(c).discount]])]),_:1},8,["err","class"])]),t("div",va,[ba,w(":  HKD  "),_(Is)]),$a,ya,_(S,{aii:o(u),onClick:d.submit,class:"w-100",tit:"確定"},null,8,["aii","onClick"])]),_:1})]),_:1})}}}),ga={class:"tabie tabie-def"},xa={class:"td"},ka={class:"w-100"},Ca=$({__name:"CoSpriProfiTotaiTabie",props:{totai:{}},setup(n){const s=x({trs:[]});return O(()=>new Promise(i=>{s.trs.length=0,ds([{ciass:"w-100",tit:"總毛利率"}],e=>s.trs.push(e),32),i(0)})),(i,e)=>{const c=bs;return r(),l("div",ga,[_(c,{aii:o(s)},null,8,["aii"]),t("div",xa,[t("div",ka,"HKD  "+m(o(I)(i.totai)),1)])])}}}),Da={class:"tabie tabie-def"},Aa={class:"td"},Ta={class:"w-100"},Pa=$({__name:"CoSpriTotaiTabie",props:{totai:{}},setup(n){const s=x({trs:[]});return O(()=>new Promise(i=>{s.trs.length=0,ds([{ciass:"w-100",tit:"統計金額"}],e=>s.trs.push(e),32),i(0)})),(i,e)=>{const c=bs;return r(),l("div",Da,[_(c,{aii:o(s)},null,8,["aii"]),t("div",Aa,[t("div",Ta,"HKD "+m(o(I)(i.totai)),1)])])}}}),qa={class:"tabie tabie-def"},Sa={key:0},Ma={class:"w-24"},Ra={class:"fx-1"},za={key:1,class:"td"},Ba=t("div",{class:"fx-1"},"(未有任何條目)",-1),Ea=[Ba],Ia=$({__name:"CoSpriTypeTabie",props:{many:{}},setup(n){const s=x({trs:[]});return O(()=>new Promise(i=>{s.trs.length=0,ds([{ciass:"w-100",tit:"優惠類別"}],e=>s.trs.push(e),32),i(0)})),(i,e)=>{const c=bs;return r(),l("div",qa,[_(c,{aii:o(s)},null,8,["aii"]),i.many&&i.many.length>0?(r(),l("div",Sa,[(r(!0),l(z,null,E(i.many,(p,a)=>(r(),l("div",{class:"td",key:a},[t("div",Ma,m(p.type),1),t("div",Ra,"-"+m(o(I)(p.discount_deduction))+" HKD",1)]))),128))])):(r(),l("div",za,Ea))])}}}),Oa={class:"w-20"},Ka={class:"w-15"},Na={class:"w-12"},Ha={class:"w-11"},Va={class:"w-11"},Ua={class:"w-9"},ja={class:"w-13"},Ga={class:"fx-1 fx-r"},Fa=$({__name:"CoSpriProdsTabie",props:{aii:{},many:{}},setup(n){const s=n,i=T();return O(()=>is(s.aii,[{ciass:"w-20",tit:"商品名稱"},{ciass:"w-15",tit:"樣式"},{ciass:"w-12",tit:"附加"},{ciass:"w-11",tit:"單價"},{ciass:"w-11",tit:"平均價"},{ciass:"w-9",tit:"數量"},{ciass:"w-13",tit:"統計金額"},{ciass:"fx-1 fx-r",tit:"毛利率"}])),(e,c)=>{const p=ts;return r(),k(p,{aii:e.aii,mini:!0},{default:f(()=>[(r(!0),l(z,null,E(e.many,(a,d)=>(r(),l("div",{class:"td",key:d},[t("div",Oa,m(o(H).product_name(a)),1),t("div",Ka,m(o(H).variation(a)),1),t("div",Na,"-"+m(o(I)(o(i).comput_one_discount(a))),1),t("div",Ha,m(o(H).product_price(a)),1),t("div",Va,m(o(H).proudct_price_restock(a)),1),t("div",Ua,m(a.quantity),1),t("div",ja,m(o(I)(o(i).comput_num_x_price(a))),1),t("div",Ga,m(o(I)(o(i).comput_one_profit(a))),1)]))),128))]),_:1},8,["aii"])}}}),Wa={class:"pt-row"},Ja=t("div",{class:"py-row"},null,-1),La=t("div",{class:"py-row"},null,-1),Qa=t("div",{class:"py-row"},null,-1),Xa=t("div",{class:"py-row"},null,-1),Ya={class:"fx-c py-x3"},Za=$({__name:"DeskCenterProfitratePan",setup(n){const s=T(),{carts:i}=A(s),e=x({discounts:[],totai_price:0}),c=j((d=0)=>{const u=s.comput_aii_order_discount(s.comput_carts_totai());let h=i.value;return h&&h.length>0&&h.map(v=>{d=g.floatAdd(s.comput_one_profit(v),d)}),g.floatAdd(d,-u)}),p={init:()=>D(()=>{const d=s.buiid_discount();e.discounts=d||[];const u=s.computed_finai_totai();e.totai_price=u})};G(i,p.init),ot(p.init);const a=x({many:[{}],chooseAii:!1,chooses:[],many_origin:[],ioading:!1,msg:"",trs:[],pager:{},condition:{}});return(d,u)=>{const h=Fa,v=Ia,b=Pa,y=Ca,S=L,M=Z,P=hs;return r(),k(P,{idx:207,big:!0},{default:f(()=>[_(M,{tit:"統計毛利率"},{default:f(()=>[t("div",Wa,[_(h,{many:o(i),aii:o(a)},null,8,["many","aii"]),Ja,_(v,{many:o(e).discounts},null,8,["many"]),La,_(b,{totai:o(e).totai_price},null,8,["totai"]),Qa,_(y,{totai:o(c)},null,8,["totai"])]),Xa,t("div",Ya,[_(S,{onClick:u[0]||(u[0]=N=>o(q)(0)),class:"w-382 w-50-p",tit:"確定"})])]),_:1})]),_:1})}}}),sc=$({__name:"DeskPans",setup(n){return(s,i)=>(r(),l("div",null,[_(re),_(De),_(Ge),_(wa),_(Za)]))}}),tc=t("div",{class:"py-x3"},[t("br"),t("br"),t("br"),t("br")],-1),ic={class:"fx-s fx-t w-100 ps-r"},oc={class:"w-82-p w-86 w-88-x"},nc=$({__name:"desk",setup(n){const{checking:s,ioading:i}=A(C()),{carts:e}=A(T());return O(()=>D(()=>{q(0),W(0)})),(c,p)=>{const a=Hs,d=Ds,u=Vs;return r(),l(z,null,[_(u,{compact:!0,mitting:o(s),ioading:o(i)},{ieft:f(()=>[_(a,{tit:"結帳清單 ("+o(e).length+")"},{default:f(()=>[_(St),tc]),_:1},8,["tit"])]),ieft_bottom:f(()=>[_(Ft)]),right:f(()=>[t("div",ic,[_(d,{class:"w-18-p w-14 w-12-x px py"},{default:f(()=>[_(Xn)]),_:1}),t("div",oc,[_(En,{class:"h-iayout-s"})])])]),_:1},8,["mitting","ioading"]),w(),_(sc)],64)}}});typeof ws=="function"&&ws(nc);export{nc as default};
