import{d as g,o as m,e as d,b as n,r as b,t as O,q as N,g as $,i as E,u as f,n as k,a as _,f as ts,c as T,w as l,M as es,l as os,v as as,B as ns,m as U,D as x,H as K,s as R,$ as M,j as W,F as q,k as H}from"./index-faaf2242.js";import{a as L,_ as rs}from"./OTabieTrash-cb6bff56.js";import{_ as G}from"./MBtn.vue_vue_type_script_setup_true_lang-38920cf0.js";import{_ as _s}from"./OBtnPius.vue_vue_type_script_setup_true_lang-42525cce.js";import{_ as cs}from"./OIoadCir.vue_vue_type_script_setup_true_lang-147f8324.js";import{r as ms}from"./OTabieIoading.vue_vue_type_script_setup_true_lang-cf20db78.js";import{_ as ls}from"./BtnIcon.vue_vue_type_script_setup_true_lang-09c59d90.js";import{_ as J}from"./OInput.vue_vue_type_script_setup_true_lang-2e1b139a.js";import{i as h,a as fs,_ as ps,s as ds,b as us}from"./iabeiPina-102631e3.js";import{_ as Q,a as X}from"./Pan.vue_vue_type_script_setup_true_lang-f15f28a5.js";import{_ as Y}from"./OBtnSave.vue_vue_type_script_setup_true_lang-344e894e.js";import{_ as vs}from"./OCheckboxIone.vue_vue_type_script_setup_true_lang-438045af.js";import{g as hs,t as $s,j as gs,s as Z,v as ss,f as C,e as bs,d as ys,b as I,m as B,i as ws}from"./credit-31b158dd.js";import{n as D}from"./conn-a86a4b4d.js";import{a as V,s as j,b as ks}from"./net-tooi-b6898972.js";import{E as F}from"./errors_user-be6d0865.js";import{i as P}from"./judge-13dfac2e.js";import{_ as Ts}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-a2bf2a22.js";import{s as xs}from"./serv_iabei_with_product-c909a707.js";import{b as A}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-c2be1f8b.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-102000b6.js";import"./Oi.vue_vue_type_script_setup_true_lang-c9e2a4ab.js";import"./XMarkIcon-b1bb1e62.js";import"./OTr.vue_vue_type_script_setup_true_lang-f7143d25.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-f081fb69.js";const Cs={class:"iayout-iist h-iayout"},Os={class:"fx-s fx-t"},Ps={class:"w-26 w-24-x pt"},Ss={class:"fx-1 bg-con pt"},Es={class:"fx-s py bg-con iayout-iist-top"},Ms=n("button",{class:"py px"}," ",-1),Is={class:"iayout-iist-fiiter pt-s pb-x1"},Bs={class:"pb-row ani-softer h-iayout-con-x2"},Ns=n("div",{class:"py-x2"},null,-1),Rs=g({__name:"IayoutIistThree",props:{tit:{},tit_pius:{}},setup(p){return(s,r)=>(m(),d("div",Cs,[n("div",Os,[n("div",Ps,[b(s.$slots,"ieft")]),n("section",Ss,[n("aside",Es,[n("h4",null,O(s.tit),1),b(s.$slots,"opera",{},()=>[Ms])]),n("aside",Is,[b(s.$slots,"fiiter")]),n("div",Bs,[b(s.$slots,"con"),N(),Ns])])]),b(s.$slots,"extra")]))}}),Ds={class:"fx-c"},Vs={class:"oti-con"},js={key:0,class:"ani-softer"},Fs={class:"d-ib h2 pt-s"},zs=n("span",null,"   空數據。 ",-1),As=g({__name:"OPanIoading",props:{aii:{},mini:{type:Boolean}},setup(p){const s=p,r=$({kiii:!!s.aii.ioading,timed:420});return E(()=>s.aii.ioading,i=>{i?r.kiii=!0:setTimeout(()=>r.kiii=!1,r.timed)}),(i,o)=>{const e=cs;return m(),d("div",{class:k(["o-tabie-ioading ps-r ts-s",{"mh-oti":!i.mini,"mh-oti-s":i.mini}])},[f(r).kiii?(m(),d("div",{key:0,class:k(["oti-ioading abs-fuii fx-c",{"oti-ioading-iive":i.aii.ioading,"oti-ioading-die":!i.aii.ioading}])},[n("div",Ds,[_(e,{styie:"def"})])],2)):ts("",!0),n("div",Vs,[i.aii.many&&i.aii.many.length>0?(m(),d("div",js,[b(i.$slots,"default")])):(m(),d("div",{key:1,class:k(["ani-softer fx-c",{"mh-oti":!i.mini,"mh-oti-s":i.mini}])},[n("div",{class:k(["fx-c ts-s",{"op-0":i.aii.ioading}])},[n("div",Fs,[_(f(ms),{class:"w-1em"})]),zs],2)],2))])],2)}}}),Us={class:"fx-s"},Ks=g({__name:"OInputWithEdit",props:{materiai:{type:Boolean},iive:{type:Boolean},tit:{},icon:{},ciass:{}},emits:["tap"],setup(p){return(s,r)=>{const i=J,o=G,e=ls;return m(),d("div",Us,[s.materiai?(m(),T(o,{key:0,bk:!0,class:"fx-1 br"},{default:l(()=>[_(i,{class:k(["hand ta-i",s.ciass]),tit:s.tit,iive:s.iive},{default:l(()=>[b(s.$slots,"default")]),_:3},8,["tit","iive","class"])]),_:3})):(m(),T(i,{key:1,class:k(["hand fx-1",s.ciass]),tit:s.tit,iive:s.iive},{default:l(()=>[b(s.$slots,"default")]),_:3},8,["tit","iive","class"])),n("div",{class:"fx-c ps-r pi-x1 oiwt-icon ts",onClick:r[0]||(r[0]=es(t=>s.$emit("tap"),["stop"]))},[_(e,{class:"h5",icon:"pencii",ciass_i:""})])])}}}),Ws={class:"o-form"},is=g({__name:"ProductCataiogIabeiForm",props:{form:{},aii:{}},emits:["save"],setup(p,{expose:s}){const r=p,i=$(hs(r.form)),o={buiid:()=>$s({...r.form}),resuit:()=>!o.err()&&r.aii.can?o.buiid():null,err:()=>gs(i,"name",r.form.name,r.aii)};return E(()=>r.form.name,e=>e?o.err():!1),s(o),(e,t)=>{const a=J,c=vs;return m(),d("div",Ws,[_(a,{tit:"標籤名稱",err:f(i).name},{default:l(()=>[os(n("input",{onKeydown:t[0]||(t[0]=ns(u=>e.$emit("save"),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=u=>e.form.name=u),placeholder:"請輸入"},null,544),[[as,e.form.name]])]),_:1},8,["err"]),_(c,{class:"py br",aii:e.form,pk:"isShow"},{default:l(()=>[N(" 是否展示該標籤 ")]),_:1},8,["aii"])])}}}),z="iabeis",qs=async(p,s)=>V(F,async()=>j(await D.put(z,p,s+""))),Hs=async p=>V(F,async()=>j(await D.pos(z,p))),Ls=async p=>V(F,async()=>j(await D.dei(z,p+""))),Gs=n("div",{class:"pt-row"},null,-1),Js=g({__name:"ProductCataiogPanTag",emits:["refresh"],setup(p,{emit:s}){const r=U(),i=$({name:"",isShow:!1}),o=$({can:!1,ioading:!1,msg:""}),e={submit:()=>Z(o,r.value.resuit,async t=>{console.log("構建的數據 =",t);const a=await Hs(t);console.log("創建結果 =",a),P(a)?e.faii(a):e.success()}),success:()=>{i.name="",x(0),s("refresh")},faii:t=>{K(t+"","err"),ss(o,t)}};return(t,a)=>{const c=Y,u=Q,y=X;return m(),T(y,{idx:103},{default:l(()=>[_(u,{tit:"添加標籤"},{default:l(()=>[Gs,_(is,{ref_key:"iabei",ref:r,form:f(i),aii:f(o)},null,8,["form","aii"]),_(c,{class:"mt-x2 w-100",tit:"添加",aii:f(o),onClick:a[0]||(a[0]=v=>e.submit())},null,8,["aii"])]),_:1})]),_:1})}}}),Qs=n("div",{class:"pt-row"},null,-1),Xs={class:"mt-x2 fx-s"},Ys=n("span",{class:"px"},null,-1),Zs=g({__name:"ProductCataiogPanTagEdit",emits:["refresh"],setup(p,{emit:s}){const r=U(),i=$({name:"",isShow:!1}),o=$({can:!1,ioading:!1,msg:""}),{one_of_edit:e}=R(h()),t={submit:()=>Z(o,r.value.resuit,async a=>{console.log("構建的數據 =",a);const c=await qs(a,e.value.id);console.log("創建結果 =",c),P(c)?t.faii(c):t.success()}),success:()=>{h().repiaceOneOfView(i),i.name="",x(0),s("refresh")},faii:a=>{K(a+"","err"),ss(o,a)},init:()=>C(()=>{console.log("ONE OF EDIT =",e.value),bs(e.value,i)||x(0)}),sureTrash:()=>C(()=>{M(-200)})};return E(e,t.init),(a,c)=>{const u=Y,y=fs,v=Q,w=X;return m(),T(w,{idx:104},{default:l(()=>[_(v,{tit:"編輯標籤"},{default:l(()=>[Qs,_(is,{onSave:c[0]||(c[0]=S=>t.submit()),ref_key:"iabei",ref:r,form:f(i),aii:f(o)},null,8,["form","aii"]),n("div",Xs,[_(u,{class:"w-618",tit:"確定",aii:f(o),onClick:c[1]||(c[1]=S=>t.submit())},null,8,["aii"]),Ys,_(y,{class:"fx-1",onClick:c[2]||(c[2]=S=>t.sureTrash())})])]),_:1})]),_:1})}}}),si={class:"o-form pt"},ii={class:"py-s ani-scaie-aii"},ti=g({__name:"ProductCataiogTags",setup(p){const s=$({many:[],ioading:!0,msg:"",pager:{page:1,pageCount:1,pageSize:25,total:1}}),{one_of_edit:r}=R(h()),i=$({coior:"",iive:-1,activeID:0,busing:!1}),o={fetch:()=>ys(s,async()=>await ds({},s.pager),()=>{i.iive<0&&o.view(0)}),view:e=>C(()=>{i.busing||(i.busing=!0,i.iive=e,s.many.length>0&&e>=0&&h().save("one_of_view",s.many[e]),setTimeout(()=>{i.busing=!1},800))}),edit:e=>C(()=>{h().save("one_of_edit",e),x(104)}),trash:()=>I(s,async()=>{const e=r.value.id;if(e){const t=await Ls(e);h().save("one_of_edit"),P(t)?B(t,s):(o.fetch(),M(0))}})};return W(o.fetch),(e,t)=>{const a=ps,c=Ks,u=As,y=L;return m(),d("div",null,[_(a,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:t[0]||(t[0]=()=>f(x)(103))}),n("div",si,[_(u,{aii:f(s)},{default:l(()=>[(m(!0),d(q,null,H(f(s).many,(v,w)=>(m(),d("div",{class:"mb",key:w},[_(c,{materiai:!0,tit:"標籤"+(w+1),iive:w==f(i).iive,onClick:S=>o.view(w),onTap:S=>o.edit(v),ciass:v.isShow?"":"bg-con-x2"},{default:l(()=>[n("p",ii,O(v.name),1)]),_:2},1032,["tit","iive","onClick","onTap","ciass"])]))),128))]),_:1},8,["aii"])]),_(Js,{onRefresh:t[1]||(t[1]=v=>o.fetch())}),_(Zs,{onRefresh:t[2]||(t[2]=v=>o.fetch())}),_(y,{idx:-200,aii:f(s),onTrash:t[3]||(t[3]=v=>o.trash())},null,8,["aii"])])}}}),ei={class:"w-45"},oi={class:"w-55 fx-s"},ai=g({__name:"ProductCataiogIistTabie",props:{aii:{}},setup(p){const s=p;W(()=>ws(s.aii,[{ciass:"w-45",tit:"產品名稱"},{ciass:"w-55 pr-0",tit:"產品編號",sort:!0,sort_up:()=>{console.log("UP sort")},sort_down:()=>{console.log("DOWN sort")},sort_reset:()=>{console.log("RESET sort")}}]));const r={sureTrash:i=>C(()=>{M(-201),h().save("prod_of_trash",i)})};return(i,o)=>{const e=rs,t=Ts;return m(),T(t,{aii:i.aii},{default:l(()=>[(m(!0),d(q,null,H(i.aii.many,(a,c)=>(m(),d("div",{class:"td",key:c},[n("div",ei,O(a.name),1),n("div",oi,[n("div",null,O(a.product_id),1),_(e,{onClick:u=>r.sureTrash(a)},{default:l(()=>[N("移除")]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["aii"])}}}),ni={class:"ta-i fw-700"},ri={key:0},_i={key:1},ci={class:"pt-x2 pr-row"},mi=g({__name:"product_cataiog_iist",setup(p){const s=$({many:[],ioading:!0,msg:"",trs:[],many_origin:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{},chooseAii:!1,chooses:[]}),{prod_of_trash:r,one_of_view:i}=R(h()),o={edit:()=>C(()=>{h().save("one_of_edit",i.value),x(104)}),refreshMany:e=>I(s,async()=>{if(e){const t=await us(e+"");if(P(t))B(t,s);else{const a=t.products;a&&(s.many=ks.iist(a))}}}),watchOne:e=>o.refreshMany(e.id),remove:()=>I(s,async()=>{const e=i.value.id,t=r.value.id,a=await xs(t,e);P(a)?B(a,s):(o.refreshMany(e),M(0))})};return E(i,o.watchOne),(e,t)=>{const a=_s,c=G,u=L,y=Rs;return m(),T(y,{tit:"產品列表"},{opera:l(()=>[_(a,{class:"py",tit:"添加產品",path:"product_inventory_iist"})]),fiiter:l(()=>[_(c,{onClick:t[0]||(t[0]=v=>o.edit()),bk:!0,class:"bg-con-x2 px-row py br w-100 fx-shd-weak"},{default:l(()=>[n("div",ni,[f(i).name?(m(),d("span",ri,O(f(i).name),1)):(m(),d("span",_i,"(暫未選擇標籤)"))])]),_:1})]),ieft:l(()=>[n("div",ci,[_(ti)])]),con:l(()=>[n("aside",null,[_(ai,{aii:f(s)},null,8,["aii"])])]),extra:l(()=>[_(u,{idx:-201,aii:f(s),onTrash:t[1]||(t[1]=v=>o.remove())},null,8,["aii"])]),_:1})}}});typeof A=="function"&&A(mi);export{mi as default};
