import{_ as Z,a as ii,b as oi}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-0c70e207.js";import{_ as ti}from"./OPager.vue_vue_type_script_setup_true_lang-0bcd335f.js";import{_ as ei}from"./OBtnPius.vue_vue_type_script_setup_true_lang-19f6359d.js";import{_ as ni,a as si}from"./product_trs-54b7fb36.js";import{_ as ai}from"./OiX2.vue_vue_type_script_setup_true_lang-f3408af6.js";import{_ as ri}from"./OSearch.vue_vue_type_script_setup_true_lang-81ff2ed4.js";import{_ as _i}from"./OSeiect.vue_vue_type_script_setup_true_lang-3d0e8445.js";import{g as ci}from"./giobaiPina-ed0d1340.js";import{q as pi,O as mi,x as li,P as N,E as ui,ai as di,aj as fi,d as k,s as j,N as I,f as S,n as q,o as h,c as P,a as n,A as U,i as s,b as e,w as l,k as b,M as wi,U as bi,m as hi,T as vi,ak as M,u as H,y as D,C as $i,F as gi,D as yi,t as $,af as V,ag as A,ah as F,S as ki,g as x,a6 as Y,h as f,G as g,H as y,ae as w,a2 as Pi,e as xi,Q as Ci}from"./index-51b05e02.js";import{_ as Vi}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-80fb364a.js";import{_ as Ti}from"./OTabieEdit.vue_vue_type_script_setup_true_lang-7b4cc8b0.js";import{_ as Ui}from"./OTabieDetaii.vue_vue_type_script_setup_true_lang-a112fc33.js";import{pageProducEditPina as O}from"./pageProducEditPina-de677e6d.js";import{pageProductInstockPina as z}from"./pageProductInstockPina-be886b78.js";import{v as Ii}from"./view-56183974.js";import{_ as G,a as K}from"./Pan.vue_vue_type_script_setup_true_lang-516904bc.js";import{_ as Ri}from"./OBtnSave.vue_vue_type_script_setup_true_lang-ba5dfce2.js";import{_ as L}from"./OInputI.vue_vue_type_script_setup_true_lang-1ea333b0.js";import{_ as Ai}from"./OInput.vue_vue_type_script_setup_true_lang-c504b6b8.js";import{_ as Di}from"./OTime.vue_vue_type_script_setup_true_lang-e6c9cdd8.js";import{a as Ei,_ as Si}from"./ProduNewInstockTabie.vue_vue_type_script_setup_true_lang-5540381e.js";import{_ as Mi}from"./OTrPure.vue_vue_type_script_setup_true_lang-b8289e6c.js";import{c as Fi}from"./choiseOnePina-1f97aa02.js";import{_ as Oi,a as Bi,b as Ni}from"./ProduInstockTabie.vue_vue_type_script_setup_true_lang-35cb7a81.js";import{_ as ji}from"./CoPidProductExpan.vue_vue_type_script_setup_true_lang-11526dde.js";import{s as qi}from"./serv_product_iist-e26fb53f.js";import{b as B}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-2a09be64.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-b72ee8a3.js";import"./Oi.vue_vue_type_script_setup_true_lang-b644ab0a.js";import"./DocumentTextIcon-20e14b77.js";import"./XMarkIcon-48126e72.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-58d5bc07.js";import"./datepicker.esm-9ff06732.js";import"./serv_iabei_iist-fc0a8563.js";import"./serv_suppiier_iist-917aa191.js";import"./serv_user_iist-1efde6ea.js";import"./serv_warehouse_iist-7c2c8c44.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-164ea6d2.js";import"./OTr.vue_vue_type_script_setup_true_lang-d7733bf3.js";import"./serv_iabei_with_product-c155a551.js";import"./utii-357bc6ab.js";import"./serv_variation_with_product-426f2827.js";import"./errors_product-174667b5.js";const Hi="excei_products",Yi=async c=>pi(ui,async()=>mi(await li.get(Hi,N.buiid_pager(c,{})))),zi=(c="_")=>fi().format("YYYY"+c+"MM"+c+"DD"+c+"HH"+c+"mm"),Gi=(c,i="產品_",_="xlsx")=>{const t=`${i}${zi()}.${_}`;let o=document.createElement("a");o.download=t,o.style.visibility="hidden",o.href=c,document.body.appendChild(o),o.click(),setTimeout(()=>document.body.removeChild(o),1200)},Ki=async c=>{try{console.log(c);let i={};if(i){const _=i&&i.data?i.data:"";console.log("導出结果 =",_),_&&Gi(di+"/"+_)}}catch(i){console.log(i)}},Li={class:"fx-s"},Qi={class:"fx-1 row fx-i"},Ji={class:"pi fx-c"},Wi=n("span",{class:"px-s"},null,-1),Xi=n("span",{class:"pi-n"},"印列產品列表",-1),Zi=k({__name:"ProductIistFiiter",props:{aii:{}},emits:["search"],setup(c,{emit:i}){const _=c,t={search:()=>_.aii.ioading?void 0:i("search"),reset:()=>b(()=>{wi({},_.aii.condition),t.search()})},{iabeis:o,suppiiers:a}=j(ci()),p=I(()=>M(o.value,"標籤")),u=I(()=>M(a.value,"供應商")),m=S(0),r=S(!1);q(()=>bi(7,()=>m.value+=1,32));const C=()=>b(async()=>{if(!r.value){r.value=!0;const v=await Yi(_.aii.condition);console.log("RES =",v),hi(v)?vi(v+""):Ki(v),r.value=!1}});return(v,d)=>{const R=_i,E=Z,Q=ri,J=ii,W=ai,X=ni;return h(),P("div",Li,[n("div",Qi,[n("div",{class:U(["w-20 op-0",{"ani-fiiter":s(m)>=0}])},[e(R,{class:"input w-100 ip-fiiter fix-seiect",onChange:d[0]||(d[0]=T=>t.search()),form:v.aii.condition,pk:"label",many:s(p)},null,8,["form","many"])],2),n("div",{class:U(["w-20 op-0",{"ani-fiiter":s(m)>=1}])},[e(R,{class:"input w-100 ip-fiiter fix-seiect",onChange:d[1]||(d[1]=T=>t.search()),form:v.aii.condition,pk:"supplier",many:s(u)},null,8,["form","many"])],2),n("div",{class:U(["w-21 w-28-p op-0",{"ani-fiiter":s(m)>=2}])},[e(E,{onResuit:d[2]||(d[2]=T=>t.search()),class:"input ip-fiiter",form:v.aii.condition,pk:"new_restock_date",pchd:"最新入貨日期"},null,8,["form"])],2),e(Q,{onResuit:d[3]||(d[3]=T=>t.search()),pchd:"請輸入產品編號、名稱進行搜索",class:U(["fx-1 op-0 ip-fiiter",{"ani-fiiter":s(m)>=3}]),aii:v.aii.condition,pk:"search"},null,8,["class","aii"])]),n("div",Ji,[e(J,{aii:v.aii,onClick:d[4]||(d[4]=T=>t.search())},null,8,["aii"]),Wi,e(X,{onClick:d[5]||(d[5]=T=>C()),class:U(["py btn-iong op-0",{"ani-fiiter":s(m)>=5}])},{default:l(()=>[e(W,{class:"i h4",icon:"excei"}),Xi]),_:1},8,["class"])])])}}}),io={class:"w-9"},oo={class:"w-12"},to={class:"w-10"},eo={class:"w-15 pr-s"},no={class:"w-11"},so={class:"w-11"},ao={class:"w-9"},ro={class:"w-10"},_o={class:"fx-1 fx-s"},co={class:"d-ib fx-wp pi ta-r"},po={class:"fx-r w-100"},mo=k({__name:"ProductIistTabie",props:{aii:{}},setup(c){const i=c,_=H();q(()=>yi(i.aii,[{ciass:"w-9",tit:"產品編號",sort_up:()=>b(()=>V(i.aii.many,"product_id",!0)),sort_down:()=>b(()=>V(i.aii.many,"product_id")),sort_reset:()=>A(i.aii)},{ciass:"w-12",tit:"產品名稱"},{ciass:"w-10",tit:"供應商"},{ciass:"w-15",tit:"最新入貨時間",sort_up:()=>b(()=>F(i.aii.many,"new_restock_date",!0)),sort_down:()=>b(()=>F(i.aii.many,"new_restock_date")),sort_reset:()=>A(i.aii)},{ciass:"w-11",tit:"最新入貨價錢"},{ciass:"w-11",tit:"最新最低價錢"},{ciass:"w-9",tit:"最新售價",sort_up:()=>b(()=>V(i.aii.many,"new_selling_price",!0)),sort_down:()=>b(()=>V(i.aii.many,"new_selling_price")),sort_reset:()=>A(i.aii)},{ciass:"w-10",tit:"入貨平均價"},{ciass:"fx-1",tit:"庫存",sort_up:()=>b(()=>V(i.aii.many,"total_stock",!0)),sort_down:()=>b(()=>V(i.aii.many,"total_stock")),sort_reset:()=>A(i.aii)}]));const t={editFuture:async o=>{O().ciear(),await O().fetchOne(o)},dump:()=>_.push("/admin/product_inventory_iist/edit"),fetchOne:async o=>{await z().fetchOne(o)&&ki(101)}};return(o,a)=>{const p=Ui,u=Ti,m=Vi;return h(),D(m,{aii:o.aii},{default:l(()=>[(h(!0),P(gi,null,$i(o.aii.many,(r,C)=>(h(),P("div",{class:"td",key:C},[n("div",io,$(r.product_id),1),n("div",oo,$(r.name),1),n("div",to,$(r.new_supplier),1),n("div",eo,$(s(Ii)(r.new_restock_date)),1),n("div",no,$(r.new_restock_price),1),n("div",so,$(r.new_lowest_price),1),n("div",ao,$(r.new_selling_price),1),n("div",ro,$(r.average_restock_price),1),n("div",_o,[n("div",null,$(r.total_stock),1),n("div",co,[e(p,{id:r.id,func:t.fetchOne,class:"w-100",tit:"庫存詳情"},null,8,["id","func"]),n("div",po,[e(u,{class:"txt-pri",id:r.id,func:t.editFuture,onTap:t.dump},null,8,["id","func","onTap"])])])])]))),128))]),_:1},8,["aii"])}}}),lo={class:"o-form"},uo=k({__name:"CoProductInventAiiocatForm",props:{form:{},aii:{}},setup(c){const i=c,_=["num_warehouse"],t=x(Y(i.form));return f(()=>i.aii.sign,()=>{_.map(o=>{if(w(t,o,i.form[o],i.aii)){i.aii.can=!1;return}}),i.aii.can=!0}),f(()=>i.form.num_warehouse,o=>w(t,"num_warehouse",o,i.aii)),(o,a)=>{const p=L;return h(),P("div",lo,[e(p,{tit:"倉庫數量",err:s(t).num_warehouse,icon:"store"},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[0]||(a[0]=u=>o.form.num_warehouse=u),type:"number",placeholder:"請輸入"},null,512),[[y,o.form.num_warehouse]])]),_:1},8,["err"]),e(p,{tit:"A店鋪數量",err:s(t).num_a_shop,icon:"store"},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[1]||(a[1]=u=>o.form.num_a_shop=u),type:"number",placeholder:"請輸入"},null,512),[[y,o.form.num_a_shop]])]),_:1},8,["err"]),e(p,{tit:"B店鋪數量",err:s(t).num_b_shop,icon:"store"},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[2]||(a[2]=u=>o.form.num_b_shop=u),type:"number",placeholder:"請輸入"},null,512),[[y,o.form.num_b_shop]])]),_:1},8,["err"])])}}}),fo={class:"o-form"},wo=k({__name:"CoProductIncomeCreatForm",props:{form:{},aii:{}},setup(c){const i=c,_=["in_date","in_time","suppiier_number","suppiier_name","name","number","in_price","iow_price","price","invent"],t=x(Y(i.form));return f(()=>i.aii.sign,()=>{_.map(o=>{if(w(t,o,i.form[o],i.aii)){i.aii.can=!1;return}}),i.aii.can=!0}),f(()=>i.form.in_date,o=>w(t,"in_date",o,i.aii)),f(()=>i.form.in_time,o=>w(t,"in_time",o,i.aii)),f(()=>i.form.suppiier_number,o=>w(t,"suppiier_number",o,i.aii)),f(()=>i.form.suppiier_name,o=>w(t,"suppiier_name",o,i.aii)),f(()=>i.form.name,o=>w(t,"name",o,i.aii)),f(()=>i.form.number,o=>w(t,"number",o,i.aii)),f(()=>i.form.in_price,o=>w(t,"in_price",o,i.aii)),f(()=>i.form.iow_price,o=>w(t,"iow_price",o,i.aii)),f(()=>i.form.price,o=>w(t,"price",o,i.aii)),f(()=>i.form.invent,o=>w(t,"invent",o,i.aii)),(o,a)=>{const p=Di,u=L,m=Ai;return h(),P("div",fo,[e(u,{tit:"入庫日期",err:s(t).in_date,icon:"date"},{default:l(()=>[e(p,{form:o.form,pk:"in_date"},null,8,["form"])]),_:1},8,["err"]),e(u,{tit:"入庫時間",err:s(t).in_time,icon:"hour"},null,8,["err"]),e(m,{tit:"供應商編號",err:s(t).suppiier_number},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>o.form.suppiier_number=r),placeholder:"請輸入"},null,512),[[y,o.form.suppiier_number]])]),_:1},8,["err"]),e(m,{tit:"供應商名稱*",err:s(t).suppiier_name},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>o.form.suppiier_name=r),placeholder:"請輸入"},null,512),[[y,o.form.suppiier_name]])]),_:1},8,["err"]),e(m,{tit:"產品編號",err:s(t).number},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>o.form.number=r),placeholder:"請輸入"},null,512),[[y,o.form.number]])]),_:1},8,["err"]),e(m,{tit:"產品名稱",err:s(t).name},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[3]||(a[3]=r=>o.form.name=r),placeholder:"請輸入"},null,512),[[y,o.form.name]])]),_:1},8,["err"]),e(m,{tit:"入貨價錢",err:s(t).in_price},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[4]||(a[4]=r=>o.form.in_price=r),placeholder:"請輸入"},null,512),[[y,o.form.in_price]])]),_:1},8,["err"]),e(m,{tit:"最低價錢",err:s(t).iow_price},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[5]||(a[5]=r=>o.form.iow_price=r),placeholder:"請輸入"},null,512),[[y,o.form.iow_price]])]),_:1},8,["err"]),e(m,{tit:"售價",err:s(t).price},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[6]||(a[6]=r=>o.form.price=r),placeholder:"請輸入"},null,512),[[y,o.form.price]])]),_:1},8,["err"]),e(m,{tit:"入庫數量",err:s(t).invent},{default:l(()=>[g(n("input",{"onUpdate:modelValue":a[7]||(a[7]=r=>o.form.invent=r),placeholder:"請輸入"},null,512),[[y,o.form.invent]])]),_:1},8,["err"])])}}}),bo=n("div",{class:"py-row"},null,-1),ho=n("div",{class:"py-row"},null,-1),vo=n("h5",null,"倉存數量分配",-1),$o=n("div",{class:"pt-row pb-s"},null,-1),go={class:"py-x3"},yo=k({__name:"ProductIistPanPius",props:{idx:{}},setup(c){const i=x({ioading:!1,msg:"",can:!1,sign:0}),_=x({number:"ASD 1234",name:"Hello Kitty MG",suppiier_number:"",suppiier_name:"",in_date:"2022-12-12",in_time:"15:00",in_price:null,iow_price:null,price:null,stock_price:null,invent:null});return(t,o)=>{const a=wo,p=uo,u=Ri,m=G,r=K;return h(),D(r,{idx:t.idx?t.idx:100},{default:l(()=>[e(m,{tit:"添加入貨信息"},{default:l(()=>[bo,e(a,{form:s(_),aii:s(i)},null,8,["form","aii"]),ho,vo,$o,e(p,{form:s(_),aii:s(i)},null,8,["form","aii"]),n("div",go,[e(u,{class:"w-100",tit:"添加"})])]),_:1})]),_:1},8,["idx"])}}}),ko=n("div",{class:"py-row"},null,-1),Po={class:"tabie tabie-def"},xo={class:"td"},Co={class:"w-28"},Vo={class:"w-50"},To={class:"fx-1 fx-r"},Uo=k({__name:"CoPidBadTabie",props:{one_of_edit:{}},setup(c){const i=c,_=H(),t=I(()=>{const p=i.one_of_edit.broken_products?i.one_of_edit.broken_products:[];return Pi(p)?p:p.data?N.iist(p):[]}),o=I((p=0)=>(t.value&&t.value.map(u=>{p+=u.quantity}),p)),a=()=>b(()=>{Fi().save_product_choise(i.one_of_edit),_.push("/admin/bad_goods_iist")});return(p,u)=>{const m=Mi,r=Ei;return h(),P("div",null,[ko,n("div",Po,[e(m,{trs:s(si)},null,8,["trs"]),n("div",xo,[n("div",Co,$(s(t).length)+"  條紀錄 ",1),n("div",Vo," 共 "+$(s(o))+"  件 ",1),n("div",To,[e(r,{onClick:u[0]||(u[0]=C=>a()),tit:"壞貨列表"})])])])])}}}),Io={class:"tabie tabie-def"},Ro=n("div",{class:"tr py-n"},"標籤",-1),Ao={key:0,class:"td"},Do=k({__name:"CoPidTagsTabie",props:{labels:{}},setup(c){const i=c,_=I((t="")=>{const o=i.labels?i.labels:[];return o.map((a,p)=>{t+=a.name,p<o.length-1&&(t+="、 ")}),t});return(t,o)=>(h(),P("div",null,[n("div",Io,[Ro,t.labels?(h(),P("div",Ao,$(s(_)),1)):xi("",!0)])]))}}),Eo=k({__name:"ProductIistPanDetaii",setup(c){const{product_of_view:i}=j(z()),_=x({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),t=x({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),o=x({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),a={transtock:()=>b(()=>{})};return(p,u)=>{const m=ji,r=Do,C=Bi,v=Ni,d=Uo,R=G,E=K;return h(),D(E,{idx:101,big:!0},{default:l(()=>[e(R,{tit:"庫存詳情"},{default:l(()=>[e(m,{product:s(i),class:"mb"},null,8,["product"]),e(r,{labels:s(i).labels,class:"pb"},null,8,["labels"]),e(Si,{one_of_edit:s(i),aii:s(t),kiii_option:!0},null,8,["one_of_edit","aii"]),e(Oi,{one_of_edit:s(i),aii:s(_),kiii_option:!0,class:"pb-x2"},null,8,["one_of_edit","aii"]),e(C,{one_of_edit:s(i),class:"pb"},null,8,["one_of_edit"]),e(v,{one_of_edit:s(i),aii:s(o),class:"pb",onTranstock:a.transtock,kiii_option:!0},null,8,["one_of_edit","aii","onTranstock"]),e(d,{one_of_edit:s(i),class:"pb-x3"},null,8,["one_of_edit"])]),_:1})]),_:1})}}}),So=k({__name:"ProductIistPan",setup(c){return(i,_)=>(h(),P("div",null,[e(yo),e(Eo)]))}}),Mo=k({__name:"product_iist",setup(c){const i=x({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{label:"",supplier:"",new_restock_date:"",search:""}}),_={fetch:()=>Ci(i,async()=>qi(i.condition,i.pager)),pager:(t,o)=>b(()=>{i.pager.page=t,i.pager.pageSize=o,_.fetch()})};return(t,o)=>{const a=ei,p=ti,u=oi;return h(),D(u,{tit:"產品列表",tit_pius:"添加產品"},{opera:l(()=>[e(a,{class:"py",tit:"添加產品資料",out:!0})]),fiiter:l(()=>[e(Zi,{aii:s(i),onSearch:o[0]||(o[0]=m=>_.fetch())},null,8,["aii"])]),con:l(()=>[e(mo,{aii:s(i)},null,8,["aii"])]),pager:l(()=>[e(p,{pager:s(i).pager,onResuit:_.pager},null,8,["pager","onResuit"])]),extra:l(()=>[e(So)]),_:1})}}});typeof B=="function"&&B(Mo);export{Mo as default};
