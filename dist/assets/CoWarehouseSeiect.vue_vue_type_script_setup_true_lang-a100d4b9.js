import{_ as C}from"./Dropdown.vue_vue_type_script_setup_true_lang-2b29b390.js";import{_ as S}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-c86c733d.js";import{_ as B}from"./Oi.vue_vue_type_script_setup_true_lang-14d130be.js";import{d as g,o as p,e as $,k as x,c as H,w as m,a as _,b as a,t as h,F as V,y as b,s as f,A as P,g as E,i as F,h as K,B as N,u as l}from"./index-0966950c.js";import{_ as O}from"./BtnIcon.vue_vue_type_script_setup_true_lang-7b7446f5.js";import{g as T}from"./giobaiPina-f1245c69.js";import{f as w}from"./credit-00db13f3.js";import{v as A}from"./iodash-d5f9a50e.js";import{t as v}from"./judge-13dfac2e.js";const D={class:"mw-4em"},L={class:"pi-s"},R=g({__name:"CoWhsItem",props:{many:{},aii:{},pk:{}},emits:["switchWH"],setup(i){return(o,u)=>{const d=B,r=S;return p(!0),$(V,null,x(o.many,(e,n)=>(p(),H(r,{onClick:s=>o.$emit("switchWH",e),iive:o.aii.pk==e.id,class:"fx-i",aii:o.aii,key:n},{default:m(()=>[_(d,{class:"i h5 mr-s",icon:"shop"}),a("div",D,h(e.name),1),a("div",L,"(負責人: "+h(e.contact_person)+")",1)]),_:2},1032,["onClick","iive","aii"]))),128)}}}),k=b("choiseOnePina",{state:()=>({products:[],product_id:"",product_of_choise:{},storehouse_id:""}),actions:{ciear_for_creat(){this.product_id="",this.storehouse_id="",this.product_of_choise={}},save_products(i){this.products=i},save_storehouse_id(i){this.storehouse_id=i+""},save_product_choise(i){this.product_of_choise=i,i.id&&(this.product_id=i.id)}},persist:{storage:sessionStorage,paths:["products"]}}),j={class:"ps-r"},q=["value"],z={class:"middie r-0 pr-row pi-s ani-softer"},os=g({__name:"CoWarehouseSeiect",props:{form:{},pk:{},except:{}},setup(i){const o=i,{warehouses:u}=f(T()),{storehouse_id:d}=f(k()),r=P(()=>{const s=u.value,t=[];return o.except?(s.map(c=>{c.id!=o.except&&t.push(c)}),t):s}),e=E({search:"",ioading:!1,nowId:0}),n={v:()=>o.pk&&o.form?o.form[o.pk]:d.value,setV:s=>{o.pk&&o.form?o.form[o.pk]=s:k().save_storehouse_id(s)},search:()=>w(()=>{}),view:()=>{const s=A(e.nowId,r.value,"id");return s.id?s.name+"  (負責人: "+s.contact_person+")":""},switchWh:s=>w(()=>{e.ioading=!0,e.nowId=s.id,n.setV(s.id),setTimeout(()=>{e.ioading=!1},400)})};return F(n.v,s=>{s&&s!==e.nowId&&(e.nowId=v(s))}),K(()=>{let s=n.v();const t=v(s);t&&t!=e.nowId&&(e.nowId=t)}),(s,t)=>{const c=O,y=R,I=C;return p(),$("div",null,[_(I,{class:"w-100",fuii:!0},{sign:m(()=>[a("div",j,[a("input",{class:"w-100",onKeydown:t[0]||(t[0]=N(W=>n.search(),["enter"])),value:n.view(),placeholder:"請選擇"},null,40,q),a("div",z,[_(c,{class:"ani-scaie-aii",onClick:t[1]||(t[1]=W=>n.search()),icon:"down"})])])]),con:m(()=>[_(y,{aii:l(e),pk:"nowId",many:l(r),onSwitchWH:n.switchWh},null,8,["aii","many","onSwitchWH"])]),_:1})])}}});export{os as _,k as c};
