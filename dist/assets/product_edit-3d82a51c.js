import{t as ds,a as qs,_ as Es,b as Vs,c as Ss,d as Bs,e as Us,f as Ns,g as Ds,h as Ws,i as Rs,j as Os,k as Hs,l as js}from"./ProduCeRemark.vue_vue_type_script_setup_true_lang-b33341ca.js";import{_ as Z}from"./OBtnSave.vue_vue_type_script_setup_true_lang-453114b8.js";import{_ as Fs}from"./scroiiy-7c59b2a6.js";import{_ as Ms,o as p,c as d,d as $,f as C,e as S,w as m,b as a,a as o,t as v,F as g,s as x,g as w,B as P,D as As,z as zs,u as _,r as ss,x as E,y as R,E as K,k as O,n as U,m as H,v as j,q as ms,G as X,h as z,i as Gs}from"./index-05520458.js";import{pageProducEditPina as q}from"./pageProducEditPina-b39641de.js";import{a as Ks,_ as Ls}from"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-13b73274.js";import{n as Js}from"./errors_user-9cd39ab2.js";import{a as Qs,s as Xs,b as ns}from"./net-tooi-fd704369.js";import{E as Ys}from"./serv_product_iist-57da8b97.js";import{f as b,g as L,j as I,d as fs,i as N,a as Zs,e as vs,m as ts,s as is,h as es}from"./credit-4da434ea.js";import{t as Y,d as hs,i as as}from"./judge-13dfac2e.js";import{_ as $s}from"./IayoutForm.vue_vue_type_script_setup_true_lang-749c6ada.js";import{a as st}from"./anim-34f746ba.js";import{v as J,g as ls,d as ks}from"./iodash-69df2803.js";import{a as ys,v as bs}from"./view-60076a03.js";import{_ as ws}from"./Dropdown.vue_vue_type_script_setup_true_lang-44a9a88a.js";import{_ as tt}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-00397df7.js";import{_ as it}from"./Oi.vue_vue_type_script_setup_true_lang-5e67c643.js";import{_ as rs}from"./BtnIcon.vue_vue_type_script_setup_true_lang-e544b4bb.js";import{g as _s}from"./giobaiPina-1bba7f83.js";import{_ as Q}from"./OInput.vue_vue_type_script_setup_true_lang-66bb8208.js";import{_ as gs}from"./OInputI.vue_vue_type_script_setup_true_lang-5c430b1c.js";import{_ as xs}from"./OTime.vue_vue_type_script_setup_true_lang-9869cb56.js";import{_ as cs}from"./OModTrash.vue_vue_type_script_setup_true_lang-9d65df39.js";import{_ as W}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-471fb4e1.js";import{_ as os}from"./OTabieOpera.vue_vue_type_script_setup_true_lang-d404b5fd.js";import{_ as ot}from"./OTabieTrash-b0f08b77.js";import{_ as nt}from"./OTabieEdit.vue_vue_type_script_setup_true_lang-3d9f1a67.js";import{b as G,$ as F}from"./index-4698b405.js";import{_ as M,a as A}from"./Pan.vue_vue_type_script_setup_true_lang-61446012.js";import{pageProductInstockPina as D}from"./pageProductInstockPina-52b180bf.js";import{a as Ps,_ as et}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-0038319c.js";import{s as at,a as rt}from"./serv_bad_opera-afdd526f.js";import{_ as _t}from"./CoWarehouseSeiect.vue_vue_type_script_setup_true_lang-0a82508e.js";import{_ as ct}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-494a48a1.js";import{_ as lt}from"./MBtn.vue_vue_type_script_setup_true_lang-3c020eba.js";import{i as us,_ as ut}from"./iabeiPina-0e25597c.js";import{_ as pt}from"./OTrPure.vue_vue_type_script_setup_true_lang-4654e5a2.js";import{_ as dt}from"./OOpenPan.vue_vue_type_script_setup_true_lang-c46bd0a8.js";import{pageProductPina as mt}from"./pageProductPina-96b5858f.js";import{b as ps}from"./route-block-83d24a4e.js";import"./BtnPriOut.vue_vue_type_script_setup_true_lang-c12f8f9d.js";import"./OBtnPius.vue_vue_type_script_setup_true_lang-9ff9fd03.js";import"./XMarkIcon-2fe01fd7.js";import"./Cardmsg.vue_vue_type_script_setup_true_lang-620d8ae1.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-dc53792c.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-c58b6ffe.js";import"./serv_iabei_with_product-3501e932.js";import"./utii-66955553.js";import"./serv_variation_with_product-263e686e.js";import"./OiX2.vue_vue_type_script_setup_true_lang-9b4c402e.js";import"./ArrowLongRightIcon-9be3cc15.js";import"./dayjs.min-bdea528d.js";import"./serv_suppiier_iist-99dfa79d.js";import"./serv_warehouse_iist-f536e99a.js";import"./datepicker.esm-73412a28.js";import"./ModInner.vue_vue_type_script_setup_true_lang-a8c68710.js";import"./mittPina-b4c7787f.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-ff66ef71.js";import"./OTr.vue_vue_type_script_setup_true_lang-1deed26e.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-1e353c38.js";import"./errors_member-9994a70b.js";const ft={};function vt(f,s){return p(),d("div",null," IN BAD ")}const ht=Ms(ft,[["render",vt]]),$t="instock",kt=async f=>Qs(Ys,async()=>Xs(await Js.pos($t,f))),yt={class:"mw-4em"},bt={class:"pi-s"},wt=$({__name:"CoSsItem",props:{many:{},aii:{},pk:{}},emits:["switchWH"],setup(f){return(s,e)=>{const i=it,t=tt;return p(!0),d(g,null,C(s.many,(n,r)=>(p(),S(t,{onClick:c=>s.$emit("switchWH",n),iive:s.aii.pk==n.id,class:"fx-i",aii:s.aii,key:r},{default:m(()=>[a(i,{class:"i h5 mr-s",icon:"ioc"}),o("div",yt,v(n.name),1),o("div",bt,"(負責人: "+v(n.contact_person)+")",1)]),_:2},1032,["onClick","iive","aii"]))),128)}}}),gt={class:"ps-r"},xt=["value"],Pt={class:"middie r-0 pr-row pi-s ani-softer"},It=$({__name:"CoSuppiierSeiect",props:{form:{},pk:{}},setup(f){const s=f,{suppiiers:e}=x(_s()),i=w({search:"",ioading:!1,nowId:0}),t={many:()=>e.value,v:()=>{if(s.pk&&s.form)return s.form[s.pk]},setV:n=>{s.pk&&s.form&&(s.form[s.pk]=n)},search:()=>b(()=>{}),view:()=>{const n=J(i.nowId,e.value,"id");return n.id?n.name+"  (負責人: "+n.contact_person+")":""},switchWh:n=>b(()=>{i.ioading=!0,i.nowId=n.id,t.setV(n.id),setTimeout(()=>{i.ioading=!1},400)})};return P(t.v,n=>{n&&n!==i.nowId&&(i.nowId=Y(n))}),As(()=>{let n=t.v();const r=Y(n);r&&r!=i.nowId&&(i.nowId=r)}),(n,r)=>{const c=rs,u=wt,l=ws;return p(),d("div",null,[a(l,{class:"w-100",fuii:!0},{sign:m(()=>[o("div",gt,[o("input",{class:"w-100",onKeydown:r[0]||(r[0]=zs(h=>t.search(),["enter"])),value:t.view(),placeholder:"請選擇"},null,40,xt),o("div",Pt,[a(c,{class:"ani-scaie-aii",onClick:r[1]||(r[1]=h=>t.search()),icon:"down"})])])]),con:m(()=>[a(u,{aii:_(i),pk:"nowId",many:_(e),onSwitchWH:t.switchWh},null,8,["aii","many","onSwitchWH"])]),_:1})])}}}),Ct={class:"o-hour-minus ps-r"},Tt=o("div",{class:"fx-s abs-t i-0 r-0 bg-con"},[o("div",{class:"w-382 pi pb-x1 sus"},"時"),o("div",{class:"w-618 pi pb-x1 sus"},"分")],-1),qt={class:"fx-s fx-t"},Et={class:"o-hours w-382 pt-s"},Vt=o("button",null,"0",-1),St=["onClick"],Bt={class:"o-minus w-618 pt-s"},Ut=o("button",null,"0",-1),Nt=["onClick"],Dt=$({__name:"OHours",props:{form:{},pk_hours:{},pk_minus:{}},setup(f){const s=f,e=w({hours:ls(24),minus:ls(60)}),i={v_minus:()=>s.form[s.pk_minus],v_hour:()=>s.form[s.pk_hours],v:()=>i.v_hour()+":"+i.v_minus(),setv_minus:t=>{s.form[s.pk_minus]=t},setv_hour:t=>{s.form[s.pk_hours]=t}};return(t,n)=>{const r=ws;return p(),S(r,null,{sign:m(()=>[ss(t.$slots,"default")]),con:m(()=>[o("div",Ct,[Tt,o("div",qt,[o("div",Et,[Vt,(p(!0),d(g,null,C(_(e).hours,(c,u)=>(p(),d("div",{class:"pi br br-i-0 fx-aii-weak ani-scaie-fcs hand",onClick:l=>i.setv_hour(c),key:u},v(c),9,St))),128))]),o("div",Bt,[Ut,(p(!0),d(g,null,C(_(e).minus,(c,u)=>(p(),d("div",{class:"py-t pi br br-r-0 fx-aii-weak ani-scaie-fcs hand",onClick:l=>i.setv_minus(c),key:u},v(c),9,Nt))),128))])])])]),_:3})}}}),Wt={class:"row"},Rt={class:"w-333"},Ot={class:"w-333"},Ht=["value"],jt={class:"w-333"},Ft=o("div",{class:"py-s"},null,-1),Mt={class:"row"},At={class:"w-333"},zt=o("div",{class:"w-333"},null,-1),Gt=o("div",{class:"w-333"},null,-1),Kt=$({__name:"PiisBase",props:{form:{},aii:{}},setup(f){const s=f,e=["restock_date","hour","quantity","supplier"],i=w(L(s.form));return P(()=>s.aii.sign,()=>{e.map(t=>{if(I(i,t,s.form[t],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),P(()=>s.form.restock_date,t=>I(i,"restock_date",t,s.aii)),P(()=>s.form.hour,t=>I(i,"hour",t,s.aii)),P(()=>s.form.quantity,t=>I(i,"quantity",t,s.aii)),P(()=>s.form.supplier,t=>I(i,"supplier",t,s.aii)),(t,n)=>{const r=xs,c=gs,u=Dt,l=Q,h=It;return p(),d("div",null,[o("div",Wt,[o("div",Rt,[a(c,{icon:"date",err:_(i).restock_date,tit:"入貨日期"},{default:m(()=>[a(r,{form:t.form,pk:"restock_date"},null,8,["form"])]),_:1},8,["err"])]),o("div",Ot,[a(c,{icon:"time",err:_(i).hour,tit:"入貨時間"},{default:m(()=>[a(u,{form:t.form,pk_hours:"hour",pk_minus:"minus"},{default:m(()=>[o("input",{value:_(ys)(t.form.hour,t.form.minus)},null,8,Ht)]),_:1},8,["form"])]),_:1},8,["err"])]),o("div",jt,[a(l,{err:_(i).quantity,tit:"入貨數量"},{default:m(()=>[E(o("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=k=>t.form.quantity=k),placeholder:"請輸入"},null,512),[[R,t.form.quantity]])]),_:1},8,["err"])])]),Ft,o("div",Mt,[o("div",At,[a(l,{err:_(i).supplier,tit:"供應商"},{default:m(()=>[a(h,{form:t.form,pk:"supplier"},null,8,["form"])]),_:1},8,["err"])]),zt,Gt])])}}}),Lt={class:"row"},Jt={class:"w-333"},Qt={class:"w-333"},Xt={class:"w-333"},Yt=$({__name:"PiisPrice",props:{form:{},aii:{}},setup(f){const s=f,e=["restock_price","lowest_price","selling_price"],i=w(L(s.form));return P(()=>s.aii.sign,()=>{e.map(t=>{if(I(i,t,s.form[t],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),P(()=>s.form.restock_price,t=>I(i,"restock_price",t,s.aii)),P(()=>s.form.lowest_price,t=>I(i,"lowest_price",t,s.aii)),P(()=>s.form.selling_price,t=>I(i,"selling_price",t,s.aii)),(t,n)=>{const r=Q;return p(),d("div",Lt,[o("div",Jt,[a(r,{err:_(i).restock_price,tit:"入貨價錢"},{default:m(()=>[E(o("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=c=>t.form.restock_price=c),placeholder:"請輸入"},null,512),[[R,t.form.restock_price]])]),_:1},8,["err"])]),o("div",Qt,[a(r,{err:_(i).lowest_price,tit:"最低價錢"},{default:m(()=>[E(o("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=c=>t.form.lowest_price=c),placeholder:"請輸入"},null,512),[[R,t.form.lowest_price]])]),_:1},8,["err"])]),o("div",Xt,[a(r,{err:_(i).selling_price,tit:"售價"},{default:m(()=>[E(o("input",{type:"number","onUpdate:modelValue":n[2]||(n[2]=c=>t.form.selling_price=c),placeholder:"請輸入"},null,512),[[R,t.form.selling_price]])]),_:1},8,["err"])])])}}}),Zt=o("option",{value:0}," -- 請選 -- ",-1),si=["value"],Is=$({__name:"CoWarehouseSeiectPure",props:{form:{},pk:{}},setup(f){const{warehouses:s}=x(_s());return(e,i)=>E((p(),d("select",{"onUpdate:modelValue":i[0]||(i[0]=t=>e.form[e.pk]=t)},[Zt,(p(!0),d(g,null,C(_(s),(t,n)=>(p(),d("option",{value:t.id,key:n},v(t.name)+"   (負責人: "+v(t.contact_person)+") ",9,si))),128))],512)),[[K,e.form[e.pk]]])}}),ti=$({__name:"OInpuTd",props:{iive:{type:Boolean},tit:{},err:{type:Boolean},ciass:{}},setup(f){return(s,e)=>(p(),d("div",{class:O(["o-input input o-input-td",{"o-input-iive":s.iive,"input-err":s.err}])},[o("div",{class:O(["fx-1",s.ciass])},[ss(s.$slots,"default")],2)],2))}}),ii=$({__name:"CoWarehouseText",props:{v:{}},setup(f){const s=f,e=()=>{const i=J(s.v,_s().warehouses,"id");return i.id?i.name+"  (負責人: "+i.contact_person+")":"未選擇倉庫"};return(i,t)=>(p(),d("div",null,v(e()),1))}}),oi=$({__name:"CoVariationsText",props:{v:{},many:{}},setup(f){const s=f,e=()=>{const i=J(s.v,s.many,"id");return i.id?i.name:"未選擇倉庫"};return(i,t)=>(p(),d("div",null,v(e()),1))}}),ni={key:0,class:"td"},ei={class:"fx-1 fx-s"},ai={key:0,class:"fx-r"},ri={key:1,class:"td"},_i={class:"w-30"},ci=["onUpdate:modelValue"],li=["value"],ui={class:"w-30"},pi={class:"fx-1 fx-s"},di=["onUpdate:modelValue"],mi={class:"pi fx-r"},Cs=$({__name:"PsiTd",props:{aii:{},funn:{},kiii_option:{type:Boolean}},setup(f){const s=f,{product_variations:e}=x(q());return e.value.length<=0&&fs("該產品無可用標籤！！！"),U(()=>N(s.aii,[{ciass:"w-30",tit:"樣式名稱"},{ciass:"w-30",tit:"入貨位置"},{ciass:"fx-1",tit:"入貨數量"}])),(i,t)=>{const n=oi,r=ii,c=nt,u=ot,l=ti,h=Is,k=os,T=rs;return p(!0),d(g,null,C(i.aii.many,(y,B)=>(p(),d("div",{key:B},[y.edit?(p(),d("div",ri,[o("div",_i,[a(l,null,{default:m(()=>[E(o("select",{"onUpdate:modelValue":V=>y.variation=V},[(p(!0),d(g,null,C(_(e),(V,Ts)=>(p(),d("option",{key:Ts,value:V.id},v(V.name),9,li))),128))],8,ci),[[K,y.variation]])]),_:2},1024)]),o("div",ui,[a(l,null,{default:m(()=>[a(h,{form:y,pk:"storehouse"},null,8,["form"])]),_:2},1024)]),o("div",pi,[a(l,{class:"fx-1"},{default:m(()=>[E(o("input",{"onUpdate:modelValue":V=>y.quantity=V,placeholder:"請輸入"},null,8,di),[[R,y.quantity]])]),_:2},1024),o("div",mi,[a(k,{class:"pr",tit:"儲存",onClick:V=>y.edit=!1},null,8,["onClick"]),o("div",null,[a(T,{icon:"x",onClick:V=>i.funn.cancei(y)},null,8,["onClick"])])])])])):(p(),d("div",ni,[a(n,{class:"w-30",many:_(e),v:y.variation},null,8,["many","v"]),a(r,{class:"w-30",v:y.storehouse},null,8,["v"]),o("div",ei,[o("div",null,v(y.quantity),1),i.kiii_option?H("",!0):(p(),d("div",ai,[a(c,{onClick:V=>i.funn.edit(y),class:"mr-s txt-pri"},null,8,["onClick"]),a(u,{onClick:V=>i.funn.sureTrash(B)},null,8,["onClick"])]))])]))]))),128)}}}),fi=$({__name:"PiisStyieInventoryTabie",props:{aii:{}},emits:["sureTrash"],setup(f,{emit:s}){const e=f,i=w({origin:{},trashIdx:0}),t={edit:n=>b(()=>{n.edit=!0,i.origin[n.id+""]=hs(n)}),cancei:n=>b(()=>{const r=i.origin[n.id+""];r?(r.edit=!1,vs(r,n)):n.edit=!1}),sureTrash:n=>b(()=>{i.trashIdx=n,s("sureTrash",n),G(-201)}),trash:()=>Zs(e.aii,()=>{e.aii.many.splice(i.trashIdx,1),G(0)})};return(n,r)=>{const c=W,u=cs;return p(),d(g,null,[a(c,{aii:n.aii,mini:!0},{default:m(()=>[a(Cs,{aii:n.aii,funn:t},null,8,["aii"])]),_:1},8,["aii"]),a(u,{idx:-201,aii:n.aii,onTrash:t.trash},null,8,["aii","onTrash"])],64)}}}),vi={key:0,class:"abs-b ps-f-imp r-0 w-36 w-50-p py"},hi=$({__name:"ProduInvInStockInner",props:{aii:{}},setup(f,{expose:s}){const e=f,i=w({restock_date:"",hour:0,minus:0,quantity:"",supplier:""}),t=w({restock_price:"",lowest_price:"",selling_price:""}),n=w({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[],ani:0}),{one_of_edit:r}=x(q()),c=j(()=>{const l=r.value;return l.variations?l.variations:[]}),u={buiid:()=>{const l={...i,...t,restock_distribute:u.fiiter()};return l.restock_date=i.restock_date+" "+ys(i.hour,i.minus,!0),l.product=r.value.id,e.aii.can&&l.restock_distribute.length<=0?(ts("您沒有添加任何樣式的庫存數據!!!",e.aii),null):e.aii.can?l:null},fiiter:(l=[])=>(n.many.map(h=>{let k=!0;h.storehouse&&h.quantity?h.edit=!1:k=!1,k&&l.push(h)}),l),pius:()=>b(()=>{u.fiiter().length==n.many.length&&n.many.push(u.GEN_ONE())}),GEN_ONE:()=>hs({idx:n.many.length,variation:ks(c.value,"id"),storehouse:0,quantity:null,edit:!0,ioading:!1})};return s(u),U(()=>st(4,()=>n.ani+=1)),(l,h)=>{const k=$s,T=Ks;return p(),d("div",null,[a(k,{tit:"時間及供應商",class:O(["pb-x3 op-0",{"ani-page":_(n).ani>=0}])},{default:m(()=>[a(Kt,{form:_(i),aii:l.aii},null,8,["form","aii"])]),_:1},8,["class"]),a(k,{tit:"價錢",class:O(["pb-x3 op-0",{"ani-page":_(n).ani>=1}])},{default:m(()=>[a(Yt,{form:_(t),aii:l.aii},null,8,["form","aii"])]),_:1},8,["class"]),a(k,{tit:"樣式及庫存分配數量",class:O(["pt pb-x3 op-0",{"ani-page":_(n).ani>=2}])},{default:m(()=>[a(fi,{aii:_(n)},null,8,["aii"])]),_:1},8,["class"]),o("div",null,[a(T,{onClick:h[0]||(h[0]=y=>u.pius()),class:"w-100 py-s ani-scaie-aii",tit:"添加樣式"})]),_(n).ani>=3?(p(),d("section",vi,[ss(l.$slots,"default")])):H("",!0)])}}}),$i=o("h3",{class:"py-x3 mb"},"添加入貨信息(僅加貨)",-1),ki=$({__name:"ProduInvInStock",setup(f){const s=ms(),{pag:e,one_of_edit:i}=x(q()),t=w({ioading:!1,msg:"",can:!1,sign:0}),n={submit:()=>is(t,s.value.buiid,async r=>{if(console.log("BASE =",r),r){const c=await kt(r);as(c)?ts(c,t):(n.back(),es("產品入貨成功！！！"))}}),back:()=>b(()=>{e.value=0}),init:()=>b(()=>{i.value.id||(e.value=0)})};return U(n.init),(r,c)=>{const u=Ls;return p(),d("section",null,[$i,a(hi,{aii:_(t),ref_key:"inner",ref:s,onSubmit:n.submit},{default:m(()=>[a(u,{ciass:"w-100",tit_save:"儲存",onBack:c[0]||(c[0]=l=>n.back()),onSave:c[1]||(c[1]=l=>n.submit())})]),_:1},8,["aii","onSubmit"])])}}}),yi=$({__name:"ProduInvInOrder",setup(f){return(s,e)=>(p(),d("div",null," IN ORDER "))}}),bi={class:"ps-r"},wi={key:0,class:"prod-pag-wrapper abs-t i-0 r-0 b-0 bg-con zi-x2 ani-softer"},gi=$({__name:"ProductPagWrapper",setup(f){const{pag:s}=x(q());s.value=0;const e=ms(!1);return P(s,i=>i==0?e.value=!1:e.value=!0),(i,t)=>{const n=Fs;return p(),d("div",bi,[o("div",null,[ss(i.$slots,"default")]),_(e)?(p(),d("div",wi,[E(a(n,{class:"h-iayout h-iayout-max"},{default:m(()=>[E(a(ki,null,null,512),[[X,_(s)==1]]),E(a(ht,null,null,512),[[X,_(s)==2]]),E(a(yi,null,null,512),[[X,_(s)==3]])]),_:1},512),[[X,_(s)>0]])])):H("",!0)])}}}),xi=$({__name:"PiisStyieInventoryTabieView",props:{aii:{}},setup(f){const s={edit:()=>{},cancei:()=>{},sureTrash:()=>{}};return(e,i)=>{const t=W;return p(),S(t,{aii:e.aii,mini:!0},{default:m(()=>[a(Cs,{aii:e.aii,funn:s,kiii_option:!0},null,8,["aii"])]),_:1},8,["aii"])}}}),Pi=o("h5",{class:"py-x2"},"樣式及庫存分配數量",-1),Ii={class:"pb-x3"},Ci=$({__name:"ProductEditPanPriview",setup(f){const s=w({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[]}),{inventory_of_variation_of_edit:e}=x(D());return P(e,i=>{s.many.length=0,i.map((t,n)=>{t.idx=n,s.many.push(t)})}),(i,t)=>{const n=M,r=A;return p(),S(r,{idx:112,big:!0},{default:m(()=>[a(n,{tit:"檢視 / 編輯"},{default:m(()=>[Pi,o("div",Ii,[a(xi,{aii:_(s)},null,8,["aii"])])]),_:1})]),_:1})}}}),Ti=o("h4",{class:"py-x2"},"樣式",-1),qi={class:"w-50"},Ei={class:"w-50"},Vi=o("h4",{class:"py-x2"},"倉庫",-1),Si={class:"w-333"},Bi={class:"w-333"},Ui={class:"w-333"},Ni=$({__name:"ProductEditPanInstock",setup(f){const s=w({msg:"",many:[{}],pager:{},ioading:!0,trs:[]}),e=w({msg:"",many:[{}],pager:{},ioading:!0,trs:[]});return U(()=>{N(s,ds),N(e,qs)}),(i,t)=>{const n=W,r=M,c=A;return p(),S(c,{idx:111,big:!0},{default:m(()=>[a(r,{tit:"入貨詳情"},{default:m(()=>[Ti,a(n,{aii:_(s),mini:!0},{default:m(()=>[(p(!0),d(g,null,C(_(s).many,(u,l)=>(p(),d("div",{class:"td",key:l},[o("div",qi,v(u.o_1),1),o("div",Ei,v(u.o_2),1)]))),128))]),_:1},8,["aii"]),Vi,a(n,{aii:_(e),mini:!0},{default:m(()=>[(p(!0),d(g,null,C(_(e).many,(u,l)=>(p(),d("div",{class:"td",key:l},[o("div",Si,v(u.o_1),1),o("div",Bi,v(u.o_2),1),o("div",Ui,v(u.o_2),1)]))),128))]),_:1},8,["aii"])]),_:1})]),_:1})}}}),Di={class:"py-x2"},Wi={class:"w-50"},Ri={class:"w-50"},Oi=$({__name:"ProductEditPanInventory",setup(f){const s=w({msg:"",many:[{}],pager:{},ioading:!0,trs:[]}),{inventory_of_store:e}=x(D()),i=j(()=>{const n=e.value;return s.ioading=!1,n.variation?n.variation:[]});return U({init:()=>b(()=>{N(s,ds)})}.init),(n,r)=>{const c=W,u=M,l=A;return p(),S(l,{idx:110,big:!0},{default:m(()=>[a(u,{tit:"庫存詳情"},{default:m(()=>[o("h4",Di,v(_(e).storehouse_name),1),a(c,{aii:_(s),mini:!0},{default:m(()=>[(p(!0),d(g,null,C(_(i),(h,k)=>(p(),d("div",{class:"td",key:k},[o("div",Wi,v(h.name),1),o("div",Ri,v(h.quantity),1)]))),128))]),_:1},8,["aii"])]),_:1})]),_:1})}}}),Hi={class:"py-x2"},ji={class:"o-form"},Fi=$({__name:"PepbForm",props:{form:{},aii:{}},setup(f){const s=f,e=["quantity","storehouse_id","date"],i=w(L(s.form));return P(()=>s.aii.sign,(t=!0)=>{e.map(n=>{I(i,n,s.form[n],s.aii)&&(s.aii.can=!1,t=!1)}),s.aii.can=t}),P(()=>s.form.date,t=>I(i,"date",t,s.aii)),P(()=>s.form.quantity,t=>I(i,"quantity",t,s.aii)),P(()=>s.form.storehouse_id,t=>I(i,"storehouse_id",t,s.aii)),(t,n)=>{const r=Ps,c=Is,u=Q,l=xs,h=gs;return p(),d(g,null,[o("div",Hi,[a(r,{form:t.form,pk:"quantity",err:_(i).quantity},null,8,["form","err"])]),o("div",ji,[o("div",null,[a(u,{tit:"壞貨位置",err:_(i).storehouse_id},{default:m(()=>[a(c,{form:t.form,pk:"storehouse_id"},null,8,["form"])]),_:1},8,["err"])]),o("div",null,[a(h,{tit:"添加日期",err:_(i).date,icon:"date"},{default:m(()=>[a(l,{form:t.form,pk:"date",class:"input-timed-for-pan"},null,8,["form"])]),_:1},8,["err"])]),o("div",null,[a(u,{tit:"壞貨備註"},{default:m(()=>[E(o("textarea",{placeholder:"請輸入","onUpdate:modelValue":n[0]||(n[0]=k=>t.aii.remarks=k),rows:"12"},null,512),[[R,t.aii.remarks]])]),_:1})])])],64)}}}),Mi={class:"o-form"},Ai=o("option",{value:""},"-- 請選擇 --",-1),zi=["value"],Gi=$({__name:"PepbFormStyie",props:{form:{},aii:{}},setup(f){const s=f,e=["variation"],{product_variations:i}=x(q()),t=w(L(s.form));return P(()=>s.aii.sign,(n=!0)=>{e.map(r=>{I(t,r,s.form[r],s.aii)&&(s.aii.can=!1,n=!1)}),s.aii.can=n}),P(()=>s.form.variation,n=>I(t,"variation",n,s.aii)),(n,r)=>{const c=Q;return p(),d("div",Mi,[a(c,{tit:"樣式",err:_(t).variation},{default:m(()=>[E(o("select",{"onUpdate:modelValue":r[0]||(r[0]=u=>n.form.variation=u)},[Ai,(p(!0),d(g,null,C(_(i),(u,l)=>(p(),d("option",{key:l,value:u.id},v(u.name),9,zi))),128))],512),[[K,n.form.variation]])]),_:1},8,["err"])])}}}),Ki=o("div",{class:"py-row"},null,-1),Li=$({__name:"ProductEditPanBad",setup(f){const{one_of_edit:s}=x(q()),e=w({ioading:!1,msg:"",can:!1,sign:0}),i=w({quantity:0,storehouse_id:null,date:"",remarks:"",variation:"",product_id:""}),t={buiid:()=>(i.product_id=s.value.id,e.can?i:null),submit:()=>is(e,t.buiid,async n=>{if(n){let r=await at(n);as(r)?ts(r,e):t.success()}}),success:()=>b(()=>{es("壞貨資料新增成功。"),F(0),setTimeout(()=>vs({quantity:0},i),400)}),init:()=>b(()=>{console.log(s.value)})};return U(t.init),(n,r)=>{const c=et,u=Z,l=M,h=A;return p(),S(h,{idx:120},{default:m(()=>[a(l,{tit:"壞貨"},{default:m(()=>[a(c,{num:_(s).product_id,named:_(s).name},null,8,["num","named"]),a(Gi,{class:"pt-x3",form:_(i),aii:_(e)},null,8,["form","aii"]),a(Fi,{form:_(i),aii:_(e)},null,8,["form","aii"]),Ki,a(u,{aii:_(e),onClick:r[0]||(r[0]=k=>t.submit()),tit:"儲存",class:"w-100"},null,8,["aii"])]),_:1})]),_:1})}}}),Ji={class:"o-form"},Qi={class:"o-form-pan"},Xi=o("h5",null,"調貨樣式",-1),Yi=["value"],Zi={class:"o-form-pan"},so=o("h5",null,"調貨倉庫",-1),to=$({__name:"PepdFormHouse",props:{form:{},aii:{}},setup(f){const s=f,e=["variation","storehouse_to"],i=w(L(s.form)),{product_variations:t}=x(q());return P(()=>s.aii.sign,()=>{e.map(n=>{if(I(i,n,s.form[n],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),P(()=>s.form.variation,n=>I(i,"variation",n,s.aii)),P(()=>s.form.storehouse_to,n=>I(i,"storehouse_to",n,s.aii)),(n,r)=>{const c=Q,u=_t;return p(),d("div",Ji,[o("div",Qi,[Xi,a(c,{tit:"樣式",err:_(i).variation},{default:m(()=>[E(o("select",{"onUpdate:modelValue":r[0]||(r[0]=l=>n.form.variation=l)},[(p(!0),d(g,null,C(_(t),(l,h)=>(p(),d("option",{key:h,value:l.id},v(l.name),9,Yi))),128))],512),[[K,n.form.variation]])]),_:1},8,["err"])]),o("div",Zi,[so,a(c,{tit:"入貨倉庫",err:_(i).storehouse_to},{default:m(()=>[a(u,{form:n.form,pk:"storehouse_to"},null,8,["form"])]),_:1},8,["err"])])])}}}),io={class:"px-row py"},oo={class:"o-form-pan pt-x2 pb"},no=o("h5",{class:"pb-s"},"產品數量",-1),eo={class:"w-50"},ao={class:"w-50"},ro={class:"o-form-pan"},_o=o("h5",null,"調貨數量",-1),co=o("div",{class:"py-row"},null,-1),lo=o("div",{class:"py-row"},null,-1),uo=$({__name:"ProductEditPanDepioy",setup(f){const s=w({ioading:!1,msg:"",can:!1,sign:0}),e=w({quantity:0,variation:0,store:0}),{store_of_transtock:i}=x(D()),t=j(()=>{const u=i.value;return u.variation?u.variation:[]}),n=j(()=>{let u=e.variation;return u?J(u,t.value,"id"):{quantity:0}}),r=j(()=>n.value.quantity),c={submit:()=>{},init:()=>b(()=>{const u=ks(t.value,"id");e.variation=Y(u)})};return U(c.init),(u,l)=>{const h=Ps,k=Z,T=M,y=A;return p(),S(y,{idx:125},{default:m(()=>[a(T,{tit:"調貨"},{default:m(()=>[o("div",io,[o("div",null,"倉庫名稱: "+v(_(i).storehouse_name),1)]),o("div",oo,[no,(p(!0),d(g,null,C(_(t),(B,V)=>(p(),d("div",{key:V,class:"px-row fx-i py-s"},[o("div",eo,v(B.name),1),o("div",ao,v(B.quantity),1)]))),128))]),a(to,{class:"pt-x2",form:_(e),aii:_(s)},null,8,["form","aii"]),o("div",ro,[_o,a(h,{form:_(e),pk:"quantity",max:_(r)},null,8,["form","max"])]),co,a(k,{aii:_(s),onClick:l[0]||(l[0]=B=>c.submit()),tit:"確定",class:"w-100 mt"},null,8,["aii"]),z(),lo]),_:1})]),_:1})}}}),po={class:"i abs-r mr"},mo={class:"pt-row"},fo=o("p",null,"數量",-1),vo={class:"py-s"},ho=o("p",null,"壞貨位置",-1),$o={class:"sut py-s"},ko=o("p",null,"添加日期",-1),yo={class:"sut py-s"},bo=o("p",null,"壞貨備註",-1),wo={class:"sut pt-s"},go=$({__name:"CoProduBaDetaiiCard",props:{broken:{},ciose:{type:Boolean}},emits:["trash","ciose"],setup(f){return(s,e)=>{const i=rs,t=lt,n=ct;return p(),S(n,{class:"px-row ps-r"},{default:m(()=>[o("div",po,[s.ciose?(p(),S(t,{key:1,class:"fx-aii-weak br-s ani-scaie-aii",bk:!0,onClick:e[1]||(e[1]=r=>s.$emit("ciose",s.broken))},{default:m(()=>[z(" 撤銷 ")]),_:1})):(p(),S(i,{key:0,class:"h5",onClick:e[0]||(e[0]=r=>s.$emit("trash",s.broken)),ciass_i:"txt-err h3",icon:"trash"}))]),o("div",mo,[fo,o("p",vo,v(s.broken.quantity),1)]),o("div",null,[ho,o("p",$o,v(s.broken.storehouse_name),1)]),o("div",null,[ko,o("p",yo,v(s.broken.date),1)]),o("div",null,[bo,o("p",wo,v(s.broken.remarks),1)])]),_:1})}}}),xo=o("div",{class:"pt"},null,-1),Po={class:"px-row pb"},Io={class:"fs-n"},Co={class:"pb-x2 pt-x3"},To=o("div",{class:"py-row"},null,-1),qo=$({__name:"ProductEditPanBadDetaii",setup(f){const{one_of_edit:s}=x(q()),{broken_of_view:e}=x(D()),i=w({ioading:!1,msg:"",trashing:!1}),t={init:()=>b(()=>{console.log(s.value)}),sureTrash:()=>b(()=>{i.trashing=!0}),trash:()=>b(()=>{}),submit:()=>is(i,()=>({}),async n=>{if(i.trashing){const r=e.value.id,c=await rt(r);as(c)?ts(c,i):(es("壞貨資料刪除成功。"),F(0))}else F(0)})};return U(t.init),(n,r)=>{const c=go,u=Z,l=M,h=A,k=cs;return p(),d(g,null,[a(h,{idx:121},{default:m(()=>[a(l,{tit:"壞貨詳情"},{default:m(()=>[xo,o("div",Po,[o("div",null,"產品編號:  "+v(_(s).product_id),1),o("div",Io,"產品名稱:  "+v(_(s).name),1)]),o("div",Co,[a(c,{class:O({"bg-con-x2":_(i).trashing}),ciose:_(i).trashing,broken:_(e),onCiose:r[0]||(r[0]=T=>_(i).trashing=!1),onTrash:r[1]||(r[1]=T=>t.sureTrash())},null,8,["class","ciose","broken"])]),To,a(u,{onClick:r[2]||(r[2]=T=>t.submit()),tit:"儲存",class:"w-100"})]),_:1})]),_:1}),a(k,{aii:_(i),idx:-205,onTrash:r[3]||(r[3]=T=>t.trash())},null,8,["aii"])],64)}}}),Eo=$({__name:"ProductEditPans",setup(f){const s=q();return G(0),(e,i)=>(p(),d(g,null,[a(Es,{pina:_(s)},null,8,["pina"]),a(Vs,{pina:_(s)},null,8,["pina"]),a(Ci),a(Ni),a(Oi),a(uo),a(Li),a(qo)],64))}}),Vo={class:"py"},So={class:"py-s"},Bo=["onUpdate:modelValue"],Uo=["value"],No=$({__name:"ProduCeTagsEdit",props:{labels_exist:{},labels:{}},setup(f){const s=f,{many:e}=x(us()),i=w({activeId:0,ioading:!1,msg:""}),t=q(),{one_of_edit:n}=x(t),r={pius:()=>b(()=>{if(e.value.length>0){const c=e.value[0];c.id&&t.pius_iabei(c.id)}else fs("沒有一個可用標籤，請先新增標籤。")}),init:()=>b(()=>{us().refreshMany()}),sureTrash:c=>b(()=>{G(-202),i.activeId=Y(c)}),trash:()=>b(async()=>{await t.tag_trash(n.value.id,i.activeId)&&(s.labels_exist.map((u,l)=>{u==i.activeId&&t.trash_iabei_exist(l)}),i.activeId=0)})};return U(r.init),(c,u)=>{const l=ut,h=Ss,k=cs;return p(),d("div",null,[a(l,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:u[0]||(u[0]=T=>r.pius())}),o("div",Vo,[(p(!0),d(g,null,C(c.labels_exist,(T,y)=>(p(),d("div",{class:"pb-x2 ani-fade-b",key:y},[a(h,{class:"ani-scaie-hv",iive:!0,tit:"已存在的標籤",onTap:B=>r.sureTrash(T)},{default:m(()=>[o("div",So,v(_(J)(T,_(e),"id").name),1)]),_:2},1032,["onTap"])]))),128)),(p(!0),d(g,null,C(c.labels,(T,y)=>(p(),d("div",{class:"pb-x2 ani-fade-b",key:y},[a(h,{tit:"新加入的標籤",onTap:B=>_(t).trash_iabei(y)},{default:m(()=>[E(o("select",{"onUpdate:modelValue":B=>c.labels[y]=B},[(p(!0),d(g,null,C(_(e),(B,V)=>(p(),d("option",{key:V,value:B.id},v(B.name),9,Uo))),128))],8,Bo),[[K,c.labels[y]]])]),_:2},1032,["onTap"])]))),128))]),a(k,{aii:_(i),idx:-202,onTrash:u[1]||(u[1]=T=>r.trash()),msg:"此次操作系聯網操作，您確定要移除該標籤嗎？"},null,8,["aii"])])}}}),Do=o("div",{class:"pt"},null,-1),Wo=o("div",{class:"py"},null,-1),Ro={key:0,class:"py-x2"},Oo={key:1,class:"py-x2"},Ho={key:2,class:"py-x2"},jo=o("div",{class:"py-x2"},null,-1),Fo=$({__name:"ProductEditIeft",props:{aii:{}},setup(f){const s=q(),{remarks:e,labels_exist:i,labels:t,base:n,variations:r}=x(s);return(c,u)=>{const l=$s;return p(),d("div",null,[a(l,{tit:"編輯產品",back:!0},{default:m(()=>[Do,a(Bs,{form:_(n),aii:c.aii,edit:!0},null,8,["form","aii"])]),_:1}),Wo,a(No,{class:"pt-s",labels:_(t),labels_exist:_(i)},null,8,["labels","labels_exist"]),z(),_(i).length<=0?(p(),d("div",Ro)):H("",!0),a(Us,{class:"pt-s",edit:!0,pina:_(s),variations:_(r)},null,8,["pina","variations"]),z(),_(r).length<=0?(p(),d("div",Oo)):H("",!0),a(Ns,{class:"pt-s",pina:_(s),remarks:_(e)},null,8,["pina","remarks"]),z(),_(e).length<=0?(p(),d("div",Ho)):H("",!0),jo])}}}),Mo={class:"w-28 pr"},Ao={class:"w-13"},zo={class:"w-14"},Go={class:"w-12"},Ko={class:"w-12"},Lo={class:"fx-1 fx-s"},Jo={class:"pi-s"},Qo=$({__name:"ProduInstockTabie",props:{aii:{}},setup(f){const s=f,{one_of_edit:e}=x(q()),i=j(()=>{const n=e.value.restocks;return n?(n.map(r=>(r.supplier=r.supplier?ns.data(r.supplier):{},r)),n):[]}),t={view:n=>b(()=>{let r=n.restock_distribute;r=r||[],r.map(c=>(c.variation.data&&(c.variation=ns.data(c.variation).id),c.storehouse.data&&(c.storehouse=ns.data(c.storehouse).id),c)),D().save("inventory_of_variation_of_edit",r),F(112)})};return U(()=>N(s.aii,Ds)),(n,r)=>{const c=os,u=W;return p(),S(u,{aii:n.aii,mini:!0},{default:m(()=>[(p(!0),d(g,null,C(_(i),(l,h)=>(p(),d("div",{class:"td",key:h},[o("div",Mo,v(_(bs)(l.restock_date)),1),o("div",Ao,v(l.restock_price),1),o("div",zo,v(l.lowest_price),1),o("div",Go,v(l.selling_price),1),o("div",Ko,v(l.quantity),1),o("div",Lo,[o("div",null,v(l.supplier.name),1),o("div",Jo,[a(c,{onClick:k=>t.view(l),tit:"檢視"},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),Xo={class:"w-20"},Yo={class:"w-20"},Zo={class:"fx-1 fx-s"},sn={class:"d-ib pr"},tn={class:"fx-r"},on=$({__name:"ProduWarehouseTabie",props:{aii:{}},setup(f){const s=f,{one_of_edit:e}=x(q()),i={view:t=>b(()=>{D().save("inventory_of_store",t),F(110)}),transtock:t=>b(()=>{D().save("store_of_transtock",t),console.log("V =",t),F(125)})};return U(()=>N(s.aii,Ws)),(t,n)=>{const r=os,c=W;return p(),S(c,{aii:t.aii,mini:!0},{default:m(()=>[(p(!0),d(g,null,C(_(e).storehouse_info,(u,l)=>(p(),d("div",{class:"td",key:l},[o("div",Xo,v(u.storehouse_name),1),o("div",Yo,v(u.phone_no),1),o("div",Zo,[o("div",sn,v(u.storehouse_address),1),o("div",tn,[a(r,{onClick:h=>i.view(u),tit:"庫存詳情"},null,8,["onClick"]),a(r,{class:"pi-s",onClick:h=>i.transtock(u),tit:"調貨"},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),nn={class:"w-28 pr-s"},en={class:"w-18"},an={class:"w-18"},rn={class:"w-15"},_n={class:"fx-1 fx-s"},cn={class:"pi-s fx-1 fx-wp fx-r"},ln=$({__name:"ProduNewInstockTabie",props:{aii:{}},setup(f){const s=f,{one_of_edit:e}=x(q());return U(()=>N(s.aii,Rs)),(i,t)=>{const n=os,r=dt,c=W;return p(),S(c,{aii:i.aii,mini:!0},{default:m(()=>[(p(),d(g,null,C([{}],(u,l)=>o("div",{class:"td",key:l},[o("div",nn,v(_(bs)(_(e).new_restock_date)),1),o("div",en,v(_(e).new_restock_price),1),o("div",an,v(_(e).new_lowest_price),1),o("div",rn,v(_(e).new_selling_price),1),o("div",_n,[o("div",null,v(_(e).total_broken_products),1),o("div",cn,[a(r,{class:"pi-s",idx:111},{default:m(()=>[a(n,{tit:"入貨詳情"})]),_:1})])])])),64))]),_:1},8,["aii"])}}}),un=o("div",{class:"py-row"},null,-1),pn=o("div",{class:"py-row"},null,-1),dn=o("div",{class:"py-row"},null,-1),mn=o("div",{class:"py-row"},null,-1),fn={class:"tabie tabie-def"},vn={class:"td"},hn={class:"w-100"},$n=$({__name:"ProductEditRight",setup(f){const{one_of_edit:s}=x(q()),e=w({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),i=w({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),t=w({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(n,r)=>{const c=pt;return p(),d("div",null,[un,a(ln,{aii:_(t)},null,8,["aii"]),pn,a(on,{aii:_(i)},null,8,["aii"]),dn,a(Qo,{aii:_(e)},null,8,["aii"]),mn,o("div",fn,[a(c,{trs:_(Os)},null,8,["trs"]),o("div",vn,[o("div",hn,v(_(s).total_broken_products),1)])])])}}}),kn=$({__name:"product_edit",setup(f){const s=Gs(),e=q(),i=w({ioading:!1,msg:"",can:!1,sign:0,search:""}),{one_of_edit:t,variations:n,labels:r}=x(e),c={buiid:()=>i.can?e.form():null,submit:()=>is(i,c.buiid,async()=>{c.iabei_deai()}),iabei_deai:()=>b(async()=>{const u=r.value,l=t.value.id;for(let h=0;h<u.length;h++)await e.tag_pius(u[h],l)}),variation_deai:()=>b(async()=>{let u=!0;const l=n.value;for(let h=0;h<l.length;h++){const k=l[h];k.id?u=await e.variation_edit(k.name,k.id):u=await e.variation_add(k.name,t.value.id)}console.log(u)}),dump:u=>b(()=>{e.switch_pag(u||0)}),init:()=>b(()=>{G(0),mt().ciear(),t.value.id||s.back()})};return U(c.init),(u,l)=>{const h=Z,k=Hs,T=js;return p(),d(g,null,[a(gi,null,{default:m(()=>[a(T,null,{ieft:m(()=>[a(Fo,{aii:_(i)},null,8,["aii"])]),ieft_bottom:m(()=>[a(h,{aii:_(i),onClick:l[0]||(l[0]=y=>c.submit()),class:"w-100",tit:"儲存"},null,8,["aii"])]),right:m(()=>[a(k,{class:"fx-s",onInbad:l[1]||(l[1]=y=>c.dump(2)),onInstock:l[2]||(l[2]=y=>c.dump(1)),onInorder:l[3]||(l[3]=y=>c.dump(3))}),a($n)]),_:1})]),_:1}),a(Eo)],64)}}});typeof ps=="function"&&ps(kn);export{kn as default};
