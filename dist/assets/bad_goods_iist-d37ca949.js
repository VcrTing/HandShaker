import{_ as G,a as O,b as V}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-83c14f5a.js";import{_ as D}from"./CoProduChoiseMod.vue_vue_type_script_setup_true_lang-3c2c095f.js";import{_ as E}from"./OModTrash.vue_vue_type_script_setup_true_lang-ddee210d.js";import{_ as L}from"./OPager.vue_vue_type_script_setup_true_lang-aae546eb.js";import{_ as M}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-ea14a47c.js";import{_ as j}from"./OTabieTrash-7639fdfc.js";import{d as k,n as S,o as u,k as g,w as v,c as y,q as H,a as t,t as f,b as p,F as J,$ as P,s as $,B as T,N as K,i as n,f as Q,h as U,m as h,g as W}from"./index-33974ecf.js";import{b as z,s as X}from"./badPina-92aa5b5f.js";import{i as Y,f as c,r as B,d as Z,a as ii,o as oi,b as si,q as ti}from"./credit-db2ad5c3.js";import{m as ai,a as w,b as A}from"./iodash-8a8cb9b0.js";import{_ as ni}from"./OBtnPius.vue_vue_type_script_setup_true_lang-95a0dc5e.js";import{_ as ei}from"./BtnIcon.vue_vue_type_script_setup_true_lang-94d8aa7d.js";import{c as b}from"./choiseOnePina-ac0b302e.js";import{_ as ri}from"./OSeiect.vue_vue_type_script_setup_true_lang-b8ed873e.js";import{g as ci}from"./giobaiPina-c709988c.js";import{a as _i}from"./serv_bad_opera-1ebfa9c4.js";import{b as R}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-cd21dc42.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-11518a24.js";import"./Oi.vue_vue_type_script_setup_true_lang-dd35cc56.js";import"./XMarkIcon-d9ea6041.js";import"./datepicker.esm-14a2514b.js";import"./ModInner.vue_vue_type_script_setup_true_lang-dbe6d9aa.js";import"./Itemdash.vue_vue_type_script_setup_true_lang-fc29ad0c.js";import"./cioseitem.vue_vue_type_script_setup_true_lang-cfd53c6c.js";import"./serv_product_iist-84b93322.js";import"./conn-e4aee6c9.js";import"./net-tooi-51cb3d70.js";import"./strapi-c10e9858.js";import"./errors_product-174667b5.js";import"./view-01767316.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-4f655e36.js";import"./OTr.vue_vue_type_script_setup_true_lang-289f7217.js";import"./errors_user-be6d0865.js";import"./serv_iabei_iist-3074c6dd.js";import"./serv_suppiier_iist-1beefbb2.js";import"./serv_user_iist-0498784b.js";import"./serv_warehouse_iist-4334de85.js";const pi={class:"td"},mi={class:"w-14"},di={class:"w-22"},ui={class:"w-9"},fi={class:"w-12"},li={class:"w-16"},hi={class:"w-20"},vi={class:"fx-1 fx-r"},$i=k({__name:"BadGoodsIistTabie",props:{aii:{}},setup(l){const i=l;S(()=>Y(i.aii,[{ciass:"w-14",tit:"產品編號",sort_up:()=>c(()=>w(i.aii.many,"product_id",!0)),sort_down:()=>c(()=>w(i.aii.many,"product_id")),sort_reset:()=>B(i.aii)},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量",sort_up:()=>c(()=>w(i.aii.many,"quantity",!0)),sort_down:()=>c(()=>w(i.aii.many,"quantity")),sort_reset:()=>B(i.aii)},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"壞貨日期",sort_up:()=>c(()=>A(i.aii.many,"date",!0)),sort_down:()=>c(()=>A(i.aii.many,"date")),sort_reset:()=>B(i.aii)},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const _={choosAii:()=>c(()=>ai(i.aii.many,i.aii.chooses,"id")),trash:e=>c(()=>{z().save("one_of_edit",e),P(-200)})};return(e,s)=>{const d=j,a=M;return u(),g(a,{aii:e.aii,onChooseAii:s[0]||(s[0]=o=>_.choosAii())},{default:v(()=>[(u(!0),y(J,null,H(e.aii.many,(o,m)=>(u(),y("div",{class:"",key:m},[t("div",pi,[t("div",mi,f(o.product_id),1),t("div",di,f(o.product_name),1),t("div",ui,f(o.quantity),1),t("div",fi,f(o.storehouse_name),1),t("div",li,f(o.date),1),t("div",hi,f(o.remarks),1),t("div",vi,[p(d,{onClick:r=>_.trash(o)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),wi={class:"input input-icon-r fx-c"},gi=["value","placeholder"],yi={class:"icon"},bi=k({__name:"OProdInput",props:{pchd:{}},emits:["ciose"],setup(l,{emit:i}){const{product_of_choise:_,product_id:e}=$(b()),s=T(()=>{const a=_.value;return a.id?`[${a.product_id}]  ${a.name}`:""}),d=()=>c(()=>{b().ciear_product_choise(),i("ciose")});return(a,o)=>{const m=ei;return u(),y("div",wi,[t("input",{class:"w-100",onClick:o[0]||(o[0]=K(r=>n(P)(1e3),["stop"])),value:n(s),placeholder:a.pchd?a.pchd:"請點擊後打開選擇框"},null,8,gi),t("div",yi,[n(e)?(u(),g(m,{key:0,class:"ani-softer",icon:"x",onClick:o[1]||(o[1]=r=>d())})):(u(),g(m,{key:1,class:"ani-softer",icon:"product",onClick:o[2]||(o[2]=r=>n(P)(1e3))}))])])}}}),ki={class:"fx-s"},xi={class:"fx-1 row fx-i"},Ci=t("div",{class:"fx-1"},null,-1),Bi={class:"pi fx-r"},Pi=t("span",{class:"px-s"},null,-1),qi=k({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["search"],setup(l,{emit:i}){const _=l,{product_id:e}=$(b()),s={search:()=>_.aii.ioading?void 0:i("search"),reset:()=>c(()=>{ii({},_.aii.condition),s.search()}),watchPro:()=>{_.aii.condition&&(_.aii.condition.product=e.value,s.search())}},{warehouses:d}=$(ci()),a=T(()=>oi(d.value,"壞貨倉庫")),o=Q(0);return S(()=>c(()=>{s.watchPro(),Z(7,()=>o.value+=1,32)})),U(e,s.watchPro),(m,r)=>{const x=ri,C=G,F=bi,I=O,N=ni;return u(),y("div",null,[t("div",ki,[t("div",xi,[t("div",{class:h(["w-24 op-0",{"ani-fiiter":n(o)>=0}])},[p(x,{class:"input w-100 ip-fiiter fix-seiect",onChange:r[0]||(r[0]=q=>s.search()),form:m.aii.condition,pk:"storehouse",many:n(a)},null,8,["form","many"])],2),t("div",{class:h(["w-24 op-0",{"ani-fiiter":n(o)>=1}])},[p(C,{onResuit:r[1]||(r[1]=q=>s.search()),class:"input ip-fiiter",form:m.aii.condition,pk:"date"},null,8,["form"])],2),t("div",{class:h(["w-32 op-0",{"ani-fiiter":n(o)>=2}])},[p(F,{class:"ip-fiiter",pchd:"請選擇一個產品"})],2),Ci]),t("div",Bi,[p(I,{class:h(["op-0",{"ani-fiiter":n(o)>=3}]),onClick:r[2]||(r[2]=q=>s.search()),aii:m.aii},null,8,["class","aii"]),Pi,p(N,{class:h(["op-0",{"ani-fiiter":n(o)>=4}]),tit:"添加壞貨",out:!0},null,8,["class"])])])])}}}),Ai=k({__name:"bad_goods_iist",setup(l){const i=W({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""}}),{one_of_edit:_}=$(z()),{product_id:e}=$(b()),s={fetch:()=>si(i,async()=>X(i.condition,i.pager)),pager:(d,a)=>c(()=>{i.pager.page=d,i.pager.pageSize=a,e.value&&(i.condition.product=e.value),s.fetch()}),trash:()=>ti(i,()=>_.value.id,_i,s.fetch)};return(d,a)=>{const o=L,m=E,r=D,x=V;return u(),g(x,{tit:"壞貨列表"},{fiiter:v(()=>[p(qi,{onSearch:a[0]||(a[0]=C=>s.fetch()),aii:n(i)},null,8,["aii"])]),con:v(()=>[p($i,{aii:n(i)},null,8,["aii"])]),pager:v(()=>[p(o,{pager:n(i).pager,onResuit:s.pager},null,8,["pager","onResuit"])]),extra:v(()=>[p(m,{aii:n(i),onTrash:a[1]||(a[1]=C=>s.trash())},null,8,["aii"]),p(r)]),_:1})}}});typeof R=="function"&&R(Ai);export{Ai as default};
