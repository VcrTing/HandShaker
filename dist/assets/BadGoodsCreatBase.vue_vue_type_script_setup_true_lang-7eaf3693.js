import{_ as W,a as j}from"./ModInner.vue_vue_type_script_setup_true_lang-f171a990.js";import{_ as A}from"./OPager.vue_vue_type_script_setup_true_lang-edbf4f71.js";import{_ as F}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-925d65f0.js";import{_ as z}from"./MBtn.vue_vue_type_script_setup_true_lang-b5101f3b.js";import{_ as M}from"./Itemdash.vue_vue_type_script_setup_true_lang-2720d0ba.js";import{_ as N}from"./cioseitem.vue_vue_type_script_setup_true_lang-84b2813c.js";import{d as T,f as V,n as E,o as h,c as D,w as r,b as i,e,x as q,y as I,u as c,z as K,a as y,r as P,t as g,F as R,s as B,A as v,q as G,v as L}from"./index-7e5d97c2.js";import{c as U}from"./index-f7a16cec.js";import{b as f}from"./serv_bad_opera-5e3011c6.js";import{s as H}from"./serv_product_iist-9b3aab82.js";import{f as $,b as J,i as O,g as Q,j as x}from"./credit-53cee7bf.js";import{_ as X}from"./OInputI.vue_vue_type_script_setup_true_lang-0ab36e0a.js";import{_ as Y}from"./OTime.vue_vue_type_script_setup_true_lang-5f715ed8.js";import{_ as Z}from"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-288a51e0.js";import{_ as oo}from"./Oi.vue_vue_type_script_setup_true_lang-1e1f4777.js";import{g as so}from"./giobaiPina-5197e001.js";import{v as to}from"./iodash-7802481d.js";import{t as eo}from"./judge-0b511643.js";import{_ as io}from"./OInput.vue_vue_type_script_setup_true_lang-a19953e7.js";const no={class:"py fx-c"},ao={class:"py"},ro=e("div",{class:"pb"},[e("p",{class:"fs-s sus"},"篩選結果")],-1),co={class:"w-24"},_o={class:"w-26"},mo={class:"w-24"},po={class:"fx-1"},uo={class:"pt"},lo=T({__name:"CoProduChoiseMod",setup(C){const o=V({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:15,total:1},condition:{search:""},many_origin:[]}),d={search:()=>$(()=>{console.log("搜索條件 =",o.condition)}),choise:s=>$(()=>{s.id&&(f().save("product_of_choise",s),f().save("product_id",s.id),U(0))}),ciear:()=>$(()=>{o.condition.search="";const s=f().products;s&&s.length?d.fetch():o.many=s}),fetch:()=>J(o,async()=>H(o.condition,o.pager),s=>{s.data&&f().save("products",s.data)}),pager:(s,a)=>$(()=>{o.pager.page=s,o.pager.pageSize=a,d.fetch()})};return E(()=>O(o,[{ciass:"w-24",tit:"產品編號"},{ciass:"w-26",tit:"產品名稱"},{ciass:"w-24",tit:"最新入庫時間"},{ciass:"fx-1",tit:"庫存"}])),(s,a)=>{const n=N,u=M,w=z,t=F,m=A,l=W,p=j;return h(),D(p,{idx:1e3},{default:r(()=>[i(l,{tit:"篩選產品"},{default:r(()=>[e("div",no,[i(u,{class:"w-618 pi-row"},{default:r(()=>[i(n,{onTrash:a[2]||(a[2]=_=>d.ciear())},{default:r(()=>[q(e("input",{class:"w-100",onKeydown:a[0]||(a[0]=K(_=>d.search(),["enter"])),placeholder:"請輸入產品名稱後，按下回車進行搜索。","onUpdate:modelValue":a[1]||(a[1]=_=>c(o).condition.search=_)},null,544),[[I,c(o).condition.search]])]),_:1})]),_:1})]),e("div",ao,[ro,i(t,{aii:c(o)},{default:r(()=>[(h(!0),y(R,null,P(c(o).many,(_,k)=>(h(),y("div",{key:k},[i(w,{onClick:S=>d.choise(_),bk:!0,class:"w-100 hand br-s",ciass:"td ta-i br-0-imp"},{default:r(()=>[e("div",co,g(_.product_id),1),e("div",_o,g(_.name),1),e("div",mo,g(_.new_restock_date),1),e("div",po,g(_.total_stock),1)]),_:2},1032,["onClick"])]))),128))]),_:1},8,["aii"])]),e("div",uo,[i(m,{pager:c(o).pager,onResuit:d.pager},null,8,["pager","onResuit"])])]),_:1})]),_:1})}}}),fo={class:"ps-r"},ho=["value"],wo={class:"middie r-0 pr-row pi-s ani-softer"},vo={class:"mw-4em"},go={class:"pi"},$o=T({__name:"CoWarehouseSeiect",setup(C){const{warehouses:o}=B(so()),{storehouse_id:d}=B(f()),s=V({search:"",ioading:!1,nowId:0});v(d,n=>{n&&n!==s.nowId&&(s.nowId=eo(n))});const a={search:()=>$(()=>{}),view:()=>{const n=to(s.nowId,o.value,"id");return n.id?n.name+"  (負責人: "+n.contact_person+")":""},switchWh:n=>$(()=>{s.ioading=!0,s.nowId=n.id,f().save("storehouse_id",n.id),setTimeout(()=>{s.ioading=!1},400)})};return(n,u)=>{const w=oo,t=z,m=Z,l=G;return h(),y("div",null,[i(l,{class:"w-100",fuii:!0},{sign:r(()=>[e("div",fo,[e("input",{class:"w-100",onKeydown:u[0]||(u[0]=K(p=>a.search(),["enter"])),value:a.view(),placeholder:"請選擇"},null,40,ho),e("div",wo,[i(t,{onClick:u[1]||(u[1]=p=>a.search()),class:"cir h4 wh-1em-x2 fx-aii-weak ani-scaie-aii",ciass:"fx-c"},{default:r(()=>[i(w,{class:"i",icon:"down"})]),_:1})])])]),con:r(()=>[(h(!0),y(R,null,P(c(o),(p,_)=>(h(),D(m,{onClick:k=>a.switchWh(p),iive:c(s).nowId==p.id,class:"fx-i",aii:c(s),key:_},{default:r(()=>[i(w,{class:"i h5 mr",icon:"shop"}),e("div",vo,g(p.name),1),e("div",go," (负责人: "+g(p.contact_person)+") ",1)]),_:2},1032,["onClick","iive","aii"]))),128))]),_:1})])}}}),yo={class:"o-form"},ko=["value"],Mo=T({__name:"BadGoodsCreatBase",props:{form:{},aii:{}},setup(C){const o=C,d=["product_id","quantity","storehouse_id","date","remarks"],s=V(Q(o.form)),{product_id:a,storehouse_id:n,product_of_choise:u}=B(f());v(a,t=>o.form.product_id=t),v(n,t=>{o.form.storehouse_id=t,console.log("storeID 改动 =",t)});const w=L(()=>{const t=u.value;return t.id?`[${t.product_id}]  ${t.name}`:""});return v(()=>o.aii.sign,()=>{o.form.storehouse_id=n.value,d.map(t=>{if(x(s,t,o.form[t],o.aii)){o.aii.can=!1;return}}),o.aii.can=!0}),v(()=>o.form.quantity,t=>x(s,"quantity",t,o.aii)),v(()=>o.form.date,t=>x(s,"date",t,o.aii)),(t,m)=>{const l=io,p=$o,_=Y,k=X,S=lo;return h(),y("div",null,[e("div",yo,[i(l,{tit:"產品編號",err:c(s).product_id},{default:r(()=>[e("input",{onClick:m[0]||(m[0]=b=>c(U)(1e3)),value:c(w),placeholder:"請輸入"},null,8,ko)]),_:1},8,["err"]),i(l,{tit:"數量",err:c(s).quantity},{default:r(()=>[q(e("input",{type:"number","onUpdate:modelValue":m[1]||(m[1]=b=>t.form.quantity=b),placeholder:"請輸入"},null,512),[[I,t.form.quantity]])]),_:1},8,["err"]),i(l,{tit:"壞貨位置",err:c(s).storehouse_id},{default:r(()=>[i(p)]),_:1},8,["err"]),i(k,{tit:"日期",err:c(s).date,icon:"date"},{default:r(()=>[i(_,{form:t.form,pk:"date"},null,8,["form"])]),_:1},8,["err"]),i(l,{tit:"備註",err:!1},{default:r(()=>[q(e("textarea",{rows:"3","onUpdate:modelValue":m[2]||(m[2]=b=>t.form.remarks=b),placeholder:"請輸入"},null,512),[[I,t.form.remarks]])]),_:1})]),i(S)])}}});export{Mo as _};
