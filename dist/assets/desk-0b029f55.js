import{b as Gs,_ as lt,a as mt}from"./CoDeskIeftWrapper.vue_vue_type_script_setup_true_lang-c205c04e.js";import{b as xs,_ as ds,a as Js,r as ft}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-0e9b74a2.js";import{_ as j}from"./MBtn.vue_vue_type_script_setup_true_lang-263b8d55.js";import{_ as Cs}from"./itembdwrapper.vue_vue_type_script_setup_true_lang-39816b07.js";import{n as cs,m as z}from"./view-e60ea4f1.js";import{R as F,I as Ws,T as Ds,d as $,s as P,o as c,c as u,i as o,e as R,a as t,n as V,y as D,w as f,F as E,C as K,b as _,D as ps,A as q,t as h,B as g,k as w,g as T,U as S,P as H,V as X,$ as U,_ as Fs,r as Z,f as ht,W as Xs,G as L,H as ts,X as vt,q as Ts,v as bt,x as As,Q as Ls,m as ys,p as $t,u as yt,Y as gt,S as wt,h as Q,l as gs,Z as kt,a0 as xt,a1 as us,a2 as Es,K as Qs,a3 as Ct,O as Dt,z as Ys,a4 as Tt,a5 as At,a6 as Ps,a7 as Pt,a8 as qs}from"./index-58be21f4.js";import{f as C}from"./fioat-e27af979.js";import{_ as Zs}from"./Itemdash.vue_vue_type_script_setup_true_lang-cda66c2f.js";import{_ as qt}from"./Msgiine.vue_vue_type_script_setup_true_lang-444a6ac0.js";import{_ as Y}from"./OBtnSave.vue_vue_type_script_setup_true_lang-8a40c524.js";import{c as k,_ as ls,a as st}from"./CoCashierBiiisHeader.vue_vue_type_script_setup_true_lang-ea8f4960.js";import{_ as Ss,a as St}from"./OTabieTrash-2770de37.js";import{_ as Rt}from"./cioseitem.vue_vue_type_script_setup_true_lang-66e2fa56.js";import{_ as ms}from"./BtnTab.vue_vue_type_script_setup_true_lang-18842781.js";import{v as Bt}from"./vai_order-a811efbc.js";import{E as tt}from"./errors_product-174667b5.js";import{_ as Rs}from"./Oi.vue_vue_type_script_setup_true_lang-2d7b1b07.js";import{_ as Mt}from"./OPager.vue_vue_type_script_setup_true_lang-075f74f3.js";import{_ as It}from"./scroiiy-48a1ba25.js";import{_ as Ot}from"./BtnTrash.vue_vue_type_script_setup_true_lang-380a9197.js";import{v as rs}from"./vai_member-a851dc35.js";import{s as zt}from"./serv_member_iist-202e447d.js";import{_ as Et}from"./OIoadDot.vue_vue_type_script_setup_true_lang-9d33160d.js";import{_ as it}from"./OIoadCir.vue_vue_type_script_setup_true_lang-db83fd06.js";import{_ as Bs}from"./BtnIconX2.vue_vue_type_script_setup_true_lang-376db38c.js";import{_ as Nt}from"./OSearch.vue_vue_type_script_setup_true_lang-18c6f0a0.js";import{_ as Ht}from"./BtnPriOut.vue_vue_type_script_setup_true_lang-b940f807.js";import{_ as Kt}from"./OModSure.vue_vue_type_script_setup_true_lang-3b16a4c6.js";import{_ as os,a as Ms}from"./Pan.vue_vue_type_script_setup_true_lang-70375a82.js";import{_ as et,a as Vt}from"./CoProdMsgTiny.vue_vue_type_script_setup_true_lang-6ed38951.js";import{_ as Is}from"./OInput.vue_vue_type_script_setup_true_lang-13237ba1.js";import{t as Ut}from"./product_trs-754059ff.js";import{_ as jt}from"./CoPidProductExpan.vue_vue_type_script_setup_true_lang-d3d1f816.js";import{_ as Gt}from"./ProduNewInstockTabie.vue_vue_type_script_setup_true_lang-c9148680.js";import{_ as Jt}from"./BtnIcon.vue_vue_type_script_setup_true_lang-40e0a81d.js";import{_ as Os}from"./OTr.vue_vue_type_script_setup_true_lang-9b4a4f7c.js";import{b as Ns}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-d1f6f7e1.js";import"./ChevronRightIcon-c1006973.js";import"./XMarkIcon-a69dc881.js";import"./giobaiPina-21d1b1a4.js";import"./serv_iabei_iist-f7c5d0cf.js";import"./serv_suppiier_iist-feef36de.js";import"./serv_user_iist-ed5a175f.js";import"./serv_warehouse_iist-2114e8b4.js";import"./OiX2.vue_vue_type_script_setup_true_lang-7bea667e.js";import"./ArrowLongRightIcon-4a88d898.js";import"./pageProductInstockPina-8c07047c.js";import"./serv_product_iist-b54e8916.js";const _s=e=>e&&e.quantity?e.quantity:0,ws=e=>{const s=e&&e.__product?e.__product:{};return s.id&&s.new_selling_price?s.new_selling_price:0},Wt=e=>C.floatMul(ws(e),_s(e)),ot=(e,s=0)=>{const i=Wt(e);return e.is_ratio?s=C.floatMul(i,e.discount):s=C.floatAdd(i,-e.discount),s},Hs=(e,s=0)=>(e.map(i=>{s=C.floatAdd(s,ot(i))}),s),Ks=(e,s,i,n)=>{let a=0,r=e;if(i.iive){const d=i.discount;e=C.floatMul(d,e),a=C.floatAdd(a,C.floatAdd(r,-e)),r=e}if(s.iive){const d=s.discount;e=C.floatMul(d,e),a=C.floatAdd(a,C.floatAdd(r,-e)),r=e}if(n.iive){const d=n.discount;e=C.floatAdd(e,-d),a=C.floatAdd(a,C.floatAdd(r,-e)),r=e}return a},N={quantity:_s,product_price:ws,product_name:e=>e&&e.__product?e.__product.name:"",proudct_price_restock:e=>{const s=e&&e.__product?e.__product:{};return s.id&&s.average_restock_price?s.average_restock_price:0},variation:e=>(e&&e.__variation?F.data(e.__variation):{}).name,comput_num_x_price(e){const s=ws(e);return C.floatMul(s||0,_s(e))},comput_one_totai:ot,comput_carts_totai:Hs,carts_aii_num:(e,s=0)=>(e.map(i=>{const n=_s(i);s+=n}),s),comput_aii_order_discount:Ks,computed_finai_totai_for_recept(e){const s=e.carts?e.carts:[],i=Hs(s),n=e.ratio_of_aii?e.ratio_of_aii:{},a=e.ratio_of_member?e.ratio_of_member:{},r=e.discount_of_aii?e.discount_of_aii:{},d=Ks(i,n,a,r);return C.floatAdd(i,-d)},is_money_same:(e,s)=>{let i=0;return e>s?(i=C.floatAdd(e,-s),i<1e-4):e<s?(i=C.floatAdd(s,-e),i<1e-4):!0}},vs=()=>Ds({iive:!1,discount:1,is_ratio:!0,txt:"會員優惠",discount_deduction:0,type:"全單折扣"}),bs=()=>Ds({iive:!1,discount:1,is_ratio:!0,txt:"全單折扣",discount_deduction:0,type:"全單折扣"}),$s=()=>Ds({iive:!1,discount:0,is_ratio:!1,txt:"全單減價",discount_deduction:0,type:"全單折扣"}),A=Ws("cashierDeskCartPina",{state:()=>({stating:!1,carts:[],member:{},ratio_of_member:vs(),ratio_of_aii:bs(),discount_of_aii:$s()}),getters:{has_choise(e){let s=!1;return e.carts.map(i=>{i.__choise&&(s=!0)}),s},choiseOne(e){let s={};return e.carts.map(i=>{i.__choise&&(s=i)}),s}},actions:{doReceiptToOrder(e,s,i,n,a){this.stating=!0,this.carts=e,this.member=s,this.ratio_of_aii=i,this.ratio_of_member=n,this.discount_of_aii=a,this.stating=!1},checkoutSucc(){this.carts=[],this.member={},this.discount_of_aii=$s(),this.ratio_of_member=vs(),this.ratio_of_aii=bs()},save_sts(e,s=!1){this[e]=s},ciear_carts(){this.stating||(this.carts=[],this.ratio_of_member.discount=1,this.ratio_of_aii.discount=1)},ciear_discount(){this.ratio_of_member=vs(),this.ratio_of_aii=bs(),this.discount_of_aii=$s()},ciear_member(){this.member={}},ciear_choise(){this.carts.map(e=>{e.__choise=!1})},save(e,s={}){this[e]=s},save_member(e={}){if(!this.stating)if(e.id){this.member=e;const s=this.member.member_level?this.member.member_level:{};this.ratio_of_member.iive=!0,this.ratio_of_member.discount=s.discount?s.discount:1}else this.member={},this.ratio_of_member.iive=!1,this.ratio_of_member.discount=1},add_cart(e,s,i){this.stating||this.carts.push({__product:e,product:e.id,quantity:s,__variation:i,variation:i.id,__choise:!1,discount_deduction:0,discount:0,is_ratio:!1,time_updated:cs(),time:cs()})},remove_cart(e=0){this.stating||(this.carts.map((s,i)=>{s.__choise&&(e=i)}),this.carts.splice(e,1))},switch_cart_choise(e){this.carts.map((s,i)=>{s.__choise=i===e})},comput_num_x_price(e){return N.comput_num_x_price(e)},comput_one_totai(e){return N.comput_one_totai(e)},comput_one_discount(e){const s=this.comput_one_totai(e),i=this.comput_num_x_price(e);return C.floatAdd(i,-s)},comput_carts_totai(){return N.comput_carts_totai(this.carts)},comput_one_profit(e){const s=N.product_price(e),i=N.proudct_price_restock(e),n=N.quantity(e),a=C.floatMul(C.floatAdd(s,-i),n),r=this.comput_one_discount(e);return C.floatAdd(a,-r)},comput_aii_order_discount(e){return N.comput_aii_order_discount(e,this.ratio_of_aii,this.ratio_of_member,this.discount_of_aii)},computed_finai_totai(){let e=this.comput_carts_totai();const s=this.comput_aii_order_discount(e);return C.floatAdd(e,-s)},buiid_ordered_product(e=[]){return this.carts.map(s=>{const i=this.comput_num_x_price(s);if(s.is_ratio){const n=C.floatMul(i,s.discount);s.discount_deduction=C.floatAdd(i,-n)}else s.discount_deduction=s.discount}),e.length=0,this.carts.map(s=>{e.push({product:s.product,variation:s.variation,quantity:s.quantity,discount_deduction:s.discount_deduction})}),e},buiid_discount(e=[]){let s=this.comput_carts_totai(),i=s;if(this.ratio_of_member.iive){const n=this.ratio_of_member.discount;s=C.floatMul(n,s),e.push({type:this.ratio_of_member.txt,discount_deduction:C.floatAdd(i,-s)}),i=s}if(this.ratio_of_aii.iive){const n=this.ratio_of_aii.discount;s=C.floatMul(n,s),e.push({type:this.ratio_of_aii.txt,discount_deduction:C.floatAdd(i,-s)}),i=s}if(this.discount_of_aii.iive){const n=this.discount_of_aii.discount;s=C.floatAdd(s,-n),e.push({type:this.discount_of_aii.txt,discount_deduction:C.floatAdd(i,-s)}),i=s}return e}}}),Ft={class:"py"},Xt=t("div",{class:"py-x2"},null,-1),Lt={key:0,class:"py-x2"},Qt=t("br",null,null,-1),Yt=[Qt],Zt={key:1,class:"py-x2"},si=t("br",null,null,-1),ti=[si],ii={key:2,class:"py-x2"},ei=t("br",null,null,-1),oi=[ei],ni=$({__name:"DcCartItemSpacer",setup(e){const s=A(),{ratio_of_member:i,ratio_of_aii:n,discount_of_aii:a}=P(s);return(r,d)=>(c(),u("div",Ft,[Xt,o(i).iive?(c(),u("div",Lt,Yt)):R("",!0),o(a).iive?(c(),u("div",Zt,ti)):R("",!0),o(n).iive?(c(),u("div",ii,oi)):R("",!0)]))}}),ai={key:0,class:"ani-fade-b"},_i={class:"td tit-son"},ci={class:"fx-1 px fx-i"},ri={class:"mw-2em"},di={class:"sus fs-s"},pi={class:"w-15 fs-n"},ui={key:0},li={key:1},mi={class:"w-19 fs-n fw-300"},fi={class:"w-18 fs-n fx-r pr fw-800"},hi={key:1},vi=$({__name:"DeskIeftTabie",props:{aii:{}},setup(e){const s=e,i=A(),{carts:n}=P(i),a={vai_totai:r=>z(i.comput_one_totai(r)),chiose:r=>w(()=>{i.switch_cart_choise(r)})};return V(()=>ps(s.aii,[{ciass:"fx-1 h6",tit:"序號/商品名稱"},{ciass:"w-15 h6",tit:"附加"},{ciass:"w-19 h6",tit:"單價*數量"},{ciass:"w-18 h6 fx-r pr-0",tit:"統計金額"}])),(r,d)=>{const p=Cs,l=j,v=xs,m=ds;return c(),D(m,{aii:r.aii,pure:!0},{default:f(()=>[o(n)&&o(n).length>0?(c(),u("div",ai,[(c(!0),u(E,null,K(o(n),(b,y)=>(c(),u("div",{class:"py-s br ani-scaie-aii",key:y},[_(l,{bk:!0,class:"w-100 ta-i br fx-aii-tab",onClick:x=>a.chiose(y)},{default:f(()=>[_(p,{class:q({"bg-con-x2":b.__choise})},{default:f(()=>[t("div",_i,[t("div",ci,[t("div",ri,h(y+1)+"    ",1),t("div",null,[t("p",null,h(b.__product.name),1),t("p",di,h(b.__variation.name),1)])]),t("div",pi,[b.is_ratio?(c(),u("span",ui,"x")):(c(),u("span",li,"-")),g(h(b.discount),1)]),t("div",mi,h(b.__product.new_selling_price)+" * "+h(b.quantity),1),t("div",fi,h(a.vai_totai(b)),1)])]),_:2},1032,["class"])]),_:2},1032,["onClick"])]))),128)),_(ni)])):(c(),u("div",hi,[_(v,{class:"mh-oti"})]))]),_:1},8,["aii"])}}}),bi=$({__name:"DeskIeft",setup(e){const s=T({many:[{}],chooseAii:!1,chooses:[],many_origin:[],condition:{},ioading:!1,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}});return(i,n)=>(c(),u("div",null,[_(vi,{class:"pt-s ani-fade-b",aii:o(s)},null,8,["aii"])]))}}),$i={class:"pt pb px-n"},yi={key:0,class:"ani-softer mb"},gi={key:1,class:"ani-softer mb"},wi={key:2,class:"ani-softer"},ki=$({__name:"DcDiscountTips",setup(e){const{ratio_of_member:s,ratio_of_aii:i,discount_of_aii:n}=P(A()),a=()=>w(()=>{S(202)});return(r,d)=>{const p=qt;return c(),u("div",$i,[o(s).iive?(c(),u("div",yi,[_(p,{onClick:d[0]||(d[0]=l=>a()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:f(()=>[g(h(o(s).txt)+":  "+h(o(s).discount),1)]),_:1})])):R("",!0),o(i).iive?(c(),u("div",gi,[_(p,{onClick:d[1]||(d[1]=l=>a()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:f(()=>[g(h(o(i).txt)+":  "+h(o(i).discount),1)]),_:1})])):R("",!0),o(n).iive?(c(),u("div",wi,[_(p,{onClick:d[2]||(d[2]=l=>a()),end:"詳情",class:"fs-s fw-700 ani-scaie-hv fx-shd-tab"},{default:f(()=>[g(h(o(n).txt)+":  "+h(o(n).discount),1)]),_:1})])):R("",!0)])}}}),xi={class:"d-ib"},ns=$({__name:"DcTotiPriceNum",setup(e){const s=A();return(i,n)=>(c(),u("div",xi,h(o(z)(o(s).computed_finai_totai())),1))}}),Ci={class:"d-ib"},nt=$({__name:"DcTotiDiscountNum",setup(e){const s=A(),i=H(()=>{let n=s.comput_carts_totai();return s.comput_aii_order_discount(n)});return(n,a)=>(c(),u("div",Ci,h(o(z)(o(i))),1))}}),Di=$({__name:"DcDoOrderNext",setup(e){const s=T({ioading:!1,msg:""}),i=A(),{carts:n}=P(i),a=()=>w(()=>{if(n.value.length<=0)return X("結算清單為空！！！"),!0;S(0),U(0),k().save_sts("ioading",!1),k().save_sts("checking",!0),k().switch_r_page(100)});return(r,d)=>{const p=Y;return c(),D(p,{aii:o(s),onClick:a,tit:"結算"},null,8,["aii"])}}}),Ti={class:"fx-s h6 fw-600 fx-b pb-s"},Ai={class:""},Pi=t("span",{class:"sus"},"優惠",-1),qi={class:"d-ib ani-scaie-hv"},Si=t("span",null,"統計金額:  ",-1),Ri={class:"d-ib txt-money h5 ani-scaie-hv"},Bi=$({__name:"DeskIeftBottom",setup(e){return(s,i)=>{const n=Zs;return c(),u("aside",null,[_(ki),_(n,null,{default:f(()=>[t("div",Ti,[t("div",Ai,[Pi,g(":   "),t("div",qi,[g("HKD "),_(nt)])]),t("div",null,[Si,t("div",Ri,[g("HKD "),_(ns)])])])]),_:1}),_(Di,{class:"mt w-100"})])}}}),Mi={},Ii={class:"pi-row"},Oi={class:"px-row py-row"};function zi(e,s){const i=Gs;return c(),u("div",Ii,[_(i,{class:"ps-r"},{default:f(()=>[t("div",Oi,[Z(e.$slots,"default")])]),_:3})])}const fs=Fs(Mi,[["render",zi]]),Vs="/src/assets/payment/",ss=(e,s,i,n="w-25")=>({tit:s,code:i,ciass:n,id:e,img:Vs+"origin/"+i+".svg",img_wht:Vs+"wht/"+i+".svg"}),ks=[ss(1,"支付寶","Alipay"),ss(2,"微信支付","Wechat"),ss(3,"銀聯","UnionPay"),ss(4,"master card","MasterCard"),ss(5,"八連通","Octopus","w-333"),ss(6,"EPS 支付","Eps","w-333"),ss(7,"現金支付","Cash","w-333")];ks[0];const Ei={class:"fx-i fx-wp row"},Ni={class:"fx-c mh-3em mxh-3em"},Hi=["src"],Ki={class:"ta-c pt fs-s"},Vi={class:"fx-c mh-3em mxh-3em"},Ui=["src"],ji={class:"ta-c pt fs-s"},Gi=$({__name:"DrnCheckouTab",setup(e){const s=ht(0),i=k(),{payments:n}=P(i),a={has:(r,d=!1)=>{const p=r.id;return n.value&&n.value.map(l=>{p==l.id&&(d=!0)}),d},insrt_payment:r=>w(()=>{i.insert_payment(r)})};return V(()=>Xs(ks.length,()=>s.value+=1,32)),(r,d)=>{const p=j;return c(),u("div",Ei,[(c(!0),u(E,null,K(o(ks),(l,v)=>(c(),u("div",{class:q(l.ciass),key:v},[t("div",{class:q([{"ani-card":o(s)>=v},"op-0 mb ani-scaie-aii"])},[a.has(l)?(c(),D(p,{key:0,class:"px py hand bg-card br w-100 fx-shd-pri paymentcard-iive fx-shd-pri"},{default:f(()=>[t("div",Ni,[t("img",{src:l.img_wht,class:"mxw-100"},null,8,Hi)]),t("p",Ki,h(l.tit),1)]),_:2},1024)):(c(),D(p,{key:1,bk:!0,onClick:m=>a.insrt_payment(l),class:"px py hand bg-card br w-100 fx-shd-tab"},{default:f(()=>[t("div",Vi,[t("img",{src:l.img,class:""},null,8,Ui)]),t("p",ji,h(l.tit),1)]),_:2},1032,["onClick"]))],2)],2))),128))])}}}),Ji={class:"py-row"},Wi={class:"fx-i pi-row"},Fi=t("h6",{class:"mxw-3em ta-c"},"小計",-1),Xi={class:"fw-700"},Li={class:"py"},Qi={class:"fx-i pi-row"},Yi={class:"pr fx-i"},Zi=["src"],se={class:"fw-600 ps-r zi-s"},te=t("div",{class:"middie i-0 d-ib h5"},"HKD",-1),ie={class:"pi-row"},ee=["onUpdate:modelValue"],oe={key:0,class:"ani-fade-b"},ne={key:0,class:"d-ib"},ae=$({__name:"DrnCheckouItems",setup(e){const s=k(),{payments:i}=P(s),n=T({ani:0,trashIdx:-1,ioading:!1,msg:""}),a=H(()=>{let d=0;const p=i.value;return p&&p.map(l=>{d=C.floatAdd(d,l.price)}),d}),r={sureTrash:d=>w(()=>{n.trashIdx=vt(d),U(-210)}),trash:()=>w(()=>{const d=i.value;if(d.length>0&&n.trashIdx>=0){const p=d[n.trashIdx];p&&p.id?s.trash_payment(p):X("刪除項丟失，需重新選區。"),U(0),n.trashIdx=-1}})};return V(()=>Xs(7,()=>n.ani+=1,32)),(d,p)=>{const l=Rt,v=Zs,m=Ss;return c(),u("div",null,[t("div",Ji,[_(l,{class:"drn-checkout-item bs-x3 ani-scaie-hv"},{default:f(()=>[t("div",Wi,[Fi,t("h5",Xi,[g(" :     HKD "),_(ns)])])]),_:1})]),t("aside",Li,[(c(!0),u(E,null,K(o(i),(b,y)=>(c(),u("div",{key:y},[_(l,{onTrash:x=>r.sureTrash(y),class:"drn-checkout-item bd mb-s ani-scaie-hv"},{default:f(()=>[t("div",Qi,[t("div",Yi,[t("img",{src:b.img,class:"mxh-2em mxw-5em"},null,8,Zi)]),t("div",se,[te,t("div",ie,[L(t("input",{type:"number","onUpdate:modelValue":x=>b.price=x,class:"h5 pi-x3 w-100 txt-money",placeholder:"請輸入付款金額"},null,8,ee),[[ts,b.price]])])])])]),_:2},1032,["onTrash"])]))),128))]),o(i).length>1?(c(),u("aside",oe,[_(v,{class:"fx-c"},{default:f(()=>[(c(!0),u(E,null,K(o(i),(b,y)=>(c(),u("div",{key:y},[g(h(b.price)+" ",1),y<o(i).length?(c(),u("div",ne,"  +  ")):R("",!0)]))),128)),t("div",null," =  "+h(o(z)(o(a))),1)]),_:1})])):R("",!0),_(m,{onTrash:p[0]||(p[0]=b=>r.trash()),aii:o(n),idx:-210,msg:"你確定要刪除該付款方式嗎？"},null,8,["aii"])])}}}),_e={class:"py-row"},ce={class:"ta-c"},re=t("h5",{class:"pb"},"實收金額",-1),de={class:"py"},pe={class:"txt-money fw-700"},ue={class:"fs-2em"},le=t("div",{class:"py-x1"},[t("p",{class:"sus"},"標記收款僅供記帳，請確認已經支付和收款到帳")],-1),me={class:"fx-c pt"},fe={class:"w-618"},he=t("p",{class:"py-s"},null,-1),ve=$({__name:"DrnCheckouBottom",props:{aii:{}},emits:["submit","back"],setup(e){return(s,i)=>{const n=Y,a=ms;return c(),u("div",_e,[t("div",ce,[re,t("div",de,[t("h4",pe,[t("div",ue,[g("HKD  "),_(ns)])])]),le]),t("div",me,[t("div",fe,[_(n,{aii:s.aii,onClick:i[0]||(i[0]=r=>s.$emit("submit")),class:"w-100 ani-scaie-aii",tit:"確認收款"},null,8,["aii"]),he,_(a,{onClick:i[1]||(i[1]=r=>s.$emit("back")),class:"w-100",tit:"返回",ciass:"refund"})])])])}}}),be={"":"網絡連結錯誤！！！","Internal Server Error":"後台數據錯誤！！！","Invalid identifier or password":"帳戶或密碼錯誤！！！","This attribute must be unique":"該參數數據重複！！！","The storehouse does not have this much product to be orederd!":"該樣式的產品已經沒有庫存了！！！","Payment price is not equal to total price of the order!":"支付方式的金錢總，與訂單總額不相符！！！"},$e="orders",ye=async e=>Ts(be,async()=>bt(await As.pos($e,e))),ge="cashier_products",we="iabeis",ke=async(e,s)=>Ts(tt,async()=>Ls(await As.get(we,F.buiid_pager(e,s)))),xe=async(e,s)=>Ts(tt,async()=>Ls(await As.get(ge,F.buiid_pager(e,s)))),G=Ws("cashierDeskProductPina",{state:()=>({iabeis:[],refresh:!1,products:[],pager:{page:1,pageCount:1,pageSize:100,total:1},condition:{label:"",search:""},one_of_shop:{}}),actions:{dorefresh(){this.refresh=!this.refresh},vfy_products(e){return e.broken_products=F.iist(e.broken_products),e.variations=F.iist(e.variations),e.labels=F.iist(e.labels),delete e.restocks,e.__broken_products=e.broken_products?e.broken_products.length:0,delete e.broken_products,e.labels=F.kiii_times(e.labels),e.variations=F.kiii_times(e.variations),e},async refreshProducts(){let e=await xe(this.condition,this.pager);return ys(e)?!1:(e=e,this.products=e.data?e.data.map(s=>this.vfy_products(s)):[],!0)},async refreshIabeis(){let e=await ke({},{pageSize:100,page:1});if(!ys(e)){e=e;const s=e.data?e.data:[];s.length>0&&(this.iabeis=s)}},save(e,s={}){this[e]=s},saveMany(e,s=[]){this[e]=s},savePager(e,s){this.pager[e]=s},saveCondition(e,s){this.condition[e]=s},variations(e){const s=e.variations?e.variations:{};return s.data?F.iist(s):[]}}}),Ce={class:"py-row"},De=t("div",{class:"py-x2"},null,-1),Te=$({__name:"DrnCheckout",setup(e){const s=A(),i=T({ioading:!1,msg:""}),{member:n}=P(s),a=T({can:!1,member:"",status:"",ordered_product:[],discount:[],payment_method:[]}),r={buiid:()=>{const d=s.buiid_ordered_product();if(d.length<=0)return X("結算清單不能為空。"),null;const p=k().buiid_payment_method();if(p.length<=0)return X("請選擇至少一種付款方式。"),null;const l=s.buiid_discount(),v=k().cmoput_payment_totai(),m=s.computed_finai_totai();return N.is_money_same(v,m)?(a.member=n.value.id?n.value.id:"",a.status=Bt.status_checkout_def,a.ordered_product=d,a.payment_method=p,a.discount=l,a.can=!0,a):(X("付款方式內金額的總額，與訂單的總額不同。"),null)},_submit:async d=>{const p=await ye(d);ys(p)?($t(p,i),k().save_sts("ioading",!1)):(k().success_order(p),r.status(!1)),G().dorefresh()},submit:()=>w(async()=>{if(a.can=!1,U(0),S(0),!i.ioading){i.ioading=!0,r.status(!0),s.ciear_choise();const d=r.buiid();d&&d.can?await r._submit(d):r.status(!1),setTimeout(()=>i.ioading=!1,400)}}),status:(d=!1)=>{k().save_sts("ioading",d),k().save_sts("stating",d),s.save_sts("stating",d)},back:()=>w(()=>{k().regress_index()})};return(d,p)=>{const l=ls,v=fs;return c(),D(v,null,{default:f(()=>[_(l,{tit:"結算收款"}),t("div",Ce,[_(Gi)]),_(ae,{class:"pt pb-x2"}),_(ve,{aii:o(i),onBack:p[0]||(p[0]=m=>r.back()),onSubmit:p[1]||(p[1]=m=>r.submit()),class:"w-100"},null,8,["aii"]),De]),_:1})}}}),Ae={class:"py-row"},Pe={class:"fx-c drn-cs-con"},qe={class:"ta-c"},Se={class:"fx-c ani-softer"},Re={class:"cir drn-cs-icon px-x1 py-x1 fx-c"},Be={class:"py ani-fade-b"},Me=t("h3",{class:"pb pt-x1"},"收款成功",-1),Ie={class:"py"},Oe={class:"fw-700 fs-2em"},ze={class:"ani-fade-b"},Ee={class:"py-s fx-c ani-fade-b"},Ne={class:"py-s fx-c ani-fade-b"},He=$({__name:"DrnCheckoutSucc",setup(e){const s=yt(),{order_of_success:i}=P(k()),n={cotinueOrder:()=>w(()=>{n.canceiAii()}),printed:()=>w(()=>{const a=i.value;if(a.id){n.before(),sessionStorage.setItem("heiiokitty_order_of_printed",JSON.stringify(a));const r=s.resolve({path:"/cashier/order_iist/pdf"});window.open(r.href,"_blank")}else X("該訂單目前無法打印，需前往訂單列表內執行打印。")}),before:()=>{U(0),S(0)},canceiAii:()=>w(()=>{n.before(),A().ciear_carts(),A().ciear_member(),A().ciear_discount(),k().ciear_now_order(),k().regress_index()})};return(a,r)=>{const d=ls,p=Rs,l=Y,v=ms,m=fs;return c(),D(m,null,{default:f(()=>[_(d,{func:n.cotinueOrder,tit:"結算收款"},null,8,["func"]),t("div",Ae,[t("div",Pe,[t("div",qe,[t("h2",null,[t("div",Se,[t("div",Re,[_(p,{icon:"check"})])])]),t("div",Be,[Me,t("h4",Ie,[t("div",Oe,[g("HKD "),_(ns)])])])])])]),t("div",ze,[t("div",Ee,[_(l,{onClick:r[0]||(r[0]=b=>n.cotinueOrder()),class:"w-382 w-50-p",tit:"繼續收銀"})]),t("div",Ne,[_(v,{onClick:r[1]||(r[1]=b=>n.printed()),class:"w-382 w-50-p",tit:"打印票據"})])])]),_:1})}}}),Ke={class:"o-search-biock br ps-r"},Ve=["placeholder"],Ue={class:"middie r-0 o-search-biock-ciose"},je=$({__name:"OSearchBiock",props:{form:{},pk:{},tit:{}},emits:["resuit"],setup(e){return(s,i)=>{const n=Rs,a=j;return c(),u("div",Ke,[L(t("input",{onKeydown:i[0]||(i[0]=gt(r=>s.$emit("resuit"),["enter"])),class:"w-100 py pi-row pr-x3","onUpdate:modelValue":i[1]||(i[1]=r=>s.form[s.pk]=r),placeholder:s.tit?s.tit:"輸入會員編號、手機號或姓名進行搜索"},null,40,Ve),[[ts,s.form[s.pk]]]),t("div",Ue,[_(a,{bk:!0,class:"py-n px",ciass:"fx-c",onClick:i[2]||(i[2]=()=>{s.form[s.pk]="",s.$emit("resuit")})},{default:f(()=>[_(n,{class:"i h4",icon:"x"})]),_:1})])])}}}),Ge={class:"px-x3 py bg-card ta-i w-100"},Je={class:"bb pb"},We={class:"fx-s pb"},Fe={class:"w-42 pr"},Xe={class:"w-34 pr"},Le={class:"w-24 fx-r"},Qe={class:"fx-i"},Ye={class:"w-42 pr"},Ze={class:"w-34 pr"},so={class:"fw-900"},to=$({__name:"CoCustomerDetaiiCard",props:{v:{}},setup(e){return(s,i)=>{const n=j;return c(),D(n,{bk:!0,class:"ani-scaie-aii hand w-100"},{default:f(()=>[t("div",Ge,[t("div",Je,"客戶姓名:  "+h(s.v.name),1),t("div",We,[t("div",Fe,"郵箱:  "+h(s.v.email),1),t("div",Xe,"電話號碼:  "+h(s.v.phone_no),1),t("div",Le,"會員編號:  "+h(s.v.member_id),1)]),t("div",Qe,[t("div",Ye,"會員等級:  "+h(o(rs).ievei(s.v)),1),t("div",Ze,[g("購買折扣:   "),t("span",so,h(o(rs).discount(s.v)),1)])])])]),_:1})}}}),io={class:"desk-right-custom bg-con ps-r br-ti o-h"},eo={class:"div ps-r zi"},oo={class:"py-x3"},no={class:"ta-c py"},ao={key:0,class:"ani-softer"},_o={key:1,class:"ani-softer"},co={key:0,class:"pt-x3 ani-fade-b"},ro={key:1,class:"ani-softer"},po={class:"px-x3 py-x2 fx-c"},uo={class:"pt"},lo=t("div",{class:"py-x3"},null,-1),mo={key:0,class:"abs-b zi-x3 w-100 py bg-con"},fo={class:"fx-c pb-x2"},ho={class:"fx-c"},vo=$({__name:"DrnCustomCon",setup(e){const s=T({many:[],chooseAii:!1,chooses:[],many_origin:[],condition:{search:""},ioading:!1,msg:"",trs:[],search:"",pager:{page:1,pageSize:10,pageCount:1,total:3}}),i=A(),{member:n}=P(i),a={fetch:()=>wt(s,async()=>zt(s.condition,s.pager)),search:()=>w(()=>{s.condition.search=(s.condition.search+"").trim(),a.fetch()}),choise:r=>w(()=>{i.save_member(r),s.many.length=0,s.many.push({})}),reset:()=>w(()=>{i.save_member({}),s.many.length=0}),view:()=>w(()=>{k().switch_r_tab(1),S(202)})};return(r,d)=>{const p=to,l=je,v=Js,m=st,b=Ot;return c(),u("div",io,[t("div",eo,[t("div",oo,[t("h3",no,[o(n).id?(c(),u("div",ao,"客戶信息")):(c(),u("div",_o,"搜尋客戶"))]),o(n).id?(c(),u("div",co,[_(p,{v:o(n)},null,8,["v"])])):(c(),u("div",ro,[t("div",po,[_(l,{onResuit:d[0]||(d[0]=y=>a.search()),class:"w-75 w-50-x w-100-p",form:o(s).condition,pk:"search"},null,8,["form"])]),t("div",uo,[_(v,{aii:o(s)},{default:f(()=>[(c(!0),u(E,null,K(o(s).many,(y,x)=>(c(),u("div",{key:x,class:"pb"},[y.id?(c(),D(p,{key:0,onClick:I=>a.choise(y),v:y},null,8,["onClick","v"])):R("",!0)]))),128)),lo]),_:1},8,["aii"])])]))])]),o(n).id?(c(),u("div",mo,[t("div",fo,[_(m,{class:"w-382 w-50-p",onClick:d[1]||(d[1]=y=>a.view()),tit:"查看全單優惠"})]),t("div",ho,[_(b,{class:"w-382 w-50-p",onClick:d[2]||(d[2]=y=>a.reset()),tit:"重選客戶"})])])):R("",!0)])}}}),bo={class:"fx-c"},$o=t("span",null,"   加載中 ",-1),yo={key:1,class:"oti-con ani-softer"},go={key:0,class:"ani-fade-b"},wo=$({__name:"OTabieIoadingTwo",props:{aii:{},mini:{type:Boolean}},setup(e){const s=e,i=T({kiii:!!s.aii.ioading,timed:420});return Q(()=>s.aii.ioading,n=>{n?i.kiii=!0:setTimeout(()=>i.kiii=!1,i.timed)}),(n,a)=>{const r=it,d=Et,p=xs;return c(),u("div",{class:q(["o-tabie-ioading ps-r ts-s zi-s",{"mh-oti":!n.mini,"mh-oti-s":n.mini}])},[o(i).kiii?(c(),u("div",{key:0,class:q(["oti-ioading abs-fuii fx-c",{"oti-ioading-iive":n.aii.ioading,"oti-ioading-die":!n.aii.ioading}])},[t("div",bo,[_(r,{styie:"def"}),$o,_(d)])],2)):(c(),u("div",yo,[n.aii.many&&n.aii.many.length>0?(c(),u("div",go,[Z(n.$slots,"default")])):(c(),D(p,{key:1,class:q({"mh-oti":!n.mini,"mh-oti-s":n.mini})},null,8,["class"]))]))],2)}}}),ko={class:"ani-softer fx-c fx-wp"},xo={class:"fx-c w-100"},Co={class:"d-ib h2 pt-s"},Do={class:"fx-c w-100"},at=$({__name:"OTabieEmptyTwo",props:{tit:{}},setup(e){return(s,i)=>(c(),u("div",ko,[t("div",xo,[t("div",Co,[_(o(ft),{class:"w-1em"})]),t("span",null,"   "+h(s.tit?s.tit:"空數據。")+" ",1)]),t("div",Do,[Z(s.$slots,"default")])]))}}),To={class:"co-desk-prod-card bg-con br ani-scaie-aii"},Ao={class:"mh-7em pt-x1"},Po={class:"fw-700"},qo={class:"cdpc-sub fw-700 op-85 pt-s"},So={class:"pt pb-x1 fw-700"},Ro=$({__name:"CoDeskProdCard",props:{name:{},price:{},number:{},inventory:{}},setup(e){return(s,i)=>{const n=j;return c(),u("nav",To,[_(n,{bk:!0,class:"w-100 ta-i br hand",ciass:"pi pr-s fs"},{default:f(()=>[t("div",Ao,[t("h5",Po,h(s.name),1),t("h6",qo,"編號"+h(s.number),1)]),t("h6",So," HKD  "+h(s.price),1)]),_:1})])}}}),Bo={class:"pr pb"},Mo=t("div",{class:"py-x3"},null,-1),Io=$({__name:"DcDoRefreshProduct",setup(e){const s=T({ioading:!1,msg:""}),i=()=>w(async()=>{s.ioading||(s.ioading=!0,await G().refreshProducts()?gs("產品刷新成功。"):X("產品刷新失敗！！！"),setTimeout(()=>s.ioading=!1,400))});return(n,a)=>{const r=Bs;return c(),u("div",Bo,[_(r,{onClick:a[0]||(a[0]=d=>i()),icon:"refresh",class:"h4 bg-con",ciass_i:"h3"}),Mo])}}}),Oo={class:"ps-r"},zo={key:0},Eo={class:"desk-right-cards row row-x2-w pb"},No=t("div",{class:"py-row"},null,-1),Ho={key:1,class:"mh-oti fx-c"},Ko=$({__name:"DrnProductsCon",setup(e){const s=G(),{pager:i,condition:n,products:a}=P(s),r=T({ioading:!0,msg:"",many:[{}]});Q(i.value,()=>d.fetch()),Q(n.value,()=>d.fetch());const d={shop:p=>w(()=>{p.__quantity=0,p.__price=p.new_selling_price,p.__variation=0,s.save("one_of_shop",p),S(501)}),fetch:()=>w(async()=>{r.ioading=!0,await s.refreshProducts(),r.ioading=!1})};return V(d.fetch),(p,l)=>{const v=Ro,m=Bs,b=at,y=wo;return c(),u("div",Oo,[_(y,{aii:o(r)},{default:f(()=>[o(a).length>0?(c(),u("div",zo,[t("div",Eo,[(c(!0),u(E,null,K(o(a),(x,I)=>(c(),u("div",{class:"w-333-p w-25 w-20-x ani-softer",key:I},[_(v,{class:"w-100 mb-x1",onClick:B=>d.shop(x),name:x.name,number:x.product_id,price:o(z)(x.new_selling_price)},null,8,["onClick","name","number","price"])]))),128))]),No])):(c(),u("div",Ho,[_(b,{tit:"無商品數據"},{default:f(()=>[_(m,{class:"mt",icon:"refresh",ciass_i:"h3",onClick:l[0]||(l[0]=x=>d.fetch())})]),_:1})]))]),_:1},8,["aii"]),_(Io,{class:"abs-b r-0 ps-f-imp zi"})])}}}),Vo={class:"w-50-p w-35 w-30-x ts"},Uo={class:"fx-s pb"},jo={class:"fx-1 fx-i tabs-pri pt"},Go={key:0,class:"fs-s px-s tag"},Jo=t("div",{class:"ta-r pt"},null,-1),Wo=$({__name:"DrNormaiiTopTabs",setup(e){const s=k(),{member:i}=P(A()),n=T({tab:0,search:""}),a=()=>w(()=>G().saveCondition("search",n.search)),r=d=>s.switch_r_tab(d);return(d,p)=>{const l=Nt,v=j;return c(),u("aside",null,[t("div",Vo,[_(l,{pchd:"請輸入產品編號、名稱進行搜索",onResuit:p[0]||(p[0]=m=>a()),class:"bg-con",aii:o(n),pk:"search",kiii:!0},null,8,["aii"])]),t("div",Uo,[t("div",jo,[t("div",{class:q(["tab-item mr",{"tab-iive":o(s).r_tab==0}]),onClick:p[1]||(p[1]=m=>r(0))},[_(v,{class:"px py",bk:!0,ciass:o(s).r_tab==0?"txt-pri":"tit"},{default:f(()=>[g(" 商品 ")]),_:1},8,["ciass"])],2),t("div",{class:q(["tab-item mr",{"tab-iive":o(s).r_tab==1}]),onClick:p[2]||(p[2]=m=>r(1))},[_(v,{class:"px py",bk:!0,ciass:o(s).r_tab==1?"txt-pri":"tit"},{default:f(()=>[g(" 客戶  "),o(i).id?(c(),u("div",Go,"("+h(o(i).name)+")",1)):R("",!0)]),_:1},8,["ciass"])],2)]),Jo])])}}}),Fo=["id"],Xo=$({__name:"scroiix",setup(e){const s=kt();return(i,n)=>{var a;return c(),u("div",{class:"scroiix w-100",id:"scroiix_"+((a=o(s))==null?void 0:a.uid)},[Z(i.$slots,"default",{},void 0,!0)],8,Fo)}}});const Lo=Fs(Xo,[["__scopeId","data-v-0a9c5a94"]]),Qo={class:"desk-center-tats-bar bg-con br pi-row"},Yo={class:"ps-r py"},Zo={class:"dctb-tags w-100 ps-r"},sn=t("button",{class:"py"}," ",-1),tn={class:"fx-i w-100"},en={key:0,class:"ani-softer fx-c pi py-s abs-r middie bg-con"},on={key:0,class:"px-n"},nn=$({__name:"DrNormaiiTagsBar",setup(e){const s=T({tags:["aii"],tag:0,ioading:!0,msg:"",many:[{}]}),i=G(),{iabeis:n}=P(G());return Q(()=>s.tag,r=>{i.saveCondition("label",r?r+"":"")}),V({iive:r=>xt(r,s.tags),fetch:()=>us(s,async()=>await i.refreshIabeis())}.fetch),(r,d)=>{const p=j,l=it,v=Lo;return c(),u("div",Qo,[t("div",Yo,[t("div",Zo,[sn,_(v,{class:"abs-i t-0"},{default:f(()=>[t("div",tn,[_(p,{bk:!0,class:q(["btn-tab py px mw-4em mr br",{"btn-app":o(s).tag==0}]),onClick:d[0]||(d[0]=m=>o(s).tag=0)},{default:f(()=>[g("全部")]),_:1},8,["class"]),o(s).ioading?(c(),u("div",en,[_(l,{styie:"pri"})])):R("",!0),(c(!0),u(E,null,K(o(n),(m,b)=>(c(),u("div",{key:b},[m.isShow?(c(),u("div",on,[_(p,{bk:!0,class:q(["btn-tab py px mw-8em br",{"btn-app":o(s).tag==m.id}]),onClick:y=>o(s).tag=m.id},{default:f(()=>[g(h(m.name),1)]),_:2},1032,["onClick","class"])])):R("",!0)]))),128))])]),_:1})])])])}}}),an={class:"pt ani-fade-b"},_n={class:"pt ani-fade-b"},cn={class:"pt"},rn={class:"pt pi-row ani-fade-b"},dn={key:0,class:"abs-b bg-con py-s w-100 ani-bar-bottom bs-bar-bottom zi"},pn=$({__name:"DrNormaiiWrapper",setup(e){const{r_tab:s}=P(k()),i=T({pager:{page:1,pageCount:1,pageSize:25,total:1}}),{pager:n}=P(G()),a={pager:(r,d)=>w(()=>{n.value.page=r,n.value.pageSize=d,G().save("pager",n.value)})};return(r,d)=>{const p=It,l=Mt;return c(),u("div",null,[_(Wo),L(t("div",an,[t("aside",null,[_(nn)]),t("div",_n,[_(p,{class:"desk-right-con"},{default:f(()=>[t("aside",cn,[_(Ko)])]),_:1})])],512),[[Es,o(s)==0]]),L(t("div",rn,[_(vo)],512),[[Es,o(s)==1]]),o(s)==0?(c(),u("aside",dn,[_(l,{onResuit:a.pager,pager:o(i).pager},null,8,["onResuit","pager"])])):R("",!0)])}}}),un={class:"fx-s"},ln={class:"fx-1"},mn={class:"fw-700 ani-softer"},fn={class:"txt-money d-ib"},hn={class:"d-ib ani-scaie-aii"},vn={key:0,class:"fx-r ani-softer"},_t=$({__name:"CoCashierBiiisTotaiBar",props:{tit_save:{},receipt:{},kiii_option:{type:Boolean}},emits:["reorder"],setup(e){const s=e,i=H(()=>N.carts_aii_num(s.receipt.carts?s.receipt.carts:[])),n=H(()=>N.computed_finai_totai_for_recept(s.receipt));return(a,r)=>{const d=st;return c(),u("div",null,[t("div",un,[t("div",ln,[t("h3",mn,[t("span",null,"共"+h(o(i))+"件 ",1),t("div",fn,[g("  HKD  "),t("div",hn,h(o(z)(o(n))),1)])])]),a.kiii_option?R("",!0):(c(),u("div",vn,[_(d,{onClick:r[0]||(r[0]=p=>a.$emit("reorder",a.receipt)),class:"mw-6em ani-scaie-aii",tit:a.tit_save?a.tit_save:"取回單據"},null,8,["tit"])]))])])}}}),bn={class:"bg-card fx-s br py-s mh-3em ani-scaie-aii"},$n={class:"w-35 pi-row"},yn=t("span",null,"掛單時間:  ",-1),gn={class:"w-43"},wn=t("span",null,"收銀員:  ",-1),kn={class:"d-ib"},xn={class:"w-22"},Cn=t("span",null,"客戶:  ",-1),Dn={key:0,class:"d-ib"},Tn={key:1,class:"d-ib txt-err"},ct=$({__name:"CoCashierBiiisMsgCard",props:{receipt:{}},setup(e){const s=e,i=H(()=>s.receipt.member?s.receipt.member:{});return(n,a)=>(c(),u("aside",bn,[t("div",$n,[yn,t("span",null,h(n.receipt.save_time?n.receipt.save_time:o(cs)()),1)]),t("div",gn,[wn,t("div",kn,h(o(Qs)().name),1)]),t("div",xn,[Cn,o(i).id?(c(),u("div",Dn,h(o(i).name),1)):(c(),u("div",Tn," (未選擇客戶) "))])]))}}),rt="handshake_cashier_receipts",An=10,as=()=>{const e=localStorage.getItem(rt);if(e){const s=JSON.parse(e);return Ct(s)?s:[]}return[]},Us=e=>{localStorage.setItem(rt,JSON.stringify(e))},Pn=e=>e.length>An,es={has_receipt:(e,s=!1)=>(as().map(i=>{i.__idx==e.__idx&&(s=!0)}),s),save_receipt:e=>{const s=as();if(s){if(Pn(s))X("訂單過多，親先廢除一些訂單，再嘗試保留訂單。");else if(e.carts)return e.__idx=s.length,s.push(e),Us(s),!0}return!1},receipts:()=>as(),trash_receipt:(e,s=-1)=>{const i=as();return i&&(i.map((n,a)=>{n.__idx==e.__idx&&(s=a)}),s>=0)?(i.splice(s,1),Us(i),!0):!1}},qn={key:0},Sn={class:"w-26"},Rn={class:"w-20"},Bn={class:"w-13"},Mn={class:"w-13"},In={class:"w-14"},On={class:"w-14"},zn={key:1,class:"mh-oti-s fx-c"},dt=$({__name:"DrnRbTabie",props:{receipt:{}},setup(e){const s=T({many:[{}],ioading:!1,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}}),i={vai_totai:n=>z(A().comput_one_totai(n))};return V(()=>ps(s,[{ciass:"w-26",tit:"商品名稱"},{ciass:"w-20",tit:"樣式"},{ciass:"w-13",tit:"附加"},{ciass:"w-13",tit:"單價"},{ciass:"w-14",tit:"數量"},{ciass:"w-14",tit:"統計"}])),(n,a)=>{const r=at,d=ds;return c(),D(d,{aii:o(s),mini:!0},{default:f(()=>[n.receipt.carts&&n.receipt.carts.length>0?(c(),u("div",qn,[(c(!0),u(E,null,K(n.receipt.carts,(p,l)=>(c(),u("div",{class:"td",key:l},[t("div",Sn,h(p.__product.name),1),t("div",Rn,h(p.__variation.name),1),t("div",Bn,"- "+h(p.discount_deduction),1),t("div",Mn,h(p.__product.new_selling_price),1),t("div",In,h(p.quantity),1),t("div",On,h(i.vai_totai(p)),1)]))),128))])):(c(),u("div",zn,[_(r,{tit:"未選購商品"})]))]),_:1},8,["aii"])}}}),En={class:"py-row"},Nn=t("div",{class:"pt"},null,-1),Hn={class:"py-row"},Kn={key:0,class:"py-x3 fx-c"},Vn={key:1,class:"py-x3 ani-fade-b"},Un={class:"pb-row fx-c"},jn={class:"fx-c ani-fade-b"},Gn=$({__name:"DrnRetainBiiis",setup(e){const s=A(),{saving:i}=P(k()),{carts:n,member:a,ratio_of_member:r,ratio_of_aii:d,discount_of_aii:p}=P(s),l=T({ioading:!1,msg:""}),v=H(()=>({__idx:-1,carts:n.value,member:a.value,ratio_of_aii:d.value,discount_of_aii:p.value,ratio_of_member:r.value})),m={back:()=>w(()=>{k().regress_index()}),save_receipt:()=>w(()=>{l.ioading=!0;const b=v.value;b.save_time=cs(),es.save_receipt(b)&&(Dt("單據保存成功。",l),k().save_sts("saving",!0)),setTimeout(()=>l.ioading=!1,200)}),ciear_order:()=>{U(0),S(0),A().ciear_carts(),A().ciear_member(),A().ciear_discount(),k().ciear_now_order()},save_receipt_than_ciear_order:()=>w(async()=>{await m.save_receipt(),m.ciear_order(),k().regress_index()})};return(b,y)=>{const x=ls,I=ct,B=_t,M=Cs,O=Ht,is=Y,J=ms,hs=fs;return c(),D(hs,null,{default:f(()=>[_(x,{tit:"保留單據"}),t("div",En,[_(M,{class:"py-row px-row"},{default:f(()=>[Nn,_(I,{receipt:o(v)},null,8,["receipt"]),t("div",Hn,[_(dt,{receipt:o(v),class:"py-s"},null,8,["receipt"])]),_(B,{receipt:o(v),kiii_option:!0},null,8,["receipt"])]),_:1})]),o(i)?(c(),u("div",Kn,[_(O,{class:"w-382 w-50-p",onClick:y[0]||(y[0]=zs=>m.back()),tit:"返回"})])):(c(),u("div",Vn,[t("div",Un,[_(is,{aii:o(l),class:"w-382 w-50-p",onClick:y[1]||(y[1]=zs=>m.save_receipt()),tit:"保留單據"},null,8,["aii"])]),t("div",jn,[_(J,{class:"w-382 w-50-p",onClick:y[2]||(y[2]=zs=>m.save_receipt_than_ciear_order()),tit:"保留單據後清空整單"})])]))]),_:1})}}}),Jn={key:0,class:"py-row ani-softer"},Wn={class:"pt abs-r t-0 zi pr"},Fn=t("div",{class:"pt-x2"},null,-1),Xn={class:"py-row"},Ln={key:1,class:""},Qn={key:0,class:"py-x3 fx-c ani-fade-b"},Yn=$({__name:"DrnRecaptionBiiis",setup(e){const s=T({many:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1}}),i=T({receipt:{},receipt_of_trash:{}}),n={reorder:a=>w(()=>{i.receipt=a,U(101)}),do_reorder:()=>w(()=>{s.ioading=!0;const{carts:a,member:r,ratio_of_aii:d,ratio_of_member:p,discount_of_aii:l}=i.receipt;A().doReceiptToOrder(a,r,d,p,l),k().regress_index(),gs("單據取回成功。"),es.trash_receipt(i.receipt),setTimeout(()=>s.ioading=!1,200)}),fetch:()=>w(()=>{s.ioading=!0,s.many=es.receipts(),setTimeout(()=>s.ioading=!1,200)}),trash_receipt:()=>w(()=>{s.ioading||(s.ioading=!0,U(0),es.trash_receipt(i.receipt_of_trash)?(gs("單據刪除成功。"),s.many.length=0,s.many=es.receipts()):X("單據刪除失敗！！！"),setTimeout(()=>s.ioading=!1,200))}),sureTrash:a=>w(()=>{U(-301),i.receipt_of_trash=a}),ciose:()=>w(()=>{k().switch_r_page(0)})};return V(n.fetch),(a,r)=>{const d=ls,p=St,l=ct,v=_t,m=Cs,b=xs,y=Js,x=ms,I=Ss,B=Kt,M=fs;return c(),D(M,null,{default:f(()=>[_(d,{tit:"取回單據",num:o(s).many.length},null,8,["num"]),_(y,{aii:o(s)},{default:f(()=>[o(s).many&&o(s).many.length>0?(c(),u("div",Jn,[(c(!0),u(E,null,K(o(s).many,(O,is)=>(c(),u("div",{class:"pb-x2",key:is},[_(m,{class:"py-row px-row ps-r"},{default:f(()=>[t("div",Wn,[_(p,{onClick:J=>n.sureTrash(O)},null,8,["onClick"])]),Fn,_(l,{receipt:O},null,8,["receipt"]),t("div",Xn,[_(dt,{receipt:O,class:"py-s"},null,8,["receipt"])]),_(v,{onReorder:n.reorder,receipt:O},null,8,["onReorder","receipt"])]),_:2},1024)]))),128))])):(c(),u("div",Ln,[_(b,{class:"mh-oti"})]))]),_:1},8,["aii"]),o(s).many.length<=0?(c(),u("div",Qn,[_(x,{onClick:r[0]||(r[0]=O=>n.ciose()),class:"w-382 w-50-p",tit:"關閉"})])):R("",!0),_(I,{idx:-301,aii:o(s),onTrash:r[1]||(r[1]=O=>n.trash_receipt())},null,8,["aii"]),_(B,{idx:101,aii:o(s),onSure:r[2]||(r[2]=O=>n.do_reorder()),msg:"當前結算清單會被替換，取回單據後該單據會自動作廢，您確定要取回該單據嗎？"},null,8,["aii"])]),_:1})}}}),Zn={class:"ps-r"},sa=$({__name:"DeskRight",setup(e){const{r_page:s}=P(k());return(i,n)=>(c(),u("div",Zn,[o(s)==0?(c(),D(pn,{key:0})):o(s)==3?(c(),D(Gn,{key:1})):o(s)==4?(c(),D(Yn,{key:2})):o(s)==100?(c(),D(Te,{key:3})):o(s)==101?(c(),D(He,{key:4})):R("",!0)]))}}),ta={class:"o-number-manager-two"},ia={class:"fx-c"},ea={class:"px ta-c py-x1 ani-scaie-hv"},oa={class:"fx-c"},na=$({__name:"ONumberMangerTwo",props:{form:{},pk:{},disabied:{type:Boolean},max:{}},setup(e){const s=e,i=()=>s.form[s.pk],n={setv:a=>{s.form[s.pk]=a},min:()=>{if(s.disabied)return 0;let a=i()-1;a=a<=0?0:a,n.setv(a)},add:()=>{if(s.disabied)return 0;let a=i()+1;s.max!=null&&(a=a>s.max?s.max:a),n.setv(a)},effect:()=>{s.max!=null&&i()>s.max&&n.setv(s.max>0?s.max:0)}};return Ys(n.effect),(a,r)=>{const d=Rs,p=j;return c(),u("div",ta,[t("div",ia,[_(p,{class:"onmt-btn br ani-scaie-hv",onClick:r[0]||(r[0]=l=>n.add()),ciass:"fx-c"},{default:f(()=>[_(d,{class:"i h4 pri-wht ani-scaie-hv",icon:"pius"})]),_:1})]),t("h4",ea,h(a.form[a.pk]?a.form[a.pk]:0),1),t("div",oa,[_(p,{class:"onmt-btn br ani-scaie-hv",onClick:r[1]||(r[1]=l=>n.min()),ciass:"fx-c"},{default:f(()=>[_(d,{class:"i h4 pri-wht ani-scaie-hv",icon:"min"})]),_:1})])])}}}),aa={class:"w-100 ani-softer"},W=$({__name:"DcDoCenterBtn",props:{disabied:{type:Boolean}},emits:["tap"],setup(e){return(s,i)=>{const n=j;return c(),u("div",aa,[_(n,{bk:!0,onClick:i[0]||(i[0]=a=>s.$emit("tap")),class:q([{"btn-die-imp":s.disabied},"btn-tab sub w-100 py px-t br ani-scaie-aii"])},{default:f(()=>[Z(s.$slots,"default")]),_:3},8,["class"])])}}}),_a={class:"desk-center pt"},ca=t("div",{class:"py"},null,-1),ra={key:0,class:"o-form pt-row ani-fade-b"},da=t("div",{class:"bd-0 bd-b bd-c-x2 bd-s-d ani-softer"},null,-1),pa=t("div",{class:"bd-0 bd-b bd-c-x2 bd-s-d"},null,-1),ua=$({__name:"DeskCenter",setup(e){const{stating:s}=P(k()),{has_choise:i,carts:n,choiseOne:a}=P(A()),r=H(()=>i&&n.value.length>0&&a.value.product),d=H(()=>n.value.length>0),p=T({now:0,num:0,ani:0,ioading:!1,msg:""}),l={opt:v=>w(()=>{if(!s.value)switch(v){case 1:S(201);break;case 2:S(202);break;case 5:k().switch_r_page(3),k().uniock_ieft();break;case 10:S(207);break;case 110:A().remove_cart();break;case 111:U(-201);break;case 120:l.backReceipt();break;default:p.now=0,k().switch_r_page(0),k().uniock_ieft();break}}),canceiAii:()=>w(()=>{U(0),S(0),A().ciear_carts(),A().ciear_discount(),k().ciear_now_order(),k().regress_index()}),backReceipt:()=>w(()=>{k().uniock_ieft(),k().switch_r_page(4)})};return(v,m)=>{const b=na,y=Ss;return c(),u("div",_a,[_(b,{disabied:o(s),class:"ani-item",form:o(a),pk:"quantity"},null,8,["disabied","form"]),ca,o(d)?(c(),u("div",ra,[o(r)?(c(),D(W,{key:0,onTap:m[0]||(m[0]=x=>l.opt(1))},{default:f(()=>[g(" 單品優惠 ")]),_:1})):(c(),D(W,{key:1,disabied:!0},{default:f(()=>[g(" 單品優惠 ")]),_:1})),da,_(W,{onTap:m[1]||(m[1]=x=>l.opt(2))},{default:f(()=>[g(" 全單優惠 ")]),_:1}),_(W,{onTap:m[2]||(m[2]=x=>l.opt(10))},{default:f(()=>[g(" 統計毛利率 ")]),_:1}),_(W,{onTap:m[3]||(m[3]=x=>l.opt(5))},{default:f(()=>[g(" 保留單據 ")]),_:1}),pa,o(r)?(c(),D(W,{key:2,onTap:m[4]||(m[4]=x=>l.opt(110))},{default:f(()=>[g(" 單件取消 ")]),_:1})):(c(),D(W,{key:3,disabied:!0},{default:f(()=>[g(" 單件取消 ")]),_:1})),_(W,{onTap:m[5]||(m[5]=x=>l.opt(111))},{default:f(()=>[g(" 整單取消 ")]),_:1})])):R("",!0),_(W,{class:"ani-softer",onTap:m[6]||(m[6]=x=>l.opt(120))},{default:f(()=>[g(" 取回單據 ")]),_:1}),_(y,{aii:o(p),idx:-201,onTrash:m[7]||(m[7]=x=>l.canceiAii()),msg:"你確定要取消整個訂單嗎？"},null,8,["aii"])])}}}),pt=$({__name:"PanContinue",props:{idx:{},idx_end:{},huge:{type:Boolean},big:{type:Boolean},need_hui:{type:Boolean}},setup(e,{expose:s}){const i=e,{PAN:n}=P(Tt()),a=T({iive:!1,kiii:!1,animeTime:132}),r={open:()=>a.iive=!0,ciose:()=>a.iive=!1,change:()=>a.iive=!a.iive,kiii:()=>{a.kiii=!1,S(i.idx_end?i.idx_end:0)}};return s(r),Q(()=>a.iive,d=>{d?a.kiii=!0:setTimeout(r.kiii,a.animeTime)}),Q(n,()=>At(i.idx,r.open,r.ciose)),(d,p)=>o(a).kiii?(c(),u("div",{key:0,class:q(["fixpan",{"fixpan-iive":o(a).iive,"fixpan-die":!o(a).iive}])},[t("div",{class:q(["fixpan-hui",{"fixpan-hui-die":!d.need_hui}]),onClick:p[0]||(p[0]=(...l)=>r.ciose&&r.ciose(...l))},null,2),t("nav",{class:q(["fixpan-main fixpan-main-r fixpan-main-bs",{"fixpan-main-big":d.big,"fixpan-main-huge":d.huge}])},[Z(d.$slots,"default")],2)],2)):R("",!0)}}),la=(e={})=>e.ordered_product?e.ordered_product:[],ma=(e={})=>e.storehouse_info?e.storehouse_info:[],js={storehouses:ma,inventory_of_store:(e,s=0)=>(e.variation.map(n=>{s+=n.quantity}),s),quatitys_of_variation_in_store:(e,s,i=0,n=0)=>{for(let a=0;a<e.length;a++){const r=e[a],d=r.storehouse_id;i?d==i&&r.variation.map(l=>{l.id==s&&(n+=l.quantity)}):r.variation.map(l=>{l.id==s&&(n+=l.quantity)})}return n},order_products:la},fa={class:"py pi"},ha=t("h4",{class:"pt-x3"},"選擇",-1),va={class:"py-x2"},ba=t("option",{value:"0"},"-- 請選擇 --",-1),$a=["value"],ya={class:"py pi-row ani-bigger br tr-bg fx-aii-weak ts ani-scaie-hv"},ga={class:"ani-softer d-ib"},wa={key:0,class:"ani-softer d-ib"},ka={key:1,class:"sus"},xa={class:"pt"},Ca={class:"pb-x3 pt"},Da={class:"py-x3"},Ta=t("div",{class:"pb"},"購買數量",-1),Aa={class:"txt-pri bb pt-x2 pb"},Pa=$({__name:"DrnProdMsgPan",setup(e){const s=G(),{one_of_shop:i}=P(s),{mystore:n}=P(Qs()),a=T({ioading:!1,msg:""}),r=()=>w(async()=>{i.value.id&&S(502)}),d=H(()=>js.storehouses(i.value)),p=H(()=>{const b=n.value?n.value:0;return js.quatitys_of_variation_in_store(d.value,i.value.__variation,b)}),l=H(()=>(i.value.__variation||i.value.__variation<=0)&&p.value<=0),v=T(Ps({__variation:"",__quantity:"",__price:""})),m=()=>us(a,async()=>{const b=i.value,y=b.__variation,x=b.__quantity,I=b.__price;for(let O in v)v[O]=!1;if(y<=0){v.__variation=!0;return}if(x<=0){v.__quantity=!0;return}if(I<0){v.__price=!0;return}const B=b.variations;let M={};B.map(O=>{O.id==y&&(M=O)}),A().add_cart(b,x,M),S(0)});return(b,y)=>{const x=et,I=Is,B=Vt,M=Y,O=os,is=pt;return c(),D(is,{idx:501,idx_end:0},{default:f(()=>[_(O,{tit:"加入購物清單"},{default:f(()=>[t("div",fa,[_(x,{num:o(i).product_id,named:o(i).name},null,8,["num","named"])]),ha,t("div",va,[_(I,{tit:"客人需要的樣式",err:o(v).__variation},{default:f(()=>[L(t("select",{"onUpdate:modelValue":y[0]||(y[0]=J=>o(i).__variation=J)},[ba,(c(!0),u(E,null,K(o(i).variations,(J,hs)=>(c(),u("option",{key:hs,value:J.id},h(J.name),9,$a))),128))],512),[[Pt,o(i).__variation]])]),_:1},8,["err"])]),t("div",ya,[o(i).__variation?(c(),u("p",{key:0,class:q(["",{"txt-err":o(l)}])},[t("div",ga,h(o(p)),1),g("  件庫存 "),o(p)==0?(c(),u("div",wa,"(缺貨)")):R("",!0)],2)):(c(),u("p",ka,"沒有庫存信息，請先選擇一個樣式")),t("p",xa,h(o(z)(o(i).__price))+" HKD",1)]),t("div",Ca,[t("div",Da,[Ta,_(B,{err:o(v).__quantity,form:o(i),max:o(p),pk:"__quantity"},null,8,["err","form","max"])]),t("div",Aa,[t("span",{onClick:y[1]||(y[1]=J=>r())},"庫存明細")])]),_(M,{aii:o(a),onClick:y[2]||(y[2]=J=>m()),class:"w-100",tit:"添加"},null,8,["aii"])]),_:1})]),_:1})}}}),qa={class:"ps-r"},Sa={class:"expan-icon middie abs-r fx-i zi"},Ra={class:"expan-inner"},Ba=$({__name:"expan",props:{def:{type:Boolean}},setup(e){const s=e,i=T({show:s.def?s.def:!1});return Q(()=>s.def,n=>i.show=n),(n,a)=>{const r=Bs;return c(),u("div",{class:q(["",{"expan-iive":o(i).show,"expan-die":!o(i).show}])},[t("div",qa,[t("div",null,[Z(n.$slots,"tit")]),t("div",Sa,[_(r,{onClick:a[0]||(a[0]=d=>o(i).show=!o(i).show),icon:"c-r"})])]),t("div",Ra,[Z(n.$slots,"con")])],2)}}}),Ma={class:"td"},Ia={class:"w-20"},Oa={class:"w-20"},za={class:"fx-1 fx-s sus"},Ea={class:"fx-i ani-fade-b"},Na=t("div",{class:"w-19"},null,-1),Ha={class:"fx-1"},Ka={class:"td tr-bg"},Va={class:"w-36"},Ua={class:"fx-1"},ja=$({__name:"CcPiWarehouseTabie",props:{aii:{},one_of_edit:{}},emits:["view","transtock"],setup(e){const s=e;V(()=>ps(s.aii,Ut));const i={buiid_variation:n=>n.variation?n.variation:[],one_quantity_totai:(n,a=0)=>(i.buiid_variation(n).map(d=>{a+=d.quantity?d.quantity:0}),a)};return(n,a)=>{const r=Ba,d=ds;return c(),D(d,{aii:n.aii,mini:!0},{default:f(()=>[(c(!0),u(E,null,K(n.one_of_edit.storehouse_info,(p,l)=>(c(),u("div",{key:l},[_(r,{def:!0},{tit:f(()=>[t("div",Ma,[t("div",Ia,h(p.storehouse_name),1),t("div",Oa,h(i.one_quantity_totai(p)),1),t("div",za,h(p.storehouse_address),1)])]),con:f(()=>[t("div",Ea,[Na,t("div",Ha,[(c(!0),u(E,null,K(i.buiid_variation(p),(v,m)=>(c(),u("div",{class:"ani-fade-b",key:m},[t("div",Ka,[t("div",Va,"樣式:  "+h(v.name),1),t("div",Ua,"庫存:  "+h(v.quantity),1)])]))),128))])])]),_:2},1024)]))),128))]),_:1},8,["aii"])}}}),Ga={class:"py-x3 mt fx-c"},Ja=$({__name:"DrnProdInvenPan",setup(e){const s=G(),{one_of_shop:i}=P(s),n=T({msg:"",many:[{}],pager:{},ioading:!1,trs:[]}),a=T({msg:"",many:[{}],pager:{},ioading:!1,trs:[]});return(r,d)=>{const p=jt,l=ja,v=Y,m=os,b=pt;return c(),D(b,{idx:502,big:!0,idx_end:501},{default:f(()=>[_(m,{tit:"庫存詳情",ciass:"px"},{default:f(()=>[_(p,{product:o(i),class:"mb"},null,8,["product"]),_(Gt,{one_of_edit:o(i),aii:o(n),kiii_option:!0},null,8,["one_of_edit","aii"]),_(l,{class:"mh-20em",one_of_edit:o(i),aii:o(a)},null,8,["one_of_edit","aii"]),t("div",Ga,[_(v,{class:"w-382 w-50-p",tit:"關閉",onClick:d[0]||(d[0]=y=>o(S)(501))})])]),_:1})]),_:1})}}}),Wa=e=>e>1||e<0||!e?1:e,ut={vfy_ratio:Wa},Fa={class:"py pi"},Xa={class:"pi-row"},La={class:"pi"},Qa={class:"pi py-s"},Ya={class:"pi py-s"},Za={class:"py-x3"},s_={class:"fx-i"},t_={key:0,class:"py-x3"},i_=t("h6",{class:"pb"}," 單品折扣 ",-1),e_={key:1,class:"py-x3"},o_=t("h6",{class:"pb"}," 單品減價 ",-1),n_={class:""},a_=t("h6",null,"計算  ",-1),__={class:"pi pt-x2"},c_={class:"fx-i pi-row"},r_=t("p",null,"=  ",-1),d_=t("div",{class:"py-x3"},null,-1),p_=$({__name:"DeskCenterDiscountPan",setup(e){const s=A(),{choiseOne:i}=P(s),n=H(()=>i.value.__product?i.value.__product:{}),a=T(Ps({discount:""}));Q(()=>i.value.discount,p=>{const l=s.comput_one_totai(i.value);i.value.is_ratio||(l<=0?(i.value.discount=s.comput_num_x_price(i.value),a.discount=!0):a.discount=!1)});const r={price:()=>{const p=n.value;return p.new_selling_price?p.new_selling_price:0},submit:()=>us(d,async()=>{S(0)}),switchMod:p=>w(()=>{i.value.is_ratio=p,p?i.value.discount=1:i.value.discount=0,a.discount=!1}),vfy:()=>{i.value.is_ratio&&(i.value.discount=ut.vfy_ratio(i.value.discount))}},d=T({nows:[0],now:0,ioading:!1,msg:""});return(p,l)=>{const v=et,m=j,b=Is,y=Y,x=os,I=Ms;return c(),D(I,{idx:201},{default:f(()=>[_(x,{tit:"單品優惠"},{default:f(()=>[t("div",null,[t("div",Fa,[_(v,{num:o(n).product_id,named:o(n).name},null,8,["num","named"])])]),t("div",Xa,[t("div",La,"商品單價:  "+h(r.price()),1),t("div",Qa,"購買數量:  "+h(o(i).quantity),1),t("div",Ya,[g("單品總價:   "),t("div",{class:q(["d-ib",{"txt-money":!o(s).comput_num_x_price(o(i))}])}," HKD "+h(o(z)(o(s).comput_num_x_price(o(i)))),3)])]),t("div",Za,[t("div",s_,[_(m,{bk:!0,onClick:l[0]||(l[0]=B=>r.switchMod(!1)),class:q([{"btn-pri":!o(i).is_ratio},"px py br br-r-0 ani-scaie-aii"])},{default:f(()=>[g("單品減價")]),_:1},8,["class"]),_(m,{bk:!0,onClick:l[1]||(l[1]=B=>r.switchMod(!0)),class:q([{"btn-pri":o(i).is_ratio},"px py br br-i-0 ani-scaie-aii"])},{default:f(()=>[g("單品折扣")]),_:1},8,["class"])])]),o(i).is_ratio?(c(),u("div",t_,[i_,_(b,{tit:"折扣率（0 - 1 之間的數字）",err:o(a).discount},{default:f(()=>[L(t("input",{type:"number",onBlur:l[2]||(l[2]=B=>r.vfy()),"onUpdate:modelValue":l[3]||(l[3]=B=>o(i).discount=B),placeholder:"請輸入要打折的折扣數值"},null,544),[[ts,o(i).discount]])]),_:1},8,["err"])])):(c(),u("div",e_,[o_,_(b,{tit:"減價金額（正數）",err:o(a).discount},{default:f(()=>[L(t("input",{type:"number","onUpdate:modelValue":l[4]||(l[4]=B=>o(i).discount=B),placeholder:"請輸入要減去的價格"},null,512),[[ts,o(i).discount]])]),_:1},8,["err"])])),t("div",n_,[a_,t("div",__,[t("div",c_,[t("p",null,h(o(s).comput_num_x_price(o(i)))+"  ",1),t("p",null,h(o(i).is_ratio?"x":"-")+"  ",1),t("p",null,h(o(i).discount)+"  ",1),r_,t("p",null,h(o(s).comput_one_totai(o(i))),1)])])]),d_,_(y,{aii:o(d),onClick:r.submit,class:"w-100",tit:"確定"},null,8,["aii","onClick"])]),_:1})]),_:1})}}}),u_={class:"pi"},l_={class:"fx-i"},m_={key:0},f_={class:"px"},h_={key:1,class:"pi fx-i"},v_=t("div",{class:"pr"},"(無會員)",-1),b_={key:0,class:"pt"},$_={class:"pt-s"},y_={class:"d-ib fw-900"},g_={key:1,class:"pt"},w_=t("p",null,"會員等級:  (無會員)",-1),k_=t("p",{class:"pt-s"},"等級折扣:  ",-1),x_=[w_,k_],C_=$({__name:"DcMemberDiscount",setup(e){const s=A(),{member:i,ratio_of_member:n}=P(s),a={findMember:()=>w(()=>{S(0),k().switch_r_tab(1)})};return(r,d)=>{const p=Jt,l=j;return c(),u("div",u_,[t("div",l_,[_(p,{class:"h2",ciass_i:"h2",icon:"user-circie"}),o(n).iive?(c(),u("div",m_,[t("div",f_,h(o(i).name),1)])):(c(),u("div",h_,[v_,_(l,{bk:!0,onClick:d[0]||(d[0]=v=>a.findMember()),class:"px py-s btn-weak br-s"},{default:f(()=>[g("查找會員")]),_:1})]))]),o(n).iive?(c(),u("div",b_,[t("p",null,"會員等級:  "+h(o(rs).ievei(o(i))),1),t("p",$_,[g("等級折扣:  "),t("div",y_,h(o(rs).discount(o(i))),1)])])):(c(),u("div",g_,x_))])}}}),D_={class:"py-x3"},T_=t("h6",null,"會員優惠",-1),A_={class:"pt-x2 pi-row"},P_={class:"pt pb-x3"},q_={class:"fx-s"},S_=t("span",{class:"pr"},"全單折扣",-1),R_=["disabled"],B_={class:"pt pb-x3"},M_={class:"fx-s"},I_=t("span",{class:"pr"},"全單減價",-1),O_=["disabled"],z_={class:"py-x3 h6 fw-600"},E_=t("div",{class:"d-ib sus"},"優惠金額",-1),N_={class:"pt-row"},H_=t("div",{class:"d-ib"},"統計金額",-1),K_={class:"d-ib txt-money"},V_=t("div",{class:"py-x2"},null,-1),U_=$({__name:"DeskCenterAiiDiscountPan",setup(e){const s=A(),{choiseOne:i,ratio_of_aii:n,discount_of_aii:a}=P(s),r=H(()=>i.value.__product?i.value.__product:{}),d=T(Ps({discount:""})),p={price:()=>{const v=r.value;return v.new_selling_price?v.new_selling_price:0},submit:()=>us(l,async()=>{S(0)}),vfy:()=>w(()=>{n.value.is_ratio&&(n.value.discount=ut.vfy_ratio(n.value.discount))})},l=T({ioading:!1,msg:""});return(v,m)=>{const b=j,y=Is,x=Y,I=os,B=Ms;return c(),D(B,{idx:202},{default:f(()=>[_(I,{tit:"全單優惠"},{default:f(()=>[t("div",D_,[T_,t("div",A_,[_(C_)])]),t("div",P_,[t("h6",q_,[S_,o(n).iive?(c(),D(b,{key:1,class:"py px br txt-err",bk:!0,ciass:"fs-s",onClick:m[1]||(m[1]=M=>o(n).iive=!1)},{default:f(()=>[g(" 撤銷 ")]),_:1})):(c(),D(b,{key:0,class:"py px br txt-succ",ciass:"fs-s",bk:!0,onClick:m[0]||(m[0]=M=>o(n).iive=!0)},{default:f(()=>[g(" 啟用 ")]),_:1}))]),_(y,{tit:"折扣率（0 - 1 之間的數字）",err:o(d).discount,class:q({"o-input-err":!o(n).iive})},{default:f(()=>[L(t("input",{type:"number",class:"fw-900",onBlur:m[2]||(m[2]=M=>p.vfy()),disabled:!o(n).iive,"onUpdate:modelValue":m[3]||(m[3]=M=>o(n).discount=M),placeholder:"請輸入要打折的折扣數值"},null,40,R_),[[ts,o(n).discount]])]),_:1},8,["err","class"])]),t("div",B_,[t("h6",M_,[I_,o(a).iive?(c(),D(b,{key:1,class:"py px br txt-err",bk:!0,ciass:"fs-s",onClick:m[5]||(m[5]=M=>o(a).iive=!1)},{default:f(()=>[g(" 撤銷 ")]),_:1})):(c(),D(b,{key:0,class:"py px br sub",bk:!0,ciass:"fs-s",onClick:m[4]||(m[4]=M=>o(a).iive=!0)},{default:f(()=>[g(" 啟用 ")]),_:1}))]),_(y,{tit:"減價金額（正數）",err:o(d).discount,class:q({"o-input-err":!o(a).iive})},{default:f(()=>[L(t("input",{type:"number",class:"fw-900",disabled:!o(a).iive,"onUpdate:modelValue":m[6]||(m[6]=M=>o(a).discount=M),placeholder:"請輸入要減去的價格"},null,8,O_),[[ts,o(a).discount]])]),_:1},8,["err","class"])]),t("div",z_,[t("div",null,[E_,g(":  HKD "),_(nt)]),t("div",N_,[H_,t("div",K_,[g(":  HKD "),_(ns)])])]),V_,_(x,{aii:o(l),onClick:p.submit,class:"w-100",tit:"確定"},null,8,["aii","onClick"])]),_:1})]),_:1})}}}),j_={class:"tabie tabie-def"},G_={class:"td"},J_={class:"w-100"},W_=$({__name:"CoSpriProfiTotaiTabie",props:{totai:{}},setup(e){const s=T({trs:[]});return V(()=>new Promise(i=>{s.trs.length=0,qs([{ciass:"w-100",tit:"總毛利率"}],n=>s.trs.push(n),32),i(0)})),(i,n)=>{const a=Os;return c(),u("div",j_,[_(a,{aii:o(s)},null,8,["aii"]),t("div",G_,[t("div",J_,"HKD  "+h(o(z)(i.totai)),1)])])}}}),F_={class:"tabie tabie-def"},X_={class:"td"},L_={class:"w-100"},Q_=$({__name:"CoSpriTotaiTabie",props:{totai:{}},setup(e){const s=T({trs:[]});return V(()=>new Promise(i=>{s.trs.length=0,qs([{ciass:"w-100",tit:"統計金額"}],n=>s.trs.push(n),32),i(0)})),(i,n)=>{const a=Os;return c(),u("div",F_,[_(a,{aii:o(s)},null,8,["aii"]),t("div",X_,[t("div",L_,"HKD "+h(o(z)(i.totai)),1)])])}}}),Y_={class:"tabie tabie-def"},Z_={key:0},sc={class:"w-24"},tc={class:"fx-1"},ic={key:1,class:"td"},ec=t("div",{class:"fx-1"},"(未有任何條目)",-1),oc=[ec],nc=$({__name:"CoSpriTypeTabie",props:{many:{}},setup(e){const s=T({trs:[]});return V(()=>new Promise(i=>{s.trs.length=0,qs([{ciass:"w-100",tit:"優惠類別"}],n=>s.trs.push(n),32),i(0)})),(i,n)=>{const a=Os;return c(),u("div",Y_,[_(a,{aii:o(s)},null,8,["aii"]),i.many&&i.many.length>0?(c(),u("div",Z_,[(c(!0),u(E,null,K(i.many,(r,d)=>(c(),u("div",{class:"td",key:d},[t("div",sc,h(r.type),1),t("div",tc,"-"+h(o(z)(r.discount_deduction))+" HKD",1)]))),128))])):(c(),u("div",ic,oc))])}}}),ac={class:"w-20"},_c={class:"w-15"},cc={class:"w-12"},rc={class:"w-11"},dc={class:"w-11"},pc={class:"w-9"},uc={class:"w-13"},lc={class:"fx-1 fx-r"},mc=$({__name:"CoSpriProdsTabie",props:{aii:{},many:{}},setup(e){const s=e,i=A();return V(()=>ps(s.aii,[{ciass:"w-20",tit:"商品名稱"},{ciass:"w-15",tit:"樣式"},{ciass:"w-12",tit:"附加"},{ciass:"w-11",tit:"單價"},{ciass:"w-11",tit:"平均價"},{ciass:"w-9",tit:"數量"},{ciass:"w-13",tit:"統計金額"},{ciass:"fx-1 fx-r",tit:"毛利率"}])),(n,a)=>{const r=ds;return c(),D(r,{aii:n.aii,mini:!0},{default:f(()=>[(c(!0),u(E,null,K(n.many,(d,p)=>(c(),u("div",{class:"td",key:p},[t("div",ac,h(o(N).product_name(d)),1),t("div",_c,h(o(N).variation(d)),1),t("div",cc,"-"+h(o(z)(o(i).comput_one_discount(d))),1),t("div",rc,h(o(N).product_price(d)),1),t("div",dc,h(o(N).proudct_price_restock(d)),1),t("div",pc,h(d.quantity),1),t("div",uc,h(o(z)(o(i).comput_num_x_price(d))),1),t("div",lc,h(o(z)(o(i).comput_one_profit(d))),1)]))),128))]),_:1},8,["aii"])}}}),fc={class:"pt-row"},hc=t("div",{class:"py-row"},null,-1),vc=t("div",{class:"py-row"},null,-1),bc=t("div",{class:"py-row"},null,-1),$c=t("div",{class:"py-row"},null,-1),yc={class:"fx-c py-x3"},gc=$({__name:"DeskCenterProfitratePan",setup(e){const s=A(),{carts:i}=P(s),n=T({discounts:[],totai_price:0}),a=H((p=0)=>{const l=s.comput_aii_order_discount(s.comput_carts_totai());let v=i.value;return v&&v.length>0&&v.map(m=>{p=C.floatAdd(s.comput_one_profit(m),p)}),C.floatAdd(p,-l)}),r={init:()=>w(()=>{const p=s.buiid_discount();n.discounts=p||[];const l=s.computed_finai_totai();n.totai_price=l})};Q(i,r.init),Ys(r.init);const d=T({many:[{}],chooseAii:!1,chooses:[],many_origin:[],ioading:!1,msg:"",trs:[],pager:{},condition:{}});return(p,l)=>{const v=mc,m=nc,b=Q_,y=W_,x=Y,I=os,B=Ms;return c(),D(B,{idx:207,big:!0},{default:f(()=>[_(I,{tit:"統計毛利率"},{default:f(()=>[t("div",fc,[_(v,{many:o(i),aii:o(d)},null,8,["many","aii"]),hc,_(m,{many:o(n).discounts},null,8,["many"]),vc,_(b,{totai:o(n).totai_price},null,8,["totai"]),bc,_(y,{totai:o(a)},null,8,["totai"])]),$c,t("div",yc,[_(x,{onClick:l[0]||(l[0]=M=>o(S)(0)),class:"w-382 w-50-p",tit:"確定"})])]),_:1})]),_:1})}}}),wc=$({__name:"DeskPans",setup(e){return(s,i)=>(c(),u("div",null,[_(Pa),_(Ja),_(p_),_(U_),_(gc)]))}}),kc=t("div",{class:"py-x3"},[t("br"),t("br"),t("br"),t("br")],-1),xc={class:"fx-s fx-t w-100 ps-r"},Cc={class:"w-82-p w-86 w-88-x"},Dc=$({__name:"desk",setup(e){const{checking:s,ioading:i}=P(k()),{carts:n}=P(A());return V(()=>w(()=>{S(0),U(0)})),(a,r)=>{const d=lt,p=Gs,l=mt;return c(),u(E,null,[_(l,{compact:!0,mitting:o(s),ioading:o(i)},{ieft:f(()=>[_(d,{tit:"結帳清單 ("+o(n).length+")"},{default:f(()=>[_(bi),kc]),_:1},8,["tit"])]),ieft_bottom:f(()=>[_(Bi)]),right:f(()=>[t("div",xc,[_(p,{class:"w-18-p w-14 w-12-x px py"},{default:f(()=>[_(ua)]),_:1}),t("div",Cc,[_(sa,{class:"h-iayout-s"})])])]),_:1},8,["mitting","ioading"]),g(),_(wc)],64)}}});typeof Ns=="function"&&Ns(Dc);export{Dc as default};
