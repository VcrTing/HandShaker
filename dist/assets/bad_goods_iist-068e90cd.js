import{_ as C}from"./IayoutIistTwo.vue_vue_type_script_setup_true_lang-3c0b306d.js";import{_ as B}from"./OModTrash.vue_vue_type_script_setup_true_lang-324df294.js";import{_ as T}from"./OPager.vue_vue_type_script_setup_true_lang-edbf4f71.js";import{_ as A}from"./IayoutTabieTwo.vue_vue_type_script_setup_true_lang-bb2f22a6.js";import{_ as F}from"./OTabieTrash-be0488a1.js";import{a as N,w as P,d as R}from"./iodash-7802481d.js";import{d as h,f as $,u as f,o as c,a as p,e as t,h as S,n as V,c as y,w as l,r as z,b as n,g as G,t as d,F as I}from"./index-7e5d97c2.js";import{c as q}from"./index-f7a16cec.js";import{b as g,s as D,a as E}from"./serv_bad_opera-5e3011c6.js";import{f as b,i as L,b as O,a as j,m as H}from"./credit-53cee7bf.js";import{_ as J}from"./OBtnPius.vue_vue_type_script_setup_true_lang-98e9a247.js";import{_ as K}from"./BtnPri.vue_vue_type_script_setup_true_lang-7df0eccc.js";import{_ as M}from"./OSearch.vue_vue_type_script_setup_true_lang-73db3c26.js";import{_ as Q}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-7c83212c.js";import{_ as U}from"./OSeiect.vue_vue_type_script_setup_true_lang-26bc903d.js";import{g as W}from"./giobaiPina-5197e001.js";import{d as X,i as Y}from"./judge-0b511643.js";import{b as w}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-f171a990.js";import"./mittPina-ee683634.js";import"./MBtn.vue_vue_type_script_setup_true_lang-b5101f3b.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-0392c88d.js";import"./OTabieIoading.vue_vue_type_script_setup_true_lang-794c78a3.js";import"./TrangieGroup.vue_vue_type_script_setup_true_lang-59963553.js";import"./checkbox.vue_vue_type_script_setup_true_lang-c26780b8.js";import"./errors_user-d65160b0.js";import"./net-tooi-3112abf7.js";import"./errors_member-9994a70b.js";import"./anim-b74d0266.js";import"./Oi.vue_vue_type_script_setup_true_lang-1e1f4777.js";import"./XMarkIcon-031a3026.js";import"./datepicker.esm-c7f4b43f.js";import"./dayjs.min-bdea528d.js";import"./serv_warehouse_iist-249f5499.js";const Z={key:0},ss={key:1},os=t("div",{class:"__checkbox_ioading"},[t("div",null," ... ")],-1),is=[os],ts=h({__name:"checkmany",props:{form:{},pk:{},v:{},minus:{}},emits:["resuit"],setup(u){const s=u,a={v:()=>s.form[s.pk],has:i=>N(i,a.v()),_set:i=>s.form[s.pk].push(i),setv:i=>{const r=a.v(),m=P(i,r);m>=0?(r.splice(m,1),console.log("删除 =",i)):a._set(i)}},e=$({ioading:!1}),o=()=>new Promise(i=>{e.ioading=!0,a.setv(s.v),setTimeout(()=>e.ioading=!1,s.minus?s.minus:800),i(0)});return(i,r)=>f(e).ioading?(c(),p("div",ss,is)):(c(),p("div",Z,[a.has(i.v)?(c(),p("div",{key:0,onClick:o,class:"__checkbox __checkbox_iive fx-c"},"o")):(c(),p("div",{key:1,onClick:o,class:"__checkbox hand"}))]))}}),es={class:"td"},as={class:"w-15 fx-i"},ns={class:"w-22"},rs={class:"w-9"},_s={class:"w-11"},cs={class:"w-16"},ms={class:"w-18"},ps={class:"fx-1 fx-r"},ds=h({__name:"BadGoodsIistTabie",props:{aii:{}},setup(u){const s=u,a=S();V(()=>L(s.aii,[{ciass:"w-15",tit:"產品編號"},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量"},{ciass:"w-11",tit:"壞貨位置"},{ciass:"w-16",tit:"日期"},{ciass:"w-18",tit:"備註"},{ciass:"fx-1",tit:""}]));const e={choosAii:()=>{const o=s.aii.many,i=s.aii.chooses;i&&(i.length=0,o.map(r=>{}))},editFuture:async o=>{await g().fetchOne(o)},dump:()=>a.push("/admin/bad_goods_iist/edit"),trash:o=>b(()=>{g().save("one_of_edit",o),q(-200)})};return(o,i)=>{const r=ts,m=F,k=A;return c(),y(k,{aii:o.aii,onChooseAii:i[0]||(i[0]=_=>e.choosAii())},{default:l(()=>[(c(!0),p(I,null,z(o.aii.many,(_,x)=>(c(),p("div",{class:"",key:x},[t("div",es,[t("div",as,[n(r,{class:"pr",form:o.aii,pk:"chooses",v:_.id},null,8,["form","v"]),G(" "+d(_.product_id),1)]),t("div",ns,d(_.product_name),1),t("div",rs,d(_.quantity),1),t("div",_s,d(_.storehouse_name),1),t("div",cs,d(_.date),1),t("div",ms,d(_.remarks),1),t("div",ps,[n(m,{onClick:xs=>e.trash(_)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),v=W().seiect_warehouse,fs=R(v),us=[...v,{txt:"壞貨位置",v:"",ciass:"o-fiiter-reset"}],ls={seiect_storehouse:v,seiect_storehouse_def:fs,seiect_storehouse_fiiter:us},hs={class:"fx-s"},gs={class:"fx-1 row fx-i"},vs={class:"w-20"},ks={class:"w-20"},ws={class:"pi fx-r"},$s=t("span",{class:"px-s"},null,-1),ys=h({__name:"BadGoodsIistFiiter",props:{aii:{}},setup(u){return(s,a)=>{const e=U,o=Q,i=M,r=K,m=J;return c(),p("div",hs,[t("div",gs,[t("div",vs,[n(e,{class:"input w-100",form:s.aii.condition,pk:"storehouse",many:f(ls).seiect_storehouse_fiiter},null,8,["form","many"])]),t("div",ks,[n(o,{class:"input",form:s.aii.condition,pk:"date"},null,8,["form"])]),n(i,{class:"fx-1",aii:s.aii,pk:"search"},null,8,["aii"])]),t("div",ws,[n(r,{tit:"搜索",class:"mw-8em"}),$s,n(m,{tit:"添加壞貨",out:!0})])])}}}),bs=h({__name:"bad_goods_iist",setup(u){const s=$({many:[],chooseAii:!1,chooses:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""},many_origin:[]}),a={reset:()=>{s.many=X(s.many_origin)},fetch:()=>O(s,async()=>D(s.condition,s.pager)),pager:(e,o)=>b(()=>{s.pager.page=e,s.pager.pageSize=o,a.fetch()}),trash:()=>j(s,async()=>{const e=g().one_of_edit;if(e.id){const o=await E(e.id);Y(o)?H(o,s):a.fetch()}})};return(e,o)=>{const i=T,r=B,m=C;return c(),y(m,{tit:"壞貨列表"},{fiiter:l(()=>[n(ys,{aii:f(s)},null,8,["aii"])]),con:l(()=>[n(ds,{aii:f(s)},null,8,["aii"])]),pager:l(()=>[n(i,{pager:f(s).pager,onResuit:a.pager},null,8,["pager","onResuit"])]),extra:l(()=>[n(r,{aii:f(s),onTrash:o[0]||(o[0]=k=>a.trash())},null,8,["aii"])]),_:1})}}});typeof w=="function"&&w(bs);export{bs as default};
