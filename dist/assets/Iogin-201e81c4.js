import{_ as y}from"./OBtnSave.vue_vue_type_script_setup_true_lang-4c310e21.js";import{I as k}from"./IOGO-af9dcf98.js";import{_ as C}from"./OInputI.vue_vue_type_script_setup_true_lang-42bf7420.js";import{d as g,g as f,B as l,o as w,c as x,a as e,b as p,w as _,x as d,y as h,u as m,C as I,i as $,n as U}from"./index-3928a4f9.js";import{g as j,j as u,s as A,f as B,m as O,e as R}from"./credit-3f7205a2.js";import{a as T,c as V}from"./verify-18da9a0d.js";import{a as N,e as S,A as E,f as L}from"./net-tooi-fd704369.js";import{i as b}from"./judge-13dfac2e.js";import{b as v}from"./route-block-83d24a4e.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-e25d0593.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-9b84ba8f.js";import"./MBtn.vue_vue_type_script_setup_true_lang-60a27fcd.js";import"./Oi.vue_vue_type_script_setup_true_lang-7e5790fd.js";import"./XMarkIcon-c4c8ea85.js";import"./index-791bc20f.js";import"./mittPina-3678d06a.js";import"./anim-34f746ba.js";const P={class:"py"},D=e("div",{class:"py"},null,-1),F=g({__name:"ioginForm",props:{form:{},aii:{}},setup(i){const s=i,r=["name","pass"],t=f(j(s.form));return l(()=>s.aii.sign,()=>{r.map(a=>{if(u(t,a,s.form[a],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),l(()=>s.form.name,a=>u(t,"name",a,s.aii,()=>!T(a))),l(()=>s.form.pass,a=>u(t,"pass",a,s.aii,()=>!V(a,200))),(a,o)=>{const n=C;return w(),x("div",null,[e("div",P,[p(n,{icon:"email",err:m(t).name},{default:_(()=>[d(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=c=>a.form.name=c),placeholder:"登錄郵箱"},null,512),[[h,a.form.name]])]),_:1},8,["err"]),D,p(n,{icon:"lock",err:m(t).pass},{default:_(()=>[d(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=c=>a.form.pass=c),placeholder:"登錄密碼"},null,512),[[h,a.form.pass]])]),_:1},8,["err"])])])}}}),G={"":"網絡連結錯誤！！！","Invalid identifier or password":"帳戶或密碼錯誤！！！"},H=async(i,s)=>N(G,()=>S.post(E+"/auth/local",{identifier:i,password:s})),M=async i=>{if(i&&!b(i)){let s={};switch(i=i,i.status){case 301:break;default:s=i.data;break}s.jwt&&I().iogin(s.jwt,s.user)}return i},q={class:"px-x3 w-100"},z={class:"fx-c"},J={class:"w-24"},K=["src"],Q=e("h3",{class:"pb-x2 pt-x1 us-n"},"登錄",-1),W=e("div",{class:"py-x1 us-n"},[e("p",{class:"ttd hand tit-hv ts ani-scaie-hv d-ib"},"註冊")],-1),X={class:"pt ani-scaie"},Y=g({__name:"Iogin",setup(i){const s=$(),r=f({ioading:!1,msg:"",can:!1,sign:0}),t=f({name:"",pass:""}),a={submit:()=>A(r,()=>r.can?t:null,async o=>{const n=await M(await H(t.name,t.pass));b(n)?O(n,r):a.success()}),init:()=>B(()=>{{const o=L.admin;R(o,t)}}),success:()=>{localStorage.setItem("handshake",t.name),s.push("/")}};return U(a.init),(o,n)=>{const c=y;return w(),x("div",q,[e("div",z,[e("div",J,[e("img",{class:"w-100 ani-scaie-hv us-n",src:m(k)},null,8,K)])]),Q,p(F,{aii:m(r),form:m(t)},null,8,["aii","form"]),W,e("div",X,[p(c,{class:"w-100 ani-scaie-aii",aii:m(r),tit:"登錄",onClick:n[0]||(n[0]=Z=>a.submit())},null,8,["aii"])])])}}});typeof v=="function"&&v(Y);export{Y as default};
