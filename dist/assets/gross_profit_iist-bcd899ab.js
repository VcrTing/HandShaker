import{_ as N,a as A,b as F}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-0c70e207.js";import{_ as O}from"./OPager.vue_vue_type_script_setup_true_lang-0bcd335f.js";import{d as M,N as $,o as v,c as k,a as i,i as s,b as m,t as h,aE as V,aF as z,aj as g,V as j,_ as G,g as C,n as Y,y as I,w as x,C as U,F as q,D as K,e as Q,k as l,S as J,af as w,ag as b,ah as H,s as W,f as X,A as u,M as Z,U as ii,ak as ti,q as si,O as oi,x as ai,P as S,E as ei,Q as ni}from"./index-51b05e02.js";import{e as ri,v as _i,m as L}from"./view-56183974.js";import{r as ci}from"./OiX2.vue_vue_type_script_setup_true_lang-f3408af6.js";import{_ as pi}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-80fb364a.js";import{_ as di}from"./OTabieDetaii.vue_vue_type_script_setup_true_lang-a112fc33.js";import{_ as mi}from"./OIoadCir.vue_vue_type_script_setup_true_lang-b72ee8a3.js";import{_ as fi}from"./CkClipboard.vue_vue_type_script_setup_true_lang-20f76bc6.js";import{p as li}from"./pageOrderPina-020d5fad.js";import{_ as ui,a as hi}from"./OrderIistPanDetaii.vue_vue_type_script_setup_true_lang-fd46d42f.js";import{_ as vi}from"./OSearch.vue_vue_type_script_setup_true_lang-81ff2ed4.js";import{_ as yi}from"./OSeiect.vue_vue_type_script_setup_true_lang-3d0e8445.js";import{v as R}from"./vai_order-7bbc6546.js";import{g as gi}from"./giobaiPina-ed0d1340.js";import{b as D}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-2a09be64.js";import"./Oi.vue_vue_type_script_setup_true_lang-b644ab0a.js";import"./DocumentTextIcon-20e14b77.js";import"./XMarkIcon-48126e72.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-58d5bc07.js";import"./datepicker.esm-9ff06732.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-164ea6d2.js";import"./OTr.vue_vue_type_script_setup_true_lang-d7733bf3.js";import"./BtnIconX2.vue_vue_type_script_setup_true_lang-b939f080.js";import"./fioat-e27af979.js";import"./Pan.vue_vue_type_script_setup_true_lang-516904bc.js";import"./OBtnSave.vue_vue_type_script_setup_true_lang-ba5dfce2.js";import"./OSaveBackBtnsGroup.vue_vue_type_script_setup_true_lang-c64feb91.js";import"./BtnTab.vue_vue_type_script_setup_true_lang-19272ca3.js";import"./OTrPure.vue_vue_type_script_setup_true_lang-b8289e6c.js";import"./CoOrderDetaiiProdsTabie.vue_vue_type_script_setup_true_lang-8351fdf5.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-abe44c8c.js";import"./ODropdownNetItem.vue_vue_type_script_setup_true_lang-e4cc9ee3.js";import"./serv_iabei_iist-fc0a8563.js";import"./serv_suppiier_iist-917aa191.js";import"./serv_user_iist-1efde6ea.js";import"./serv_warehouse_iist-7c2c8c44.js";const P=f=>(V("data-v-549a7566"),f=f(),z(),f),wi={class:"pt-x1 pb fx-s br co-profit-totai-bar"},$i={class:"w-50 fx-i"},xi={class:"mw-8em"},bi=["innerHTML"],ki=["innerHTML"],Mi={class:"mw-7em"},Ti=P(()=>i("p",null," ",-1)),Ci={class:"fx-c pr"},Ii={class:"mw-8em"},Si=["innerHTML"],Hi=["innerHTML"],Li={class:"w-50 ta-r"},Ri=P(()=>i("p",{class:""},"總毛利率",-1)),Di={class:"n"},Yi=M({__name:"CoProfitTotaiBar",props:{totai:{},condition:{}},setup(f){const o=f,a=$(()=>t.is_empty()?"(全部年份)":g(t.is_period()?t.period_to_time():e()).format("YYYY")),_=$(()=>g().format("YYYY")),r=$(()=>t.is_empty()?"*":g(t.is_period()?t.period_to_time():e()).format("MM-DD")),p=$(()=>g().format("MM-DD")),e=()=>o.condition.date,c=()=>o.condition.time_period,t={is_date:()=>!!e(),is_period:()=>!e(),period_to_time:()=>{const n=c(),d=n?j(n):0;return ri(d>0?g().subtract(d,"day"):g())},is_empty:(n=!0)=>(e()&&(n=!1),c()&&(n=!1),n)};return(n,d)=>(v(),k("div",wi,[i("div",$i,[i("div",xi,[i("p",{class:"fx-1",innerHTML:s(a)},null,8,bi),i("h2",{class:"n fx-1",innerHTML:s(r)},null,8,ki)]),i("div",Mi,[Ti,i("div",Ci,[m(s(ci),{class:"i h4"})])]),i("div",Ii,[i("p",{class:"fx-1",innerHTML:s(_)},null,8,Si),i("h2",{class:"n fx-1",innerHTML:s(p)},null,8,Hi)])]),i("div",Li,[Ri,i("h2",Di,"HKD "+h(n.totai),1)])]))}});const Pi=G(Yi,[["__scopeId","data-v-549a7566"]]),Bi={class:"td"},Ei={class:"w-24 fx-i"},Ni={class:"hand"},Ai={class:"w-21"},Fi={class:"w-12"},Oi={class:"w-13"},Vi={class:"w-13"},zi={class:"fx-1 fx-s"},ji={class:"fx-1 ta-r"},Gi=M({__name:"GrossProfitIistTabie",props:{aii:{}},setup(f){const o=f,a=C({ioading:!1,iiveId:-1}),_={view:r=>l(async()=>{a.ioading||(a.ioading=!0,a.iiveId=r,await li().fetchOne(r),J(101),setTimeout(()=>a.ioading=!1,400))})};return Y(()=>K(o.aii,[{ciass:"w-24",tit:"訂單編號",sort_up:()=>l(()=>w(o.aii.many,"order_id",!0)),sort_down:()=>l(()=>w(o.aii.many,"order_id")),sort_reset:()=>b(o.aii)},{ciass:"w-21",tit:"時間",sort_up:()=>l(()=>H(o.aii.many,"order_date",!0)),sort_down:()=>l(()=>H(o.aii.many,"order_date")),sort_reset:()=>b(o.aii)},{ciass:"w-12",tit:"客戶"},{ciass:"w-13",tit:"收銀員"},{ciass:"w-13",tit:"統計金額",sort_up:()=>l(()=>w(o.aii.many,"total_price",!0)),sort_down:()=>l(()=>w(o.aii.many,"total_price")),sort_reset:()=>b(o.aii)},{ciass:"fx-1",tit:"統計毛利率",sort_up:()=>l(()=>w(o.aii.many,"total_profit",!0)),sort_down:()=>l(()=>w(o.aii.many,"total_profit")),sort_reset:()=>b(o.aii)}])),(r,p)=>{const e=fi,c=mi,t=di,n=pi;return v(),I(n,{aii:r.aii},{default:x(()=>[(v(!0),k(q,null,U(r.aii.many,(d,T)=>(v(),k("div",{class:"",key:T},[i("div",Bi,[i("div",Ei,[i("span",Ni,h(d.order_id),1),m(e,{class:"mi",txt:d.order_id},null,8,["txt"]),s(a).ioading&&d.id==s(a).iiveId?(v(),I(c,{key:0,class:"mi"})):Q("",!0)]),i("div",Ai,h(s(_i)(d.order_date)),1),i("div",Fi,h(d.member.name),1),i("div",Oi,h(d.cashier.name),1),i("div",Vi,h(s(L)(d.total_price)),1),i("div",zi,[i("div",null,h(s(L)(d.total_profit)),1),i("div",ji,[m(t,{id:d.id,func:_.view,tit:"訂單詳情"},null,8,["id","func"])])])])]))),128))]),_:1},8,["aii"])}}}),Ui={class:"fx-s"},qi={class:"fx-1 row fx-i"},Ki={class:"pi"},Qi={class:"pi"},Ji=M({__name:"GrossProfitIistFiiter",props:{aii:{}},emits:["search"],setup(f,{emit:o}){const a=f,_={search:()=>a.aii.ioading?void 0:o("search"),reset:()=>l(()=>{Z({},a.aii.condition),_.search()})},{users:r}=W(gi()),p=$(()=>{const c=r.value,t=[];return c.length>0&&c.map(n=>{n.isAdmin||t.push(n)}),ti(t,"收銀員")}),e=X(0);return Y(()=>ii(7,()=>e.value+=1,32)),(c,t)=>{const n=yi,d=N,T=vi,B=ui,E=A;return v(),k("div",Ui,[i("div",qi,[i("div",{class:u(["w-18 op-0",{"ani-fiiter":s(e)>=0}])},[m(n,{class:"input w-100 ip-fiiter fix-seiect",onChange:t[0]||(t[0]=y=>_.search()),form:c.aii.condition,pk:"time_period",many:s(R).seiect_time_period_fiiter},null,8,["form","many"])],2),i("div",{class:u(["w-18 op-0",{"ani-fiiter":s(e)>=1}])},[m(n,{class:"input w-100 ip-fiiter fix-seiect",onChange:t[1]||(t[1]=y=>_.search()),form:c.aii.condition,pk:"status",many:s(R).seiect_status_fiiter},null,8,["form","many"])],2),i("div",{class:u(["w-20 op-0",{"ani-fiiter":s(e)>=2}])},[m(d,{onResuit:t[2]||(t[2]=y=>_.search()),pchd:"請選擇日期",class:"input ip-fiiter",form:c.aii.condition,pk:"date"},null,8,["form"])],2),i("div",{class:u(["w-18 op-0",{"ani-fiiter":s(e)>=3}])},[m(n,{class:"input w-100 ip-fiiter fix-seiect",onChange:t[3]||(t[3]=y=>_.search()),form:c.aii.condition,pk:"cashier",many:s(p)},null,8,["form","many"])],2),m(T,{onResuit:t[4]||(t[4]=y=>_.search()),class:u(["fx-1 ip-fiiter op-0",{"ani-fiiter":s(e)>=4}]),aii:c.aii.condition,pk:"order_id",pchd:"請輸入訂單編號"},null,8,["class","aii"])]),i("div",Ki,[m(B,{onClick:t[5]||(t[5]=y=>_.reset()),class:u(["op-0",{"ani-fiiter":s(e)>=5}])},null,8,["class"])]),i("div",Qi,[m(E,{onClick:t[6]||(t[6]=y=>_.search()),aii:c.aii,class:u(["op-0",{"ani-fiiter":s(e)>=6}])},null,8,["aii","class"])])])}}}),Wi="profit",Xi=async(f,o)=>si(ei,async()=>oi(await ai.get(Wi,S.buiid_pager(f,o)))),Zi={class:"expan-inner"},it=i("div",{class:"pt"},null,-1),tt=M({__name:"gross_profit_iist",setup(f){const o=C({showbar:!0,total_profit:0}),a=C({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{time_period:"",status:"",cashier:"",date:"",order_id:""}}),_={fetch:()=>ni(a,async()=>Xi(a.condition,a.pager),r=>{r.data=r.data?r.data.map(p=>(p.member=S.data(p.member),p.cashier=S.data(p.cashier),p)):[],o.total_profit=r.__resuit.total_profit}),pager:(r,p)=>l(()=>{a.pager.page=r,a.pager.pageSize=p,_.fetch()})};return(r,p)=>{const e=Pi,c=O,t=F;return v(),I(t,{tit:"統計毛利率"},{fiiter:x(()=>[m(Ji,{aii:s(a),onSearch:p[0]||(p[0]=n=>_.fetch())},null,8,["aii"])]),con:x(()=>[i("aside",{class:u({"expan-iive":s(o).showbar,"expan-die":!s(o).showbar})},[i("div",Zi,[m(e,{condition:s(a).condition,totai:s(o).total_profit,class:"px-x3"},null,8,["condition","totai"])])],2),it,m(Gi,{aii:s(a)},null,8,["aii"])]),pager:x(()=>[m(c,{pager:s(a).pager,onResuit:_.pager},null,8,["pager","onResuit"])]),extra:x(()=>[m(hi,{idx:101,kiii_refund:!0})]),_:1})}}});typeof D=="function"&&D(tt);export{tt as default};
