import{_ as R}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-8d9268b0.js";import{t as rs,c as _s,d as cs}from"./product_trs-8ad3032b.js";import{d as $,o as _,c,t as h,am as D,n as I,z as A,y as M,w as m,F as T,A as P,a as e,i as p,b as a,H as W,P as E,k as C,S as ls,q as K,v as L,x as J,g as x,an as j,r as Q,a6 as X,h as b,ae as g,B as V,C as q,al as Y,s as Z,T as us,e as O,a7 as ps,R as ss,N as ds,$ as G,a0 as ms,D as U,p as fs,U as hs}from"./index-4cfd176e.js";import{g as z}from"./giobaiPina-89a9d613.js";import{_ as vs}from"./OTrPure.vue_vue_type_script_setup_true_lang-7af8e379.js";import{m as ks,v as $s,a as S,e as is,c as ys,f as ws,g as bs}from"./view-14b7197e.js";import{pageProductInstockPina as gs}from"./pageProductInstockPina-3cf32c1a.js";import{E as ts}from"./errors_product-d5275ad5.js";import{_ as Cs}from"./BtnTab.vue_vue_type_script_setup_true_lang-29ef5471.js";import{_ as xs}from"./IayoutForm.vue_vue_type_script_setup_true_lang-495fcff1.js";import{pageProducEditPina as os}from"./pageProducEditPina-d102beca.js";import{_ as es}from"./OInput.vue_vue_type_script_setup_true_lang-7781c39a.js";import{_ as Ts}from"./CoSuppiierSeiectPure.vue_vue_type_script_setup_true_lang-333afe0a.js";import{_ as Ps}from"./Dropdown.vue_vue_type_script_setup_true_lang-ef17b606.js";import{_ as Vs}from"./OInputI.vue_vue_type_script_setup_true_lang-eb1d089d.js";import{_ as qs}from"./OTime.vue_vue_type_script_setup_true_lang-68999102.js";import{_ as Is}from"./OModTrash.vue_vue_type_script_setup_true_lang-f3217c06.js";import{_ as Ns}from"./BtnIcon.vue_vue_type_script_setup_true_lang-4461ee34.js";import{_ as Bs,a as Es}from"./CoWarehouseSeiectPure.vue_vue_type_script_setup_true_lang-352bb87e.js";import{_ as Us}from"./OTabieTrash-4a3bb716.js";import{_ as Ss}from"./OTabieEdit.vue_vue_type_script_setup_true_lang-58fa07e6.js";const Os={class:"d-ib hand txt-pri ani-scaie-aii-x2 fs-n ani-softer"},F=$({__name:"OTabieOpera",props:{tit:{}},setup(l){return(s,r)=>(_(),c("div",Os,h(s.tit),1))}}),N=z().seiect_iabeis,Rs=D(N),Ds=[{txt:"標籤",v:"",ciass:"o-fiiter-reset"},...N],ns=z().seiect_supiiers,As=D(ns),Ms=[{txt:"供應商",v:"",ciass:"o-fiiter-reset"},...N],zs={seiect_tag:N,seiect_tag_def:Rs,seiect_tag_fiiter:Ds,seiect_supplier:ns,seiect_supplier_def:As,seiect_supplier_fiiter:Ms,comput_store_quantity:(l,s=0)=>((l.variation?l.variation:[]).map(o=>{s+=o.quantity?o.quantity:0}),s)},Fs={class:"w-20"},Hs={class:"w-20"},js={class:"fx-1 fx-s"},Gs={class:"d-ib pr"},Ws={key:0,class:"fx-r"},Ks={key:1},ft=$({__name:"CoPidWarehouseTabie",props:{aii:{},one_of_edit:{},kiii_option:{type:Boolean}},emits:["view","transtock"],setup(l){const s=l;return I(()=>A(s.aii,rs)),(r,o)=>{const i=F,t=R;return _(),M(t,{aii:r.aii,mini:!0},{default:m(()=>[(_(!0),c(T,null,P(r.one_of_edit.storehouse_info,(n,d)=>(_(),c("div",{class:"td",key:d},[e("div",Fs,h(n.storehouse_name),1),e("div",Hs,h(p(zs).comput_store_quantity(n)),1),e("div",js,[e("div",Gs,h(n.storehouse_address),1),r.kiii_option?(_(),c("div",Ks)):(_(),c("div",Ws,[a(i,{onClick:f=>r.$emit("view",n),tit:"庫存詳情"},null,8,["onClick"]),a(i,{class:"pi-s",onClick:f=>r.$emit("transtock",n),tit:"調貨"},null,8,["onClick"])]))])]))),128))]),_:1},8,["aii"])}}}),Ls=e("div",{class:"py-row"},null,-1),Js={class:"tabie tabie-def"},Qs={class:"td"},Xs={class:"w-100"},ht=$({__name:"CoPidTotaiTabie",props:{one_of_edit:{}},setup(l){return(s,r)=>{const o=vs;return _(),c("div",null,[Ls,e("div",Js,[a(o,{trs:p(_s)},null,8,["trs"]),e("div",Qs,[e("div",Xs,h(p(ks)(s.one_of_edit.total_broken_products))+"  HKD ",1)])])])}}}),Ys={class:"w-28 pr"},Zs={class:"w-13"},si={class:"w-14"},ii={class:"w-12"},ti={class:"w-12"},oi={class:"fx-1 fx-s"},ei={key:0,class:"pi-s"},ni={key:1},ai=$({__name:"CoPidInstockTabie",props:{many:{},aii:{},kiii_option:{type:Boolean}},emits:["view"],setup(l){return(s,r)=>{const o=F,i=R;return _(),M(i,{aii:s.aii,mini:!0},{default:m(()=>[(_(!0),c(T,null,P(s.many,(t,n)=>(_(),c("div",{class:"td",key:n},[e("div",Ys,h(p($s)(t.restock_date)),1),e("div",Zs,h(p(S)(t.restock_price)),1),e("div",si,h(p(S)(t.lowest_price)),1),e("div",ii,h(p(S)(t.selling_price)),1),e("div",ti,h(t.quantity),1),e("div",oi,[e("div",null,h(t.supplier.name),1),s.kiii_option?(_(),c("span",ni)):(_(),c("div",ei,[a(o,{onClick:d=>s.$emit("view",t),tit:"檢視"},null,8,["onClick"])]))])]))),128))]),_:1},8,["aii"])}}}),vt=$({__name:"ProduInstockTabie",props:{aii:{},one_of_edit:{},kiii_option:{type:Boolean}},setup(l){const s=l,r=W(()=>{const i=s.one_of_edit.restocks;return i?(i.map(t=>(t.supplier=t.supplier?E.data(t.supplier):{},t)),i):[]});I(()=>A(s.aii,cs));const o={instock:()=>C(()=>{}),view:i=>C(()=>{let t=i.restock_distribute;t=t||[],t.map(n=>(n.variation&&n.variation.data&&(n.variation=E.data(n.variation).id),n.storehouse&&n.storehouse.data&&(n.storehouse=E.data(n.storehouse).id),n)),gs().save("inventory_and_variation_of_view",t),ls(112)})};return(i,t)=>{const n=ai;return _(),c("div",null,[a(n,{onView:o.view,aii:i.aii,many:p(r),kiii_option:i.kiii_option},null,8,["onView","aii","many","kiii_option"])])}}}),ri="instock",_i="transfstock",kt=async l=>K(ts,async()=>L(await J.pos(ri,l))),$t=async(l,s)=>K(ts,async()=>L(await J.put(_i,s,l+""))),ci={class:"o-hour-minus ps-r bg-con zi-x3"},li=e("div",{class:"fx-s abs-t i-0 r-0 bg-con"},[e("div",{class:"w-382 pi pb-x1 sus"},"時"),e("div",{class:"w-618 pi pb-x1 sus"},"分")],-1),ui={class:"fx-s fx-t"},pi={class:"o-hours w-382 pt-s"},di=e("button",null,"0",-1),mi=["onClick"],fi={class:"o-minus w-618 pt-s"},hi=e("button",null,"0",-1),vi=["onClick"],ki=$({__name:"OHours",props:{form:{},pk_hours:{},pk_minus:{}},setup(l){const s=l,r=x({hours:j(24),minus:j(60)}),o={v_minus:()=>s.form[s.pk_minus],v_hour:()=>s.form[s.pk_hours],v:()=>o.v_hour()+":"+o.v_minus(),setv_minus:i=>{s.form[s.pk_minus]=i},setv_hour:i=>{s.form[s.pk_hours]=i}};return(i,t)=>{const n=Ps;return _(),M(n,null,{sign:m(()=>[Q(i.$slots,"default")]),con:m(()=>[e("div",ci,[li,e("div",ui,[e("div",pi,[di,(_(!0),c(T,null,P(p(r).hours,(d,f)=>(_(),c("div",{class:"pi br br-i-0 fx-aii-weak ani-scaie-fcs hand",onClick:u=>o.setv_hour(d),key:f},h(d),9,mi))),128))]),e("div",fi,[hi,(_(!0),c(T,null,P(p(r).minus,(d,f)=>(_(),c("div",{class:"py-t pi br br-r-0 fx-aii-weak ani-scaie-fcs hand",onClick:u=>o.setv_minus(d),key:f},h(d),9,vi))),128))])])])]),_:3})}}}),$i={class:"row"},yi={class:"w-333"},wi={class:"w-333"},bi=["value"],gi={class:"w-333"},Ci=e("div",{class:"py-s"},null,-1),xi=$({__name:"PiisBase",props:{form:{},aii:{}},setup(l){const s=l,r=["restock_date","hour"],o=x(X(s.form));return b(()=>s.aii.sign,()=>{r.map(i=>{if(g(o,i,s.form[i],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),b(()=>s.form.restock_date,i=>g(o,"restock_date",i,s.aii)),b(()=>s.form.hour,i=>g(o,"hour",i,s.aii)),(i,t)=>{const n=qs,d=Vs,f=ki,u=Ts,v=es;return _(),c("div",null,[e("div",$i,[e("div",yi,[a(d,{icon:"date",err:p(o).restock_date,tit:"入貨日期"},{default:m(()=>[a(n,{form:i.form,pk:"restock_date"},null,8,["form"])]),_:1},8,["err"])]),e("div",wi,[a(d,{icon:"time",err:p(o).hour,tit:"入貨時間"},{default:m(()=>[a(f,{form:i.form,pk_hours:"hour",pk_minus:"minus"},{default:m(()=>[e("input",{value:p(is)(i.form.hour,i.form.minus)},null,8,bi)]),_:1},8,["form"])]),_:1},8,["err"])]),e("div",gi,[a(v,{err:p(o).supplier,tit:"供應商"},{default:m(()=>[a(u,{kiii_color:!0,tit_def:"(可以不選擇)",form:i.form,pk:"supplier"},null,8,["form"])]),_:1},8,["err"])])]),Ci])}}}),Ti={class:"row"},Pi={class:"w-333"},Vi={class:"w-333"},qi={class:"w-333"},Ii=$({__name:"PiisPrice",props:{form:{},aii:{}},setup(l){const s=l,r=["restock_price","lowest_price","selling_price"],o=x(X(s.form));return b(()=>s.aii.sign,()=>{r.map(i=>{if(g(o,i,s.form[i],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),b(()=>s.form.restock_price,i=>g(o,"restock_price",i,s.aii)),b(()=>s.form.lowest_price,i=>g(o,"lowest_price",i,s.aii)),b(()=>s.form.selling_price,i=>g(o,"selling_price",i,s.aii)),(i,t)=>{const n=es;return _(),c("div",Ti,[e("div",Pi,[a(n,{err:p(o).restock_price,tit:"入貨價錢"},{default:m(()=>[V(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=d=>i.form.restock_price=d),placeholder:"請輸入"},null,512),[[q,i.form.restock_price]])]),_:1},8,["err"])]),e("div",Vi,[a(n,{err:p(o).lowest_price,tit:"最低價錢"},{default:m(()=>[V(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=d=>i.form.lowest_price=d),placeholder:"請輸入"},null,512),[[q,i.form.lowest_price]])]),_:1},8,["err"])]),e("div",qi,[a(n,{err:p(o).selling_price,tit:"售價"},{default:m(()=>[V(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=d=>i.form.selling_price=d),placeholder:"請輸入"},null,512),[[q,i.form.selling_price]])]),_:1},8,["err"])])])}}}),Ni=$({__name:"CoWarehouseText",props:{v:{}},setup(l){const s=l,r=()=>{const o=Y(s.v,z().warehouses,"id");return o.id?o.name+"  (負責人: "+o.contact_person+")":"未選擇倉庫"};return(o,i)=>(_(),c("div",null,h(r()),1))}}),Bi=$({__name:"CoVariationsText",props:{v:{},many:{}},setup(l){const s=l,r=()=>{const o=Y(s.v,s.many,"id");return o.id?o.name:"未選擇倉庫"};return(o,i)=>(_(),c("div",null,h(r()),1))}}),Ei={key:0,class:"td"},Ui={class:"fx-1 fx-s"},Si={key:0,class:"fx-r"},Oi={key:1,class:"td"},Ri={class:"w-30"},Di=["onUpdate:modelValue"],Ai=["value"],Mi={class:"w-30"},zi={class:"fx-1 fx-s"},Fi=["onUpdate:modelValue"],Hi={class:"pi fx-r"},ji=$({__name:"PsiTd",props:{aii:{},funn:{},kiii_option:{type:Boolean}},setup(l){const s=l,{product_variations:r}=Z(os());return r.value.length<=0&&us("該產品無可用標籤！！！"),I(()=>A(s.aii,[{ciass:"w-30",tit:"樣式名稱"},{ciass:"w-30",tit:"入貨位置"},{ciass:"fx-1",tit:"入貨數量"}])),(o,i)=>{const t=Bi,n=Ni,d=Ss,f=Us,u=Bs,v=Es,y=F,B=Ns;return _(!0),c(T,null,P(o.aii.many,(k,H)=>(_(),c("div",{key:H},[k.edit?(_(),c("div",Oi,[e("div",Ri,[a(u,null,{default:m(()=>[V(e("select",{"onUpdate:modelValue":w=>k.variation=w},[(_(!0),c(T,null,P(p(r),(w,as)=>(_(),c("option",{key:as,value:w.id},h(w.name),9,Ai))),128))],8,Di),[[ps,k.variation]])]),_:2},1024)]),e("div",Mi,[a(u,null,{default:m(()=>[a(v,{form:k,pk:"storehouse"},null,8,["form"])]),_:2},1024)]),e("div",zi,[a(u,{class:"fx-1"},{default:m(()=>[V(e("input",{type:"number","onUpdate:modelValue":w=>k.quantity=w,placeholder:"請輸入"},null,8,Fi),[[q,k.quantity]])]),_:2},1024),e("div",Hi,[a(y,{class:"pr",tit:"儲存",onClick:w=>k.edit=!1},null,8,["onClick"]),e("div",null,[a(B,{icon:"x",onClick:w=>o.funn.cancei(k)},null,8,["onClick"])])])])])):(_(),c("div",Ei,[a(t,{class:"w-30",many:p(r),v:k.variation},null,8,["many","v"]),a(n,{class:"w-30",v:k.storehouse},null,8,["v"]),e("div",Ui,[e("div",null,h(k.quantity),1),o.kiii_option?O("",!0):(_(),c("div",Si,[a(d,{onClick:w=>o.funn.edit(k),class:"mr-s txt-pri"},null,8,["onClick"]),a(f,{onClick:w=>o.funn.sureTrash(H)},null,8,["onClick"])]))])]))]))),128)}}}),Gi=$({__name:"PiisStyieInventoryTabie",props:{aii:{}},emits:["sureTrash"],setup(l,{emit:s}){const r=l,o=x({origin:{},trashIdx:0}),i={edit:t=>C(()=>{t.edit=!0,o.origin[t.id+""]=ss(t)}),cancei:t=>C(()=>{const n=o.origin[t.id+""];n?(n.edit=!1,ds(n,t)):t.edit=!1}),sureTrash:t=>C(()=>{o.trashIdx=t,s("sureTrash",t),G(-201)}),trash:()=>ms(r.aii,()=>{r.aii.many.splice(o.trashIdx,1),G(0)})};return(t,n)=>{const d=R,f=Is;return _(),c(T,null,[a(d,{aii:t.aii,mini:!0},{default:m(()=>[a(ji,{aii:t.aii,funn:i},null,8,["aii"])]),_:1},8,["aii"]),a(f,{idx:-201,aii:t.aii,onTrash:i.trash},null,8,["aii","onTrash"])],64)}}}),Wi={key:0,class:"ani-fade-b"},Ki={key:1,class:"abs-b ps-f-imp r-0 w-36 w-50-p py"},yt=$({__name:"ProduInvInStockInner",props:{aii:{},kiii_vars:{type:Boolean}},setup(l,{expose:s}){const r=l,o=x({restock_date:ys(),hour:ws(),minus:bs(),supplier:""}),i=x({restock_price:"",lowest_price:"",selling_price:""}),t=x({msg:"",many:[],trashIdx:0,pager:{},ioading:!1,trs:[],ani:0}),{one_of_edit:n}=Z(os()),d=W(()=>{const u=n.value;return u.variations?u.variations:[]}),f={buiid:()=>{const u={...o,...i,restock_distribute:f.fiiter()};return u.restock_date=o.restock_date+" "+is(o.hour,o.minus,!0),u.product=n.value?n.value.product_id:"",r.aii.can&&u.restock_distribute.length<=0?(fs("您沒有添加任何樣式的庫存數據!!!",r.aii),null):r.aii.can?u:null},fiiter:(u=[])=>(t.many.map(v=>{let y=!0;v.storehouse&&v.quantity?v.edit=!1:y=!1,y&&u.push(v)}),u),pius:()=>C(()=>{f.fiiter().length==t.many.length&&t.many.push(f.GEN_ONE())}),setv:(u,v,y)=>C(()=>{i.restock_price=u,i.lowest_price=v,i.selling_price=y}),GEN_ONE:()=>ss({idx:t.many.length,variation:D(d.value,"id"),storehouse:0,quantity:null,edit:!0,ioading:!1})};return s(f),I(()=>hs(4,()=>t.ani+=1)),(u,v)=>{const y=xs,B=Cs;return _(),c("div",null,[a(y,{tit:"時間及供應商",class:U(["pb-x3 op-0",{"ani-page":p(t).ani>=0}])},{default:m(()=>[a(xi,{form:p(o),aii:u.aii},null,8,["form","aii"])]),_:1},8,["class"]),a(y,{tit:"價錢",class:U(["pt pb-x3 op-0",{"ani-page":p(t).ani>=1}])},{default:m(()=>[a(Ii,{form:p(i),aii:u.aii},null,8,["form","aii"])]),_:1},8,["class"]),u.kiii_vars?O("",!0):(_(),c("div",Wi,[a(y,{tit:"樣式及庫存分配數量",class:U(["pt-x2 pb-x3 op-0",{"ani-page":p(t).ani>=2}])},{default:m(()=>[a(Gi,{aii:p(t)},null,8,["aii"])]),_:1},8,["class"]),e("div",null,[a(B,{onClick:v[0]||(v[0]=k=>f.pius()),class:"w-100 py-s ani-scaie-aii",tit:"添加樣式"})])])),p(t).ani>=3?(_(),c("section",Ki,[Q(u.$slots,"default")])):O("",!0)])}}});export{F as _,vt as a,ht as b,ft as c,yt as d,ji as e,$t as f,kt as s};
